const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-C-AMy6xk.js","./useTheme-DnhmQTKR.js","./_commonjsHelpers-BosuxZz1.js","./defaultTheme-D3EcEu2G.js","./ConfigCustomBackItUpSet__loadShare__react__loadShare__-Tf1XiuWn.js","./ConfigCustomBackItUpSet__mf_v__runtimeInit__mf_v__-Cy0TQlfU.js","./ConfigCustomBackItUpSet__loadShare___mf_0_emotion_mf_1_react__loadShare__-DC57Se_W.js"])))=>i.map(i=>d[i]);
import{C as dt,R as k}from"./ConfigCustomBackItUpSet__loadShare__react__loadShare__-Tf1XiuWn.js";import{a as Zr,c as He,g as qr}from"./_commonjsHelpers-BosuxZz1.js";import{C as X,a as O,I as es}from"./ConfigCustomBackItUpSet__loadShare___mf_0_mui_mf_1_icons_mf_2_material__loadShare__-D2gYYX4s.js";import{C as j,A as ts}from"./ConfigCustomBackItUpSet__loadShare___mf_0_iobroker_mf_1_adapter_mf_2_react_mf_2_v5__loadShare__-BQ7KWo4M.js";import{R as ns,F as is}from"./FilledInput-D7q1pw-R.js";import{b as rs}from"./defaultTheme-D3EcEu2G.js";import{C as ss,D as Wi}from"./index-BS2yLvxR.js";import{i as dn,C as os}from"./ConfigCustomBackItUpSet__mf_v__runtimeInit__mf_v__-Cy0TQlfU.js";import{p as Vn}from"./useTheme-DnhmQTKR.js";import{_ as as}from"./preload-helper-C1FmrZbK.js";import"./DefaultPropsProvider-C31vjdiA.js";import"./emotion-serialize.esm-BUa21YfQ.js";import"./ConfigCustomBackItUpSet__loadShare___mf_0_emotion_mf_1_react__loadShare__-DC57Se_W.js";import"./jsx-runtime-bVLyH9Km.js";const ls=Object.freeze(Object.defineProperty({__proto__:null,get ConfigGeneric(){return G},get ConfigPanel(){return $t},get JsonConfig(){return kl},get JsonConfigComponent(){return hn}},Symbol.toStringTag,{value:"Module"}));var us=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,cs=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,hs=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,Tn={Space_Separator:us,ID_Start:cs,ID_Continue:hs},ke={isSpaceSeparator(L){return typeof L=="string"&&Tn.Space_Separator.test(L)},isIdStartChar(L){return typeof L=="string"&&(L>="a"&&L<="z"||L>="A"&&L<="Z"||L==="$"||L==="_"||Tn.ID_Start.test(L))},isIdContinueChar(L){return typeof L=="string"&&(L>="a"&&L<="z"||L>="A"&&L<="Z"||L>="0"&&L<="9"||L==="$"||L==="_"||L==="‌"||L==="‍"||Tn.ID_Continue.test(L))},isDigit(L){return typeof L=="string"&&/[0-9]/.test(L)},isHexDigit(L){return typeof L=="string"&&/[0-9A-Fa-f]/.test(L)}};let Wn,Be,it,pn,pt,Ye,Ie,Gn,Ut;var ds=function(i,n){Wn=String(i),Be="start",it=[],pn=0,pt=1,Ye=0,Ie=void 0,Gn=void 0,Ut=void 0;do Ie=ps(),ms[Be]();while(Ie.type!=="eof");return typeof n=="function"?Hn({"":Ut},"",n):Ut};function Hn(L,i,n){const u=L[i];if(u!=null&&typeof u=="object")if(Array.isArray(u))for(let y=0;y<u.length;y++){const s=String(y),c=Hn(u,s,n);c===void 0?delete u[s]:Object.defineProperty(u,s,{value:c,writable:!0,enumerable:!0,configurable:!0})}else for(const y in u){const s=Hn(u,y,n);s===void 0?delete u[y]:Object.defineProperty(u,y,{value:s,writable:!0,enumerable:!0,configurable:!0})}return n.call(L,i,u)}let de,ue,jt,nt,ge;function ps(){for(de="default",ue="",jt=!1,nt=1;;){ge=rt();const L=Hi[de]();if(L)return L}}function rt(){if(Wn[pn])return String.fromCodePoint(Wn.codePointAt(pn))}function Z(){const L=rt();return L===`
`?(pt++,Ye=0):L?Ye+=L.length:Ye++,L&&(pn+=L.length),L}const Hi={default(){switch(ge){case"	":case"\v":case"\f":case" ":case" ":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":Z();return;case"/":Z(),de="comment";return;case void 0:return Z(),De("eof")}if(ke.isSpaceSeparator(ge)){Z();return}return Hi[Be]()},comment(){switch(ge){case"*":Z(),de="multiLineComment";return;case"/":Z(),de="singleLineComment";return}throw Se(Z())},multiLineComment(){switch(ge){case"*":Z(),de="multiLineCommentAsterisk";return;case void 0:throw Se(Z())}Z()},multiLineCommentAsterisk(){switch(ge){case"*":Z();return;case"/":Z(),de="default";return;case void 0:throw Se(Z())}Z(),de="multiLineComment"},singleLineComment(){switch(ge){case`
`:case"\r":case"\u2028":case"\u2029":Z(),de="default";return;case void 0:return Z(),De("eof")}Z()},value(){switch(ge){case"{":case"[":return De("punctuator",Z());case"n":return Z(),wt("ull"),De("null",null);case"t":return Z(),wt("rue"),De("boolean",!0);case"f":return Z(),wt("alse"),De("boolean",!1);case"-":case"+":Z()==="-"&&(nt=-1),de="sign";return;case".":ue=Z(),de="decimalPointLeading";return;case"0":ue=Z(),de="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":ue=Z(),de="decimalInteger";return;case"I":return Z(),wt("nfinity"),De("numeric",1/0);case"N":return Z(),wt("aN"),De("numeric",NaN);case'"':case"'":jt=Z()==='"',ue="",de="string";return}throw Se(Z())},identifierNameStartEscape(){if(ge!=="u")throw Se(Z());Z();const L=zn();switch(L){case"$":case"_":break;default:if(!ke.isIdStartChar(L))throw ci();break}ue+=L,de="identifierName"},identifierName(){switch(ge){case"$":case"_":case"‌":case"‍":ue+=Z();return;case"\\":Z(),de="identifierNameEscape";return}if(ke.isIdContinueChar(ge)){ue+=Z();return}return De("identifier",ue)},identifierNameEscape(){if(ge!=="u")throw Se(Z());Z();const L=zn();switch(L){case"$":case"_":case"‌":case"‍":break;default:if(!ke.isIdContinueChar(L))throw ci();break}ue+=L,de="identifierName"},sign(){switch(ge){case".":ue=Z(),de="decimalPointLeading";return;case"0":ue=Z(),de="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":ue=Z(),de="decimalInteger";return;case"I":return Z(),wt("nfinity"),De("numeric",nt*(1/0));case"N":return Z(),wt("aN"),De("numeric",NaN)}throw Se(Z())},zero(){switch(ge){case".":ue+=Z(),de="decimalPoint";return;case"e":case"E":ue+=Z(),de="decimalExponent";return;case"x":case"X":ue+=Z(),de="hexadecimal";return}return De("numeric",nt*0)},decimalInteger(){switch(ge){case".":ue+=Z(),de="decimalPoint";return;case"e":case"E":ue+=Z(),de="decimalExponent";return}if(ke.isDigit(ge)){ue+=Z();return}return De("numeric",nt*Number(ue))},decimalPointLeading(){if(ke.isDigit(ge)){ue+=Z(),de="decimalFraction";return}throw Se(Z())},decimalPoint(){switch(ge){case"e":case"E":ue+=Z(),de="decimalExponent";return}if(ke.isDigit(ge)){ue+=Z(),de="decimalFraction";return}return De("numeric",nt*Number(ue))},decimalFraction(){switch(ge){case"e":case"E":ue+=Z(),de="decimalExponent";return}if(ke.isDigit(ge)){ue+=Z();return}return De("numeric",nt*Number(ue))},decimalExponent(){switch(ge){case"+":case"-":ue+=Z(),de="decimalExponentSign";return}if(ke.isDigit(ge)){ue+=Z(),de="decimalExponentInteger";return}throw Se(Z())},decimalExponentSign(){if(ke.isDigit(ge)){ue+=Z(),de="decimalExponentInteger";return}throw Se(Z())},decimalExponentInteger(){if(ke.isDigit(ge)){ue+=Z();return}return De("numeric",nt*Number(ue))},hexadecimal(){if(ke.isHexDigit(ge)){ue+=Z(),de="hexadecimalInteger";return}throw Se(Z())},hexadecimalInteger(){if(ke.isHexDigit(ge)){ue+=Z();return}return De("numeric",nt*Number(ue))},string(){switch(ge){case"\\":Z(),ue+=fs();return;case'"':if(jt)return Z(),De("string",ue);ue+=Z();return;case"'":if(!jt)return Z(),De("string",ue);ue+=Z();return;case`
`:case"\r":throw Se(Z());case"\u2028":case"\u2029":vs(ge);break;case void 0:throw Se(Z())}ue+=Z()},start(){switch(ge){case"{":case"[":return De("punctuator",Z())}de="value"},beforePropertyName(){switch(ge){case"$":case"_":ue=Z(),de="identifierName";return;case"\\":Z(),de="identifierNameStartEscape";return;case"}":return De("punctuator",Z());case'"':case"'":jt=Z()==='"',de="string";return}if(ke.isIdStartChar(ge)){ue+=Z(),de="identifierName";return}throw Se(Z())},afterPropertyName(){if(ge===":")return De("punctuator",Z());throw Se(Z())},beforePropertyValue(){de="value"},afterPropertyValue(){switch(ge){case",":case"}":return De("punctuator",Z())}throw Se(Z())},beforeArrayValue(){if(ge==="]")return De("punctuator",Z());de="value"},afterArrayValue(){switch(ge){case",":case"]":return De("punctuator",Z())}throw Se(Z())},end(){throw Se(Z())}};function De(L,i){return{type:L,value:i,line:pt,column:Ye}}function wt(L){for(const i of L){if(rt()!==i)throw Se(Z());Z()}}function fs(){switch(rt()){case"b":return Z(),"\b";case"f":return Z(),"\f";case"n":return Z(),`
`;case"r":return Z(),"\r";case"t":return Z(),"	";case"v":return Z(),"\v";case"0":if(Z(),ke.isDigit(rt()))throw Se(Z());return"\0";case"x":return Z(),gs();case"u":return Z(),zn();case`
`:case"\u2028":case"\u2029":return Z(),"";case"\r":return Z(),rt()===`
`&&Z(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw Se(Z());case void 0:throw Se(Z())}return Z()}function gs(){let L="",i=rt();if(!ke.isHexDigit(i)||(L+=Z(),i=rt(),!ke.isHexDigit(i)))throw Se(Z());return L+=Z(),String.fromCodePoint(parseInt(L,16))}function zn(){let L="",i=4;for(;i-- >0;){const n=rt();if(!ke.isHexDigit(n))throw Se(Z());L+=Z()}return String.fromCodePoint(parseInt(L,16))}const ms={start(){if(Ie.type==="eof")throw Ct();_n()},beforePropertyName(){switch(Ie.type){case"identifier":case"string":Gn=Ie.value,Be="afterPropertyName";return;case"punctuator":nn();return;case"eof":throw Ct()}},afterPropertyName(){if(Ie.type==="eof")throw Ct();Be="beforePropertyValue"},beforePropertyValue(){if(Ie.type==="eof")throw Ct();_n()},beforeArrayValue(){if(Ie.type==="eof")throw Ct();if(Ie.type==="punctuator"&&Ie.value==="]"){nn();return}_n()},afterPropertyValue(){if(Ie.type==="eof")throw Ct();switch(Ie.value){case",":Be="beforePropertyName";return;case"}":nn()}},afterArrayValue(){if(Ie.type==="eof")throw Ct();switch(Ie.value){case",":Be="beforeArrayValue";return;case"]":nn()}},end(){}};function _n(){let L;switch(Ie.type){case"punctuator":switch(Ie.value){case"{":L={};break;case"[":L=[];break}break;case"null":case"boolean":case"numeric":case"string":L=Ie.value;break}if(Ut===void 0)Ut=L;else{const i=it[it.length-1];Array.isArray(i)?i.push(L):Object.defineProperty(i,Gn,{value:L,writable:!0,enumerable:!0,configurable:!0})}if(L!==null&&typeof L=="object")it.push(L),Array.isArray(L)?Be="beforeArrayValue":Be="beforePropertyName";else{const i=it[it.length-1];i==null?Be="end":Array.isArray(i)?Be="afterArrayValue":Be="afterPropertyValue"}}function nn(){it.pop();const L=it[it.length-1];L==null?Be="end":Array.isArray(L)?Be="afterArrayValue":Be="afterPropertyValue"}function Se(L){return fn(L===void 0?`JSON5: invalid end of input at ${pt}:${Ye}`:`JSON5: invalid character '${zi(L)}' at ${pt}:${Ye}`)}function Ct(){return fn(`JSON5: invalid end of input at ${pt}:${Ye}`)}function ci(){return Ye-=5,fn(`JSON5: invalid identifier character at ${pt}:${Ye}`)}function vs(L){console.warn(`JSON5: '${zi(L)}' in strings is not valid ECMAScript; consider escaping`)}function zi(L){const i={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(i[L])return i[L];if(L<" "){const n=L.charCodeAt(0).toString(16);return"\\x"+("00"+n).substring(n.length)}return L}function fn(L){const i=new SyntaxError(L);return i.lineNumber=pt,i.columnNumber=Ye,i}var ys=function(i,n,u){const y=[];let s="",c,p,o="",d;if(n!=null&&typeof n=="object"&&!Array.isArray(n)&&(u=n.space,d=n.quote,n=n.replacer),typeof n=="function")p=n;else if(Array.isArray(n)){c=[];for(const h of n){let f;typeof h=="string"?f=h:(typeof h=="number"||h instanceof String||h instanceof Number)&&(f=String(h)),f!==void 0&&c.indexOf(f)<0&&c.push(f)}}return u instanceof Number?u=Number(u):u instanceof String&&(u=String(u)),typeof u=="number"?u>0&&(u=Math.min(10,Math.floor(u)),o="          ".substr(0,u)):typeof u=="string"&&(o=u.substr(0,10)),e("",{"":i});function e(h,f){let v=f[h];switch(v!=null&&(typeof v.toJSON5=="function"?v=v.toJSON5(h):typeof v.toJSON=="function"&&(v=v.toJSON(h))),p&&(v=p.call(f,h,v)),v instanceof Number?v=Number(v):v instanceof String?v=String(v):v instanceof Boolean&&(v=v.valueOf()),v){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof v=="string")return t(v);if(typeof v=="number")return String(v);if(typeof v=="object")return Array.isArray(v)?a(v):r(v)}function t(h){const f={"'":.1,'"':.2},v={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};let b="";for(let D=0;D<h.length;D++){const E=h[D];switch(E){case"'":case'"':f[E]++,b+=E;continue;case"\0":if(ke.isDigit(h[D+1])){b+="\\x00";continue}}if(v[E]){b+=v[E];continue}if(E<" "){let g=E.charCodeAt(0).toString(16);b+="\\x"+("00"+g).substring(g.length);continue}b+=E}const A=d||Object.keys(f).reduce((D,E)=>f[D]<f[E]?D:E);return b=b.replace(new RegExp(A,"g"),v[A]),A+b+A}function r(h){if(y.indexOf(h)>=0)throw TypeError("Converting circular structure to JSON5");y.push(h);let f=s;s=s+o;let v=c||Object.keys(h),b=[];for(const D of v){const E=e(D,h);if(E!==void 0){let g=l(D)+":";o!==""&&(g+=" "),g+=E,b.push(g)}}let A;if(b.length===0)A="{}";else{let D;if(o==="")D=b.join(","),A="{"+D+"}";else{let E=`,
`+s;D=b.join(E),A=`{
`+s+D+`,
`+f+"}"}}return y.pop(),s=f,A}function l(h){if(h.length===0)return t(h);const f=String.fromCodePoint(h.codePointAt(0));if(!ke.isIdStartChar(f))return t(h);for(let v=f.length;v<h.length;v++)if(!ke.isIdContinueChar(String.fromCodePoint(h.codePointAt(v))))return t(h);return h}function a(h){if(y.indexOf(h)>=0)throw TypeError("Converting circular structure to JSON5");y.push(h);let f=s;s=s+o;let v=[];for(let A=0;A<h.length;A++){const D=e(String(A),h);v.push(D!==void 0?D:"null")}let b;if(v.length===0)b="[]";else if(o==="")b="["+v.join(",")+"]";else{let A=`,
`+s,D=v.join(A);b=`[
`+s+D+`,
`+f+"]"}return y.pop(),s=f,b}};const bs={parse:ds,stringify:ys};var ji=bs,Kn={exports:{}};function ws(L){throw new Error('Could not dynamically require "'+L+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var cn={exports:{}};const Cs={},Es=Object.freeze(Object.defineProperty({__proto__:null,default:Cs},Symbol.toStringTag,{value:"Module"})),Ds=Zr(Es);var Ss=cn.exports,hi;function As(){return hi||(hi=1,function(L,i){(function(n,u){L.exports=u()})(Ss,function(){var n=n||function(u,y){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof He<"u"&&He.crypto&&(s=He.crypto),!s&&typeof ws=="function")try{s=Ds}catch{}var c=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},p=Object.create||function(){function b(){}return function(A){var D;return b.prototype=A,D=new b,b.prototype=null,D}}(),o={},d=o.lib={},e=d.Base=function(){return{extend:function(b){var A=p(this);return b&&A.mixIn(b),(!A.hasOwnProperty("init")||this.init===A.init)&&(A.init=function(){A.$super.init.apply(this,arguments)}),A.init.prototype=A,A.$super=this,A},create:function(){var b=this.extend();return b.init.apply(b,arguments),b},init:function(){},mixIn:function(b){for(var A in b)b.hasOwnProperty(A)&&(this[A]=b[A]);b.hasOwnProperty("toString")&&(this.toString=b.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),t=d.WordArray=e.extend({init:function(b,A){b=this.words=b||[],A!=y?this.sigBytes=A:this.sigBytes=b.length*4},toString:function(b){return(b||l).stringify(this)},concat:function(b){var A=this.words,D=b.words,E=this.sigBytes,g=b.sigBytes;if(this.clamp(),E%4)for(var S=0;S<g;S++){var $=D[S>>>2]>>>24-S%4*8&255;A[E+S>>>2]|=$<<24-(E+S)%4*8}else for(var _=0;_<g;_+=4)A[E+_>>>2]=D[_>>>2];return this.sigBytes+=g,this},clamp:function(){var b=this.words,A=this.sigBytes;b[A>>>2]&=4294967295<<32-A%4*8,b.length=u.ceil(A/4)},clone:function(){var b=e.clone.call(this);return b.words=this.words.slice(0),b},random:function(b){for(var A=[],D=0;D<b;D+=4)A.push(c());return new t.init(A,b)}}),r=o.enc={},l=r.Hex={stringify:function(b){for(var A=b.words,D=b.sigBytes,E=[],g=0;g<D;g++){var S=A[g>>>2]>>>24-g%4*8&255;E.push((S>>>4).toString(16)),E.push((S&15).toString(16))}return E.join("")},parse:function(b){for(var A=b.length,D=[],E=0;E<A;E+=2)D[E>>>3]|=parseInt(b.substr(E,2),16)<<24-E%8*4;return new t.init(D,A/2)}},a=r.Latin1={stringify:function(b){for(var A=b.words,D=b.sigBytes,E=[],g=0;g<D;g++){var S=A[g>>>2]>>>24-g%4*8&255;E.push(String.fromCharCode(S))}return E.join("")},parse:function(b){for(var A=b.length,D=[],E=0;E<A;E++)D[E>>>2]|=(b.charCodeAt(E)&255)<<24-E%4*8;return new t.init(D,A)}},h=r.Utf8={stringify:function(b){try{return decodeURIComponent(escape(a.stringify(b)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(b){return a.parse(unescape(encodeURIComponent(b)))}},f=d.BufferedBlockAlgorithm=e.extend({reset:function(){this._data=new t.init,this._nDataBytes=0},_append:function(b){typeof b=="string"&&(b=h.parse(b)),this._data.concat(b),this._nDataBytes+=b.sigBytes},_process:function(b){var A,D=this._data,E=D.words,g=D.sigBytes,S=this.blockSize,$=S*4,_=g/$;b?_=u.ceil(_):_=u.max((_|0)-this._minBufferSize,0);var T=_*S,I=u.min(T*4,g);if(T){for(var w=0;w<T;w+=S)this._doProcessBlock(E,w);A=E.splice(0,T),D.sigBytes-=I}return new t.init(A,I)},clone:function(){var b=e.clone.call(this);return b._data=this._data.clone(),b},_minBufferSize:0});d.Hasher=f.extend({cfg:e.extend(),init:function(b){this.cfg=this.cfg.extend(b),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(b){return this._append(b),this._process(),this},finalize:function(b){b&&this._append(b);var A=this._doFinalize();return A},blockSize:16,_createHelper:function(b){return function(A,D){return new b.init(D).finalize(A)}},_createHmacHelper:function(b){return function(A,D){return new v.HMAC.init(b,D).finalize(A)}}});var v=o.algo={};return o}(Math);return n})}(cn)),cn.exports}var xs=Kn.exports;(function(L,i){(function(n,u){L.exports=u(As())})(xs,function(n){return function(u){var y=n,s=y.lib,c=s.WordArray,p=s.Hasher,o=y.algo,d=[];(function(){for(var h=0;h<64;h++)d[h]=u.abs(u.sin(h+1))*4294967296|0})();var e=o.MD5=p.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(h,f){for(var v=0;v<16;v++){var b=f+v,A=h[b];h[b]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360}var D=this._hash.words,E=h[f+0],g=h[f+1],S=h[f+2],$=h[f+3],_=h[f+4],T=h[f+5],I=h[f+6],w=h[f+7],m=h[f+8],C=h[f+9],x=h[f+10],M=h[f+11],F=h[f+12],R=h[f+13],N=h[f+14],W=h[f+15],B=D[0],U=D[1],P=D[2],z=D[3];B=t(B,U,P,z,E,7,d[0]),z=t(z,B,U,P,g,12,d[1]),P=t(P,z,B,U,S,17,d[2]),U=t(U,P,z,B,$,22,d[3]),B=t(B,U,P,z,_,7,d[4]),z=t(z,B,U,P,T,12,d[5]),P=t(P,z,B,U,I,17,d[6]),U=t(U,P,z,B,w,22,d[7]),B=t(B,U,P,z,m,7,d[8]),z=t(z,B,U,P,C,12,d[9]),P=t(P,z,B,U,x,17,d[10]),U=t(U,P,z,B,M,22,d[11]),B=t(B,U,P,z,F,7,d[12]),z=t(z,B,U,P,R,12,d[13]),P=t(P,z,B,U,N,17,d[14]),U=t(U,P,z,B,W,22,d[15]),B=r(B,U,P,z,g,5,d[16]),z=r(z,B,U,P,I,9,d[17]),P=r(P,z,B,U,M,14,d[18]),U=r(U,P,z,B,E,20,d[19]),B=r(B,U,P,z,T,5,d[20]),z=r(z,B,U,P,x,9,d[21]),P=r(P,z,B,U,W,14,d[22]),U=r(U,P,z,B,_,20,d[23]),B=r(B,U,P,z,C,5,d[24]),z=r(z,B,U,P,N,9,d[25]),P=r(P,z,B,U,$,14,d[26]),U=r(U,P,z,B,m,20,d[27]),B=r(B,U,P,z,R,5,d[28]),z=r(z,B,U,P,S,9,d[29]),P=r(P,z,B,U,w,14,d[30]),U=r(U,P,z,B,F,20,d[31]),B=l(B,U,P,z,T,4,d[32]),z=l(z,B,U,P,m,11,d[33]),P=l(P,z,B,U,M,16,d[34]),U=l(U,P,z,B,N,23,d[35]),B=l(B,U,P,z,g,4,d[36]),z=l(z,B,U,P,_,11,d[37]),P=l(P,z,B,U,w,16,d[38]),U=l(U,P,z,B,x,23,d[39]),B=l(B,U,P,z,R,4,d[40]),z=l(z,B,U,P,E,11,d[41]),P=l(P,z,B,U,$,16,d[42]),U=l(U,P,z,B,I,23,d[43]),B=l(B,U,P,z,C,4,d[44]),z=l(z,B,U,P,F,11,d[45]),P=l(P,z,B,U,W,16,d[46]),U=l(U,P,z,B,S,23,d[47]),B=a(B,U,P,z,E,6,d[48]),z=a(z,B,U,P,w,10,d[49]),P=a(P,z,B,U,N,15,d[50]),U=a(U,P,z,B,T,21,d[51]),B=a(B,U,P,z,F,6,d[52]),z=a(z,B,U,P,$,10,d[53]),P=a(P,z,B,U,x,15,d[54]),U=a(U,P,z,B,g,21,d[55]),B=a(B,U,P,z,m,6,d[56]),z=a(z,B,U,P,W,10,d[57]),P=a(P,z,B,U,I,15,d[58]),U=a(U,P,z,B,R,21,d[59]),B=a(B,U,P,z,_,6,d[60]),z=a(z,B,U,P,M,10,d[61]),P=a(P,z,B,U,S,15,d[62]),U=a(U,P,z,B,C,21,d[63]),D[0]=D[0]+B|0,D[1]=D[1]+U|0,D[2]=D[2]+P|0,D[3]=D[3]+z|0},_doFinalize:function(){var h=this._data,f=h.words,v=this._nDataBytes*8,b=h.sigBytes*8;f[b>>>5]|=128<<24-b%32;var A=u.floor(v/4294967296),D=v;f[(b+64>>>9<<4)+15]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360,f[(b+64>>>9<<4)+14]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,h.sigBytes=(f.length+1)*4,this._process();for(var E=this._hash,g=E.words,S=0;S<4;S++){var $=g[S];g[S]=($<<8|$>>>24)&16711935|($<<24|$>>>8)&4278255360}return E},clone:function(){var h=p.clone.call(this);return h._hash=this._hash.clone(),h}});function t(h,f,v,b,A,D,E){var g=h+(f&v|~f&b)+A+E;return(g<<D|g>>>32-D)+f}function r(h,f,v,b,A,D,E){var g=h+(f&b|v&~b)+A+E;return(g<<D|g>>>32-D)+f}function l(h,f,v,b,A,D,E){var g=h+(f^v^b)+A+E;return(g<<D|g>>>32-D)+f}function a(h,f,v,b,A,D,E){var g=h+(v^(f|~b))+A+E;return(g<<D|g>>>32-D)+f}y.MD5=p._createHelper(e),y.HmacMD5=p._createHmacHelper(e)}(Math),n.MD5})})(Kn);var $s=Kn.exports;const di=qr($s),Ts=window.innerWidth<=600?12:void 0;function kn(L){return Object.prototype.toString.call(L)==="[object Object]"}class G extends dt.Component{static DIFFERENT_VALUE="__different__";static DIFFERENT_LABEL="ra___different__";static NONE_VALUE="";static NONE_LABEL="ra_none";defaultValue;isError;lang;defaultSendToDone;sendToTimeout;noPlaceRequired;constructor(i){super(i),this.state={confirmDialog:!1,confirmNewValue:null,confirmAttr:null,confirmData:null,confirmCallback:null},this.isError={},i.schema&&(i.custom?this.defaultValue=i.schema.defaultFunc?this.executeCustom(i.schema.defaultFunc,i.data,i.customObj,i.oContext.instanceObj,i.arrayIndex,i.globalData):i.schema.default:i.schema.type!=="state"&&(this.defaultValue=i.schema.defaultFunc?this.execute(i.schema.defaultFunc,i.schema.default,i.data,i.arrayIndex,i.globalData):i.schema.default)),this.lang=j.I18n.getLanguage()}componentDidMount(){this.props.oContext.registerOnForceUpdate&&this.props.oContext.registerOnForceUpdate(this.props.attr,this.onUpdate);const i=["select","autocomplete","autocompleteSendTo"];if(this.defaultValue!==void 0){const n=G.getValue(this.props.data,this.props.attr);(n===void 0||i.includes(this.props.schema.type)&&(n===""||n===null))&&setTimeout(()=>{this.props.custom?this.props.onChange(this.props.attr,this.defaultValue,()=>setTimeout(()=>this.props.oContext.forceUpdate([this.props.attr],this.props.data),100)):(G.setValue(this.props.data,this.props.attr,this.defaultValue),this.props.onChange(this.props.data,void 0,()=>this.props.oContext.forceUpdate([this.props.attr],this.props.data)))},100)}else this.props.schema.defaultSendTo&&this.sendTo()}sendTo(){if(this.props.alive){this.defaultSendToDone=!0;let i=this.props.schema.data;if(i===void 0&&this.props.schema.jsonData){const n=this.getPattern(this.props.schema.jsonData,null,!0);try{i=JSON.parse(n)}catch{console.error(`Cannot parse json data: ${n}`)}}else i={attr:this.props.attr,value:G.getValue(this.props.data,this.props.attr)};i===void 0&&(i=null),this.props.oContext.socket.sendTo(`${this.props.oContext.adapterName}.${this.props.oContext.instance}`,this.props.schema.defaultSendTo,i).then(n=>{n!=null&&(this.props.custom?this.props.onChange(this.props.attr,n,()=>this.props.oContext.forceUpdate([this.props.attr],this.props.data)):(G.setValue(this.props.data,this.props.attr,n),this.props.onChange(this.props.data,void 0,()=>this.props.oContext.forceUpdate([this.props.attr],this.props.data))))})}else this.defaultSendToDone=!1,this.props.schema.allowSaveWithError||this.onError(this.props.attr,j.I18n.t("ra_Instance %s is not alive",this.props.oContext.instance.toString()))}componentWillUnmount(){this.props.oContext.registerOnForceUpdate&&this.props.oContext.registerOnForceUpdate(this.props.attr),this.sendToTimeout&&(clearTimeout(this.sendToTimeout),this.sendToTimeout=null)}onUpdate=i=>{const n=G.getValue(i||this.props.data,this.props.attr)||"";this.state.value!==n?this.setState({value:n}):this.forceUpdate()};static getValue(i,n){if(typeof n=="string")return G.getValue(i,n.split("."));if(n.length===1)return i[n[0]];const u=n.shift();if(typeof u=="string"&&typeof i[u]=="object")return G.getValue(i[u],n)}static setValue(i,n,u){if(typeof n=="string"){G.setValue(i,n.split("."),u);return}if(n.length===1)u===null?delete i[n[0]]:i[n[0]]=u;else{const y=n.shift();if(typeof y!="string")return;(!i[y]||typeof i[y]=="object")&&(i[y]=i[y]||{}),G.setValue(i[y],n,u)}}getText(i,n){if(!i)return"";if(typeof i=="string"){const u=n?i:j.I18n.t(i);return u.includes("${")?this.getPattern(u,null,n):u}return kn(i)?i.func?typeof i.func=="object"?this.getPattern(i.func[this.lang]||i.func.en||"",null,!0):this.getPattern(i.func,null,n):i[this.lang]||i.en||"":i.toString()}renderDialogConfirm(){if(!this.state.confirmDialog)return null;const i=this.state.confirmData||this.props.schema.confirm;let n=null;return i.type==="warning"?n=k.createElement(X.Warning,null):i.type==="error"?n=k.createElement(X.Error,null):i.type==="info"&&(n=k.createElement(X.Info,null)),k.createElement(j.DialogConfirm,{title:this.getText(i.title)||j.I18n.t("ra_Please confirm"),text:this.getText(i.text),ok:this.getText(i.ok)||j.I18n.t("ra_Ok"),cancel:this.getText(i.cancel)||j.I18n.t("ra_Cancel"),icon:n||void 0,onClose:u=>this.setState({confirmDialog:!1},()=>{if(u){if(this.state.confirmCallback){const s=this.state.confirmCallback;this.setState({confirmCallback:null},()=>s(!0));return}const y=JSON.parse(JSON.stringify(this.props.data));this.state.confirmDepAttr&&G.setValue(y,this.state.confirmDepAttr,this.state.confirmDepNewValue),G.setValue(y,this.state.confirmAttr,this.state.confirmNewValue),this.setState({confirmDialog:!1,confirmDepAttr:null,confirmDepNewValue:null,confirmNewValue:null,confirmAttr:null,confirmData:null},()=>this.props.onChange(y))}else{const y=this.state.confirmCallback;this.setState({confirmDialog:!1,confirmDepAttr:null,confirmDepNewValue:null,confirmNewValue:null,confirmAttr:null,confirmData:null,confirmCallback:null},()=>{y&&y(!1)})}})})}getIcon(i){i=i||this.props.schema.icon;let n=null;return i==="auth"?n=k.createElement(X.Key,null):i==="send"?n=k.createElement(X.Send,null):i==="web"?n=k.createElement(X.Public,null):i==="warning"?n=k.createElement(X.Warning,null):i==="error"?n=k.createElement(X.Error,null):i==="info"?n=k.createElement(X.Info,null):i==="search"?n=k.createElement(X.Search,null):i==="book"?n=k.createElement(X.MenuBook,null):i==="help"?n=k.createElement(X.Help,null):i==="upload"?n=k.createElement(X.UploadFile,null):i==="edit"?n=k.createElement(X.Edit,null):i==="user"?n=k.createElement(X.Person,null):i==="group"?n=k.createElement(X.Group,null):i==="delete"?n=k.createElement(X.Delete,null):i==="refresh"?n=k.createElement(X.Refresh,null):i==="add"?n=k.createElement(X.Add,null):i==="unpair"?n=k.createElement(X.LinkOff,null):i==="pair"?n=k.createElement(X.Link,null):i==="save"?n=k.createElement(X.Save,null):i==="open"?n=k.createElement(X.OpenInNew,null):i&&((i.endsWith(".png")||i.endsWith(".svg")||i.endsWith(".jpg"))&&!i.startsWith("http://")&&!i.startsWith("https://")&&(i=`./adapter/${this.props.oContext.adapterName}/${i}`),n=k.createElement(j.Icon,{src:i,style:{width:22,height:22}})),n}onChangeAsync(i,n){return new Promise(u=>{const y=this.onChange(i,n,u);y instanceof Promise&&y.catch(s=>console.error(`Cannot set value: ${s}`))})}onChange(i,n,u){const y=JSON.parse(JSON.stringify(this.props.data));if(G.setValue(y,i,n),this.props.schema.confirm&&this.execute(this.props.schema.confirm.condition,!1,y,this.props.arrayIndex,this.props.globalData))return new Promise(c=>{this.setState({confirmDialog:!0,confirmNewValue:n,confirmAttr:i,confirmData:null},()=>{typeof u=="function"?u():c()})});if(this.props.schema.confirmDependsOn)for(let c=0;c<this.props.schema.confirmDependsOn.length;c++){const p=this.props.schema.confirmDependsOn[c];if(p.confirm){const o=G.getValue(y,p.attr);if(this.execute(p.confirm.condition,!1,y,this.props.arrayIndex,this.props.globalData))return new Promise(d=>{this.setState({confirmDialog:!0,confirmNewValue:n,confirmAttr:i,confirmDepNewValue:o,confirmDepAttr:p.attr,confirmData:p.confirm},()=>{typeof u=="function"?u():d()})})}}const s=[];if(this.props.schema.onChangeDependsOn)for(let c=0;c<this.props.schema.onChangeDependsOn.length;c++){const p=this.props.schema.onChangeDependsOn[c];if(p.onChange){const o=G.getValue(y,p.attr);let d;this.props.custom?d=this.executeCustom(p.onChange.calculateFunc,y,this.props.customObj,this.props.oContext.instanceObj,this.props.arrayIndex,this.props.globalData):d=this.execute(p.onChange.calculateFunc,o,y,this.props.arrayIndex,this.props.globalData),d!==o&&(G.setValue(y,p.attr,d),s.push(p.attr))}}if(this.props.schema.hiddenDependsOn)for(let c=0;c<this.props.schema.hiddenDependsOn.length;c++){const p=this.props.schema.hiddenDependsOn[c];p.hidden&&s.push(p.attr)}if(this.props.schema.labelDependsOn)for(let c=0;c<this.props.schema.labelDependsOn.length;c++){const p=this.props.schema.labelDependsOn[c];p.hidden&&s.push(p.attr)}if(this.props.schema.helpDependsOn)for(let c=0;c<this.props.schema.helpDependsOn.length;c++){const p=this.props.schema.helpDependsOn[c];p.hidden&&s.push(p.attr)}if(this.props.schema.onChange&&!this.props.schema.onChange.ignoreOwnChanges){const c=G.getValue(y,this.props.attr),p=this.props.custom?this.executeCustom(this.props.schema.onChange.calculateFunc,y,this.props.customObj,this.props.oContext.instanceObj,this.props.arrayIndex,this.props.globalData):this.execute(this.props.schema.onChange.calculateFunc,c,y,this.props.arrayIndex,this.props.globalData);p!==c&&G.setValue(y,this.props.attr,p)}return this.props.custom?(this.props.onChange(i,n,()=>u&&u()),s!=null&&s.length&&s.forEach((c,p)=>setTimeout(()=>this.props.onChange(c,G.getValue(y,c)),p*50))):this.props.onChange(y,void 0,()=>{s.length&&this.props.oContext.forceUpdate(s,y),u&&u()}),Promise.resolve()}execute(i,n,u,y,s){let c;if(kn(i))c=i.func;else if(typeof i=="string")c=i;else return i;if(!c)return n;try{return new Function("data","originalData","_system","_alive","_common","_socket","_instance","arrayIndex","globalData","_changed",c.includes("return")?c:`return ${c}`)(u||this.props.data,this.props.originalData,this.props.oContext.systemConfig,this.props.alive,this.props.common,this.props.oContext.socket,this.props.oContext.instance,y,s,this.props.changed)}catch(p){return console.error(`Cannot execute ${JSON.stringify(i)}: ${p}`),n}}executeCustom(i,n,u,y,s,c){let p;if(kn(i))p=i.func;else if(typeof i=="string")p=i;else return i;if(!p)return null;try{return new Function("data","originalData","_system","instanceObj","customObj","_socket","arrayIndex","globalData","_changed",p.includes("return")?p:`return ${p}`)(n||this.props.data,this.props.originalData,this.props.oContext.systemConfig,y,u,this.props.oContext.socket,s,c,this.props.changed)}catch(o){return console.error(`Cannot execute ${p}: ${o}`),null}}calculate(i){let n,u,y,s;return this.props.custom?(n=i.validator?!this.executeCustom(i.validator,this.props.data,this.props.customObj,this.props.oContext.instanceObj,this.props.arrayIndex,this.props.globalData):!1,i.disabled===!0?u=!0:u=i.disabled?this.executeCustom(i.disabled,this.props.data,this.props.customObj,this.props.oContext.instanceObj,this.props.arrayIndex,this.props.globalData):!1,i.hidden===!0?y=!0:y=i.hidden?this.executeCustom(i.hidden,this.props.data,this.props.customObj,this.props.oContext.instanceObj,this.props.arrayIndex,this.props.globalData):!1,s=i.defaultFunc?this.executeCustom(i.defaultFunc,this.props.data,this.props.customObj,this.props.oContext.instanceObj,this.props.arrayIndex,this.props.globalData):i.default):(n=i.validator?!this.execute(i.validator,!1,this.props.data,this.props.arrayIndex,this.props.globalData):!1,i.disabled===!0?u=!0:u=i.disabled?this.execute(i.disabled,!1,this.props.data,this.props.arrayIndex,this.props.globalData):!1,i.hidden===!0?y=!0:y=i.hidden?this.execute(i.hidden,!1,this.props.data,this.props.arrayIndex,this.props.globalData):!1,s=i.defaultFunc?this.execute(i.defaultFunc,i.default,this.props.data,this.props.arrayIndex,this.props.globalData):i.default),{error:n,disabled:u,hidden:y,defaultValue:s}}onError(i,n){n?this.isError[i]=n:delete this.isError[i],this.props.onError&&this.props.onError(i,n)}renderItem(i,n,u){return this.getText(this.props.schema.label)||this.getText(this.props.schema.text)}renderHelp(i,n,u){return n?k.createElement("a",{href:n,target:"_blank",rel:"noreferrer",style:{color:this.props.oContext.themeType==="dark"?"#a147ff":"#5b238f",textDecoration:"underline"}},this.getText(i,u)):(i=this.getText(i,u)||"",i&&(i.includes("<a ")||i.includes("<br")||i.includes("<b>")||i.includes("<i>"))?j.Utils.renderTextWithA(i):i)}static escapeString(i,n){return typeof i!="string"?"":(i=i.replace(/`/g,"\\`"),i=i.replace(/\${([^}]+)}/g,(u,y)=>{if(y&&typeof y=="string"&&y.startsWith("data.")){const s=G.getValue(n,y.replace(/^data\./,""));if(typeof s=="string"&&s.includes('"'))return`\${${y}.replace(/"/g, '\\\\"')}`}return u}),i)}getPattern(i,n,u){if(n=n||this.props.data,!i)return"";let y;typeof i=="object"?i.func?y=i.func:(console.log(`Object must be stringified: ${JSON.stringify(i)}`),y=JSON.stringify(i)):y=i;try{if(this.props.custom)return new Function("data","originalData","arrayIndex","globalData","_system","instanceObj","customObj","_socket","_changed",`return \`${G.escapeString(y,n)}\``)(n,this.props.originalData,this.props.arrayIndex,this.props.globalData,this.props.oContext.systemConfig,this.props.oContext.instanceObj,this.props.customObj,this.props.oContext.socket,this.props.changed);const c=new Function("data","originalData","arrayIndex","globalData","_system","_alive","_common","_socket","_changed",`return \`${G.escapeString(y,n)}\``)(n,this.props.originalData,this.props.arrayIndex,this.props.globalData,this.props.oContext.systemConfig,this.props.alive,this.props.common,this.props.oContext.socket,this.props.changed);return u?c:j.I18n.t(c)}catch(s){return console.error(`Cannot execute ${y}: ${s}`),y}}render(){const i=this.props.schema;if(!i||this.props.oContext.expertMode===!1&&i.expertMode)return null;this.props.alive&&this.defaultSendToDone===!1&&(this.sendToTimeout=setTimeout(()=>{this.sendToTimeout=null,this.sendTo()},200));const{error:n,disabled:u,hidden:y,defaultValue:s}=this.calculate(i);if(y){if(Object.keys(this.isError).length&&(setTimeout(o=>Object.keys(o).forEach(d=>this.props.onError(d)),100,JSON.parse(JSON.stringify(this.isError))),this.isError={}),i.hideOnlyControl){const o=k.createElement(O.Grid2,{size:{xs:i.xs||Ts,sm:i.sm||void 0,md:i.md||void 0,lg:i.lg||void 0,xl:i.xl||void 0},style:{marginBottom:0,textAlign:"left",...i.style,...this.props.oContext.themeType==="dark"?i.darkStyle:{}}});return i.newLine?k.createElement(k.Fragment,null,k.createElement("div",{style:{flexBasis:"100%",height:0}}),o):o}return null}i.validatorNoSaveOnError&&(n&&!Object.keys(this.isError).length?(this.isError={[this.props.attr]:i.validatorErrorText?j.I18n.t(i.validatorErrorText):!0},setTimeout(o=>Object.keys(o).forEach(d=>this.props.onError(d,o[d])),100,JSON.parse(JSON.stringify(this.isError)))):!n&&Object.keys(this.isError).length&&(setTimeout(o=>Object.keys(o).forEach(d=>this.props.onError(d)),100,JSON.parse(JSON.stringify(this.isError))),this.isError={}));const c=this.renderItem(n,u||this.props.commandRunning||this.props.disabled,s);if(this.noPlaceRequired)return c;const p=k.createElement(O.Grid2,{title:this.getText(i.tooltip),size:{xs:i.xs||12,sm:i.sm||void 0,md:i.md||void 0,lg:i.lg||void 0,xl:i.xl||void 0},style:{marginBottom:0,textAlign:"left",width:i.type==="divider"||i.type==="header"?i.width||"100%":void 0,...i.style,...this.props.oContext.themeType==="dark"?i.darkStyle:{}}},this.props.schema.defaultSendTo&&this.props.schema.button?k.createElement(O.Grid2,{container:!0,style:{width:"100%"}},k.createElement(O.Grid2,{flex:1},c),k.createElement(O.Grid2,null,k.createElement(O.Button,{disabled:u,variant:"outlined",onClick:()=>this.sendTo(),title:this.props.schema.buttonTooltip?this.getText(this.props.schema.buttonTooltip,this.props.schema.buttonTooltipNoTranslation):j.I18n.t("ra_Request data by instance")},this.getText(this.props.schema.button)))):c);return i.newLine?k.createElement(k.Fragment,null,k.createElement("div",{style:{flexBasis:"100%",height:0}}),this.renderDialogConfirm(),p):this.state.confirmDialog?k.createElement(k.Fragment,null,this.renderDialogConfirm(),p):p}}const Ge={fullWidth:{width:"100%"},accordionSummary:L=>({backgroundColor:L.palette.mode==="dark"?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.08)"}),accordionTitle:{},toolbar:L=>({backgroundColor:L.palette.mode==="dark"?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.08)",borderRadius:"3px"}),tooltip:{pointerEvents:"none"}};class _s extends G{typingTimer=null;constructor(i){super(i),this.props.schema.items=this.props.schema.items||[]}componentDidMount(){super.componentDidMount();let i=G.getValue(this.props.data,this.props.attr)||[];Array.isArray(i)||(i=[]),this.setState({value:i,activeIndex:-1,iteration:0})}componentWillUnmount(){this.typingTimer&&(clearTimeout(this.typingTimer),this.typingTimer=null),super.componentWillUnmount()}itemAccordion(i,n){const{value:u}=this.state,{schema:y}=this.props,s={type:"panel",items:y.items.reduce((c,p)=>(c[p.attr]=p,c),{}),style:{marginLeft:"-8px",marginTop:"10px",marginBottom:"10px"}};return k.createElement($t,{oContext:this.props.oContext,index:n+this.state.iteration,arrayIndex:n,changed:this.props.changed,globalData:this.props.data,common:this.props.common,alive:this.props.alive,themeName:this.props.themeName,data:i,custom:!0,schema:s,originalData:this.props.originalData,onChange:(c,p)=>{const o=JSON.parse(JSON.stringify(u));o[n][c]=p,this.setState({value:o},()=>this.onChangeWrapper(o))},onError:(c,p)=>this.onError(c,p),table:this.props.table})}onDelete=i=>()=>{const n=JSON.parse(JSON.stringify(this.state.value));n.splice(i,1),this.setState({value:n,iteration:this.state.iteration+1e4},()=>this.onChangeWrapper(n))};onClone=i=>()=>{const n=JSON.parse(JSON.stringify(this.state.value)),u=JSON.parse(JSON.stringify(n[i]));if(typeof this.props.schema.clone=="string"&&typeof u[this.props.schema.clone]=="string"){let y=1,s=u[this.props.schema.clone];const c=s.match(/(\d+)$/);for(c?(s=s.replace(c[0],""),y=parseInt(c[0],10)+1):s+="_";n.find(p=>p[this.props.schema.clone]===s+y.toString());)y++;u[this.props.schema.clone]=`${u[this.props.schema.clone]}_${y}`}n.splice(i,0,u),this.setState({value:n,activeIndex:-1,iteration:this.state.iteration+1e4},()=>this.onChangeWrapper(n))};onChangeWrapper=i=>{this.typingTimer&&clearTimeout(this.typingTimer),this.typingTimer=setTimeout(n=>{this.typingTimer=null;const u=this.onChange(this.props.attr,n);u instanceof Promise&&u.catch(y=>this.onError(y))},300,i)};onAdd=()=>{const{schema:i}=this.props,n=JSON.parse(JSON.stringify(this.state.value)),u=i.items&&i.items.reduce((y,s)=>{let c;return s.defaultFunc?this.props.custom?c=s.defaultFunc?this.executeCustom(s.defaultFunc,this.props.data,this.props.customObj,this.props.oContext.instanceObj,n.length,this.props.data):this.props.schema.default:c=s.defaultFunc?this.execute(s.defaultFunc,this.props.schema.default,this.props.data,n.length,this.props.data):this.props.schema.default:c=s.default===void 0?null:s.default,y[s.attr]=c,y},{});n.push(u),this.setState({value:n,activeIndex:n.length-1},()=>this.onChangeWrapper(n))};onMoveUp(i){const n=JSON.parse(JSON.stringify(this.state.value)),u=n[i];n.splice(i,1),n.splice(i-1,0,u);const y=this.state.activeIndex-1;this.setState({value:n,activeIndex:y,iteration:this.state.iteration+1e4},()=>this.onChangeWrapper(n))}onMoveDown(i){const n=JSON.parse(JSON.stringify(this.state.value)),u=n[i];n.splice(i,1),n.splice(i+1,0,u);const y=this.state.activeIndex+1;this.setState({value:n,activeIndex:y,iteration:this.state.iteration+1e4},()=>this.onChangeWrapper(n))}renderItem(){const{schema:i}=this.props,{value:n}=this.state;return n?k.createElement(O.Paper,null,i.label||!i.noDelete?k.createElement(O.Toolbar,{variant:"dense"},i.label?k.createElement(O.Typography,{variant:"h6",id:"tableTitle",component:"div"},this.getText(i.label)):null,i.noDelete?null:k.createElement(O.IconButton,{size:"small",color:"primary",onClick:this.onAdd},k.createElement(X.Add,null))):null,n.map((u,y)=>k.createElement(O.Accordion,{key:`${u}_${y}`,expanded:this.state.activeIndex===y,onChange:(s,c)=>this.setState({activeIndex:c?y:-1})},k.createElement(O.AccordionSummary,{expandIcon:k.createElement(X.ExpandMore,null),sx:j.Utils.getStyle(this.props.oContext.theme,Ge.fullWidth,Ge.accordionSummary)},k.createElement(O.Typography,{style:Ge.accordionTitle},u[i.titleAttr])),k.createElement(O.AccordionDetails,{style:{...i.style,...this.props.oContext.themeType?i.darkStyle:void 0}},this.itemAccordion(n[y],y),k.createElement(O.Toolbar,{sx:Ge.toolbar},y?k.createElement(O.Tooltip,{title:j.I18n.t("ra_Move up"),slotProps:{popper:{sx:Ge.tooltip}}},k.createElement(O.IconButton,{size:"small",onClick:()=>this.onMoveUp(y)},k.createElement(X.ArrowUpward,null))):k.createElement("div",{style:Ge.buttonEmpty}),y<n.length-1?k.createElement(O.Tooltip,{title:j.I18n.t("ra_Move down"),slotProps:{popper:{sx:Ge.tooltip}}},k.createElement(O.IconButton,{size:"small",onClick:()=>this.onMoveDown(y)},k.createElement(X.ArrowDownward,null))):k.createElement("div",{style:Ge.buttonEmpty}),i.noDelete?null:k.createElement(O.Tooltip,{title:j.I18n.t("ra_Delete current row"),slotProps:{popper:{sx:Ge.tooltip}}},k.createElement(O.IconButton,{size:"small",onClick:this.onDelete(y)},k.createElement(X.Delete,null))),i.clone?k.createElement(O.Tooltip,{title:j.I18n.t("ra_Clone current row"),slotProps:{popper:{sx:Ge.tooltip}}},k.createElement(O.IconButton,{size:"small",onClick:this.onClone(y)},k.createElement(X.ContentCopy,null))):null)))),!i.noDelete&&n.length>0?k.createElement(O.Toolbar,{variant:"dense",sx:Ge.rootTool},k.createElement(O.IconButton,{size:"small",color:"primary",onClick:this.onAdd},k.createElement(X.Add,null))):null,i.help?k.createElement(O.FormHelperText,null,this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null):null}}const pi={root:{width:"100%"},notAlive:{color:"#a30000"}};class ks extends G{componentDidMount(){super.componentDidMount();const i=this.getInstance();this.props.oContext.socket.getState(`${i}.alive`).then(n=>this.setState({alive:!!(n&&n.val),instance:i}))}getInstance(){let i=this.props.schema.instance||`${this.props.oContext.adapterName}.${this.props.oContext.instance}`;return i.includes("${")&&(i=this.getPattern(i,null,!0)),i&&!i.startsWith("system.adapter.")&&(i=`system.adapter.${i}`),i}renderItem(){if(this.getInstance()!==this.state.instance&&setTimeout(()=>{const n=this.getInstance();n?this.props.oContext.socket.getState(`${n}.alive`).then(u=>this.setState({alive:!!(u&&u.val),instance:n})):this.setState({alive:null,instance:n})},200),this.state.alive!==!1&&this.state.alive!==!0)return null;const i=this.state.instance.replace(/^system.adapter./,"");return k.createElement("div",{style:{...pi.root,...this.state.alive?void 0:pi.notAlive}},this.state.alive?this.props.schema.textAlive!==void 0?this.props.schema.textAlive?j.I18n.t(this.props.schema.textAlive,i):"":j.I18n.t("ra_Instance %s is alive",i):this.props.schema.textNotAlive!==void 0?this.props.schema.textNotAlive?j.I18n.t(this.props.schema.textNotAlive,i):"":j.I18n.t("ra_Instance %s is not alive",i))}}class Ms extends G{componentDidMount(){super.componentDidMount();const i=G.getValue(this.props.data,this.props.attr),n=this.props.schema.options.map(u=>typeof u=="string"?{label:u,value:u}:JSON.parse(JSON.stringify(u)));Array.isArray(i)?(n.unshift({label:j.I18n.t(G.DIFFERENT_LABEL),value:G.DIFFERENT_VALUE}),this.setState({value:G.DIFFERENT_VALUE,selectOptions:n})):this.setState({value:i,selectOptions:n})}renderItem(i,n){if(!this.state.selectOptions)return null;let u;const y=JSON.parse(JSON.stringify(this.state.selectOptions));return Array.isArray(this.state.value)||this.state.value===G.DIFFERENT_VALUE?([...this.state.value].filter(c=>!y.find(p=>typeof p=="object"?p.value===c:p===c)).forEach(c=>y.push({label:c.toString(),value:c})),u={label:j.I18n.t(G.DIFFERENT_LABEL),value:G.DIFFERENT_VALUE},y.unshift(u)):(u=this.state.value!==null&&this.state.value!==void 0&&y.find(c=>typeof c=="object"?c.value==this.state.value:c==this.state.value),this.state.value!==null&&this.state.value!==void 0&&!u&&this.props.schema.freeSolo&&(u={value:this.state.value,label:this.state.value},y.push(u))),k.createElement(O.Autocomplete,{fullWidth:!0,freeSolo:!!this.props.schema.freeSolo,value:u,options:y,isOptionEqualToValue:(c,p)=>c.value===p.value,filterOptions:(c,p)=>{const o=c.filter(d=>p.inputValue===""?!0:d.label.toLowerCase().includes(p.inputValue.toLowerCase())||d.value.toLowerCase().includes(p.inputValue.toLowerCase()));return this.props.schema.freeSolo&&p.inputValue!==""&&o.push({label:p.inputValue,value:p.inputValue}),o},onInputChange:c=>{if(!c||!this.props.schema.freeSolo)return;const p=c.target.value;p!==this.state.value&&this.setState({value:p},()=>this.onChange(this.props.attr,p))},onChange:(c,p)=>{const o=typeof p=="object"?p?p.value:"":p;o!==this.state.value&&this.setState({value:o},()=>this.onChange(this.props.attr,o))},getOptionLabel:c=>typeof c=="object"?(c==null?void 0:c.label)??"":"",renderInput:c=>k.createElement(O.TextField,{variant:"standard",...c,error:!!i,placeholder:this.getText(this.props.schema.placeholder),label:this.getText(this.props.schema.label),helperText:this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation),disabled:n})})}}class Ls extends G{initialized=!1;localContext;askInstance(){const i=G.getValue(this.props.data,this.props.attr),n=this.props.schema.options?this.props.schema.options.map(u=>typeof u=="string"?{label:u,value:u}:JSON.parse(JSON.stringify(u))):[];if(this.props.alive){let u=this.props.schema.data;if(u===void 0&&this.props.schema.jsonData){const y=this.getPattern(this.props.schema.jsonData,null,!0);try{typeof y=="string"&&(u=JSON.parse(y))}catch{console.error(`Cannot parse json data: ${JSON.stringify(u)}`)}}u===void 0&&(u=null),this.props.oContext.socket.sendTo(`${this.props.oContext.adapterName}.${this.props.oContext.instance}`,this.props.schema.command||"send",u).then(y=>{y&&Array.isArray(y)&&y.forEach(s=>n.push(typeof s=="string"?{label:s,value:s}:JSON.parse(JSON.stringify(s)))),Array.isArray(i)?(n.unshift({label:j.I18n.t(G.DIFFERENT_LABEL),value:G.DIFFERENT_VALUE}),this.setState({value:G.DIFFERENT_VALUE,selectOptions:n})):this.setState({value:i,selectOptions:n})})}else Array.isArray(i)?(n.unshift({label:j.I18n.t(G.DIFFERENT_LABEL),value:G.DIFFERENT_VALUE}),this.setState({value:G.DIFFERENT_VALUE,selectOptions:n})):this.setState({value:i,selectOptions:n})}getContext(){const i={};return Array.isArray(this.props.schema.alsoDependsOn)&&this.props.schema.alsoDependsOn.forEach(n=>i[n]=G.getValue(this.props.data,n)),JSON.stringify(i)}renderItem(i,n){if(this.props.alive){const c=this.getContext();(c!==this.localContext||!this.initialized)&&(this.localContext=c,setTimeout(()=>this.askInstance(),this.initialized?300:50),this.initialized=!0)}let u;const y=this.state.selectOptions?JSON.parse(JSON.stringify(this.state.selectOptions)):[];return Array.isArray(this.state.value)||this.state.value===G.DIFFERENT_LABEL?([...this.state.value].filter(c=>!y.find(p=>p.value===c)).forEach(c=>y.push({label:c.toString(),value:c})),u={label:j.I18n.t(G.DIFFERENT_LABEL),value:G.DIFFERENT_VALUE},y.unshift(u)):(u=this.state.value!==null&&this.state.value!==void 0&&y.find(c=>c.value==this.state.value),this.state.value!==null&&this.state.value!==void 0&&!u&&this.props.schema.freeSolo&&(u={value:this.state.value,label:this.state.value},y.push(u)),u=u||null),y.length?k.createElement(O.Autocomplete,{value:u,fullWidth:!0,freeSolo:!!this.props.schema.freeSolo,options:y,isOptionEqualToValue:(c,p)=>c.value===p.value,filterOptions:(c,p)=>{const o=c.filter(d=>p.inputValue===""?!0:d.label.toLowerCase().includes(p.inputValue.toLowerCase())||d.value.toLowerCase().includes(p.inputValue.toLowerCase()));return this.props.schema.freeSolo&&p.inputValue!==""&&o.push({label:p.inputValue,value:p.inputValue}),o},getOptionLabel:c=>(c==null?void 0:c.label)??"",onInputChange:c=>{if(!c||!this.props.schema.freeSolo)return;const p=c.target.value;p!==this.state.value&&this.setState({value:p},()=>this.onChange(this.props.attr,p))},onChange:(c,p)=>{const o=typeof p=="object"?p?p.value:"":p;o!==this.state.value&&this.setState({value:o},()=>this.onChange(this.props.attr,o))},renderInput:c=>k.createElement(O.TextField,{variant:"standard",...c,error:!!i,placeholder:this.getText(this.props.schema.placeholder),label:this.getText(this.props.schema.label),helperText:this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation),disabled:n})}):k.createElement(O.TextField,{variant:"standard",fullWidth:!0,value:this.state.value===null||this.state.value===void 0?"":this.state.value,error:!!i,disabled:n,slotProps:{htmlInput:{maxLength:this.props.schema.maxLength||this.props.schema.max||void 0}},onChange:c=>{const p=c.target.value;this.setState({value:p},()=>this.onChange(this.props.attr,(p||"").trim()))},placeholder:this.getText(this.props.schema.placeholder),label:this.getText(this.props.schema.label),helperText:this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)})}}const Mn={fullWidth:{width:"100%"},flex:{display:"flex"},button:{height:48,marginLeft:4,minWidth:48}};class Is extends G{componentDidMount(){super.componentDidMount();const{data:i,attr:n}=this.props,u=G.getValue(i,n)||"";this.setState({value:u,showDialog:!1})}renderItem(i,n){const{schema:u,attr:y}=this.props,{value:s,showDialog:c}=this.state;return k.createElement(O.FormControl,{style:Mn.fullWidth,variant:"standard"},u.label?k.createElement(O.InputLabel,{shrink:!0},this.getText(u.label)):null,k.createElement("div",{style:Mn.flex},k.createElement(O.TextField,{variant:"standard",fullWidth:!0,value:s??"",error:!!i,disabled:n,placeholder:this.getText(u.placeholder),label:this.getText(u.label),helperText:this.renderHelp(u.help,u.helpLink,u.noTranslation),onChange:p=>{const o=p.target.value;this.setState({value:o},()=>this.onChange(y,o))}}),k.createElement(O.Button,{color:"grey",disabled:n,style:Mn.button,size:"small",variant:"outlined",onClick:()=>this.setState({showDialog:!0})},"...")),c?k.createElement(j.DialogCron,{title:j.I18n.t("ra_Define schedule"),simple:u.simple,complex:u.complex,cron:s,onClose:()=>this.setState({showDialog:!1}),cancel:j.I18n.t("ra_Cancel"),ok:j.I18n.t("ra_Ok"),theme:this.props.oContext.theme,onOk:p=>this.setState({showDialog:!1,value:p},()=>this.onChange(y,p))}):null)}}class Fs extends G{async componentDidMount(){super.componentDidMount();const i=G.getValue(this.props.data,this.props.attr),u=(await this.props.oContext.socket.getCertificates()).filter(y=>{const s=this.props.attr.toLowerCase();return s.includes(y.type)||y.type==="public"&&s.includes("cert")||y.type==="private"&&(s.includes("priv")||s.includes("key"))?!0:!!(y.type==="chained"&&(s.includes("chain")||s.includes("ca")))}).map(y=>({label:y.name,value:y.name}));u.unshift({label:j.I18n.t(G.NONE_LABEL),value:G.NONE_VALUE}),this.setState({value:i,selectOptions:u})}renderItem(i,n){var y,s;if(!this.state.selectOptions)return null;const u=(y=this.state.selectOptions)==null?void 0:y.find(c=>c.value===this.state.value);return k.createElement(O.FormControl,{style:{width:"100%"},variant:"standard"},this.props.schema.label?k.createElement(O.InputLabel,{shrink:!0},this.getText(this.props.schema.label)):null,k.createElement(O.Select,{variant:"standard",error:!!i,displayEmpty:!0,disabled:!!n,value:this.state.value,renderValue:()=>this.getText(u==null?void 0:u.label,this.props.schema.noTranslation!==!1),onChange:c=>this.setState({value:c.target.value},()=>this.onChange(this.props.attr,this.state.value))},(s=this.state.selectOptions)==null?void 0:s.map(c=>k.createElement(O.MenuItem,{key:c.value,value:c.value,style:c.value===G.NONE_VALUE?{opacity:.5}:{}},this.getText(c.label,this.props.schema.noTranslation!==!1)))),this.props.schema.help?k.createElement(O.FormHelperText,null,this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null)}}const zt={fullWidth:{width:"100%"},leWidth:{width:620,marginBottom:10},certWidth:{width:200,marginRight:10}};class Rs extends G{async componentDidMount(){var p;super.componentDidMount();const i=await this.props.oContext.socket.getCertificates(),n=[],u=[],y=[];let s=[];const c=await this.props.oContext.socket.getObject("system.certificates");(p=c==null?void 0:c.native)!=null&&p.collections?s=Object.keys(c.native.collections):s=null,i.forEach(o=>{o.type==="public"?n.push({label:o.name,value:o.name}):o.type==="private"?u.push({label:o.name,value:o.name}):o.type==="chained"?y.push({label:o.name,value:o.name}):(n.push({label:o.name,value:o.name}),u.push({label:o.name,value:o.name}),y.push({label:o.name,value:o.name}))}),n.unshift({label:j.I18n.t(G.NONE_LABEL),value:G.NONE_VALUE}),u.unshift({label:j.I18n.t(G.NONE_LABEL),value:G.NONE_VALUE}),y.unshift({label:j.I18n.t(G.NONE_LABEL),value:G.NONE_VALUE}),this.setState({certsPublicOptions:n,certsChainOptions:y,certsPrivateOptions:u,collectionsOptions:s})}renderItem(i,n){var e,t,r,l,a,h,f;if(!this.state.certsPublicOptions||!this.state.certsPrivateOptions||!this.state.certsChainOptions)return null;const u=(G.getValue(this.props.data,this.props.schema.leCollectionName||"leCollection")||"false").toString(),y=G.getValue(this.props.data,this.props.schema.certPublicName||"certPublic"),s=G.getValue(this.props.data,this.props.schema.certPrivateName||"certPrivate"),c=G.getValue(this.props.data,this.props.schema.certChainedName||"certChained"),p=(e=this.state.certsPublicOptions)==null?void 0:e.find(v=>v.value===y),o=(t=this.state.certsPrivateOptions)==null?void 0:t.find(v=>v.value===s),d=(r=this.state.certsChainOptions)==null?void 0:r.find(v=>v.value===c);return k.createElement("div",{style:zt.fullWidth},this.state.collectionsOptions?k.createElement(O.FormControl,{style:zt.leWidth,variant:"standard"},k.createElement(O.InputLabel,{shrink:!0},"Let's encrypt"),k.createElement(O.Select,{variant:"standard",error:!!i,displayEmpty:!0,disabled:!!n,value:u,onChange:v=>this.onChange(this.props.schema.leCollectionName||"leCollection",v.target.value==="false"?!1:v.target.value==="true"?!0:v.target.value)},k.createElement(O.MenuItem,{key:"_false",value:"false",style:{fontWeight:"bold"}},j.I18n.t("ra_Do not use let's encrypt")),k.createElement(O.MenuItem,{key:"_true",value:"true",style:{fontWeight:"bold"}},j.I18n.t("ra_Use all available let's encrypt certificates")),(l=this.state.collectionsOptions)==null?void 0:l.map(v=>k.createElement(O.MenuItem,{key:v,value:v},v)))):null,this.state.collectionsOptions?k.createElement("br",null):null,this.state.collectionsOptions&&u!=="false"?k.createElement("div",null,j.I18n.t("ra_Fallback custom certificates")):null,k.createElement(O.FormControl,{style:zt.certWidth,variant:"standard"},k.createElement(O.InputLabel,{shrink:!0},j.I18n.t("ra_Public certificate")),k.createElement(O.Select,{variant:"standard",error:!!i,displayEmpty:!0,disabled:!!n,value:y||"",renderValue:()=>this.getText(p==null?void 0:p.label),onChange:v=>this.onChange(this.props.schema.certPublicName||"certPublic",v.target.value)},(a=this.state.certsPublicOptions)==null?void 0:a.map((v,b)=>k.createElement(O.MenuItem,{key:`${v.value}_${b}`,value:v.value,style:v.value===G.NONE_VALUE?{opacity:.5}:{}},this.getText(v.label))))),k.createElement(O.FormControl,{style:zt.certWidth,variant:"standard"},k.createElement(O.InputLabel,{shrink:!0},j.I18n.t("ra_Private certificate")),k.createElement(O.Select,{variant:"standard",error:!!i,displayEmpty:!0,disabled:!!n,value:s||"",renderValue:()=>this.getText(o==null?void 0:o.label),onChange:v=>this.onChange(this.props.schema.certPrivateName||"certPrivate",v.target.value)},(h=this.state.certsPrivateOptions)==null?void 0:h.map((v,b)=>k.createElement(O.MenuItem,{key:`${v.value}_${b}`,value:v.value,style:v.value===G.NONE_VALUE?{opacity:.5}:{}},this.getText(v.label))))),k.createElement(O.FormControl,{style:zt.certWidth,variant:"standard"},k.createElement(O.InputLabel,{shrink:!0},j.I18n.t("ra_Chained certificate")),k.createElement(O.Select,{variant:"standard",error:!!i,displayEmpty:!0,disabled:!!n,value:c||"",renderValue:()=>this.getText(d==null?void 0:d.label),onChange:v=>this.onChange(this.props.schema.certChainedName||"certChained",v.target.value)},(f=this.state.certsChainOptions)==null?void 0:f.map((v,b)=>k.createElement(O.MenuItem,{key:`${v.value}_${b}`,value:v.value,style:v.value===G.NONE_VALUE?{opacity:.5}:{}},this.getText(v.label))))))}}class Os extends G{async componentDidMount(){var u;super.componentDidMount();let i;const n=await this.props.oContext.socket.getObject("system.certificates");(u=n==null?void 0:n.native)!=null&&u.collections?i=Object.keys(n.native.collections):i=[],this.setState({collectionsOptions:i})}renderItem(i,n){var y;if(!this.state.collectionsOptions)return null;const u=(G.getValue(this.props.data,this.props.schema.leCollectionName||"leCollection")||"false").toString();return k.createElement(O.FormControl,{style:{width:"100%"},variant:"standard"},this.props.schema.label?k.createElement(O.InputLabel,{shrink:!0},this.getText(this.props.schema.label)):null,k.createElement(O.Select,{variant:"standard",error:!!i,displayEmpty:!0,disabled:!!n,value:u,onChange:s=>this.onChange(this.props.schema.leCollectionName||"leCollection",s.target.value==="false"?!1:s.target.value==="true"?!0:s.target.value)},k.createElement(O.MenuItem,{key:"_false",value:"false",style:{fontWeight:"bold"}},j.I18n.t("ra_Do not use let's encrypt")),k.createElement(O.MenuItem,{key:"_true",value:"true",style:{fontWeight:"bold"}},j.I18n.t("ra_Use all available let's encrypt certificates")),(y=this.state.collectionsOptions)==null?void 0:y.map(s=>k.createElement(O.MenuItem,{key:s,value:s},s))),this.props.schema.help?k.createElement(O.FormHelperText,null,this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null)}}const We={fullWidth:{width:"100%"},licLabel:{fontWeight:"bold",minWidth:100,marginRight:10,textTransform:"capitalize",display:"inline-block"},errorTitle:L=>({color:L.palette.mode==="dark"?"#e39191":"#b62020"}),okTitle:L=>({color:L.palette.mode==="dark"?"#6fd56f":"#007c00"}),errorText:L=>({color:L.palette.mode==="dark"?"#e39191":"#b62020",mb:"30px"})};class ht extends G{componentDidMount(){super.componentDidMount(),this.setState({_error:"",running:!1,showLicenseData:null,foundSuitableLicense:!1,licenseOfflineCheck:!1,result:null,allLicenses:null,askForUpdate:!1,showLinkToProfile:!1})}renderErrorDialog(){if(this.state._error&&!this.state.showLicenseData){let i=this.state._error;return this.state.allLicenses&&(i=[k.createElement("div",{key:"error"},i)],i.push(k.createElement(O.Button,{key:"button",variant:"contained",onClick:()=>window.open("https://iobroker.net/www/account/licenses","_blank")},j.I18n.t("iobroker.net"))),this.state.allLicenses.length?i.push(k.createElement(O.TableContainer,{key:"table"},k.createElement(O.Table,{size:"small"},k.createElement(O.TableHead,null,k.createElement(O.TableRow,null,k.createElement(O.TableCell,null,j.I18n.t("ra_Product")),k.createElement(O.TableCell,null,j.I18n.t("ra_Version")),k.createElement(O.TableCell,null,"UUID"),k.createElement(O.TableCell,null,j.I18n.t("ra_ValidTill")),k.createElement(O.TableCell,null,j.I18n.t("ra_Commercial")),k.createElement(O.TableCell,null,"ID"))),k.createElement(O.TableBody,null,this.state.allLicenses.map(n=>k.createElement(O.TableRow,{key:n.id},k.createElement(O.TableCell,{sx:n.validName?null:We.errorText},n.license.product),k.createElement(O.TableCell,{sx:n.validVersion?null:We.errorText},n.license.version),k.createElement(O.TableCell,{sx:n.validUuid?null:We.errorText},n.license.uuid||"--"),k.createElement(O.TableCell,{sx:n.validTill?null:We.errorText},n.license.validTill&&n.license.validTill!=="0000-00-00 00:00:00"?new Date(n.license.validTill).toLocaleDateString():"--"),k.createElement(O.TableCell,null,n.license.invoice!=="free"?n.license.invoice==="MANUALLY_CREATED"?"✓":n.license.invoice:"-"),k.createElement(O.TableCell,null,n.id))))))):(i.push(k.createElement("div",{key:"text1"},j.I18n.t("ra_No one license found in license manager"))),i.push(k.createElement("div",{key:"text2"},j.I18n.t("ra_Please create license"))))),k.createElement(O.Dialog,{open:!0,maxWidth:"xl",fullWidth:this.props.fullWidth!==void 0?this.props.fullWidth:!0,onClick:()=>this.setState({_error:"",allLicenses:null})},k.createElement(O.DialogTitle,null,j.I18n.t("ra_Error")),k.createElement(O.DialogContent,null,k.createElement(O.DialogContentText,null,i)),k.createElement(O.DialogActions,null,k.createElement(O.Button,{variant:"contained",onClick:()=>this.setState({_error:"",allLicenses:null}),color:"primary",autoFocus:!0,startIcon:k.createElement(X.Check,null)},j.I18n.t("ra_Ok"))))}return null}renderMessageDialog(){if(this.state.showLicenseData){const i=[],n=this.state.showLicenseData;return Object.keys(n).forEach(u=>{if(!(n[u]===null||n[u]===void 0))if(typeof n[u]=="object"){const y=n[u];Object.keys(y).forEach(s=>{y[s]!==null&&y[s]!==void 0&&(typeof y[s]=="object"?i.push(k.createElement("div",{key:s},k.createElement("div",{style:We.licLabel},s,":"),JSON.stringify(y[s],null,2))):i.push(k.createElement("div",{key:s},k.createElement("div",{style:We.licLabel},u," -",s,":"),y[s].toString())))})}else i.push(k.createElement("div",{key:u},k.createElement("div",{style:We.licLabel},u.replace(/_/g," "),":"),n[u].toString()))}),i.push(k.createElement("div",{key:"checked"},k.createElement("div",{style:We.licLabel},j.I18n.t("ra_Checked"),":"),this.state.licenseOfflineCheck?j.I18n.t("ra_locally"):j.I18n.t("ra_via internet"))),k.createElement(O.Dialog,{open:!0,onClose:()=>this.setState({showLicenseData:null})},k.createElement(O.DialogTitle,null,k.createElement(O.Box,{component:"span",sx:this.state.result?We.okTitle:We.errorTitle},j.I18n.t("ra_License %s",this.state.result?"OK":"INVALID"))),k.createElement(O.DialogContent,null,this.state.showLinkToProfile?k.createElement(O.Button,{variant:"contained",onClick:()=>window.open("https://iobroker.net/www/account/licenses","_blank")},"https://iobroker.net"):null,this.state._error?k.createElement(O.Box,{component:"div",sx:We.errorText},this.state._error):null,i),k.createElement(O.DialogActions,null,k.createElement(O.Button,{onClick:()=>this.setState({showLicenseData:null,_error:""}),color:"primary",variant:"contained"},j.I18n.t("ra_Close"))))}return null}static parseJwt(i){const u=i.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),y=decodeURIComponent(atob(u).split("").map(s=>`%${`00${s.charCodeAt(0).toString(16)}`.slice(-2)}`).join(""));try{return JSON.parse(y)}catch{return null}}static isVersionValid(i,n,u,y){if(!n||!i)return!0;let s=!0;const[c]=i.split(".");return n.startsWith(">=")?s=parseInt(c,10)>=parseInt(n.substring(2,10)):n.startsWith("<=")?s=parseInt(c,10)<=parseInt(n.substring(2,10)):n.startsWith(">")?s=parseInt(c,10)>parseInt(n.substring(1,10)):n.startsWith("<")?s=parseInt(c,10)<parseInt(n.substring(1,10)):n.startsWith("=")?s=parseInt(c,10)===parseInt(n.substring(1,10)):n.startsWith("==")?s=parseInt(c,10)===parseInt(n.substring(2,10)):n.startsWith("===")&&(s=parseInt(c,10)===parseInt(n.substring(3,10))),!0}async findInLicenseManager(i){var y,s,c,p;const n=await this.props.oContext.socket.getObject("system.licenses"),u=[];if((s=(y=n==null?void 0:n.native)==null?void 0:y.licenses)!=null&&s.length){let o=null;const d=Date.now();let e;if(this.props.schema.uuid){const r=await this.props.oContext.socket.getObject("system.meta.uuid");e=(c=r==null?void 0:r.native)==null?void 0:c.uuid}let t;if(this.props.schema.version){const r=await this.props.oContext.socket.getObject(`system.adapter.${i}`);t=(p=r==null?void 0:r.common)==null?void 0:p.version}n.native.licenses.forEach(r=>{const l=!r.validTill||r.validTill==="0000-00-00 00:00:00"||new Date(r.validTill).getTime()>d,a=(r.product||"").split("."),h=a[1]===i||i==="vis-2"&&a[1]==="vis",f=!e||!r.uuid||r.uuid===e,v=ht.isVersionValid(t,r.version,r.invoice,i);(!o||r.invoice!=="free")&&l&&h&&f&&v&&(o=r),u.push({id:r.id,validName:h,validUuid:f,validVersion:v,validTill:l,license:r})}),o&&(u.find(r=>r.id===o.id).used=!0)}return u}async checkLicense(i,n){var p,o,d;let u;if(this.props.schema.uuid){const e=await this.props.oContext.socket.getObject("system.meta.uuid");u=(p=e==null?void 0:e.native)==null?void 0:p.uuid}let y;if(this.props.schema.version){const e=await this.props.oContext.socket.getObject(`system.adapter.${n}`);y=(o=e==null?void 0:e.common)==null?void 0:o.version}const s=new AbortController;let c=setTimeout(()=>{c=null,s.abort()},5e3);try{const e=await window.fetch("https://iobroker.net/api/v1/public/cert/",{method:"POST",body:JSON.stringify({json:i,uuid:u}),headers:{"Content-Type":"text/plain"},signal:s.signal});c&&clearTimeout(c);const t=await e.text();let r;try{r=JSON.parse(t)}catch{}if(r!=null&&r.error)try{const l=ht.parseJwt(i),a=j.I18n.t(`ra_${l.error||r.error||"Unknown error"}`).replace(/^ra_/,"");return this.setState({_error:a,licenseOfflineCheck:!1,showLicenseData:l,result:!1,running:!1})}catch{return console.log("Cannot parse license"),this.setState({_error:r.error,result:!1,running:!1})}else{let l=null;try{l=ht.parseJwt(i)}catch{}if(r){const a=r.validTill||r.valid_till;if(a&&a!=="0000-00-00 00:00:00"&&new Date(a).getTime()<Date.now())return this.setState({_error:j.I18n.t("ra_License expired on %s",new Date(a).toLocaleString()),licenseOfflineCheck:!1,showLicenseData:l,result:!1,running:!1});const h=(r.name||"").split(".");return h[1]===n||h[1]==="vis"&&n==="vis-2"?u&&!r.uuid&&n==="vis-2"?this.setState({_error:j.I18n.t("ra_License must be converted",r.uuid),showLinkToProfile:!0,licenseOfflineCheck:!1,showLicenseData:l,result:!1,running:!1}):u&&r.uuid&&r.uuid!==u?this.setState({_error:j.I18n.t('ra_Serial number (UUID) "%s" in license is for other device.',r.uuid),licenseOfflineCheck:!1,showLicenseData:l,result:!1,running:!1}):ht.isVersionValid(y,r.version,r.invoice,n)?this.setState({licenseOfflineCheck:!1,showLicenseData:l,result:!0,running:!1}):this.setState({_error:j.I18n.t("ra_License is for version %s, but required version is %s",r.version,this.props.schema.version),licenseOfflineCheck:!1,showLicenseData:l,result:!1,running:!1}):this.setState({_error:j.I18n.t('ra_License for other product "%s"',r.name),licenseOfflineCheck:!1,showLicenseData:l,result:!1,running:!1})}throw new Error("ra_Invalid answer from server")}}catch(e){if(((d=e==null?void 0:e.response)==null?void 0:d.status)===404)return this.setState({_error:j.I18n.t("ra_License does not exist"),result:!1,running:!1});try{const t=ht.parseJwt(i),r=(t.name||"").split(".");return t.valid_till&&t.valid_till!=="0000-00-00 00:00:00"&&new Date(t.valid_till).getTime()<Date.now()?this.setState({_error:j.I18n.t("ra_License expired on %s",new Date(t.valid_till).toLocaleString()),showLicenseData:t,licenseOfflineCheck:!0,running:!1,result:!1}):r[1]===n?u&&t.uuid&&t.uuid!==u?this.setState({_error:j.I18n.t('ra_Serial number (UUID) "%s" in license is for other device.',t.uuid),showLicenseData:t,licenseOfflineCheck:!0,result:!1,running:!1}):ht.isVersionValid(y,t.version,t.invoice,n)?this.setState({running:!1,result:!0,licenseOfflineCheck:!0,showLicenseData:t}):this.setState({_error:j.I18n.t("ra_License is for version %s, but required version is %s",t.version,this.props.schema.version),licenseOfflineCheck:!0,showLicenseData:t,result:!1,running:!1}):this.setState({_error:j.I18n.t('ra_License for other product "%s"',t.name),licenseOfflineCheck:!0,showLicenseData:t,result:!1,running:!1})}catch{return this.setState({_error:j.I18n.t("ra_Cannot decode license"),result:!1,licenseOfflineCheck:!0,running:!1})}}}renderAskForUpdate(){return this.state.askForUpdate?k.createElement(j.DialogConfirm,{text:j.I18n.t("ra_License not found in license manager. Do you want to read licenses from iobroker.net?"),ok:j.I18n.t("ra_Yes"),onClose:async i=>{if(i){this.setState({askForUpdate:!1});try{await this.props.oContext.socket.updateLicenses(null,null)}catch(n){window.alert(j.I18n.t("ra_Cannot read licenses: %s",n));return}await this._onClick(!0)}else this.setState({askForUpdate:!1,running:!1})}}):null}async _onClick(i){const n=this.props.oContext.adapterName==="vis-2"?"vis":this.props.oContext.adapterName;this.setState({running:!0});let u,y;if(this.props.data.useLicenseManager){if(y=await this.findInLicenseManager(n),u=y.find(s=>s.used),u&&(u=u.license.json),!u&&!i){this.setState({askForUpdate:!0});return}}else u=this.props.data.license;u?await this.checkLicense(u,n):this.props.data.useLicenseManager?this.setState({_error:j.I18n.t("ra_Suitable license not found in license manager"),result:!1,running:!1,allLicenses:y}):this.setState({_error:j.I18n.t("ra_Please enter the license"),result:!1,running:!1})}renderItem(){return k.createElement("div",{style:We.fullWidth},k.createElement(O.Button,{variant:this.props.schema.variant||"outlined",color:this.props.schema.color||"primary",style:We.fullWidth,disabled:!this.props.data.license&&!this.props.data.useLicenseManager||this.state.running,startIcon:k.createElement(X.Send,null),onClick:()=>this._onClick()},this.state.running?k.createElement(O.CircularProgress,{size:20,style:{marginRight:8}}):null,this.getText(this.props.schema.label||"ra_Check license",this.props.schema.noTranslation)),this.renderMessageDialog(),this.renderErrorDialog(),this.renderAskForUpdate())}}class Ns extends G{renderItem(i,n){const u=G.getValue(this.props.data,this.props.attr),y=Array.isArray(u);return k.createElement(O.FormControl,{style:{width:"100%"},variant:"standard"},k.createElement(O.FormControlLabel,{onClick:s=>{if(s.preventDefault(),s.stopPropagation(),!n){const c=this.onChange(this.props.attr,!u);c instanceof Promise&&c.catch(p=>console.error(`Cannot set value: ${p}`))}},control:k.createElement(O.Checkbox,{indeterminate:y,checked:!!u,onChange:s=>{let c;y?c=this.onChange(this.props.attr,!0):c=this.onChange(this.props.attr,s.target.checked),c instanceof Promise&&c.catch(p=>console.error(`Cannot set value: ${p}`))},disabled:n||this.props.schema.readOnly}),label:this.getText(this.props.schema.label)}),k.createElement(O.FormHelperText,{style:{color:"red"}},i?this.props.schema.validatorErrorText?j.I18n.t(this.props.schema.validatorErrorText):j.I18n.t("ra_Error"):null),this.props.schema.help?k.createElement(O.FormHelperText,null,this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null)}}const Bs={standard:O.Input,filled:is,outlined:O.OutlinedInput},Ps=L=>{const i=L.palette.mode==="light",n=i?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return{root:{},inputRoot:{display:"inline-flex",flexWrap:"wrap",flex:1,marginTop:0,minWidth:70,"&.mui-variant-outlined,&.mui-variant-filled":{boxSizing:"border-box"},"&.mui-variant-outlined":{paddingTop:"14px"},"&.mui-variant-filled":{paddingTop:"28px"}},input:{display:"inline-block",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",appearance:"none",WebkitTapHighlightColor:"rgba(0,0,0,0)",float:"left",flex:1},chipContainer:{display:"flex",flexFlow:"row wrap",alignItems:"center",cursor:"text",marginBottom:"-2px",minHeight:40},outlined:{"& input":{height:16,paddingTop:"4px",paddingBottom:"12px",marginTop:"4px",marginBottom:"4px"}},standard:{marginTop:"18px"},filled:{"& input":{height:22,marginBottom:"4px",marginTop:"4px",paddingTop:0},"$marginDense & input":{height:26}},labeled:{},label:{top:4,"&$outlined&:not($labelShrink)":{top:2,"$marginDense &":{top:5}},"&$filled&:not($labelShrink)":{top:15,"$marginDense &":{top:20}}},labelShrink:{top:0},helperText:{marginBottom:-20},focused:{},disabled:{},underline:{"&:after":{borderBottom:`2px solid ${L.palette.primary[i?"dark":"light"]}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:L.transitions.create("transform",{duration:L.transitions.duration.shorter,easing:L.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:L.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:L.transitions.create("border-bottom-color",{duration:L.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:not($disabled):not($focused):not($error):before":{borderBottom:`2px solid ${L.palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},"&$disabled:before":{borderBottomStyle:"dotted"}},error:{"&:after":{backgroundColor:L.palette.error.main,transform:"scaleX(1)"}},chip:{margin:"0 8px 8px 0",float:"left"},marginDense:{}}},rn={BACKSPACE:8,DELETE:46,LEFT_ARROW:37,RIGHT_ARROW:39},Ws=({value:L,isFocused:i,isDisabled:n,isReadOnly:u,handleClick:y,handleDelete:s,style:c},p)=>k.createElement(O.Chip,{key:p,style:{...c,pointerEvents:n||u?"none":void 0,backgroundColor:i?rs[300]:void 0},onClick:y,onDelete:s,label:L});class Hs extends k.Component{labelRef;labelNode=null;input;newChipKeyCodes;newChipKeys;actualInput=null;inputBlurTimeout=null;_keyPressed;_preventChipCreation;styles={};styleTheme=null;constructor(i){super(i),this.state={chips:i.defaultValue||[],focusedChip:null,inputValue:"",isFocused:!1,chipsUpdated:!1,prevPropsValue:[],variant:this.props.variant||"standard"},this.newChipKeyCodes=i.newChipKeyCodes||[13],this.newChipKeys=i.newChipKeys||["Enter"],this.labelRef=k.createRef(),this.input=k.createRef()}componentDidMount(){this.state.variant==="outlined"&&(this.labelNode=ns.findDOMNode(this.labelRef.current),this.forceUpdate())}componentWillUnmount(){this.inputBlurTimeout&&clearTimeout(this.inputBlurTimeout)}static getDerivedStateFromProps(i,n){let u=null;return i.value&&i.value.length!==n.prevPropsValue.length&&(u={prevPropsValue:i.value},i.clearInputValueOnChange&&(u.inputValue="")),i.clearInputValueOnChange&&i.value&&i.value.length!==n.prevPropsValue.length&&(u={prevPropsValue:i.value,inputValue:""}),i.disabled&&(u={...u,focusedChip:null}),!n.chipsUpdated&&i.defaultValue&&(u={...u,chips:i.defaultValue}),u}focus=()=>{var i;(i=this.actualInput)==null||i.focus(),this.state.focusedChip&&this.setState({focusedChip:null})};handleInputBlur=i=>{this.props.onBlur&&this.props.onBlur(i),this.setState({isFocused:!1}),this.state.focusedChip&&this.setState({focusedChip:null});const n=i.target.value;let u;switch(this.props.blurBehavior||"clear"){case"add-or-clear":u={clearInputOnFail:!0};case"add":if(this.props.delayBeforeAdd){const y=(this.props.value||this.state.chips).length;this.inputBlurTimeout=setTimeout(()=>{const s=(this.props.value||this.state.chips).length;y===s?this.handleAddChip(n,u):this.clearInput()},150)}else this.handleAddChip(n,u);break;case"clear":this.clearInput();break}};handleInputFocus=i=>{this.setState({isFocused:!0}),this.props.onFocus&&this.props.onFocus(i)};handleKeyDown=i=>{const{focusedChip:n}=this.state;if(this._keyPressed=!1,this._preventChipCreation=!1,this.props.onKeyDown&&(this.props.onKeyDown(i),i.isDefaultPrevented()))return;const u=this.props.value||this.state.chips;if(this.newChipKeyCodes.includes(i.keyCode)||this.newChipKeys.includes(i.key)){this.handleAddChip(i.target.value)!==!1&&i.preventDefault();return}switch(i.keyCode){case rn.BACKSPACE:i.target.value===""&&(n?(this.handleDeleteChip(u[n],n),n&&this.setState({focusedChip:n-1})):this.setState({focusedChip:u.length-1}));break;case rn.DELETE:i.target.value===""&&n&&(this.handleDeleteChip(u[n],n),n<=u.length-1&&this.setState({focusedChip:n}));break;case rn.LEFT_ARROW:n===null&&i.target.value===""&&u.length?this.setState({focusedChip:u.length-1}):n!==null&&n>0&&this.setState({focusedChip:n-1});break;case rn.RIGHT_ARROW:n!==null&&n<u.length-1?this.setState({focusedChip:n+1}):this.setState({focusedChip:null});break;default:this.setState({focusedChip:null});break}};handleKeyUp=i=>{!this._preventChipCreation&&(this.newChipKeyCodes.includes(i.keyCode)||this.newChipKeys.includes(i.key))&&this._keyPressed?this.clearInput():this.updateInput(i.target.value),this.props.onKeyUp&&this.props.onKeyUp(i)};handleUpdateInput=i=>{(this.props.inputValue===null||this.props.inputValue===void 0)&&this.updateInput(i.target.value),this.props.onUpdateInput&&this.props.onUpdateInput(i)};handleAddChip(i,n){if(this.props.onBeforeAdd&&!this.props.onBeforeAdd(i))return this._preventChipCreation=!0,n&&n.clearInputOnFail&&this.clearInput(),!1;this.clearInput();const u=this.props.value||this.state.chips;return i.trim().length?((this.props.allowDuplicates||!u.includes(i))&&(this.props.value&&this.props.onAdd?this.props.onAdd(i):this.updateChips([...this.state.chips,i])),!0):!1}handleDeleteChip(i,n){if(this.props.value)this.props.onDelete&&this.props.onDelete(i,n);else{const u=this.state.chips.slice();if(u.splice(n,1)){let s=this.state.focusedChip;this.state.focusedChip===n?s=null:this.state.focusedChip>n&&(s=this.state.focusedChip-1),this.updateChips(u,{focusedChip:s})}}}updateChips(i,n={}){this.setState({chips:i,chipsUpdated:!0,...n}),this.props.onChange&&this.props.onChange(i)}clearInput(){this.updateInput("")}updateInput(i){this.setState({inputValue:i})}setActualInputRef=i=>{this.actualInput=i,this.props.inputRef&&this.props.inputRef(i)};render(){const{alwaysShowPlaceholder:i,chipRenderer:n=Ws,className:u,disabled:y,disableUnderline:s,error:c,FormHelperTextProps:p,fullWidth:o,fullWidthInput:d,helperText:e,id:t,InputProps:r={},InputLabelProps:l={},inputValue:a,label:h,placeholder:f,readOnly:v,required:b,rootRef:A,value:D,margin:E}=this.props,g=this.state.variant;this.styleTheme!==this.props.theme.palette.mode&&(this.styleTheme=this.props.theme.palette.mode,this.styles=j.Utils.getStyle(this.props.theme,Ps));let S=D||this.state.chips||[];Array.isArray(S)||(S=(S||"").toString().split(/[,\s]+/).map(C=>C.trim()));const $=a??this.state.inputValue,_=(this.props.value||$).length||$.length,T=typeof l.shrink=="boolean"?l.shrink:h!==null&&(_||this.state.isFocused||S.length),I=S.map((C,x)=>n({value:C,isDisabled:!!y,isReadOnly:v,isFocused:this.state.focusedChip===x,handleClick:()=>this.setState({focusedChip:x}),handleDelete:()=>this.handleDeleteChip(C,x),style:this.styles.chip},x.toString())),w={};g==="outlined"&&(w.notched=!!T,w.labelWidth=T&&this.labelNode&&this.labelNode.offsetWidth||0),g!=="standard"?w.startAdornment=I:r.disableUnderline=!0;const m=Bs[g];return k.createElement(O.FormControl,{ref:A,fullWidth:o,className:u,sx:{...this.styles.root,...E==="dense"?this.styles.marginDense:{}},error:c,required:S.length>0?void 0:b,onClick:this.focus,disabled:y,variant:g,component:"div",margin:E},h&&k.createElement(O.InputLabel,{htmlFor:t,sx:{"&.MuiInputLabel-root":this.styles.label,"&.MuiInputLabel-shrink":this.styles.labelShrink},shrink:!!T,focused:this.state.isFocused,variant:g,ref:this.labelRef,required:b,component:"label",...l},h),k.createElement(O.Box,{component:"div",id:"input-chip-container",sx:{...this.styles[g],...this.styles.chipContainer,...this.state.isFocused?this.styles.focused:void 0,...!s&&g==="standard"?this.styles.underline:void 0,...y?this.styles.disabled:void 0,...h?this.styles.labeled:void 0,...c?this.styles.error:void 0}},g==="standard"&&I,k.createElement(m,{ref:this.input,className:`mui-variant-${this.styles[g]} ${h?"mui-chip-with-label":"mui-chip-no-label"}`,sx:{"&.MuiInputBase-input":{...this.styles.input,...this.styles[g]},"&.MuiInputBase-root":{...this.styles.inputRoot}},id:t,value:$,onChange:this.handleUpdateInput,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur,inputRef:this.setActualInputRef,disabled:y,fullWidth:d,placeholder:!_&&(T||h===null||h===void 0)||i?f:null,readOnly:v,...r,...w})),e&&k.createElement(O.FormHelperText,{...p,className:p==null?void 0:p.className,style:this.styles.helperText},e))}}class fi extends G{componentDidMount(){super.componentDidMount();const{data:i,attr:n}=this.props,u=G.getValue(i,n);if(this.props.schema.delimiter&&typeof u=="string"){const y=u.split(this.props.schema.delimiter).map(s=>s.trim()).filter(s=>s);this.setState({value:y})}else this.setState({value:u||[]})}renderItem(i,n){const{attr:u,schema:y}=this.props,{value:s}=this.state;return k.createElement(O.FormControl,{fullWidth:!0,variant:"standard"},k.createElement(Hs,{value:s,disabled:!!n,label:this.getText(y.label),error:!!i,onAdd:c=>{const p=JSON.parse(JSON.stringify(s));p.push(c),this.setState({value:p},()=>{let o;this.props.schema.delimiter?o=this.onChange(u,p.join(`${this.props.schema.delimiter} `)):o=this.onChange(u,p),o instanceof Promise&&o.catch(d=>console.error(d))})},theme:this.props.oContext.theme,onDelete:(c,p)=>{const o=JSON.parse(JSON.stringify(s));o.splice(p,1),this.setState({value:o},()=>{let d;this.props.schema.delimiter?d=this.onChange(u,o.join(`${this.props.schema.delimiter} `)):d=this.onChange(u,o),d instanceof Promise&&d.catch(e=>console.error(e))})}}),k.createElement(O.FormHelperText,null,j.I18n.t("ra_Press ENTER Key to add new item")),this.props.schema.help?k.createElement(O.FormHelperText,null,this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null)}}class zs extends G{renderColorDialog(){return!!this.state.showColorDialog&&k.createElement(O.Dialog,{onClose:()=>this.setState({showColorDialog:!1}),open:this.state.showColorDialog},k.createElement(ss,{color:this.state.colorDialogValue,onChange:i=>this.setState({colorDialogValue:i.hex},()=>this.onChange(this.props.attr,this.state.colorDialogValue))}))}renderItem(i,n){const u=G.getValue(this.props.data,this.props.attr);let y=j.Utils.isUseBright(u,null);return y===null&&(y=void 0),k.createElement(k.Fragment,null,this.renderColorDialog(),k.createElement(O.TextField,{variant:"standard",disabled:!!n,style:{minWidth:100,width:"calc(100% - 8px)"},label:this.getText(this.props.schema.label),value:u||"",onClick:()=>!this.props.schema.readOnly&&this.setState({showColorDialog:!0,colorDialogValue:u||""}),onChange:s=>{const c=s.target.value,p=this.onChange(this.props.attr,c);p instanceof Promise&&p.catch(o=>console.error(`Cannot set value: ${o}`))},slotProps:{htmlInput:{style:{backgroundColor:u,color:y?"#FFF":"#000"},readOnly:this.props.schema.readOnly||!1},input:{endAdornment:!this.props.schema.readOnly&&u&&!this.props.schema.noClearButton?k.createElement(O.IconButton,{size:"small",onClick:s=>{s.stopPropagation();const c=this.onChange(this.props.attr,"");c instanceof Promise&&c.catch(p=>console.error(`Cannot set value: ${p}`))}},k.createElement(X.Close,null)):void 0},inputLabel:{shrink:!0}}}))}}const Ln={width:{width:"calc(100% - 85px)"},width50:{width:120,marginRight:5}};class js extends G{componentDidMount(){super.componentDidMount();const i=G.getValue(this.props.data,this.props.attr);this.setState({value:i});const n={};this.props.schema.useSystemName&&(n.useSystem=!!G.getValue(this.props.data,this.props.schema.useSystemName)),this.props.schema.longitudeName&&this.props.schema.latitudeName?(n.longitude=G.getValue(this.props.data,this.props.schema.longitudeName),n.latitude=G.getValue(this.props.data,this.props.schema.latitudeName),!n.longitude&&!n.latitude&&this.props.schema.autoInit&&setTimeout(()=>this.getCoordinates(),300)):!G.getValue(this.props.data,this.props.attr)&&this.props.schema.autoInit&&setTimeout(()=>this.getCoordinates(),300),Object.keys(n).length&&setTimeout(()=>this.setState(n),50)}async getSystemCoordinates(){const i=await this.props.oContext.socket.getCompactSystemConfig();if(i!=null&&i.common&&(i.common.longitude||i.common.latitude))if(window.alert(j.I18n.t("ra_Used system settings")),this.props.schema.longitudeName&&this.props.schema.latitudeName)this.setState({longitude:i.common.longitude,latitude:i.common.latitude},async()=>{await this.onChange(this.props.schema.longitudeName,i.common.longitude),await this.onChange(this.props.schema.latitudeName,i.common.latitude)});else{const n=i.common.latitude+(this.props.schema.divider||",")+i.common.longitude;this.setState({value:n},()=>{const u=this.onChange(this.props.attr,n);u instanceof Promise&&u.catch(y=>console.error(`Cannot set value: ${y}`))})}else window.alert(j.I18n.t("ra_Cannot determine position: System settings are empty and GPS detection is disabled in browser"))}getCoordinates(){navigator.geolocation?navigator.geolocation.getCurrentPosition(async i=>{if(i!=null&&i.coords)if(this.props.schema.longitudeName&&this.props.schema.latitudeName)this.setState({longitude:i.coords.longitude,latitude:i.coords.latitude},async()=>{await this.onChange(this.props.schema.longitudeName,i.coords.longitude||""),await this.onChange(this.props.schema.latitudeName,i.coords.latitude||"")});else{const n=i.coords.latitude+(this.props.schema.divider||",")+i.coords.longitude;this.setState({value:n},()=>{const u=this.onChange(this.props.attr,n);u instanceof Promise&&u.catch(y=>console.error(`Cannot set value: ${y}`))})}else await this.getSystemCoordinates()},async i=>{console.error(`Cannot determine coordinates from browser: ${i.message}`),await this.getSystemCoordinates()}):this.getSystemCoordinates().catch(i=>{console.error(`Cannot determine coordinates: ${i}`)})}renderItem(i,n){return k.createElement(k.Fragment,null,this.props.schema.useSystemName?k.createElement(O.FormControlLabel,{control:k.createElement(O.Checkbox,{checked:!!this.state.useSystem,onChange:u=>{const y=u.target.checked;y&&this.getSystemCoordinates().catch(s=>console.error(`Cannot determine coordinates: ${s}`)),this.setState({useSystem:y},()=>this.onChange(this.props.schema.useSystemName,y))}}),label:j.I18n.t("ra_Use system settings for position")}):null,this.props.schema.longitudeName&&this.props.schema.latitudeName?k.createElement(O.TextField,{variant:"standard",style:Ln.width50,value:this.state.longitude??"",error:!!i,disabled:this.state.useSystem||!!n,onChange:u=>{const y=u.target.value;this.setState({longitude:y},()=>{const s=this.onChange(this.props.schema.longitudeName,(y||"").trim());s instanceof Promise&&s.catch(c=>console.error(`Cannot set value: ${c}`))})},label:j.I18n.t("ra_Longitude")}):null,this.props.schema.longitudeName&&this.props.schema.latitudeName?k.createElement(O.TextField,{variant:"standard",style:Ln.width50,value:this.state.latitude??"",error:!!i,disabled:this.state.useSystem||!!n,onChange:u=>{const y=u.target.value;this.setState({latitude:y},()=>this.onChange(this.props.schema.latitudeName,(y||"").trim()))},label:j.I18n.t("ra_Latitude")}):null,!this.props.schema.longitudeName||!this.props.schema.latitudeName?k.createElement(O.TextField,{variant:"standard",style:Ln.width,value:this.state.value===null||this.state.value===void 0?"":this.state.value,error:!!i,disabled:!!n,slotProps:{htmlInput:{maxLength:this.props.schema.maxLength||this.props.schema.max||void 0,readOnly:this.state.useSystem}},onChange:u=>{const y=u.target.value;this.setState({value:y},()=>this.onChange(this.props.attr,(y||"").trim()))},placeholder:this.getText(this.props.schema.placeholder),label:this.getText(this.props.schema.label),helperText:this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)}):null,this.state.useSystem?null:k.createElement(O.Fab,{size:"small",onClick:()=>this.getCoordinates(),title:j.I18n.t("ra_Take browser position"),style:{marginRight:4}},k.createElement(X.LocationOn,null)),this.state.useSystem?null:k.createElement(O.Fab,{size:"small",onClick:()=>this.getSystemCoordinates(),title:j.I18n.t("ra_Take position from system settings")},k.createElement(X.GpsFixed,null)))}}dn.init({name:"iobroker_admin",shared:{"@iobroker/adapter-react-v5":{lib:()=>ts,version:"*"},"@mui/icons-material":{lib:()=>es,version:"*"},"@iobroker/json-config":{lib:()=>ls,version:"*"}},remotes:[]});class Vt extends G{static runningLoads={};constructor(i){super(i),Object.assign(this.state,{Component:null,error:""})}async componentDidMount(){if(!this.props.schema.url){console.error("URL is empty. Cannot load custom component!"),this.setState({error:"URL is empty. Cannot load custom component!"});return}let i;this.props.schema.url.startsWith("./")?i=`${window.location.protocol}//${window.location.host}${this.props.schema.url.replace(/^\./,"")}`:i=`${window.location.protocol}//${window.location.host}/adapter/${this.props.oContext.adapterName}/${this.props.schema.url}`;const[n,u,...y]=this.props.schema.name.split("/"),s=y.join("/");if(!i){console.error('Cannot find URL for custom component! Please define "url" as "custom/customComponents.js" in the schema');return}if(!n||!u||!s){console.error('Invalid format of "name"! Please define "name" as "ConfigCustomBackItUpSet/Components/AdapterExist" in the schema');return}let c=Vt.runningLoads[`${i}!${u}`];if(!(c instanceof Promise)){let p;if(this.props.schema.i18n===!0){const o=i.lastIndexOf("/");let d;o!==-1?d=i.substring(0,o):d=i;const e=j.I18n.getLanguage(),t=`${d}/i18n/${e}.json`;p=fetch(t).then(r=>r.json()).then(r=>j.I18n.extendTranslations(r,e)).catch(r=>{if(e!=="en"){fetch(`${d}/i18n/en.json`).then(l=>l.json()).then(l=>j.I18n.extendTranslations(l,e)).catch(l=>console.log(`Cannot load i18n "${t}": ${l}`));return}console.log(`Cannot load i18n "${t}": ${r}`)})}else if(this.props.schema.i18n&&typeof this.props.schema.i18n=="object")try{j.I18n.extendTranslations(this.props.schema.i18n)}catch(o){console.error(`Cannot import i18n: ${o}`)}try{console.log(i,n,u,s),dn.registerRemotes([{name:n,entry:i,type:this.props.schema.bundlerType||void 0}]),c=dn.loadRemote(`${n}/${u}`),p instanceof Promise&&(c=Promise.all([c,p]).then(o=>o[0])),Vt.runningLoads[`${i}!${u}`]=c}catch(o){console.error(o),this.setState({error:`Cannot import from ${this.props.schema.url}: ${o}`})}}try{const p=(await c).default;if(p!=null&&p[s]){const o=p[s];setTimeout(()=>this.setState({Component:o}),2e3)}else{const o=Object.keys(p||{});console.error("URL is empty. Cannot load custom component!"),this.setState({error:`Component ${this.props.schema.name} not found in ${this.props.schema.url}. Found: ${o.join(", ")}`})}}catch(p){console.error(p),this.setState({error:`Cannot import from ${this.props.schema.url}: ${p}`})}}render(){const i=this.state.Component,n=this.props.schema||{};let u=i?k.createElement(i,{...this.props,socket:this.props.oContext.socket,theme:this.props.oContext.theme,themeType:this.props.oContext.themeType,instance:this.props.oContext.instance,adapterName:this.props.oContext.adapterName,systemConfig:this.props.oContext.systemConfig,forceUpdate:this.props.oContext.forceUpdate}):this.state.error?k.createElement("div",null,this.state.error):k.createElement(O.LinearProgress,null);return n.newLine?k.createElement(k.Fragment,null,k.createElement("div",{style:{flexBasis:"100%",height:0}}),u):u}}const{loadShare:Us}=dn,{initPromise:Vs}=os,Gs=Vs.then(L=>Us("@mui/x-date-pickers",{customShareInfo:{shareConfig:{singleton:!0,strictVersion:!1,requiredVersion:"*"}}})),Ks=await Gs.then(L=>L());var Ui=Ks;class Js extends G{componentDidMount(){super.componentDidMount();const i=G.getValue(this.props.data,this.props.attr);this.setState({value:i})}renderItem(i,n){return k.createElement(Ui.DatePicker,{sx:u=>({width:"100%",borderBottom:`1px solid ${u.palette.text.primary}`,"& fieldset":{display:"none"},"& input":{padding:`${u.spacing(1.5)} 0 4px 0`},"& .MuiInputAdornment-root":{marginLeft:0,marginTop:1},"& label":{transform:"translate(0px, -9px) scale(0.75)"}}),format:this.props.oContext.systemConfig.dateFormat.toLowerCase().replace("mm","MM"),disabled:!!n,value:this.state.value,onChange:u=>{this.setState({value:u},()=>this.onChange(this.props.attr,this.state.value))},label:this.getText(this.props.schema.label)})}}class Ys extends G{renderItem(){if(!this.props.schema)return null;if(this.props.oContext.DeviceManager){const n=this.props.oContext.DeviceManager;return k.createElement(n,{uploadImagesToInstance:`${this.props.oContext.adapterName}.${this.props.oContext.instance}`,title:this.getText(this.props.schema.label),socket:this.props.oContext.socket,selectedInstance:`${this.props.oContext.adapterName}.${this.props.oContext.instance}`,themeName:this.props.themeName,theme:this.props.oContext.theme,themeType:this.props.oContext.themeType,isFloatComma:this.props.oContext.isFloatComma,dateFormat:this.props.oContext.dateFormat})}return k.createElement("div",null,"DeviceManager not found")}}const Ke={fullWidth:{width:"100%"},uploadDiv:{position:"relative",width:"100%"},uploadDivDragging:{opacity:1,background:"rgba(128,255,128,0.1)"},uploadCenterDiv:{margin:5,border:"3px dashed grey",borderRadius:5,width:"100%",height:"100%",position:"absolute",display:"flex"},uploadCenterIcon:{paddingTop:10,width:48,height:48},uploadCenterText:{fontSize:16},uploadCenterTextAndIcon:{textAlign:"center",position:"absolute",top:0,bottom:0,left:0,right:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},disabledOpacity:{opacity:.3,cursor:"default"},error:{border:"2px solid red"},deleteButton:{},selectedImage:{height:40,width:40,display:"inline-block",marginRight:8}},Qs=["jpg","jpeg","svg","png","webp","gif","apng","avif","webp"],Xs=["mp3","ogg","wav","aac"],Zs=["avi","mp4","mov"],qs=["txt","log","html","htm"],eo=["json","js","ts"];class vn extends G{dropzoneRef;imagePrefix;objectID;path;constructor(i){super(i),this.dropzoneRef=k.createRef(),this.imagePrefix=this.props.oContext.imagePrefix===void 0?"./files":this.props.oContext.imagePrefix}componentDidMount(){super.componentDidMount(),this.objectID=(this.props.schema.objectID||"0_userdata.0").replace("%INSTANCE%",(this.props.oContext.instance||0).toString()),this.path=this.props.schema.upload,this.path&&(this.path==="/"?this.path="":this.path.endsWith("/")||(this.path=`${this.path}/`)),this.updateFiles().then(()=>{const i=G.getValue(this.props.data,this.props.attr);this.setState({value:i}),this.props.oContext.socket.subscribeFiles(this.objectID,`${this.path}/*`,this.onFolderChanged).catch(n=>console.error(`Cannot subscribe: ${n}`))})}onFolderChanged=(i,n)=>{this.path&&n.startsWith(this.path)&&this.updateFiles().catch(u=>console.error(`Cannot update files: ${u}`))};componentWillUnmount(){this.props.oContext.socket.subscribeFiles(this.objectID,`${this.path}/*`,this.onFolderChanged).catch(i=>console.error(`Cannot subscribe: ${i}`)),super.componentWillUnmount()}async updateFiles(){const i=await this.readFiles(this.props.schema.pattern);await new Promise(n=>this.setState({files:i},n))}async readFolder(i,n,u){try{const y=await this.props.oContext.socket.readDir(this.objectID,i.replace(/^\//,"")||null);for(let s=0;s<y.length;s++){const c=y[s];if(c.isDir)await this.readFolder(`${i+c.file}/`,n,u);else{let p=!1;u==="*.*"&&c.file.includes(".")||!u||u==="*"||u===".*"&&c.file.startsWith(".")?p=!0:p=new RegExp(`^${u.replace(/\./g,"\\.").replace(/\*/g,".*")}$`).test(c.file),p&&n.push({name:i+c.file,size:c.stats?j.Utils.formatBytes(c.stats.size):"--"})}}}catch(y){console.error(`Cannot read "${i}": ${y}`)}return n}async readFiles(i){const n=[];i=i||this.props.schema.pattern,i||(i="**/*.*");let u;const y=i.lastIndexOf("/");if(y===-1?u=i:u=i.substring(y+1),i.startsWith("**"))await this.readFolder("/",n,u);else{const s=i.lastIndexOf("/");if(s===-1)await this.readFolder("/",n,u);else{const c=i.substring(0,s+1);await this.readFolder(c,n,u)}}return n}onDrop(i){const n=i[0],u=new FileReader,y=this.props.schema.maxSize||2*1024*1024;u.onabort=()=>console.log("file reading was aborted"),u.onerror=()=>console.log("file reading has failed"),u.onload=()=>{if(n.size>y){window.alert(j.I18n.t("File is too big. Max %sk allowed. Try use SVG.",Math.round(y/1024)));return}this.props.oContext.socket.writeFile64(this.objectID,this.path+n.name,u.result).then(()=>this.updateFiles()).then(()=>this.setState({value:this.path+n.name},()=>this.onChange(this.props.attr,this.path+n.name))).catch(s=>window.alert(`Cannot upload file: ${s}`))},u.readAsArrayBuffer(n)}renderDeleteDialog(){return this.state.deleteFile?k.createElement(j.DialogConfirm,{title:j.I18n.t("ra_Are you sure?"),text:j.I18n.t("ra_File will be deleted"),ok:j.I18n.t("ra_Delete"),cancel:j.I18n.t("ra_Cancel"),onClose:i=>{const n=this.state.deleteFile;this.setState({deleteFile:""},()=>{i&&this.props.oContext.socket.deleteFile(this.objectID,n).then(()=>this.updateFiles()).catch(u=>window.alert(`Cannot delete file: ${u}`))})}}):null}static base64ToArrayBuffer(i){const n=window.atob(i),u=n.length,y=new Uint8Array(u);for(let s=0;s<u;s++)y[s]=n.charCodeAt(s);return y.buffer}loadFile(){return this.props.oContext.socket.readFile(this.objectID,this.state.value,!0)}play(){this.loadFile().then(i=>{if(typeof AudioContext<"u"){const n=new AudioContext,u=vn.base64ToArrayBuffer(i.file);n.decodeAudioData(u,y=>{const s=n.createBufferSource();s.buffer=y,s.connect(n.destination),s.start(0)},y=>window.alert(`Cannot play: ${y.message}`))}})}getFileIcon(i){return i!=null&&i.extension?Qs.includes(i.extension)?k.createElement("div",{style:{...Ke.selectedImage,backgroundImage:`url(${this.imagePrefix}/${this.objectID}/${i.value})`,backgroundSize:"contain",backgroundRepeat:"no-repeat"}}):Xs.includes(i.extension)?k.createElement(X.MusicNote,null):qs.includes(i.extension)?k.createElement(X.Article,null):Zs.includes(i.extension)?k.createElement(X.Videocam,null):eo.includes(i.extension)?k.createElement(X.Code,null):null:null}renderItem(i,n){if(!this.state.files)return null;const u=[];this.props.schema.withFolder||this.state.files.forEach(e=>{const t=e.name.lastIndexOf("/");if(t===-1)u.includes("/")||u.push("/");else{const r=e.name.substring(0,t+1);u.includes(r)||u.push(r)}});const y=this.state.files.map(e=>({value:e.name,label:!this.props.schema.withFolder&&u.length===1?`${e.name.substring(u[0].length)}`:`${e.name}${this.props.schema.noSize?"":`(${e.size})`}`,extension:e.name.toLowerCase().split(".").pop()}));this.props.schema.noNone||y.unshift({label:j.I18n.t("ra_none"),value:""});const s=y.find(e=>e.value===this.state.value);let c=0;this.props.schema.upload&&c++,this.props.schema.refresh&&c++;const p=this.state.value&&(this.state.value.endsWith(".mp3")||this.state.value.endsWith(".ogg")||this.state.value.endsWith(".wav"));p&&c++;const o=k.createElement("div",{style:Ke.fullWidth},k.createElement(O.FormControl,{variant:"standard",style:{width:`calc(100% - ${c*42}px)`}},this.props.schema.label?k.createElement(O.InputLabel,null,this.getText(this.props.schema.label)):null,k.createElement(O.Select,{variant:"standard",error:!!i,disabled:!!n,value:this.state.value||"_",renderValue:()=>k.createElement(k.Fragment,null,this.getFileIcon(s),k.createElement("span",null,(s==null?void 0:s.label)||"")),onChange:e=>{this.setState({value:e.target.value==="_"?"":e.target.value},()=>this.onChange(this.props.attr,this.state.value))}},y.map(e=>k.createElement(O.MenuItem,{key:e.value,value:e.value},k.createElement(O.ListItemIcon,null,this.getFileIcon(e)),k.createElement(O.ListItemText,null,e.label),this.props.schema.delete&&s.value?k.createElement(O.IconButton,{style:Ke.deleteButton,size:"small",onClick:()=>this.setState({deleteFile:s.value})},k.createElement(X.Delete,null)):null))),this.props.schema.help?k.createElement(O.FormHelperText,null,this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null),this.props.schema.refresh&&k.createElement(O.IconButton,{onClick:()=>this.updateFiles()},k.createElement(X.Refresh,null)),this.props.schema.upload&&k.createElement(O.IconButton,{onClick:()=>{var e;return(e=this.dropzoneRef.current)==null?void 0:e.open()}},k.createElement(X.UploadFile,null)),p&&k.createElement(O.IconButton,{style:{color:"#00FF00"},onClick:()=>this.play()},k.createElement(X.PlayArrow,null)));if(!this.props.schema.upload)return k.createElement(k.Fragment,null,o,this.renderDeleteDialog());let d={"*/*":[]};if(this.props.schema.fileTypes==="image"?d={"image/*":[".png",".jpg",".svg",".gif",".apng",".avif",".webp"]}:this.props.schema.fileTypes==="audio"?d={"audio/*":[".mp3",".ogg",".wav",".mp4"]}:this.props.schema.fileTypes==="text"&&(d={"text/plain":[".txt"]}),this.props.schema.pattern){const e=this.props.schema.pattern.split("/").pop().toLowerCase().replace(/.*\./,"");e==="png"||e==="jpg"||e==="svg"||e==="gif"||e==="apng"||e==="avif"||e==="webp"?d={"image/*":[".png",".jpg",".svg",".gif",".apng",".avif",".webp"]}:e==="mp3"||e==="ogg"||e==="wav"?d={"audio/*":[".mp3",".ogg",".wav",".mp4"]}:e==="ics"?d={"text/calendar":[".ics"]}:e==="txt"?d={"text/plain":[".txt"]}:e==="pem"?d={"text/plain":[".pem"]}:d={"*/*":[`.${e}`]}}return k.createElement(Wi,{ref:this.dropzoneRef,multiple:!1,accept:d,noKeyboard:!0,noClick:!0,maxSize:this.props.schema.maxSize||2*1024*1024,onDragEnter:()=>{this.setState({uploadFile:"dragging"})},onDragLeave:()=>this.setState({uploadFile:!0}),onDrop:(e,t)=>{var r,l,a;this.setState({uploadFile:!1}),e.length?this.onDrop(e):window.alert(((a=(l=(r=t==null?void 0:t[0])==null?void 0:r.errors)==null?void 0:l[0])==null?void 0:a.message)||j.I18n.t("Cannot upload"))}},({getRootProps:e,getInputProps:t})=>k.createElement("div",{style:{...Ke.uploadDiv,...this.state.uploadFile==="dragging"?Ke.uploadDivDragging:void 0,...n?Ke.disabledOpacity:void 0},...e()},k.createElement("input",{...t()}),this.state.uploadFile==="dragging"?k.createElement("div",{style:{...Ke.uploadCenterDiv,...this.state.uploadError?Ke.error:void 0}},k.createElement("div",{style:Ke.uploadCenterTextAndIcon},k.createElement(X.UploadFile,{style:Ke.uploadCenterIcon}),k.createElement("div",{style:Ke.uploadCenterText},this.state.uploadFile==="dragging"?j.I18n.t("ra_Drop file here"):j.I18n.t("ra_Place your files here or click here to open the browse dialog")))):null,o,this.renderDeleteDialog()))}}const sn={fullWidth:{width:"100%"},fullWidthOneButton:{width:"calc(100% - 69px)",marginRight:4},fullWidthIcon:{width:"calc(100% - 119px)",marginRight:4},selectedImage:{height:40,width:40,display:"inline-block",marginRight:8}},to=["jpg","jpeg","svg","png","webp","gif","apng","avif","webp"],no=["mp3","ogg","wav","aac"],io=["avi","mp4","mov"],ro=["txt","log","html","htm"],so=["json","js","ts"];class oo extends G{imagePrefix="../..";componentDidMount(){super.componentDidMount();const i=G.getValue(this.props.data,this.props.attr);this.imagePrefix=this.props.oContext.imagePrefix===void 0?"./files":this.props.oContext.imagePrefix,this.setState({value:i??""})}static getDerivedStateFromProps(i,n){const u=G.getValue(i.data,i.attr);return u==null||u.toString().trim()!==(n.value||"").toString().trim()?{value:u??""}:null}loadFile(){const i=this.state.value.indexOf("/");if(i!==-1){const n=this.state.value.substring(0,i),u=this.state.value.substring(i+1);return this.props.oContext.socket.readFile(n,u,!0)}return Promise.resolve(null)}play(){this.loadFile().then(i=>{if(typeof AudioContext<"u"&&(i!=null&&i.file)){const n=new AudioContext,u=vn.base64ToArrayBuffer(i.file);n.decodeAudioData(u,y=>{const s=n.createBufferSource();s.buffer=y,s.connect(n.destination),s.start(0)},y=>window.alert(`Cannot play: ${y.message}`))}})}getIcon(){const i=this.state.value.split(".").pop().toLowerCase();return to.includes(i)?k.createElement("div",{style:{...sn.selectedImage,backgroundImage:`url(${this.imagePrefix}/${this.state.value})`,backgroundSize:"contain",backgroundRepeat:"no-repeat"}}):no.includes(i)?k.createElement(O.IconButton,{style:{color:"#00FF00"},onClick:()=>this.play()},k.createElement(X.PlayArrow,null)):ro.includes(i)?k.createElement(X.Article,null):io.includes(i)?k.createElement(X.Videocam,null):so.includes(i)?k.createElement(X.Code,null):null}renderFileBrowser(){return this.state.showFileBrowser?k.createElement(j.DialogSelectFile,{imagePrefix:this.props.oContext.imagePrefix,socket:this.props.oContext.socket,selected:this.state.value,onClose:()=>this.setState({showFileBrowser:!1}),onOk:i=>{const n=Array.isArray(i)?i[0]:i;this.setState({value:n},()=>this.onChange(this.props.attr,this.props.schema.trim===!1?n:(n||"").trim()))},selectOnlyFolders:this.props.schema.selectOnlyFolders,allowUpload:this.props.schema.allowUpload,allowDownload:this.props.schema.allowDownload,allowCreateFolder:this.props.schema.allowCreateFolder,allowView:this.props.schema.allowView,showToolbar:this.props.schema.showToolbar,limitPath:this.props.schema.limitPath,theme:this.props.oContext.theme}):null}renderItem(i,n){const u=this.getIcon();return k.createElement("div",{style:sn.fullWidth},u,k.createElement(O.TextField,{variant:"standard",style:u?sn.fullWidthIcon:sn.fullWidthOneButton,value:this.state.value===null||this.state.value===void 0?"":this.state.value,error:!!i,disabled:!!n,slotProps:{htmlInput:{maxLength:this.props.schema.maxLength||this.props.schema.max||void 0,readOnly:!!this.props.schema.disableEdit}},onChange:y=>{const s=y.target.value;this.setState({value:s},()=>this.onChange(this.props.attr,this.props.schema.trim===!1?s:(s||"").trim()))},placeholder:this.getText(this.props.schema.placeholder),label:this.getText(this.props.schema.label),helperText:this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)}),k.createElement(O.Button,{disabled:n,variant:"outlined",onClick:()=>this.setState({showFileBrowser:!0})},"..."),this.renderFileBrowser())}}class ao extends G{componentDidMount(){super.componentDidMount();const i=G.getValue(this.props.data,this.props.attr);this.props.oContext.socket.getEnums("functions").then(n=>{const u=Object.keys(n).map(y=>({value:this.props.schema.short?y.replace("enum.functions.",""):y,label:this.getText(n[y].common.name),obj:n[y]}));this.props.schema.allowDeactivate!==!1&&u.unshift({label:j.I18n.t(G.NONE_LABEL),value:G.NONE_VALUE}),this.setState({value:i,selectOptions:u})})}renderItem(i,n){if(!this.state.selectOptions)return null;const u=this.state.selectOptions.find(y=>y.value===this.state.value);return k.createElement(O.FormControl,{variant:"standard",fullWidth:!0},this.props.schema.label?k.createElement(O.InputLabel,null,this.getText(this.props.schema.label)):null,k.createElement(O.Select,{variant:"standard",error:!!i,disabled:!!n,value:this.state.value||"_",renderValue:()=>u?u.obj?k.createElement(j.TextWithIcon,{value:u.obj,themeType:this.props.oContext.themeType,lang:j.I18n.getLanguage()}):u.label:"",onChange:y=>{this.setState({value:y.target.value==="_"?"":y.target.value},()=>this.onChange(this.props.attr,this.state.value))}},this.state.selectOptions.map(y=>k.createElement(O.MenuItem,{key:y.value,value:y.value,style:y.value===G.DIFFERENT_VALUE?{opacity:.5}:{}},y.obj?k.createElement(j.TextWithIcon,{value:y.obj,themeType:this.props.oContext.themeType,lang:j.I18n.getLanguage()}):y.label))),this.props.schema.help?k.createElement(O.FormHelperText,null,this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null)}}class lo extends G{componentDidMount(){super.componentDidMount(),this.props.oContext.socket.getHostByIp(this.props.common.host).then(i=>{this.props.schema.listenOnAllPorts||(i=i.filter(n=>n.address!=="0.0.0.0"&&n.address!=="::")),this.props.schema.onlyIp4?i=i.filter(n=>n.family==="ipv4"):this.props.schema.onlyIp6&&(i=i.filter(n=>n.family==="ipv6")),this.props.schema.noInternal&&(i=i.filter(n=>!n.internal)),i.forEach(n=>{n.address==="0.0.0.0"?n.name=`[IPv4] 0.0.0.0 - ${j.I18n.t("ra_Listen on all IPs")}`:n.address==="::"&&(n.name=`[IPv6] :: - ${j.I18n.t("ra_Listen on all IPs")}`)}),this.setState({ips:i})}).catch(i=>console.error(i))}renderItem(i,n){var s,c;const u=G.getValue(this.props.data,this.props.attr),y=(s=this.state.ips)==null?void 0:s.find(p=>p.address===u);return k.createElement(O.FormControl,{fullWidth:!0,variant:"standard"},this.state.ips&&this.props.schema.label?k.createElement(O.InputLabel,null,this.getText(this.props.schema.label)):null,this.state.ips?k.createElement(O.Select,{variant:"standard",error:!!i,disabled:!!n,value:u,renderValue:p=>(y==null?void 0:y.name)||p,onChange:p=>this.onChange(this.props.attr,p.target.value)},(c=this.state.ips)==null?void 0:c.map((p,o)=>k.createElement(O.MenuItem,{key:o,value:p.address},p.name))):k.createElement(O.TextField,{fullWidth:!0,variant:"standard",error:!!i,disabled:!!n,value:u,onChange:p=>this.onChange(this.props.attr,p.target.value),label:this.getText(this.props.schema.label)}),this.props.schema.help?k.createElement(O.FormHelperText,null,this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null)}}class uo extends G{initialized=!1;localContext;componentDidMount(){super.componentDidMount(),this.askInstance()}askInstance(){if(this.props.alive){let i=this.props.schema.data;if(i===void 0&&this.props.schema.jsonData){const n=this.getPattern(this.props.schema.jsonData,null,!0);if(n)try{i=JSON.parse(n)}catch{console.error(`Cannot parse json data: ${JSON.stringify(i)}`)}}i===void 0&&(i=null),this.props.oContext.socket.sendTo(`${this.props.oContext.adapterName}.${this.props.oContext.instance}`,this.props.schema.command||"send",i).then(n=>this.setState({image:n||""}))}}getContext(){const i={};return Array.isArray(this.props.schema.alsoDependsOn)&&this.props.schema.alsoDependsOn.forEach(n=>i[n]=G.getValue(this.props.data,n)),JSON.stringify(i)}renderItem(){if(this.props.alive){const i=this.getContext();(i!==this.localContext||!this.initialized)&&(this.localContext=i,setTimeout(()=>this.askInstance(),this.initialized?300:50),this.initialized=!0)}return this.state.image===void 0?null:k.createElement("img",{alt:"dynamic content",src:this.state.image,style:{width:this.props.schema.width||"100%",height:this.props.schema.height}})}}class co extends G{index;constructor(i){super(i),this.index=Date.now()}componentDidMount(){if(super.componentDidMount(),this.props.schema.base64){const i=G.getValue(this.props.data,this.props.attr);this.setState({value:i})}else this.props.oContext.socket.fileExists(`${this.props.oContext.adapterName}.${this.props.oContext.instance}`,this.props.attr).then(i=>i&&this.loadImage())}_getUrl(i){i&&(this.index=Date.now());let n=`files/${this.props.oContext.adapterName}.${this.props.oContext.instance}/${this.props.attr}?t=${this.index}`;return window.location.port==="3000"&&(n=`${window.location.protocol}//${window.location.hostname}:8081/${n}`),n}loadImage(){fetch(this._getUrl()).then(i=>i.blob()).then(i=>{const n=new FileReader;n.onload=()=>{this.setState({value:n.result})},n.readAsDataURL(i)}).catch(i=>console.error(i))}renderItem(i,n){return k.createElement(O.FormControl,{fullWidth:!0,variant:"standard"},this.props.schema.label?k.createElement(O.InputLabel,{shrink:!0},this.getText(this.props.schema.label)):null,k.createElement(j.UploadImage,{error:!!i,disabled:n,accept:this.props.schema.accept,crop:this.props.schema.crop,maxSize:this.props.schema.maxSize||256*1024,icon:this.state.value||void 0,removeIconFunc:()=>this.setState({value:null},()=>{if(this.props.schema.base64){const u=this.onChange(this.props.attr,this.state.value);u instanceof Promise&&u.catch(y=>console.error(`Cannot set value: ${y}`))}else this.props.oContext.socket.deleteFile(`${this.props.oContext.adapterName}.${this.props.oContext.instance}`,this.props.attr).catch(u=>console.error(u))}),onChange:u=>this.setState({value:u},()=>{if(this.props.schema.base64){const y=this.onChange(this.props.attr,this.state.value);y instanceof Promise&&y.catch(s=>console.error(`Cannot set value: ${s}`))}else u.startsWith("data")&&(u=u.split(",")[1]);this.props.oContext.socket.writeFile64(`${this.props.oContext.adapterName}.${this.props.oContext.instance}`,this.props.attr,u).catch(y=>console.error(y))})}),this.props.schema.help?k.createElement(O.FormHelperText,null,this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null)}}const gi={icon:{width:20,height:20,marginRight:4}};class ho extends G{componentDidMount(){super.componentDidMount();const i=G.getValue(this.props.data,this.props.attr);let n=this.props.schema.adapter;n==="_dataSources"&&(n=void 0),this.props.oContext.socket.getAdapterInstances(n,!0).then(async u=>{this.props.schema.adapter==="_dataSources"?u=u.filter(s=>{var c;return(c=s==null?void 0:s.common)==null?void 0:c.getHistory}):this.props.schema.adapter?u=u.filter(s=>s==null?void 0:s._id.startsWith(`system.adapter.${this.props.schema.adapter}.`)):this.props.schema.adapters&&Array.isArray(this.props.schema.adapters)&&(u=u.filter(s=>{var c;return this.props.schema.adapters.includes((c=s==null?void 0:s.common)==null?void 0:c.name)})),this.props.schema.onlyEnabled&&(u=u.filter(s=>{var c;return(c=s==null?void 0:s.common)==null?void 0:c.enabled}));const y=u.map(s=>({value:this.props.schema.long?s._id:this.props.schema.short?s._id.split(".").pop():s._id.replace(/^system\.adapter\./,""),label:`${s.common.name} [${s._id.replace(/^system\.adapter\./,"")}]`,icon:`adapter/${s.common.name}/${s.common.icon}`}));y.sort((s,c)=>s.value>c.value?1:s.value<c.value?-1:0),this.props.schema.allowDeactivate!==!1&&y.unshift({label:j.I18n.t(G.NONE_LABEL),value:G.NONE_VALUE}),this.props.schema.all&&y.unshift({label:j.I18n.t("sch_all"),value:"*"}),this.setState({value:i||"",selectOptions:y}),await this.props.oContext.socket.subscribeObject(`system.adapter.${n?`${n}.`:""}*`,this.onInstancesUpdate)}).catch(u=>console.error(`Cannot get instances: ${u}`))}componentWillUnmount(){this.props.oContext.socket.unsubscribeObject("system.adapter.*",this.onInstancesUpdate).then(()=>{}),super.componentWillUnmount()}onInstancesUpdate=(i,n)=>{if(!i.match(/^system\.adapter\.[-_a-z\d]+\.\d+$/))return;const u=this.props.schema.long?i:this.props.schema.short?i.split(".").pop():i.replace(/^system\.adapter\./,""),y=this.state.selectOptions.findIndex(s=>s.value===u);if(n){if(this.props.schema.adapter==="_dataSources"&&(!n.common||!n.common.getHistory))return;if(y===-1){const s=JSON.parse(JSON.stringify(this.state.selectOptions)),c=typeof n.common.name=="object"?n.common.name[j.I18n.getLanguage()]||n.common.name.en:n.common.name;s.push({value:this.props.schema.long?n._id:this.props.schema.short?n._id.split(".").pop():n._id.replace(/^system\.adapter\./,""),label:`${c} [${n._id.replace(/^system\.adapter\./,"")}]`,icon:`adapter/${c}/${n.common.icon}`}),s.sort((p,o)=>p.label>o.label?1:p.label<o.label?-1:0),this.setState({selectOptions:s})}}else if(y!==-1){const s=JSON.parse(JSON.stringify(this.state.selectOptions)),c={};this.state.value===s[y].value&&(c.value=G.NONE_VALUE),s.splice(y,1),c.selectOptions=s,this.setState(c)}};renderItem(i,n){var y;if(!this.state.selectOptions)return null;const u=(y=this.state.selectOptions)==null?void 0:y.find(s=>s.value===this.state.value);return k.createElement(O.FormControl,{fullWidth:!0,key:this.props.attr,variant:"standard"},this.props.schema.label?k.createElement(O.InputLabel,{shrink:!0},this.getText(this.props.schema.label)):null,k.createElement(O.Select,{variant:"standard",error:!!i,displayEmpty:!0,disabled:!!n,value:this.state.value,renderValue:()=>k.createElement("span",{style:{display:"flex"}},u!=null&&u.icon?k.createElement("img",{src:`./${u.icon}`,alt:u.value,style:gi.icon}):null,this.getText(u==null?void 0:u.label,!0)),onChange:s=>this.setState({value:s.target.value},()=>this.onChange(this.props.attr,this.state.value))},this.state.selectOptions.map(s=>k.createElement(O.MenuItem,{key:s.value,value:s.value,style:s.value===G.NONE_VALUE?{opacity:.5}:{}},s.icon?k.createElement("img",{src:`./${s.icon}`,alt:s.value,style:gi.icon}):null,this.getText(s.label,!0)))),this.props.schema.help?k.createElement(O.FormHelperText,null,this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null)}}const mi={address:{fontSize:"smaller",opacity:.5,marginLeft:8}};class po extends G{componentDidMount(){super.componentDidMount(),this.props.oContext.socket.getObject(`system.host.${this.props.common.host}`).then(i=>{var u,y;const n=[];if((y=(u=i==null?void 0:i.native)==null?void 0:u.hardware)!=null&&y.networkInterfaces){const s=i.native.hardware.networkInterfaces;Object.keys(s).forEach(c=>{if(this.props.schema.ignoreInternal&&!s[c].find(o=>!o.internal)||this.props.schema.ignoreLoopback&&s[c].find(o=>o.address==="127.0.0.1"||o.address==="::1"))return;let p=s[c].find(o=>o.family==="IPv4");p=p||s[c].find(o=>o.family==="IPv6"),n.push({value:c,address:p.address})})}this.setState({interfaces:n})}).catch(i=>window.alert(`Cannot read interfaces: ${i}`))}renderItem(i,n){var s,c,p;const u=G.getValue(this.props.data,this.props.attr),y=(s=this.state.interfaces)==null?void 0:s.find(o=>o.value===u);return k.createElement(O.FormControl,{fullWidth:!0,variant:"standard"},(c=this.state.interfaces)!=null&&c.length&&this.props.schema.label?k.createElement(O.InputLabel,null,this.getText(this.props.schema.label)):null,(p=this.state.interfaces)!=null&&p.length?k.createElement(O.Select,{variant:"standard",error:!!i,disabled:!!n,value:u,renderValue:o=>y?k.createElement("span",null,y.value,k.createElement("span",{style:mi.address},y.address)):o,onChange:o=>this.onChange(this.props.attr,o.target.value)},this.state.interfaces.map((o,d)=>k.createElement(O.MenuItem,{key:d,value:o.value},k.createElement("span",null,o.value,k.createElement("span",{style:mi.address},o.address))))):k.createElement(O.TextField,{fullWidth:!0,variant:"standard",error:!!i,disabled:!!n,value:u,onChange:o=>this.onChange(this.props.attr,o.target.value),label:this.getText(this.props.schema.label)}),this.props.schema.help?k.createElement(O.FormHelperText,null,this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null)}}const kt={modalDialog:{minWidth:400,maxWidth:800},overflowHidden:{display:"flex",overflow:"hidden"},titleIcon:{marginRight:5},content:{fontSize:16},languageButton:{position:"absolute",right:8,top:8},languageButtonActive:{color:"primary.main"}},fo=({toggleTranslation:L,noTranslation:i,title:n,fullWidth:u,help:y,maxWidth:s,progress:c,icon:p,applyDisabled:o,applyButton:d,onClose:e,children:t,titleButtonApply:r,titleButtonClose:l,onApply:a,textInput:h,defaultValue:f,overflowHidden:v})=>{const[b,A]=dt.useState(f);dt.useEffect(()=>{A(f)},[f]);let D=null;return p&&(D=p),k.createElement(O.Dialog,{open:!0,maxWidth:s||"md",fullWidth:!!u,disableEscapeKeyDown:!1,onClose:e,sx:{"& .MuiPaper-root":kt.modalDialog}},n&&k.createElement(O.DialogTitle,null,p?k.createElement(D,{style:kt.titleIcon}):null,n,j.I18n.getLanguage()!=="en"&&L?k.createElement(O.IconButton,{size:"large",style:{...kt.languageButton,...i?kt.languageButtonActive:{}},onClick:()=>L(),title:j.I18n.t("Disable/Enable translation")},k.createElement(X.Language,null)):null),k.createElement(O.DialogContent,{sx:{...v?kt.overflowHidden:{},...kt.content},style:{paddingTop:8}},h&&k.createElement(O.TextField,{autoComplete:"off",fullWidth:!0,autoFocus:!0,variant:"outlined",size:"medium",multiline:!0,value:b,onChange:E=>A(E.target.value)}),t,y?k.createElement("div",null,y):null),k.createElement(O.DialogActions,null,d!==!1&&k.createElement(O.Button,{startIcon:k.createElement(X.Check,null),disabled:c||o&&f===b,onClick:()=>a&&a(h?b:""),variant:"contained",color:"primary"},j.I18n.t(r||"Ok")),k.createElement(O.Button,{color:"grey",onClick:()=>e&&e(),disabled:c,variant:"contained",startIcon:k.createElement(X.Close,null)},j.I18n.t(l||"Cancel"))))};var It={},St={},Vi={exports:{}};(function(L,i){(function(){var n="ace",u=function(){return this}();!u&&typeof window<"u"&&(u=window);var y=function(e,t,r){if(typeof e!="string"){y.original?y.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace());return}arguments.length==2&&(r=t),y.modules[e]||(y.payloads[e]=r,y.modules[e]=null)};y.modules={},y.payloads={};var s=function(e,t,r){if(typeof t=="string"){var l=o(e,t);if(l!=null)return r&&r(),l}else if(Object.prototype.toString.call(t)==="[object Array]"){for(var a=[],h=0,f=t.length;h<f;++h){var v=o(e,t[h]);if(v==null&&c.original)return;a.push(v)}return r&&r.apply(null,a)||!0}},c=function(e,t){var r=s("",e,t);return r==null&&c.original?c.original.apply(this,arguments):r},p=function(e,t){if(t.indexOf("!")!==-1){var r=t.split("!");return p(e,r[0])+"!"+p(e,r[1])}if(t.charAt(0)=="."){var l=e.split("/").slice(0,-1).join("/");for(t=l+"/"+t;t.indexOf(".")!==-1&&a!=t;){var a=t;t=t.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return t},o=function(e,t){t=p(e,t);var r=y.modules[t];if(!r){if(r=y.payloads[t],typeof r=="function"){var l={},a={id:t,uri:"",exports:l,packaged:!0},h=function(v,b){return s(t,v,b)},f=r(h,l,a);l=f||a.exports,y.modules[t]=l,delete y.payloads[t]}r=y.modules[t]=l||r}return r};function d(e){var t=u;u[e]||(u[e]={}),t=u[e],(!t.define||!t.define.packaged)&&(y.original=t.define,t.define=y,t.define.packaged=!0),(!t.require||!t.require.packaged)&&(c.original=t.require,t.require=c,t.require.packaged=!0)}d(n)})(),ace.define("ace/lib/es6-shim",["require","exports","module"],function(n,u,y){function s(c,p,o){Object.defineProperty(c,p,{value:o,enumerable:!1,writable:!0,configurable:!0})}String.prototype.startsWith||s(String.prototype,"startsWith",function(c,p){return p=p||0,this.lastIndexOf(c,p)===p}),String.prototype.endsWith||s(String.prototype,"endsWith",function(c,p){var o=this;(p===void 0||p>o.length)&&(p=o.length),p-=c.length;var d=o.indexOf(c,p);return d!==-1&&d===p}),String.prototype.repeat||s(String.prototype,"repeat",function(c){for(var p="",o=this;c>0;)c&1&&(p+=o),(c>>=1)&&(o+=o);return p}),String.prototype.includes||s(String.prototype,"includes",function(c,p){return this.indexOf(c,p)!=-1}),Object.assign||(Object.assign=function(c){if(c==null)throw new TypeError("Cannot convert undefined or null to object");for(var p=Object(c),o=1;o<arguments.length;o++){var d=arguments[o];d!=null&&Object.keys(d).forEach(function(e){p[e]=d[e]})}return p}),Object.values||(Object.values=function(c){return Object.keys(c).map(function(p){return c[p]})}),Array.prototype.find||s(Array.prototype,"find",function(c){for(var p=this.length,o=arguments[1],d=0;d<p;d++){var e=this[d];if(c.call(o,e,d,this))return e}}),Array.prototype.findIndex||s(Array.prototype,"findIndex",function(c){for(var p=this.length,o=arguments[1],d=0;d<p;d++){var e=this[d];if(c.call(o,e,d,this))return d}}),Array.prototype.includes||s(Array.prototype,"includes",function(c,p){return this.indexOf(c,p)!=-1}),Array.prototype.fill||s(Array.prototype,"fill",function(c){for(var p=this,o=p.length>>>0,d=arguments[1],e=d>>0,t=e<0?Math.max(o+e,0):Math.min(e,o),r=arguments[2],l=r===void 0?o:r>>0,a=l<0?Math.max(o+l,0):Math.min(l,o);t<a;)p[t]=c,t++;return p}),Array.of||s(Array,"of",function(){return Array.prototype.slice.call(arguments)})}),ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/es6-shim"],function(n,u,y){n("./es6-shim")}),ace.define("ace/lib/deep_copy",["require","exports","module"],function(n,u,y){u.deepCopy=function s(c){if(typeof c!="object"||!c)return c;var p;if(Array.isArray(c)){p=[];for(var o=0;o<c.length;o++)p[o]=s(c[o]);return p}if(Object.prototype.toString.call(c)!=="[object Object]")return c;p={};for(var o in c)p[o]=s(c[o]);return p}}),ace.define("ace/lib/lang",["require","exports","module","ace/lib/deep_copy"],function(n,u,y){u.last=function(p){return p[p.length-1]},u.stringReverse=function(p){return p.split("").reverse().join("")},u.stringRepeat=function(p,o){for(var d="";o>0;)o&1&&(d+=p),(o>>=1)&&(p+=p);return d};var s=/^\s\s*/,c=/\s\s*$/;u.stringTrimLeft=function(p){return p.replace(s,"")},u.stringTrimRight=function(p){return p.replace(c,"")},u.copyObject=function(p){var o={};for(var d in p)o[d]=p[d];return o},u.copyArray=function(p){for(var o=[],d=0,e=p.length;d<e;d++)p[d]&&typeof p[d]=="object"?o[d]=this.copyObject(p[d]):o[d]=p[d];return o},u.deepCopy=n("./deep_copy").deepCopy,u.arrayToMap=function(p){for(var o={},d=0;d<p.length;d++)o[p[d]]=1;return o},u.createMap=function(p){var o=Object.create(null);for(var d in p)o[d]=p[d];return o},u.arrayRemove=function(p,o){for(var d=0;d<=p.length;d++)o===p[d]&&p.splice(d,1)},u.escapeRegExp=function(p){return p.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},u.escapeHTML=function(p){return(""+p).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},u.getMatchOffsets=function(p,o){var d=[];return p.replace(o,function(e){d.push({offset:arguments[arguments.length-2],length:e.length})}),d},u.deferredCall=function(p){var o=null,d=function(){o=null,p()},e=function(t){return e.cancel(),o=setTimeout(d,t||0),e};return e.schedule=e,e.call=function(){return this.cancel(),p(),e},e.cancel=function(){return clearTimeout(o),o=null,e},e.isPending=function(){return o},e},u.delayedCall=function(p,o){var d=null,e=function(){d=null,p()},t=function(r){d==null&&(d=setTimeout(e,r||o))};return t.delay=function(r){d&&clearTimeout(d),d=setTimeout(e,r||o)},t.schedule=t,t.call=function(){this.cancel(),p()},t.cancel=function(){d&&clearTimeout(d),d=null},t.isPending=function(){return d},t},u.supportsLookbehind=function(){try{new RegExp("(?<=.)")}catch{return!1}return!0},u.skipEmptyMatch=function(p,o,d){return d&&p.codePointAt(o)>65535?2:1}}),ace.define("ace/lib/useragent",["require","exports","module"],function(n,u,y){u.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},u.getOS=function(){return u.isMac?u.OS.MAC:u.isLinux?u.OS.LINUX:u.OS.WINDOWS};var s=typeof navigator=="object"?navigator:{},c=(/mac|win|linux/i.exec(s.platform)||["other"])[0].toLowerCase(),p=s.userAgent||"",o=s.appName||"";u.isWin=c=="win",u.isMac=c=="mac",u.isLinux=c=="linux",u.isIE=o=="Microsoft Internet Explorer"||o.indexOf("MSAppHost")>=0?parseFloat((p.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((p.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),u.isOldIE=u.isIE&&u.isIE<9,u.isGecko=u.isMozilla=p.match(/ Gecko\/\d+/),u.isOpera=typeof opera=="object"&&Object.prototype.toString.call(window.opera)=="[object Opera]",u.isWebKit=parseFloat(p.split("WebKit/")[1])||void 0,u.isChrome=parseFloat(p.split(" Chrome/")[1])||void 0,u.isSafari=parseFloat(p.split(" Safari/")[1])&&!u.isChrome||void 0,u.isEdge=parseFloat(p.split(" Edge/")[1])||void 0,u.isAIR=p.indexOf("AdobeAIR")>=0,u.isAndroid=p.indexOf("Android")>=0,u.isChromeOS=p.indexOf(" CrOS ")>=0,u.isIOS=/iPad|iPhone|iPod/.test(p)&&!window.MSStream,u.isIOS&&(u.isMac=!0),u.isMobile=u.isIOS||u.isAndroid}),ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],function(n,u,y){var s=n("./useragent"),c="http://www.w3.org/1999/xhtml";u.buildDom=function r(l,a,h){if(typeof l=="string"&&l){var f=document.createTextNode(l);return a&&a.appendChild(f),f}if(!Array.isArray(l))return l&&l.appendChild&&a&&a.appendChild(l),l;if(typeof l[0]!="string"||!l[0]){for(var v=[],b=0;b<l.length;b++){var A=r(l[b],a,h);A&&v.push(A)}return v}var D=document.createElement(l[0]),E=l[1],g=1;E&&typeof E=="object"&&!Array.isArray(E)&&(g=2);for(var b=g;b<l.length;b++)r(l[b],D,h);return g==2&&Object.keys(E).forEach(function(S){var $=E[S];S==="class"?D.className=Array.isArray($)?$.join(" "):$:typeof $=="function"||S=="value"||S[0]=="$"?D[S]=$:S==="ref"?h&&(h[$]=D):S==="style"?typeof $=="string"&&(D.style.cssText=$):$!=null&&D.setAttribute(S,$)}),a&&a.appendChild(D),D},u.getDocumentHead=function(r){return r||(r=document),r.head||r.getElementsByTagName("head")[0]||r.documentElement},u.createElement=function(r,l){return document.createElementNS?document.createElementNS(l||c,r):document.createElement(r)},u.removeChildren=function(r){r.innerHTML=""},u.createTextNode=function(r,l){var a=l?l.ownerDocument:document;return a.createTextNode(r)},u.createFragment=function(r){var l=r?r.ownerDocument:document;return l.createDocumentFragment()},u.hasCssClass=function(r,l){var a=(r.className+"").split(/\s+/g);return a.indexOf(l)!==-1},u.addCssClass=function(r,l){u.hasCssClass(r,l)||(r.className+=" "+l)},u.removeCssClass=function(r,l){for(var a=r.className.split(/\s+/g);;){var h=a.indexOf(l);if(h==-1)break;a.splice(h,1)}r.className=a.join(" ")},u.toggleCssClass=function(r,l){for(var a=r.className.split(/\s+/g),h=!0;;){var f=a.indexOf(l);if(f==-1)break;h=!1,a.splice(f,1)}return h&&a.push(l),r.className=a.join(" "),h},u.setCssClass=function(r,l,a){a?u.addCssClass(r,l):u.removeCssClass(r,l)},u.hasCssString=function(r,l){var a=0,h;if(l=l||document,h=l.querySelectorAll("style")){for(;a<h.length;)if(h[a++].id===r)return!0}},u.removeElementById=function(r,l){l=l||document,l.getElementById(r)&&l.getElementById(r).remove()};var p,o=[];u.useStrictCSP=function(r){p=r,r==!1?d():o||(o=[])};function d(){var r=o;o=null,r&&r.forEach(function(l){e(l[0],l[1])})}function e(r,l,a){if(!(typeof document>"u")){if(o){if(a)d();else if(a===!1)return o.push([r,l])}if(!p){var h=a;!a||!a.getRootNode?h=document:(h=a.getRootNode(),(!h||h==a)&&(h=document));var f=h.ownerDocument||h;if(l&&u.hasCssString(l,h))return null;l&&(r+=`
/*# sourceURL=ace/css/`+l+" */");var v=u.createElement("style");v.appendChild(f.createTextNode(r)),l&&(v.id=l),h==f&&(h=u.getDocumentHead(f)),h.insertBefore(v,h.firstChild)}}}if(u.importCssString=e,u.importCssStylsheet=function(r,l){u.buildDom(["link",{rel:"stylesheet",href:r}],u.getDocumentHead(l))},u.scrollbarWidth=function(r){var l=u.createElement("ace_inner");l.style.width="100%",l.style.minWidth="0px",l.style.height="200px",l.style.display="block";var a=u.createElement("ace_outer"),h=a.style;h.position="absolute",h.left="-10000px",h.overflow="hidden",h.width="200px",h.minWidth="0px",h.height="150px",h.display="block",a.appendChild(l);var f=r&&r.documentElement||document&&document.documentElement;if(!f)return 0;f.appendChild(a);var v=l.offsetWidth;h.overflow="scroll";var b=l.offsetWidth;return v===b&&(b=a.clientWidth),f.removeChild(a),v-b},u.computedStyle=function(r,l){return window.getComputedStyle(r,"")||{}},u.setStyle=function(r,l,a){r[l]!==a&&(r[l]=a)},u.HAS_CSS_ANIMATION=!1,u.HAS_CSS_TRANSFORMS=!1,u.HI_DPI=s.isWin?typeof window<"u"&&window.devicePixelRatio>=1.5:!0,s.isChromeOS&&(u.HI_DPI=!1),typeof document<"u"){var t=document.createElement("div");u.HI_DPI&&t.style.transform!==void 0&&(u.HAS_CSS_TRANSFORMS=!0),!s.isEdge&&typeof t.style.animationName<"u"&&(u.HAS_CSS_ANIMATION=!0),t=null}u.HAS_CSS_TRANSFORMS?u.translate=function(r,l,a){r.style.transform="translate("+Math.round(l)+"px, "+Math.round(a)+"px)"}:u.translate=function(r,l,a){r.style.top=Math.round(a)+"px",r.style.left=Math.round(l)+"px"}}),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(n,u,y){/*
* based on code from:
*
* @license RequireJS text 0.25.0 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
* Available via the MIT or new BSD license.
* see: http://github.com/jrburke/requirejs for details
*/var s=n("./dom");u.get=function(c,p){var o=new XMLHttpRequest;o.open("GET",c,!0),o.onreadystatechange=function(){o.readyState===4&&p(o.responseText)},o.send(null)},u.loadScript=function(c,p){var o=s.getDocumentHead(),d=document.createElement("script");d.src=c,o.appendChild(d),d.onload=d.onreadystatechange=function(e,t){(t||!d.readyState||d.readyState=="loaded"||d.readyState=="complete")&&(d=d.onload=d.onreadystatechange=null,t||p())}},u.qualifyURL=function(c){var p=document.createElement("a");return p.href=c,p.href}}),ace.define("ace/lib/oop",["require","exports","module"],function(n,u,y){u.inherits=function(s,c){s.super_=c,s.prototype=Object.create(c.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}})},u.mixin=function(s,c){for(var p in c)s[p]=c[p];return s},u.implement=function(s,c){u.mixin(s,c)}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(n,u,y){var s={},c=function(){this.propagationStopped=!0},p=function(){this.defaultPrevented=!0};s._emit=s._dispatchEvent=function(o,d){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var e=this._eventRegistry[o]||[],t=this._defaultHandlers[o];if(!(!e.length&&!t)){(typeof d!="object"||!d)&&(d={}),d.type||(d.type=o),d.stopPropagation||(d.stopPropagation=c),d.preventDefault||(d.preventDefault=p),e=e.slice();for(var r=0;r<e.length&&(e[r](d,this),!d.propagationStopped);r++);if(t&&!d.defaultPrevented)return t(d,this)}},s._signal=function(o,d){var e=(this._eventRegistry||{})[o];if(e){e=e.slice();for(var t=0;t<e.length;t++)e[t](d,this)}},s.once=function(o,d){var e=this;if(this.on(o,function t(){e.off(o,t),d.apply(null,arguments)}),!d)return new Promise(function(t){d=t})},s.setDefaultHandler=function(o,d){var e=this._defaultHandlers;if(e||(e=this._defaultHandlers={_disabled_:{}}),e[o]){var t=e[o],r=e._disabled_[o];r||(e._disabled_[o]=r=[]),r.push(t);var l=r.indexOf(d);l!=-1&&r.splice(l,1)}e[o]=d},s.removeDefaultHandler=function(o,d){var e=this._defaultHandlers;if(e){var t=e._disabled_[o];if(e[o]==d)t&&this.setDefaultHandler(o,t.pop());else if(t){var r=t.indexOf(d);r!=-1&&t.splice(r,1)}}},s.on=s.addEventListener=function(o,d,e){this._eventRegistry=this._eventRegistry||{};var t=this._eventRegistry[o];return t||(t=this._eventRegistry[o]=[]),t.indexOf(d)==-1&&t[e?"unshift":"push"](d),d},s.off=s.removeListener=s.removeEventListener=function(o,d){this._eventRegistry=this._eventRegistry||{};var e=this._eventRegistry[o];if(e){var t=e.indexOf(d);t!==-1&&e.splice(t,1)}},s.removeAllListeners=function(o){o||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[o]=void 0),this._defaultHandlers&&(this._defaultHandlers[o]=void 0)},u.EventEmitter=s}),ace.define("ace/lib/report_error",["require","exports","module"],function(n,u,y){u.reportError=function(c,p){var o=new Error(c);o.data=p,typeof console=="object"&&console.error&&console.error(o),setTimeout(function(){throw o})}}),ace.define("ace/lib/default_english_messages",["require","exports","module"],function(n,u,y){var s={"autocomplete.popup.aria-roledescription":"Autocomplete suggestions","autocomplete.popup.aria-label":"Autocomplete suggestions","autocomplete.popup.item.aria-roledescription":"item","autocomplete.loading":"Loading...","editor.scroller.aria-roledescription":"editor","editor.scroller.aria-label":"Editor content, press Enter to start editing, press Escape to exit","editor.gutter.aria-roledescription":"editor gutter","editor.gutter.aria-label":"Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit","error-marker.good-state":"Looks good!","prompt.recently-used":"Recently used","prompt.other-commands":"Other commands","prompt.no-matching-commands":"No matching commands","search-box.find.placeholder":"Search for","search-box.find-all.text":"All","search-box.replace.placeholder":"Replace with","search-box.replace-next.text":"Replace","search-box.replace-all.text":"All","search-box.toggle-replace.title":"Toggle Replace mode","search-box.toggle-regexp.title":"RegExp Search","search-box.toggle-case.title":"CaseSensitive Search","search-box.toggle-whole-word.title":"Whole Word Search","search-box.toggle-in-selection.title":"Search In Selection","search-box.search-counter":"$0 of $1","text-input.aria-roledescription":"editor","text-input.aria-label":"Cursor at row $0","gutter.code-folding.range.aria-label":"Toggle code folding, rows $0 through $1","gutter.code-folding.closed.aria-label":"Toggle code folding, rows $0 through $1","gutter.code-folding.open.aria-label":"Toggle code folding, row $0","gutter.code-folding.closed.title":"Unfold code","gutter.code-folding.open.title":"Fold code","gutter.annotation.aria-label.error":"Error, read annotations row $0","gutter.annotation.aria-label.warning":"Warning, read annotations row $0","gutter.annotation.aria-label.info":"Info, read annotations row $0","inline-fold.closed.title":"Unfold code","gutter-tooltip.aria-label.error.singular":"error","gutter-tooltip.aria-label.error.plural":"errors","gutter-tooltip.aria-label.warning.singular":"warning","gutter-tooltip.aria-label.warning.plural":"warnings","gutter-tooltip.aria-label.info.singular":"information message","gutter-tooltip.aria-label.info.plural":"information messages","gutter.annotation.aria-label.security":"Security finding, read annotations row $0","gutter.annotation.aria-label.hint":"Suggestion, read annotations row $0","gutter-tooltip.aria-label.security.singular":"security finding","gutter-tooltip.aria-label.security.plural":"security findings","gutter-tooltip.aria-label.hint.singular":"suggestion","gutter-tooltip.aria-label.hint.plural":"suggestions"};u.defaultEnglishMessages=s}),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/report_error","ace/lib/default_english_messages"],function(n,u,y){"no use strict";var s=n("./oop"),c=n("./event_emitter").EventEmitter,p=n("./report_error").reportError,o=n("./default_english_messages").defaultEnglishMessages,d={setOptions:function(a){Object.keys(a).forEach(function(h){this.setOption(h,a[h])},this)},getOptions:function(a){var h={};if(a)Array.isArray(a)||(h=a,a=Object.keys(h));else{var f=this.$options;a=Object.keys(f).filter(function(v){return!f[v].hidden})}return a.forEach(function(v){h[v]=this.getOption(v)},this),h},setOption:function(a,h){if(this["$"+a]!==h){var f=this.$options[a];if(!f)return e('misspelled option "'+a+'"');if(f.forwardTo)return this[f.forwardTo]&&this[f.forwardTo].setOption(a,h);f.handlesSet||(this["$"+a]=h),f&&f.set&&f.set.call(this,h)}},getOption:function(a){var h=this.$options[a];return h?h.forwardTo?this[h.forwardTo]&&this[h.forwardTo].getOption(a):h&&h.get?h.get.call(this):this["$"+a]:e('misspelled option "'+a+'"')}};function e(a){typeof console<"u"&&console.warn&&console.warn.apply(console,arguments)}var t,r,l=function(){function a(){this.$defaultOptions={},t=o,r="dollarSigns"}return a.prototype.defineOptions=function(h,f,v){return h.$options||(this.$defaultOptions[f]=h.$options={}),Object.keys(v).forEach(function(b){var A=v[b];typeof A=="string"&&(A={forwardTo:A}),A.name||(A.name=b),h.$options[A.name]=A,"initialValue"in A&&(h["$"+A.name]=A.initialValue)}),s.implement(h,d),this},a.prototype.resetOptions=function(h){Object.keys(h.$options).forEach(function(f){var v=h.$options[f];"value"in v&&h.setOption(f,v.value)})},a.prototype.setDefaultValue=function(h,f,v){if(!h){for(h in this.$defaultOptions)if(this.$defaultOptions[h][f])break;if(!this.$defaultOptions[h][f])return!1}var b=this.$defaultOptions[h]||(this.$defaultOptions[h]={});b[f]&&(b.forwardTo?this.setDefaultValue(b.forwardTo,f,v):b[f].value=v)},a.prototype.setDefaultValues=function(h,f){Object.keys(f).forEach(function(v){this.setDefaultValue(h,v,f[v])},this)},a.prototype.setMessages=function(h,f){t=h,f&&f.placeholders&&(r=f.placeholders)},a.prototype.nls=function(h,f,v){t[h]||(e("No message found for the key '"+h+"' in messages with id "+t.$id+", trying to find a translation for the default string '"+f+"'."),t[f]||e("No message found for the default string '"+f+"' in the provided messages. Falling back to the default English message."));var b=t[h]||t[f]||f;return v&&(r==="dollarSigns"&&(b=b.replace(/\$(\$|[\d]+)/g,function(A,D){return D=="$"?"$":v[D]})),r==="curlyBrackets"&&(b=b.replace(/\{([^\}]+)\}/g,function(A,D){return v[D]}))),b},a}();l.prototype.warn=e,l.prototype.reportError=p,s.implement(l.prototype,c),u.AppConfig=l}),ace.define("ace/theme/textmate-css",["require","exports","module"],function(n,u,y){y.exports=`.ace-tm .ace_gutter {
  background: #f0f0f0;
  color: #333;
}

.ace-tm .ace_print-margin {
  width: 1px;
  background: #e8e8e8;
}

.ace-tm .ace_fold {
    background-color: #6B72E6;
}

.ace-tm {
  background-color: #FFFFFF;
  color: black;
}

.ace-tm .ace_cursor {
  color: black;
}
        
.ace-tm .ace_invisible {
  color: rgb(191, 191, 191);
}

.ace-tm .ace_storage,
.ace-tm .ace_keyword {
  color: blue;
}

.ace-tm .ace_constant {
  color: rgb(197, 6, 11);
}

.ace-tm .ace_constant.ace_buildin {
  color: rgb(88, 72, 246);
}

.ace-tm .ace_constant.ace_language {
  color: rgb(88, 92, 246);
}

.ace-tm .ace_constant.ace_library {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_invalid {
  background-color: rgba(255, 0, 0, 0.1);
  color: red;
}

.ace-tm .ace_support.ace_function {
  color: rgb(60, 76, 114);
}

.ace-tm .ace_support.ace_constant {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_support.ace_type,
.ace-tm .ace_support.ace_class {
  color: rgb(109, 121, 222);
}

.ace-tm .ace_keyword.ace_operator {
  color: rgb(104, 118, 135);
}

.ace-tm .ace_string {
  color: rgb(3, 106, 7);
}

.ace-tm .ace_comment {
  color: rgb(76, 136, 107);
}

.ace-tm .ace_comment.ace_doc {
  color: rgb(0, 102, 255);
}

.ace-tm .ace_comment.ace_doc.ace_tag {
  color: rgb(128, 159, 191);
}

.ace-tm .ace_constant.ace_numeric {
  color: rgb(0, 0, 205);
}

.ace-tm .ace_variable {
  color: rgb(49, 132, 149);
}

.ace-tm .ace_xml-pe {
  color: rgb(104, 104, 91);
}

.ace-tm .ace_entity.ace_name.ace_function {
  color: #0000A2;
}


.ace-tm .ace_heading {
  color: rgb(12, 7, 255);
}

.ace-tm .ace_list {
  color:rgb(185, 6, 144);
}

.ace-tm .ace_meta.ace_tag {
  color:rgb(0, 22, 142);
}

.ace-tm .ace_string.ace_regex {
  color: rgb(255, 0, 0)
}

.ace-tm .ace_marker-layer .ace_selection {
  background: rgb(181, 213, 255);
}
.ace-tm.ace_multiselect .ace_selection.ace_start {
  box-shadow: 0 0 3px 0px white;
}
.ace-tm .ace_marker-layer .ace_step {
  background: rgb(252, 255, 0);
}

.ace-tm .ace_marker-layer .ace_stack {
  background: rgb(164, 229, 101);
}

.ace-tm .ace_marker-layer .ace_bracket {
  margin: -1px 0 0 -1px;
  border: 1px solid rgb(192, 192, 192);
}

.ace-tm .ace_marker-layer .ace_active-line {
  background: rgba(0, 0, 0, 0.07);
}

.ace-tm .ace_gutter-active-line {
    background-color : #dcdcdc;
}

.ace-tm .ace_marker-layer .ace_selected-word {
  background: rgb(250, 250, 255);
  border: 1px solid rgb(200, 200, 250);
}

.ace-tm .ace_indent-guide {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;
}

.ace-tm .ace_indent-guide-active {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC") right repeat-y;
}
`}),ace.define("ace/theme/textmate",["require","exports","module","ace/theme/textmate-css","ace/lib/dom"],function(n,u,y){u.isDark=!1,u.cssClass="ace-tm",u.cssText=n("./textmate-css"),u.$id="ace/theme/textmate";var s=n("../lib/dom");s.importCssString(u.cssText,u.cssClass,!1)}),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/net","ace/lib/dom","ace/lib/app_config","ace/theme/textmate"],function(n,u,y){"no use strict";var s=n("./lib/lang"),c=n("./lib/net"),p=n("./lib/dom"),o=n("./lib/app_config").AppConfig;y.exports=u=new o;var d={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1,useStrictCSP:null};u.get=function(l){if(!d.hasOwnProperty(l))throw new Error("Unknown config key: "+l);return d[l]},u.set=function(l,a){if(d.hasOwnProperty(l))d[l]=a;else if(this.setDefaultValue("",l,a)==!1)throw new Error("Unknown config key: "+l);l=="useStrictCSP"&&p.useStrictCSP(a)},u.all=function(){return s.copyObject(d)},u.$modes={},u.moduleUrl=function(l,a){if(d.$moduleUrls[l])return d.$moduleUrls[l];var h=l.split("/");a=a||h[h.length-2]||"";var f=a=="snippets"?"/":"-",v=h[h.length-1];if(a=="worker"&&f=="-"){var b=new RegExp("^"+a+"[\\-_]|[\\-_]"+a+"$","g");v=v.replace(b,"")}(!v||v==a)&&h.length>1&&(v=h[h.length-2]);var A=d[a+"Path"];return A==null?A=d.basePath:f=="/"&&(a=f=""),A&&A.slice(-1)!="/"&&(A+="/"),A+a+f+v+this.get("suffix")},u.setModuleUrl=function(l,a){return d.$moduleUrls[l]=a};var e=function(l,a){if(l==="ace/theme/textmate"||l==="./theme/textmate")return a(null,n("./theme/textmate"));if(t)return t(l,a);console.error("loader is not configured")},t;u.setLoader=function(l){t=l},u.dynamicModules=Object.create(null),u.$loading={},u.$loaded={},u.loadModule=function(l,a){var h;if(Array.isArray(l))var f=l[0],v=l[1];else if(typeof l=="string")var v=l;var b=function(A){if(A&&!u.$loading[v])return a&&a(A);if(u.$loading[v]||(u.$loading[v]=[]),u.$loading[v].push(a),!(u.$loading[v].length>1)){var D=function(){e(v,function(E,g){g&&(u.$loaded[v]=g),u._emit("load.module",{name:v,module:g});var S=u.$loading[v];u.$loading[v]=null,S.forEach(function($){$&&$(g)})})};if(!u.get("packaged"))return D();c.loadScript(u.moduleUrl(v,f),D),r()}};if(u.dynamicModules[v])u.dynamicModules[v]().then(function(A){A.default?b(A.default):b(A)});else{try{h=this.$require(v)}catch{}b(h||u.$loaded[v])}},u.$require=function(l){if(typeof y.require=="function"){var a="require";return y[a](l)}},u.setModuleLoader=function(l,a){u.dynamicModules[l]=a};var r=function(){!d.basePath&&!d.workerPath&&!d.modePath&&!d.themePath&&!Object.keys(d.$moduleUrls).length&&(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),r=function(){})};u.version="1.39.0"}),ace.define("ace/loader_build",["require","exports","module","ace/lib/fixoldbrowsers","ace/config"],function(n,u,y){n("./lib/fixoldbrowsers");var s=n("./config");s.setLoader(function(d,e){n([d],function(t){e(null,t)})});var c=function(){return this||typeof window<"u"&&window}();y.exports=function(d){s.init=p,s.$require=n,d.require=n},p(!0);function p(d){if(!(!c||!c.document)){s.set("packaged",d||n.packaged||y.packaged||c.define&&(void 0).packaged);var e={},t="",r=document.currentScript||document._currentScript,l=r&&r.ownerDocument||document;r&&r.src&&(t=r.src.split(/[?#]/)[0].split("/").slice(0,-1).join("/")||"");for(var a=l.getElementsByTagName("script"),h=0;h<a.length;h++){var f=a[h],v=f.src||f.getAttribute("src");if(v){for(var b=f.attributes,A=0,D=b.length;A<D;A++){var E=b[A];E.name.indexOf("data-ace-")===0&&(e[o(E.name.replace(/^data-ace-/,""))]=E.value)}var g=v.match(/^(.*)\/ace([\-.]\w+)?\.js(\?|$)/);g&&(t=g[1])}}t&&(e.base=e.base||t,e.packaged=!0),e.basePath=e.base,e.workerPath=e.workerPath||e.base,e.modePath=e.modePath||e.base,e.themePath=e.themePath||e.base,delete e.base;for(var S in e)typeof e[S]<"u"&&s.set(S,e[S])}}function o(d){return d.replace(/-(.)/g,function(e,t){return t.toUpperCase()})}}),ace.define("ace/range",["require","exports","module"],function(n,u,y){var s=function(){function c(p,o,d,e){this.start={row:p,column:o},this.end={row:d,column:e}}return c.prototype.isEqual=function(p){return this.start.row===p.start.row&&this.end.row===p.end.row&&this.start.column===p.start.column&&this.end.column===p.end.column},c.prototype.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},c.prototype.contains=function(p,o){return this.compare(p,o)==0},c.prototype.compareRange=function(p){var o,d=p.end,e=p.start;return o=this.compare(d.row,d.column),o==1?(o=this.compare(e.row,e.column),o==1?2:o==0?1:0):o==-1?-2:(o=this.compare(e.row,e.column),o==-1?-1:o==1?42:0)},c.prototype.comparePoint=function(p){return this.compare(p.row,p.column)},c.prototype.containsRange=function(p){return this.comparePoint(p.start)==0&&this.comparePoint(p.end)==0},c.prototype.intersects=function(p){var o=this.compareRange(p);return o==-1||o==0||o==1},c.prototype.isEnd=function(p,o){return this.end.row==p&&this.end.column==o},c.prototype.isStart=function(p,o){return this.start.row==p&&this.start.column==o},c.prototype.setStart=function(p,o){typeof p=="object"?(this.start.column=p.column,this.start.row=p.row):(this.start.row=p,this.start.column=o)},c.prototype.setEnd=function(p,o){typeof p=="object"?(this.end.column=p.column,this.end.row=p.row):(this.end.row=p,this.end.column=o)},c.prototype.inside=function(p,o){return this.compare(p,o)==0?!(this.isEnd(p,o)||this.isStart(p,o)):!1},c.prototype.insideStart=function(p,o){return this.compare(p,o)==0?!this.isEnd(p,o):!1},c.prototype.insideEnd=function(p,o){return this.compare(p,o)==0?!this.isStart(p,o):!1},c.prototype.compare=function(p,o){return!this.isMultiLine()&&p===this.start.row?o<this.start.column?-1:o>this.end.column?1:0:p<this.start.row?-1:p>this.end.row?1:this.start.row===p?o>=this.start.column?0:-1:this.end.row===p?o<=this.end.column?0:1:0},c.prototype.compareStart=function(p,o){return this.start.row==p&&this.start.column==o?-1:this.compare(p,o)},c.prototype.compareEnd=function(p,o){return this.end.row==p&&this.end.column==o?1:this.compare(p,o)},c.prototype.compareInside=function(p,o){return this.end.row==p&&this.end.column==o?1:this.start.row==p&&this.start.column==o?-1:this.compare(p,o)},c.prototype.clipRows=function(p,o){if(this.end.row>o)var d={row:o+1,column:0};else if(this.end.row<p)var d={row:p,column:0};if(this.start.row>o)var e={row:o+1,column:0};else if(this.start.row<p)var e={row:p,column:0};return c.fromPoints(e||this.start,d||this.end)},c.prototype.extend=function(p,o){var d=this.compare(p,o);if(d==0)return this;if(d==-1)var e={row:p,column:o};else var t={row:p,column:o};return c.fromPoints(e||this.start,t||this.end)},c.prototype.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},c.prototype.isMultiLine=function(){return this.start.row!==this.end.row},c.prototype.clone=function(){return c.fromPoints(this.start,this.end)},c.prototype.collapseRows=function(){return this.end.column==0?new c(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new c(this.start.row,0,this.end.row,0)},c.prototype.toScreenRange=function(p){var o=p.documentToScreenPosition(this.start),d=p.documentToScreenPosition(this.end);return new c(o.row,o.column,d.row,d.column)},c.prototype.moveBy=function(p,o){this.start.row+=p,this.start.column+=o,this.end.row+=p,this.end.column+=o},c}();s.fromPoints=function(c,p){return new s(c.row,c.column,p.row,p.column)},s.comparePoints=function(c,p){return c.row-p.row||c.column-p.column},u.Range=s}),ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(n,u,y){for(var s=n("./oop"),c={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete","-13":"NumpadEnter",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",59:";",61:"=",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}},p={Command:224,Backspace:8,Tab:9,Return:13,Enter:13,Pause:19,Escape:27,PageUp:33,PageDown:34,End:35,Home:36,Insert:45,Delete:46,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Backquote:192,Minus:189,Equal:187,BracketLeft:219,Backslash:220,BracketRight:221,Semicolon:186,Quote:222,Comma:188,Period:190,Slash:191,Space:32,NumpadAdd:107,NumpadDecimal:110,NumpadSubtract:109,NumpadDivide:111,NumpadMultiply:106},o=0;o<10;o++)p["Digit"+o]=48+o,p["Numpad"+o]=96+o,c.PRINTABLE_KEYS[48+o]=""+o,c.FUNCTION_KEYS[96+o]="Numpad"+o;for(var o=65;o<91;o++){var d=String.fromCharCode(o+32);p["Key"+d.toUpperCase()]=o,c.PRINTABLE_KEYS[o]=d}for(var o=1;o<13;o++)p["F"+o]=111+o,c.FUNCTION_KEYS[111+o]="F"+o;var e={Shift:16,Control:17,Alt:18,Meta:224};for(var t in e)p[t]=p[t+"Left"]=p[t+"Right"]=e[t];u.$codeToKeyCode=p,c.PRINTABLE_KEYS[173]="-";for(var r in c.FUNCTION_KEYS){var l=c.FUNCTION_KEYS[r].toLowerCase();c[l]=parseInt(r,10)}for(var r in c.PRINTABLE_KEYS){var l=c.PRINTABLE_KEYS[r].toLowerCase();c[l]=parseInt(r,10)}s.mixin(c,c.MODIFIER_KEYS),s.mixin(c,c.PRINTABLE_KEYS),s.mixin(c,c.FUNCTION_KEYS),c.enter=c.return,c.escape=c.esc,c.del=c.delete,function(){for(var a=["cmd","ctrl","alt","shift"],h=Math.pow(2,a.length);h--;)c.KEY_MODS[h]=a.filter(function(f){return h&c.KEY_MODS[f]}).join("-")+"-"}(),c.KEY_MODS[0]="",c.KEY_MODS[-1]="input-",s.mixin(u,c),u.default=u,u.keyCodeToString=function(a){var h=c[a];return typeof h!="string"&&(h=String.fromCharCode(a)),h.toLowerCase()}}),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(n,u,y){var s=n("./keys"),c=n("./useragent"),p=null,o=0,d;function e(){d=!1;try{document.createComment("").addEventListener("test",function(){},{get passive(){return d={passive:!1},!0}})}catch{}}function t(){return d==null&&e(),d}function r(A,D,E){this.elem=A,this.type=D,this.callback=E}r.prototype.destroy=function(){a(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var l=u.addListener=function(A,D,E,g){A.addEventListener(D,E,t()),g&&g.$toDestroy.push(new r(A,D,E))},a=u.removeListener=function(A,D,E){A.removeEventListener(D,E,t())};u.stopEvent=function(A){return u.stopPropagation(A),u.preventDefault(A),!1},u.stopPropagation=function(A){A.stopPropagation&&A.stopPropagation()},u.preventDefault=function(A){A.preventDefault&&A.preventDefault()},u.getButton=function(A){return A.type=="dblclick"?0:A.type=="contextmenu"||c.isMac&&A.ctrlKey&&!A.altKey&&!A.shiftKey?2:A.button},u.capture=function(A,D,E){var g=A&&A.ownerDocument||document;function S($){D&&D($),E&&E($),a(g,"mousemove",D),a(g,"mouseup",S),a(g,"dragstart",S)}return l(g,"mousemove",D),l(g,"mouseup",S),l(g,"dragstart",S),S},u.addMouseWheelListener=function(A,D,E){l(A,"wheel",function(g){var S=.15,$=g.deltaX||0,_=g.deltaY||0;switch(g.deltaMode){case g.DOM_DELTA_PIXEL:g.wheelX=$*S,g.wheelY=_*S;break;case g.DOM_DELTA_LINE:var T=15;g.wheelX=$*T,g.wheelY=_*T;break;case g.DOM_DELTA_PAGE:var I=150;g.wheelX=$*I,g.wheelY=_*I;break}D(g)},E)},u.addMultiMouseDownListener=function(A,D,E,g,S){var $=0,_,T,I,w={2:"dblclick",3:"tripleclick",4:"quadclick"};function m(C){if(u.getButton(C)!==0?$=0:C.detail>1?($++,$>4&&($=1)):$=1,c.isIE){var x=Math.abs(C.clientX-_)>5||Math.abs(C.clientY-T)>5;(!I||x)&&($=1),I&&clearTimeout(I),I=setTimeout(function(){I=null},D[$-1]||600),$==1&&(_=C.clientX,T=C.clientY)}if(C._clicks=$,E[g]("mousedown",C),$>4)$=0;else if($>1)return E[g](w[$],C)}Array.isArray(A)||(A=[A]),A.forEach(function(C){l(C,"mousedown",m,S)})};function h(A){return 0|(A.ctrlKey?1:0)|(A.altKey?2:0)|(A.shiftKey?4:0)|(A.metaKey?8:0)}u.getModifierString=function(A){return s.KEY_MODS[h(A)]};function f(A,D,E){var g=h(D);if(!E&&D.code&&(E=s.$codeToKeyCode[D.code]||E),!c.isMac&&p){if(D.getModifierState&&(D.getModifierState("OS")||D.getModifierState("Win"))&&(g|=8),p.altGr)if((3&g)!=3)p.altGr=0;else return;if(E===18||E===17){var S=D.location;if(E===17&&S===1)p[E]==1&&(o=D.timeStamp);else if(E===18&&g===3&&S===2){var $=D.timeStamp-o;$<50&&(p.altGr=!0)}}}if(E in s.MODIFIER_KEYS&&(E=-1),!(!g&&E===13&&D.location===3&&(A(D,g,-E),D.defaultPrevented))){if(c.isChromeOS&&g&8){if(A(D,g,E),D.defaultPrevented)return;g&=-9}return!g&&!(E in s.FUNCTION_KEYS)&&!(E in s.PRINTABLE_KEYS)?!1:A(D,g,E)}}u.addCommandKeyListener=function(A,D,E){var g=null;l(A,"keydown",function(S){p[S.keyCode]=(p[S.keyCode]||0)+1;var $=f(D,S,S.keyCode);return g=S.defaultPrevented,$},E),l(A,"keypress",function(S){g&&(S.ctrlKey||S.altKey||S.shiftKey||S.metaKey)&&(u.stopEvent(S),g=null)},E),l(A,"keyup",function(S){p[S.keyCode]=null},E),p||(v(),l(window,"focus",v))};function v(){p=Object.create(null)}if(typeof window=="object"&&window.postMessage&&!c.isOldIE){var b=1;u.nextTick=function(A,D){D=D||window;var E="zero-timeout-message-"+b++,g=function(S){S.data==E&&(u.stopPropagation(S),a(D,"message",g),A())};l(D,"message",g),D.postMessage(E,"*")}}u.$idleBlocked=!1,u.onIdle=function(A,D){return setTimeout(function E(){u.$idleBlocked?setTimeout(E,100):A()},D)},u.$idleBlockId=null,u.blockIdle=function(A){u.$idleBlockId&&clearTimeout(u.$idleBlockId),u.$idleBlocked=!0,u.$idleBlockId=setTimeout(function(){u.$idleBlocked=!1},A||100)},u.nextFrame=typeof window=="object"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),u.nextFrame?u.nextFrame=u.nextFrame.bind(window):u.nextFrame=function(A){setTimeout(A,17)}}),ace.define("ace/clipboard",["require","exports","module"],function(n,u,y){var s;y.exports={lineMode:!1,pasteCancelled:function(){return s&&s>Date.now()-50?!0:s=!1},cancel:function(){s=Date.now()}}}),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/config","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],function(n,u,y){var s=n("../lib/event"),c=n("../config").nls,p=n("../lib/useragent"),o=n("../lib/dom"),d=n("../lib/lang"),e=n("../clipboard"),t=p.isChrome<18,r=p.isIE,l=p.isChrome>63,a=400,h=n("../lib/keys"),f=h.KEY_MODS,v=p.isIOS,b=v?/\s/:/\n/,A=p.isMobile,D;D=function(E,g){var S=o.createElement("textarea");S.className="ace_text-input",S.setAttribute("wrap","off"),S.setAttribute("autocorrect","off"),S.setAttribute("autocapitalize","off"),S.setAttribute("spellcheck","false"),S.style.opacity="0",E.insertBefore(S,E.firstChild);var $=!1,_=!1,T=!1,I=!1,w="";A||(S.style.fontSize="1px");var m=!1,C=!1,x="",M=0,F=0,R=0,N=Number.MAX_SAFE_INTEGER,W=Number.MIN_SAFE_INTEGER,B=0;try{var U=document.activeElement===S}catch{}this.setNumberOfExtraLines=function(Q){if(N=Number.MAX_SAFE_INTEGER,W=Number.MIN_SAFE_INTEGER,Q<0){B=0;return}B=Q},this.setAriaLabel=function(){var Q="";if(g.$textInputAriaLabel&&(Q+="".concat(g.$textInputAriaLabel,", ")),g.session){var re=g.session.selection.cursor.row;Q+=c("text-input.aria-label","Cursor at row $0",[re+1])}S.setAttribute("aria-label",Q)},this.setAriaOptions=function(Q){Q.activeDescendant?(S.setAttribute("aria-haspopup","true"),S.setAttribute("aria-autocomplete",Q.inline?"both":"list"),S.setAttribute("aria-activedescendant",Q.activeDescendant)):(S.setAttribute("aria-haspopup","false"),S.setAttribute("aria-autocomplete","both"),S.removeAttribute("aria-activedescendant")),Q.role&&S.setAttribute("role",Q.role),Q.setLabel&&(S.setAttribute("aria-roledescription",c("text-input.aria-roledescription","editor")),this.setAriaLabel())},this.setAriaOptions({role:"textbox"}),s.addListener(S,"blur",function(Q){C||(g.onBlur(Q),U=!1)},g),s.addListener(S,"focus",function(Q){if(!C){if(U=!0,p.isEdge)try{if(!document.hasFocus())return}catch{}g.onFocus(Q),p.isEdge?setTimeout(z):z()}},g),this.$focusScroll=!1,this.focus=function(){if(this.setAriaOptions({setLabel:g.renderer.enableKeyboardAccessibility}),w||l||this.$focusScroll=="browser")return S.focus({preventScroll:!0});var Q=S.style.top;S.style.position="fixed",S.style.top="0px";try{var re=S.getBoundingClientRect().top!=0}catch{return}var ae=[];if(re)for(var pe=S.parentElement;pe&&pe.nodeType==1;)ae.push(pe),pe.setAttribute("ace_nocontext","true"),!pe.parentElement&&pe.getRootNode?pe=pe.getRootNode().host:pe=pe.parentElement;S.focus({preventScroll:!0}),re&&ae.forEach(function(he){he.removeAttribute("ace_nocontext")}),setTimeout(function(){S.style.position="",S.style.top=="0px"&&(S.style.top=Q)},0)},this.blur=function(){S.blur()},this.isFocused=function(){return U},g.on("beforeEndOperation",function(){var Q=g.curOp,re=Q&&Q.command&&Q.command.name;if(re!="insertstring"){var ae=re&&(Q.docChanged||Q.selectionChanged);T&&ae&&(x=S.value="",Ze()),z()}}),g.on("changeSelection",this.setAriaLabel);var P=function(Q,re){for(var ae=re,pe=1;pe<=Q-N&&pe<2*B+1;pe++)ae+=g.session.getLine(Q-pe).length+1;return ae},z=v?function(Q){if(!(!U||$&&!Q||I)){Q||(Q="");var re=`
 ab`+Q+`cde fg
`;re!=S.value&&(S.value=x=re);var ae=4,pe=4+(Q.length||(g.selection.isEmpty()?0:1));(M!=ae||F!=pe)&&S.setSelectionRange(ae,pe),M=ae,F=pe}}:function(){if(!(T||I)&&!(!U&&!ee)){T=!0;var Q=0,re=0,ae="";if(g.session){var pe=g.selection,he=pe.getRange(),Ce=pe.cursor.row;Ce===W+1?(N=W+1,W=N+2*B):Ce===N-1?(W=N-1,N=W-2*B):(Ce<N-1||Ce>W+1)&&(N=Ce>B?Ce-B:0,W=Ce>B?Ce+B:2*B);for(var xe=[],Ae=N;Ae<=W;Ae++)xe.push(g.session.getLine(Ae));if(ae=xe.join(`
`),Q=P(he.start.row,he.start.column),re=P(he.end.row,he.end.column),he.start.row<N){var be=g.session.getLine(N-1);Q=he.start.row<N-1?0:Q,re+=be.length+1,ae=be+`
`+ae}else if(he.end.row>W){var me=g.session.getLine(W+1);re=he.end.row>W+1?me.length:he.end.column,re+=ae.length+1,ae=ae+`
`+me}else A&&Ce>0&&(ae=`
`+ae,re+=1,Q+=1);ae.length>a&&(Q<a&&re<a?ae=ae.slice(0,a):(ae=`
`,Q==re?Q=re=0:(Q=0,re=1)));var Fe=ae+`

`;Fe!=x&&(S.value=x=Fe,M=F=Fe.length)}if(ee&&(M=S.selectionStart,F=S.selectionEnd),F!=re||M!=Q||S.selectionEnd!=F)try{S.setSelectionRange(Q,re),M=Q,F=re}catch{}T=!1}};this.resetSelection=z,U&&g.onFocus();var K=function(Q){return Q.selectionStart===0&&Q.selectionEnd>=x.length&&Q.value===x&&x&&Q.selectionEnd!==F},V=function(Q){T||($?$=!1:K(S)?(g.selectAll(),z()):A&&S.selectionStart!=M&&z())},Y=null;this.setInputHandler=function(Q){Y=Q},this.getInputHandler=function(){return Y};var ee=!1,ne=function(Q,re){if(ee&&(ee=!1),_)return z(),Q&&g.onPaste(Q),_=!1,"";for(var ae=S.selectionStart,pe=S.selectionEnd,he=M,Ce=x.length-F,xe=Q,Ae=Q.length-ae,be=Q.length-pe,me=0;he>0&&x[me]==Q[me];)me++,he--;for(xe=xe.slice(me),me=1;Ce>0&&x.length-me>M-1&&x[x.length-me]==Q[Q.length-me];)me++,Ce--;Ae-=me-1,be-=me-1;var Fe=xe.length-me+1;if(Fe<0&&(he=-Fe,Fe=0),xe=xe.slice(0,Fe),!re&&!xe&&!Ae&&!he&&!Ce&&!be)return"";I=!0;var st=!1;return p.isAndroid&&xe==". "&&(xe="  ",st=!0),xe&&!he&&!Ce&&!Ae&&!be||m?g.onTextInput(xe):g.onTextInput(xe,{extendLeft:he,extendRight:Ce,restoreStart:Ae,restoreEnd:be}),I=!1,x=Q,M=ae,F=pe,R=be,st?`
`:xe},te=function(Q){if(T)return Xe();if(Q&&Q.inputType){if(Q.inputType=="historyUndo")return g.execCommand("undo");if(Q.inputType=="historyRedo")return g.execCommand("redo")}var re=S.value,ae=ne(re,!0);(re.length>a+100||b.test(ae)||A&&M<1&&M==F)&&z()},se=function(Q,re,ae){var pe=Q.clipboardData||window.clipboardData;if(!(!pe||t)){var he=r||ae?"Text":"text/plain";try{return re?pe.setData(he,re)!==!1:pe.getData(he)}catch(Ce){if(!ae)return se(Ce,re,!0)}}},ve=function(Q,re){var ae=g.getCopyText();if(!ae)return s.preventDefault(Q);se(Q,ae)?(v&&(z(ae),$=ae,setTimeout(function(){$=!1},10)),re?g.onCut():g.onCopy(),s.preventDefault(Q)):($=!0,S.value=ae,S.select(),setTimeout(function(){$=!1,z(),re?g.onCut():g.onCopy()}))},Me=function(Q){ve(Q,!0)},_e=function(Q){ve(Q,!1)},we=function(Q){var re=se(Q);e.pasteCancelled()||(typeof re=="string"?(re&&g.onPaste(re,Q),p.isIE&&setTimeout(z),s.preventDefault(Q)):(S.value="",_=!0))};s.addCommandKeyListener(S,function(Q,re,ae){if(!T)return g.onCommandKey(Q,re,ae)},g),s.addListener(S,"select",V,g),s.addListener(S,"input",te,g),s.addListener(S,"cut",Me,g),s.addListener(S,"copy",_e,g),s.addListener(S,"paste",we,g),(!("oncut"in S)||!("oncopy"in S)||!("onpaste"in S))&&s.addListener(E,"keydown",function(Q){if(!(p.isMac&&!Q.metaKey||!Q.ctrlKey))switch(Q.keyCode){case 67:_e(Q);break;case 86:we(Q);break;case 88:Me(Q);break}},g);var Ne=function(Q){if(!(T||!g.onCompositionStart||g.$readOnly)&&(T={},!m)){Q.data&&(T.useTextareaForIME=!1),setTimeout(Xe,0),g._signal("compositionStart"),g.on("mousedown",Rt);var re=g.getSelectionRange();re.end.row=re.start.row,re.end.column=re.start.column,T.markerRange=re,T.selectionStart=M,g.onCompositionStart(T),T.useTextareaForIME?(x=S.value="",M=0,F=0):(S.msGetInputContext&&(T.context=S.msGetInputContext()),S.getInputContext&&(T.context=S.getInputContext()))}},Xe=function(){if(!(!T||!g.onCompositionUpdate||g.$readOnly)){if(m)return Rt();if(T.useTextareaForIME)g.onCompositionUpdate(S.value);else{var Q=S.value;ne(Q),T.markerRange&&(T.context&&(T.markerRange.start.column=T.selectionStart=T.context.compositionStartOffset),T.markerRange.end.column=T.markerRange.start.column+F-T.selectionStart+R)}}},Ze=function(Q){!g.onCompositionEnd||g.$readOnly||(T=!1,g.onCompositionEnd(),g.off("mousedown",Rt),Q&&te())};function Rt(){C=!0,S.blur(),S.focus(),C=!1}var Jt=d.delayedCall(Xe,50).schedule.bind(null,null);function wn(Q){Q.keyCode==27&&S.value.length<S.selectionStart&&(T||(x=S.value),M=F=-1,z()),Jt()}s.addListener(S,"compositionstart",Ne,g),s.addListener(S,"compositionupdate",Xe,g),s.addListener(S,"keyup",wn,g),s.addListener(S,"keydown",Jt,g),s.addListener(S,"compositionend",Ze,g),this.getElement=function(){return S},this.setCommandMode=function(Q){m=Q,S.readOnly=!1},this.setReadOnly=function(Q){m||(S.readOnly=Q)},this.setCopyWithEmptySelection=function(Q){},this.onContextMenu=function(Q){ee=!0,z(),g._emit("nativecontextmenu",{target:g,domEvent:Q}),this.moveToMouse(Q,!0)},this.moveToMouse=function(Q,re){w||(w=S.style.cssText),S.style.cssText=(re?"z-index:100000;":"")+(p.isIE?"opacity:0.1;":"")+"text-indent: -"+(M+F)*g.renderer.characterWidth*.5+"px;";var ae=g.container.getBoundingClientRect(),pe=o.computedStyle(g.container),he=ae.top+(parseInt(pe.borderTopWidth)||0),Ce=ae.left+(parseInt(pe.borderLeftWidth)||0),xe=ae.bottom-he-S.clientHeight-2,Ae=function(be){o.translate(S,be.clientX-Ce-2,Math.min(be.clientY-he-2,xe))};Ae(Q),Q.type=="mousedown"&&(g.renderer.$isMousePressed=!0,clearTimeout(Ot),p.isWin&&s.capture(g.container,Ae,Tt))},this.onContextMenuClose=Tt;var Ot;function Tt(){clearTimeout(Ot),Ot=setTimeout(function(){w&&(S.style.cssText=w,w=""),g.renderer.$isMousePressed=!1,g.renderer.$keepTextAreaAtCursor&&g.renderer.$moveTextAreaToCursor()},0)}var Nt=function(Q){g.textInput.onContextMenu(Q),Tt()};s.addListener(S,"mouseup",Nt,g),s.addListener(S,"mousedown",function(Q){Q.preventDefault(),Tt()},g),s.addListener(g.renderer.scroller,"contextmenu",Nt,g),s.addListener(S,"contextmenu",Nt,g),v&&Cn(E,g,S);function Cn(Q,re,ae){var pe=null,he=!1;ae.addEventListener("keydown",function(xe){pe&&clearTimeout(pe),he=!0},!0),ae.addEventListener("keyup",function(xe){pe=setTimeout(function(){he=!1},100)},!0);var Ce=function(xe){if(document.activeElement===ae&&!(he||T||re.$mouseHandler.isMousePressed)&&!$){var Ae=ae.selectionStart,be=ae.selectionEnd,me=null,Fe=0;if(Ae==0?me=h.up:Ae==1?me=h.home:be>F&&x[be]==`
`?me=h.end:Ae<M&&x[Ae-1]==" "?(me=h.left,Fe=f.option):Ae<M||Ae==M&&F!=M&&Ae==be?me=h.left:be>F&&x.slice(0,be).split(`
`).length>2?me=h.down:be>F&&x[be-1]==" "?(me=h.right,Fe=f.option):(be>F||be==F&&F!=M&&Ae==be)&&(me=h.right),Ae!==be&&(Fe|=f.shift),me){var st=re.onCommandKey({},Fe,me);if(!st&&re.commands){me=h.keyCodeToString(me);var Yt=re.commands.findKeyCommand(Fe,me);Yt&&re.execCommand(Yt)}M=Ae,F=be,z("")}}};document.addEventListener("selectionchange",Ce),re.on("destroy",function(){document.removeEventListener("selectionchange",Ce)})}this.destroy=function(){S.parentElement&&S.parentElement.removeChild(S)}},u.TextInput=D,u.$setUserAgentForTests=function(E,g){A=E,v=g}}),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],function(n,u,y){var s=n("../lib/useragent"),c=0,p=550,o=function(){function t(r){r.$clickSelection=null;var l=r.editor;l.setDefaultHandler("mousedown",this.onMouseDown.bind(r)),l.setDefaultHandler("dblclick",this.onDoubleClick.bind(r)),l.setDefaultHandler("tripleclick",this.onTripleClick.bind(r)),l.setDefaultHandler("quadclick",this.onQuadClick.bind(r)),l.setDefaultHandler("mousewheel",this.onMouseWheel.bind(r));var a=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];a.forEach(function(h){r[h]=this[h]},this),r.selectByLines=this.extendSelectionBy.bind(r,"getLineRange"),r.selectByWords=this.extendSelectionBy.bind(r,"getWordRange")}return t.prototype.onMouseDown=function(r){var l=r.inSelection(),a=r.getDocumentPosition();this.mousedownEvent=r;var h=this.editor,f=r.getButton();if(f!==0){var v=h.getSelectionRange(),b=v.isEmpty();(b||f==1)&&h.selection.moveToPosition(a),f==2&&(h.textInput.onContextMenu(r.domEvent),s.isMozilla||r.preventDefault());return}if(this.mousedownEvent.time=Date.now(),l&&!h.isFocused()&&(h.focus(),this.$focusTimeout&&!this.$clickSelection&&!h.inMultiSelectMode)){this.setState("focusWait"),this.captureMouse(r);return}return this.captureMouse(r),this.startSelect(a,r.domEvent._clicks>1),r.preventDefault()},t.prototype.startSelect=function(r,l){r=r||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var a=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?a.selection.selectToPosition(r):l||a.selection.moveToPosition(r),l||this.select(),a.setStyle("ace_selecting"),this.setState("select"))},t.prototype.select=function(){var r,l=this.editor,a=l.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var h=this.$clickSelection.comparePoint(a);if(h==-1)r=this.$clickSelection.end;else if(h==1)r=this.$clickSelection.start;else{var f=e(this.$clickSelection,a);a=f.cursor,r=f.anchor}l.selection.setSelectionAnchor(r.row,r.column)}l.selection.selectToPosition(a),l.renderer.scrollCursorIntoView()},t.prototype.extendSelectionBy=function(r){var l,a=this.editor,h=a.renderer.screenToTextCoordinates(this.x,this.y),f=a.selection[r](h.row,h.column);if(this.$clickSelection){var v=this.$clickSelection.comparePoint(f.start),b=this.$clickSelection.comparePoint(f.end);if(v==-1&&b<=0)l=this.$clickSelection.end,(f.end.row!=h.row||f.end.column!=h.column)&&(h=f.start);else if(b==1&&v>=0)l=this.$clickSelection.start,(f.start.row!=h.row||f.start.column!=h.column)&&(h=f.end);else if(v==-1&&b==1)h=f.end,l=f.start;else{var A=e(this.$clickSelection,h);h=A.cursor,l=A.anchor}a.selection.setSelectionAnchor(l.row,l.column)}a.selection.selectToPosition(h),a.renderer.scrollCursorIntoView()},t.prototype.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting")},t.prototype.focusWait=function(){var r=d(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),l=Date.now();(r>c||l-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},t.prototype.onDoubleClick=function(r){var l=r.getDocumentPosition(),a=this.editor,h=a.session,f=h.getBracketRange(l);f?(f.isEmpty()&&(f.start.column--,f.end.column++),this.setState("select")):(f=a.selection.getWordRange(l.row,l.column),this.setState("selectByWords")),this.$clickSelection=f,this.select()},t.prototype.onTripleClick=function(r){var l=r.getDocumentPosition(),a=this.editor;this.setState("selectByLines");var h=a.getSelectionRange();h.isMultiLine()&&h.contains(l.row,l.column)?(this.$clickSelection=a.selection.getLineRange(h.start.row),this.$clickSelection.end=a.selection.getLineRange(h.end.row).end):this.$clickSelection=a.selection.getLineRange(l.row),this.select()},t.prototype.onQuadClick=function(r){var l=this.editor;l.selectAll(),this.$clickSelection=l.getSelectionRange(),this.setState("selectAll")},t.prototype.onMouseWheel=function(r){if(!r.getAccelKey()){r.getShiftKey()&&r.wheelY&&!r.wheelX&&(r.wheelX=r.wheelY,r.wheelY=0);var l=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var a=this.$lastScroll,h=r.domEvent.timeStamp,f=h-a.t,v=f?r.wheelX/f:a.vx,b=f?r.wheelY/f:a.vy;f<p&&(v=(v+a.vx)/2,b=(b+a.vy)/2);var A=Math.abs(v/b),D=!1;if(A>=1&&l.renderer.isScrollableBy(r.wheelX*r.speed,0)&&(D=!0),A<=1&&l.renderer.isScrollableBy(0,r.wheelY*r.speed)&&(D=!0),D)a.allowed=h;else if(h-a.allowed<p){var E=Math.abs(v)<=1.5*Math.abs(a.vx)&&Math.abs(b)<=1.5*Math.abs(a.vy);E?(D=!0,a.allowed=h):a.allowed=0}if(a.t=h,a.vx=v,a.vy=b,D)return l.renderer.scrollBy(r.wheelX*r.speed,r.wheelY*r.speed),r.stop()}},t}();o.prototype.selectEnd=o.prototype.selectByLinesEnd,o.prototype.selectAllEnd=o.prototype.selectByLinesEnd,o.prototype.selectByWordsEnd=o.prototype.selectByLinesEnd,u.DefaultHandlers=o;function d(t,r,l,a){return Math.sqrt(Math.pow(l-t,2)+Math.pow(a-r,2))}function e(t,r){if(t.start.row==t.end.row)var l=2*r.column-t.start.column-t.end.column;else if(t.start.row==t.end.row-1&&!t.start.column&&!t.end.column)var l=r.column-4;else var l=2*r.row-t.start.row-t.end.row;return l<0?{cursor:t.start,anchor:t.end}:{cursor:t.end,anchor:t.start}}}),ace.define("ace/lib/scroll",["require","exports","module"],function(n,u,y){u.preventParentScroll=function(c){c.stopPropagation();var p=c.currentTarget,o=p.scrollHeight>p.clientHeight;o||c.preventDefault()}}),ace.define("ace/tooltip",["require","exports","module","ace/lib/dom","ace/lib/event","ace/range","ace/lib/scroll"],function(n,u,y){var s=this&&this.__extends||function(){var h=function(f,v){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,A){b.__proto__=A}||function(b,A){for(var D in A)Object.prototype.hasOwnProperty.call(A,D)&&(b[D]=A[D])},h(f,v)};return function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");h(f,v);function b(){this.constructor=f}f.prototype=v===null?Object.create(v):(b.prototype=v.prototype,new b)}}(),c=this&&this.__values||function(h){var f=typeof Symbol=="function"&&Symbol.iterator,v=f&&h[f],b=0;if(v)return v.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&b>=h.length&&(h=void 0),{value:h&&h[b++],done:!h}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")},p=n("./lib/dom");n("./lib/event");var o=n("./range").Range,d=n("./lib/scroll").preventParentScroll,e="ace_tooltip",t=function(){function h(f){this.isOpen=!1,this.$element=null,this.$parentNode=f}return h.prototype.$init=function(){return this.$element=p.createElement("div"),this.$element.className=e,this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},h.prototype.getElement=function(){return this.$element||this.$init()},h.prototype.setText=function(f){this.getElement().textContent=f},h.prototype.setHtml=function(f){this.getElement().innerHTML=f},h.prototype.setPosition=function(f,v){this.getElement().style.left=f+"px",this.getElement().style.top=v+"px"},h.prototype.setClassName=function(f){p.addCssClass(this.getElement(),f)},h.prototype.setTheme=function(f){this.$element.className=e+" "+(f.isDark?"ace_dark ":"")+(f.cssClass||"")},h.prototype.show=function(f,v,b){f!=null&&this.setText(f),v!=null&&b!=null&&this.setPosition(v,b),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},h.prototype.hide=function(f){this.isOpen&&(this.getElement().style.display="none",this.getElement().className=e,this.isOpen=!1)},h.prototype.getHeight=function(){return this.getElement().offsetHeight},h.prototype.getWidth=function(){return this.getElement().offsetWidth},h.prototype.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)},h}(),r=function(){function h(){this.popups=[]}return h.prototype.addPopup=function(f){this.popups.push(f),this.updatePopups()},h.prototype.removePopup=function(f){var v=this.popups.indexOf(f);v!==-1&&(this.popups.splice(v,1),this.updatePopups())},h.prototype.updatePopups=function(){var f,v,b,A;this.popups.sort(function(w,m){return m.priority-w.priority});var D=[];try{for(var E=c(this.popups),g=E.next();!g.done;g=E.next()){var S=g.value,$=!0;try{for(var _=(b=void 0,c(D)),T=_.next();!T.done;T=_.next()){var I=T.value;if(this.doPopupsOverlap(I,S)){$=!1;break}}}catch(w){b={error:w}}finally{try{T&&!T.done&&(A=_.return)&&A.call(_)}finally{if(b)throw b.error}}$?D.push(S):S.hide()}}catch(w){f={error:w}}finally{try{g&&!g.done&&(v=E.return)&&v.call(E)}finally{if(f)throw f.error}}},h.prototype.doPopupsOverlap=function(f,v){var b=f.getElement().getBoundingClientRect(),A=v.getElement().getBoundingClientRect();return b.left<A.right&&b.right>A.left&&b.top<A.bottom&&b.bottom>A.top},h}(),l=new r;u.popupManager=l,u.Tooltip=t;var a=function(h){s(f,h);function f(v){v===void 0&&(v=document.body);var b=h.call(this,v)||this;b.timeout=void 0,b.lastT=0,b.idleTime=350,b.lastEvent=void 0,b.onMouseOut=b.onMouseOut.bind(b),b.onMouseMove=b.onMouseMove.bind(b),b.waitForHover=b.waitForHover.bind(b),b.hide=b.hide.bind(b);var A=b.getElement();return A.style.whiteSpace="pre-wrap",A.style.pointerEvents="auto",A.addEventListener("mouseout",b.onMouseOut),A.tabIndex=-1,A.addEventListener("blur",function(){A.contains(document.activeElement)||this.hide()}.bind(b)),A.addEventListener("wheel",d),b}return f.prototype.addToEditor=function(v){v.on("mousemove",this.onMouseMove),v.on("mousedown",this.hide),v.renderer.getMouseEventTarget().addEventListener("mouseout",this.onMouseOut,!0)},f.prototype.removeFromEditor=function(v){v.off("mousemove",this.onMouseMove),v.off("mousedown",this.hide),v.renderer.getMouseEventTarget().removeEventListener("mouseout",this.onMouseOut,!0),this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},f.prototype.onMouseMove=function(v,b){this.lastEvent=v,this.lastT=Date.now();var A=b.$mouseHandler.isMousePressed;if(this.isOpen){var D=this.lastEvent&&this.lastEvent.getDocumentPosition();(!this.range||!this.range.contains(D.row,D.column)||A||this.isOutsideOfText(this.lastEvent))&&this.hide()}this.timeout||A||(this.lastEvent=v,this.timeout=setTimeout(this.waitForHover,this.idleTime))},f.prototype.waitForHover=function(){this.timeout&&clearTimeout(this.timeout);var v=Date.now()-this.lastT;if(this.idleTime-v>10){this.timeout=setTimeout(this.waitForHover,this.idleTime-v);return}this.timeout=null,this.lastEvent&&!this.isOutsideOfText(this.lastEvent)&&this.$gatherData(this.lastEvent,this.lastEvent.editor)},f.prototype.isOutsideOfText=function(v){var b=v.editor,A=v.getDocumentPosition(),D=b.session.getLine(A.row);if(A.column==D.length){var E=b.renderer.pixelToScreenCoordinates(v.clientX,v.clientY),g=b.session.documentToScreenPosition(A.row,A.column);if(g.column!=E.column||g.row!=E.row)return!0}return!1},f.prototype.setDataProvider=function(v){this.$gatherData=v},f.prototype.showForRange=function(v,b,A,D){var E=10;if(!(D&&D!=this.lastEvent)&&!(this.isOpen&&document.activeElement==this.getElement())){var g=v.renderer;this.isOpen||(l.addPopup(this),this.$registerCloseEvents(),this.setTheme(g.theme)),this.isOpen=!0,this.addMarker(b,v.session),this.range=o.fromPoints(b.start,b.end);var S=g.textToScreenCoordinates(b.start.row,b.start.column),$=g.scroller.getBoundingClientRect();S.pageX<$.left&&(S.pageX=$.left);var _=this.getElement();_.innerHTML="",_.appendChild(A),_.style.maxHeight="",_.style.display="block";var T=_.clientHeight,I=_.clientWidth,w=window.innerHeight-S.pageY-g.lineHeight,m=!0;S.pageY-T<0&&S.pageY<w&&(m=!1),_.style.maxHeight=(m?S.pageY:w)-E+"px",_.style.top=m?"":S.pageY+g.lineHeight+"px",_.style.bottom=m?window.innerHeight-S.pageY+"px":"",_.style.left=Math.min(S.pageX,window.innerWidth-I-E)+"px"}},f.prototype.addMarker=function(v,b){this.marker&&this.$markerSession.removeMarker(this.marker),this.$markerSession=b,this.marker=b&&b.addMarker(v,"ace_highlight-marker","text")},f.prototype.hide=function(v){!v&&document.activeElement==this.getElement()||v&&v.target&&(v.type!="keydown"||v.ctrlKey||v.metaKey)&&this.$element.contains(v.target)||(this.lastEvent=null,this.timeout&&clearTimeout(this.timeout),this.timeout=null,this.addMarker(null),this.isOpen&&(this.$removeCloseEvents(),this.getElement().style.display="none",this.isOpen=!1,l.removePopup(this)))},f.prototype.$registerCloseEvents=function(){window.addEventListener("keydown",this.hide,!0),window.addEventListener("wheel",this.hide,!0),window.addEventListener("mousedown",this.hide,!0)},f.prototype.$removeCloseEvents=function(){window.removeEventListener("keydown",this.hide,!0),window.removeEventListener("wheel",this.hide,!0),window.removeEventListener("mousedown",this.hide,!0)},f.prototype.onMouseOut=function(v){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.lastEvent=null,this.isOpen&&(!v.relatedTarget||this.getElement().contains(v.relatedTarget)||v&&v.currentTarget.contains(v.relatedTarget)||v.relatedTarget.classList.contains("ace_content")||this.hide())},f}(t);u.HoverTooltip=a}),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/tooltip","ace/config"],function(n,u,y){var s=this&&this.__extends||function(){var h=function(f,v){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,A){b.__proto__=A}||function(b,A){for(var D in A)Object.prototype.hasOwnProperty.call(A,D)&&(b[D]=A[D])},h(f,v)};return function(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");h(f,v);function b(){this.constructor=f}f.prototype=v===null?Object.create(v):(b.prototype=v.prototype,new b)}}(),c=this&&this.__values||function(h){var f=typeof Symbol=="function"&&Symbol.iterator,v=f&&h[f],b=0;if(v)return v.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&b>=h.length&&(h=void 0),{value:h&&h[b++],done:!h}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")},p=n("../lib/dom"),o=n("../lib/event"),d=n("../tooltip").Tooltip,e=n("../config").nls,t=5,r=3;u.GUTTER_TOOLTIP_LEFT_OFFSET=t,u.GUTTER_TOOLTIP_TOP_OFFSET=r;function l(h){var f=h.editor,v=f.renderer.$gutterLayer,b=new a(f,!0);h.editor.setDefaultHandler("guttermousedown",function($){if(!(!f.isFocused()||$.getButton()!=0)){var _=v.getRegion($);if(_!="foldWidgets"){var T=$.getDocumentPosition().row,I=f.session.selection;if($.getShiftKey())I.selectTo(T,0);else{if($.domEvent.detail==2)return f.selectAll(),$.preventDefault();h.$clickSelection=f.selection.getLineRange(T)}return h.setState("selectByLines"),h.captureMouse($),$.preventDefault()}}});var A,D;function E(){var $=D.getDocumentPosition().row,_=f.session.getLength();if($==_){var T=f.renderer.pixelToScreenCoordinates(0,D.y).row,I=D.$pos;if(T>f.session.documentToScreenRow(I.row,I.column))return g()}if(b.showTooltip($),!!b.isOpen)if(f.on("mousewheel",g),f.on("changeSession",g),window.addEventListener("keydown",g,!0),h.$tooltipFollowsMouse)S(D);else{var w=D.getGutterRow(),m=v.$lines.get(w);if(m){var C=m.element.querySelector(".ace_gutter_annotation"),x=C.getBoundingClientRect(),M=b.getElement().style;M.left=x.right-t+"px",M.top=x.bottom-r+"px"}else S(D)}}function g($){$&&$.type==="keydown"&&($.ctrlKey||$.metaKey)||$&&$.type==="mouseout"&&(!$.relatedTarget||b.getElement().contains($.relatedTarget))||(A&&(A=clearTimeout(A)),b.isOpen&&(b.hideTooltip(),f.off("mousewheel",g),f.off("changeSession",g),window.removeEventListener("keydown",g,!0)))}function S($){b.setPosition($.x,$.y)}h.editor.setDefaultHandler("guttermousemove",function($){var _=$.domEvent.target||$.domEvent.srcElement;if(p.hasCssClass(_,"ace_fold-widget"))return g();b.isOpen&&h.$tooltipFollowsMouse&&S($),D=$,!A&&(A=setTimeout(function(){A=null,D&&!h.isMousePressed&&E()},50))}),o.addListener(f.renderer.$gutter,"mouseout",function($){D=null,b.isOpen&&(A=setTimeout(function(){A=null,g($)},50))},f)}u.GutterHandler=l;var a=function(h){s(f,h);function f(v,b){b===void 0&&(b=!1);var A=h.call(this,v.container)||this;A.editor=v,A.visibleTooltipRow;var D=A.getElement();return D.setAttribute("role","tooltip"),D.style.pointerEvents="auto",b&&(A.onMouseOut=A.onMouseOut.bind(A),D.addEventListener("mouseout",A.onMouseOut)),A}return f.prototype.onMouseOut=function(v){this.isOpen&&(!v.relatedTarget||this.getElement().contains(v.relatedTarget)||v&&v.currentTarget.contains(v.relatedTarget)||this.hideTooltip())},f.prototype.setPosition=function(v,b){var A=window.innerWidth||document.documentElement.clientWidth,D=window.innerHeight||document.documentElement.clientHeight,E=this.getWidth(),g=this.getHeight();v+=15,b+=15,v+E>A&&(v-=v+E-A),b+g>D&&(b-=20+g),d.prototype.setPosition.call(this,v,b)},Object.defineProperty(f,"annotationLabels",{get:function(){return{error:{singular:e("gutter-tooltip.aria-label.error.singular","error"),plural:e("gutter-tooltip.aria-label.error.plural","errors")},security:{singular:e("gutter-tooltip.aria-label.security.singular","security finding"),plural:e("gutter-tooltip.aria-label.security.plural","security findings")},warning:{singular:e("gutter-tooltip.aria-label.warning.singular","warning"),plural:e("gutter-tooltip.aria-label.warning.plural","warnings")},info:{singular:e("gutter-tooltip.aria-label.info.singular","information message"),plural:e("gutter-tooltip.aria-label.info.plural","information messages")},hint:{singular:e("gutter-tooltip.aria-label.hint.singular","suggestion"),plural:e("gutter-tooltip.aria-label.hint.plural","suggestions")}}},enumerable:!1,configurable:!0}),f.prototype.showTooltip=function(v){var b,A=this.editor.renderer.$gutterLayer,D=A.$annotations[v],E;D?E={displayText:Array.from(D.displayText),type:Array.from(D.type)}:E={displayText:[],type:[]};var g=A.session.getFoldLine(v);if(g&&A.$showFoldedAnnotations){for(var S={error:[],security:[],warning:[],info:[],hint:[]},$={error:1,security:2,warning:3,info:4,hint:5},_,T=v+1;T<=g.end.row;T++)if(A.$annotations[T])for(var I=0;I<A.$annotations[T].text.length;I++){var w=A.$annotations[T].type[I];S[w].push(A.$annotations[T].text[I]),(!_||$[w]<$[_])&&(_=w)}if(["error","security","warning"].includes(_)){var m="".concat(f.annotationsToSummaryString(S)," in folded code.");E.displayText.push(m),E.type.push(_+"_fold")}}if(E.displayText.length===0)return this.hideTooltip();for(var C={error:[],security:[],warning:[],info:[],hint:[]},x=A.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",T=0;T<E.displayText.length;T++){var M=p.createElement("span"),F=p.createElement("span");(b=F.classList).add.apply(b,["ace_".concat(E.type[T]),x]),F.setAttribute("aria-label","".concat(f.annotationLabels[E.type[T].replace("_fold","")].singular)),F.setAttribute("role","img"),F.appendChild(p.createTextNode(" ")),M.appendChild(F),M.appendChild(p.createTextNode(E.displayText[T])),M.appendChild(p.createElement("br")),C[E.type[T].replace("_fold","")].push(M)}var R=this.getElement();p.removeChildren(R),C.error.forEach(function(N){return R.appendChild(N)}),C.security.forEach(function(N){return R.appendChild(N)}),C.warning.forEach(function(N){return R.appendChild(N)}),C.info.forEach(function(N){return R.appendChild(N)}),C.hint.forEach(function(N){return R.appendChild(N)}),R.setAttribute("aria-live","polite"),this.isOpen||(this.setTheme(this.editor.renderer.theme),this.setClassName("ace_gutter-tooltip")),this.show(),this.visibleTooltipRow=v,this.editor._signal("showGutterTooltip",this)},f.prototype.hideTooltip=function(){this.isOpen&&(this.$element.removeAttribute("aria-live"),this.hide(),this.visibleTooltipRow=void 0,this.editor._signal("hideGutterTooltip",this))},f.annotationsToSummaryString=function(v){var b,A,D=[],E=["error","security","warning","info","hint"];try{for(var g=c(E),S=g.next();!S.done;S=g.next()){var $=S.value;if(v[$].length){var _=v[$].length===1?f.annotationLabels[$].singular:f.annotationLabels[$].plural;D.push("".concat(v[$].length," ").concat(_))}}}catch(T){b={error:T}}finally{try{S&&!S.done&&(A=g.return)&&A.call(g)}finally{if(b)throw b.error}}return D.join(", ")},f}(d);u.GutterTooltip=a}),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(n,u,y){var s=n("../lib/event"),c=n("../lib/useragent"),p=function(){function o(d,e){this.speed,this.wheelX,this.wheelY,this.domEvent=d,this.editor=e,this.x=this.clientX=d.clientX,this.y=this.clientY=d.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1}return o.prototype.stopPropagation=function(){s.stopPropagation(this.domEvent),this.propagationStopped=!0},o.prototype.preventDefault=function(){s.preventDefault(this.domEvent),this.defaultPrevented=!0},o.prototype.stop=function(){this.stopPropagation(),this.preventDefault()},o.prototype.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},o.prototype.getGutterRow=function(){var d=this.getDocumentPosition().row,e=this.editor.session.documentToScreenRow(d,0),t=this.editor.session.documentToScreenRow(this.editor.renderer.$gutterLayer.$lines.get(0).row,0);return e-t},o.prototype.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var d=this.editor,e=d.getSelectionRange();if(e.isEmpty())this.$inSelection=!1;else{var t=this.getDocumentPosition();this.$inSelection=e.contains(t.row,t.column)}return this.$inSelection},o.prototype.getButton=function(){return s.getButton(this.domEvent)},o.prototype.getShiftKey=function(){return this.domEvent.shiftKey},o.prototype.getAccelKey=function(){return c.isMac?this.domEvent.metaKey:this.domEvent.ctrlKey},o}();u.MouseEvent=p}),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(n,u,y){var s=n("../lib/dom"),c=n("../lib/event"),p=n("../lib/useragent"),o=200,d=200,e=5;function t(l){var a=l.editor,h=s.createElement("div");h.style.cssText="top:-100px;position:absolute;z-index:2147483647;opacity:0.5",h.textContent=" ";var f=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];f.forEach(function(P){l[P]=this[P]},this),a.on("mousedown",this.onMouseDown.bind(l));var v=a.container,b,A,D,E,g,S,$=0,_,T,I,w,m;this.onDragStart=function(P){if(this.cancelDrag||!v.draggable){var z=this;return setTimeout(function(){z.startSelect(),z.captureMouse(P)},0),P.preventDefault()}g=a.getSelectionRange();var K=P.dataTransfer;K.effectAllowed=a.getReadOnly()?"copy":"copyMove",a.container.appendChild(h),K.setDragImage&&K.setDragImage(h,0,0),setTimeout(function(){a.container.removeChild(h)}),K.clearData(),K.setData("Text",a.session.getTextRange()),T=!0,this.setState("drag")},this.onDragEnd=function(P){if(v.draggable=!1,T=!1,this.setState(null),!a.getReadOnly()){var z=P.dataTransfer.dropEffect;!_&&z=="move"&&a.session.remove(a.getSelectionRange()),a.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(P){if(!(a.getReadOnly()||!B(P.dataTransfer)))return A=P.clientX,D=P.clientY,b||F(),$++,P.dataTransfer.dropEffect=_=U(P),c.preventDefault(P)},this.onDragOver=function(P){if(!(a.getReadOnly()||!B(P.dataTransfer)))return A=P.clientX,D=P.clientY,b||(F(),$++),N!==null&&(N=null),P.dataTransfer.dropEffect=_=U(P),c.preventDefault(P)},this.onDragLeave=function(P){if($--,$<=0&&b)return R(),_=null,c.preventDefault(P)},this.onDrop=function(P){if(S){var z=P.dataTransfer;if(T)switch(_){case"move":g.contains(S.row,S.column)?g={start:S,end:S}:g=a.moveText(g,S);break;case"copy":g=a.moveText(g,S,!0);break}else{var K=z.getData("Text");g={start:S,end:a.session.insert(S,K)},a.focus(),_=null}return R(),c.preventDefault(P)}},c.addListener(v,"dragstart",this.onDragStart.bind(l),a),c.addListener(v,"dragend",this.onDragEnd.bind(l),a),c.addListener(v,"dragenter",this.onDragEnter.bind(l),a),c.addListener(v,"dragover",this.onDragOver.bind(l),a),c.addListener(v,"dragleave",this.onDragLeave.bind(l),a),c.addListener(v,"drop",this.onDrop.bind(l),a);function C(P,z){var K=Date.now(),V=!z||P.row!=z.row,Y=!z||P.column!=z.column;if(!w||V||Y)a.moveCursorToPosition(P),w=K,m={x:A,y:D};else{var ee=r(m.x,m.y,A,D);ee>e?w=null:K-w>=d&&(a.renderer.scrollCursorIntoView(),w=null)}}function x(P,z){var K=Date.now(),V=a.renderer.layerConfig.lineHeight,Y=a.renderer.layerConfig.characterWidth,ee=a.renderer.scroller.getBoundingClientRect(),ne={x:{left:A-ee.left,right:ee.right-A},y:{top:D-ee.top,bottom:ee.bottom-D}},te=Math.min(ne.x.left,ne.x.right),se=Math.min(ne.y.top,ne.y.bottom),ve={row:P.row,column:P.column};te/Y<=2&&(ve.column+=ne.x.left<ne.x.right?-3:2),se/V<=1&&(ve.row+=ne.y.top<ne.y.bottom?-1:1);var Me=P.row!=ve.row,_e=P.column!=ve.column,we=!z||P.row!=z.row;Me||_e&&!we?I?K-I>=o&&a.renderer.scrollCursorIntoView(ve):I=K:I=null}function M(){var P=S;S=a.renderer.screenToTextCoordinates(A,D),C(S,P),x(S,P)}function F(){g=a.selection.toOrientedRange(),b=a.session.addMarker(g,"ace_selection",a.getSelectionStyle()),a.clearSelection(),a.isFocused()&&a.renderer.$cursorLayer.setBlinking(!1),clearInterval(E),M(),E=setInterval(M,20),$=0,c.addListener(document,"mousemove",W)}function R(){clearInterval(E),a.session.removeMarker(b),b=null,a.selection.fromOrientedRange(g),a.isFocused()&&!T&&a.$resetCursorStyle(),g=null,S=null,$=0,I=null,w=null,c.removeListener(document,"mousemove",W)}var N=null;function W(){N==null&&(N=setTimeout(function(){N!=null&&b&&R()},20))}function B(P){var z=P.types;return!z||Array.prototype.some.call(z,function(K){return K=="text/plain"||K=="Text"})}function U(P){var z=["copy","copymove","all","uninitialized"],K=["move","copymove","linkmove","all","uninitialized"],V=p.isMac?P.altKey:P.ctrlKey,Y="uninitialized";try{Y=P.dataTransfer.effectAllowed.toLowerCase()}catch{}var ee="none";return V&&z.indexOf(Y)>=0?ee="copy":K.indexOf(Y)>=0?ee="move":z.indexOf(Y)>=0&&(ee="copy"),ee}}(function(){this.dragWait=function(){var l=Date.now()-this.mousedownEvent.time;l>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var l=this.editor.container;l.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(l){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var l=this.editor,a=l.container;a.draggable=!0,l.renderer.$cursorLayer.setBlinking(!1),l.setStyle("ace_dragging");var h=p.isWin?"default":"move";l.renderer.setCursorStyle(h),this.setState("dragReady")},this.onMouseDrag=function(l){var a=this.editor.container;if(p.isIE&&this.state=="dragReady"){var h=r(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);h>3&&a.dragDrop()}if(this.state==="dragWait"){var h=r(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);h>0&&(a.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(l){if(this.$dragEnabled){this.mousedownEvent=l;var a=this.editor,h=l.inSelection(),f=l.getButton(),v=l.domEvent.detail||1;if(v===1&&f===0&&h){if(l.editor.inMultiSelectMode&&(l.getAccelKey()||l.getShiftKey()))return;this.mousedownEvent.time=Date.now();var b=l.domEvent.target||l.domEvent.srcElement;if("unselectable"in b&&(b.unselectable="on"),a.getDragDelay()){if(p.isWebKit){this.cancelDrag=!0;var A=a.container;A.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(l,this.onMouseDrag.bind(this)),l.defaultPrevented=!0}}}}).call(t.prototype);function r(l,a,h,f){return Math.sqrt(Math.pow(h-l,2)+Math.pow(f-a,2))}u.DragdropHandler=t}),ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],function(n,u,y){var s=n("./mouse_event").MouseEvent,c=n("../lib/event"),p=n("../lib/dom");u.addTouchListeners=function(o,d){var e="scroll",t,r,l,a,h,f,v=0,b,A=0,D=0,E=0,g,S;function $(){var C=window.navigator&&window.navigator.clipboard,x=!1,M=function(){var N=d.getCopyText(),W=d.session.getUndoManager().hasUndo();S.replaceChild(p.buildDom(x?["span",!N&&F("selectall")&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],N&&F("copy")&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],N&&F("cut")&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],C&&F("paste")&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],W&&F("undo")&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],F("find")&&["span",{class:"ace_mobile-button",action:"find"},"Find"],F("openCommandPalette")&&["span",{class:"ace_mobile-button",action:"openCommandPalette"},"Palette"]]:["span"]),S.firstChild)},F=function(N){return d.commands.canExecute(N,d)},R=function(N){var W=N.target.getAttribute("action");if(W=="more"||!x)return x=!x,M();W=="paste"?C.readText().then(function(B){d.execCommand(W,B)}):W&&((W=="cut"||W=="copy")&&(C?C.writeText(d.getCopyText()):document.execCommand("copy")),d.execCommand(W)),S.firstChild.style.display="none",x=!1,W!="openCommandPalette"&&d.focus()};S=p.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(N){e="menu",N.stopPropagation(),N.preventDefault(),d.textInput.focus()},ontouchend:function(N){N.stopPropagation(),N.preventDefault(),R(N)},onclick:R},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],d.container)}function _(){if(!d.getOption("enableMobileMenu")){S&&T();return}S||$();var C=d.selection.cursor,x=d.renderer.textToScreenCoordinates(C.row,C.column),M=d.renderer.textToScreenCoordinates(0,0).pageX,F=d.renderer.scrollLeft,R=d.container.getBoundingClientRect();S.style.top=x.pageY-R.top-3+"px",x.pageX-R.left<R.width-70?(S.style.left="",S.style.right="10px"):(S.style.right="",S.style.left=M+F-R.left+"px"),S.style.display="",S.firstChild.style.display="none",d.on("input",T)}function T(C){S&&(S.style.display="none"),d.off("input",T)}function I(){h=null,clearTimeout(h);var C=d.selection.getRange(),x=C.contains(b.row,b.column);(C.isEmpty()||!x)&&(d.selection.moveToPosition(b),d.selection.selectWord()),e="wait",_()}function w(){h=null,clearTimeout(h),d.selection.moveToPosition(b);var C=A>=2?d.selection.getLineRange(b.row):d.session.getBracketRange(b);C&&!C.isEmpty()?d.selection.setRange(C):d.selection.selectWord(),e="wait"}c.addListener(o,"contextmenu",function(C){if(g){var x=d.textInput.getElement();x.focus()}},d),c.addListener(o,"touchstart",function(C){var x=C.touches;if(h||x.length>1){clearTimeout(h),h=null,l=-1,e="zoom";return}g=d.$mouseHandler.isMousePressed=!0;var M=d.renderer.layerConfig.lineHeight,F=d.renderer.layerConfig.lineHeight,R=C.timeStamp;a=R;var N=x[0],W=N.clientX,B=N.clientY;Math.abs(t-W)+Math.abs(r-B)>M&&(l=-1),t=C.clientX=W,r=C.clientY=B,D=E=0;var U=new s(C,d);if(b=U.getDocumentPosition(),R-l<500&&x.length==1&&!v)A++,C.preventDefault(),C.button=0,w();else{A=0;var P=d.selection.cursor,z=d.selection.isEmpty()?P:d.selection.anchor,K=d.renderer.$cursorLayer.getPixelPosition(P,!0),V=d.renderer.$cursorLayer.getPixelPosition(z,!0),Y=d.renderer.scroller.getBoundingClientRect(),ee=d.renderer.layerConfig.offset,ne=d.renderer.scrollLeft,te=function(Me,_e){return Me=Me/F,_e=_e/M-.75,Me*Me+_e*_e};if(C.clientX<Y.left){e="zoom";return}var se=te(C.clientX-Y.left-K.left+ne,C.clientY-Y.top-K.top+ee),ve=te(C.clientX-Y.left-V.left+ne,C.clientY-Y.top-V.top+ee);se<3.5&&ve<3.5&&(e=se>ve?"cursor":"anchor"),ve<3.5?e="anchor":se<3.5?e="cursor":e="scroll",h=setTimeout(I,450)}l=R},d),c.addListener(o,"touchend",function(C){g=d.$mouseHandler.isMousePressed=!1,f&&clearInterval(f),e=="zoom"?(e="",v=0):h?(d.selection.moveToPosition(b),v=0,_()):e=="scroll"?(m(),T()):_(),clearTimeout(h),h=null},d),c.addListener(o,"touchmove",function(C){h&&(clearTimeout(h),h=null);var x=C.touches;if(!(x.length>1||e=="zoom")){var M=x[0],F=t-M.clientX,R=r-M.clientY;if(e=="wait")if(F*F+R*R>4)e="cursor";else return C.preventDefault();t=M.clientX,r=M.clientY,C.clientX=M.clientX,C.clientY=M.clientY;var N=C.timeStamp,W=N-a;if(a=N,e=="scroll"){var B=new s(C,d);B.speed=1,B.wheelX=F,B.wheelY=R,10*Math.abs(F)<Math.abs(R)&&(F=0),10*Math.abs(R)<Math.abs(F)&&(R=0),W!=0&&(D=F/W,E=R/W),d._emit("mousewheel",B),B.propagationStopped||(D=E=0)}else{var U=new s(C,d),P=U.getDocumentPosition();e=="cursor"?d.selection.moveCursorToPosition(P):e=="anchor"&&d.selection.setSelectionAnchor(P.row,P.column),d.renderer.scrollCursorIntoView(P),C.preventDefault()}}},d);function m(){v+=60,f=setInterval(function(){v--<=0&&(clearInterval(f),f=null),Math.abs(D)<.01&&(D=0),Math.abs(E)<.01&&(E=0),v<20&&(D=.9*D),v<20&&(E=.9*E);var C=d.session.getScrollTop();d.renderer.scrollBy(10*D,10*E),C==d.session.getScrollTop()&&(v=0)},10)}}}),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],function(n,u,y){var s=n("../lib/event"),c=n("../lib/useragent"),p=n("./default_handlers").DefaultHandlers,o=n("./default_gutter_handler").GutterHandler,d=n("./mouse_event").MouseEvent,e=n("./dragdrop_handler").DragdropHandler,t=n("./touch_handler").addTouchListeners,r=n("../config"),l=function(){function a(h){this.$dragDelay,this.$dragEnabled,this.$mouseMoved,this.mouseEvent,this.$focusTimeout;var f=this;this.editor=h,new p(this),new o(this),new e(this);var v=function(D){var E=!document.hasFocus||!document.hasFocus()||!h.isFocused()&&document.activeElement==(h.textInput&&h.textInput.getElement());E&&window.focus(),h.focus(),setTimeout(function(){h.isFocused()||h.focus()})},b=h.renderer.getMouseEventTarget();s.addListener(b,"click",this.onMouseEvent.bind(this,"click"),h),s.addListener(b,"mousemove",this.onMouseMove.bind(this,"mousemove"),h),s.addMultiMouseDownListener([b,h.renderer.scrollBarV&&h.renderer.scrollBarV.inner,h.renderer.scrollBarH&&h.renderer.scrollBarH.inner,h.textInput&&h.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",h),s.addMouseWheelListener(h.container,this.onMouseWheel.bind(this,"mousewheel"),h),t(h.container,h);var A=h.renderer.$gutter;s.addListener(A,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),h),s.addListener(A,"click",this.onMouseEvent.bind(this,"gutterclick"),h),s.addListener(A,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),h),s.addListener(A,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),h),s.addListener(b,"mousedown",v,h),s.addListener(A,"mousedown",v,h),c.isIE&&h.renderer.scrollBarV&&(s.addListener(h.renderer.scrollBarV.element,"mousedown",v,h),s.addListener(h.renderer.scrollBarH.element,"mousedown",v,h)),h.on("mousemove",function(D){if(!(f.state||f.$dragDelay||!f.$dragEnabled)){var E=h.renderer.screenToTextCoordinates(D.x,D.y),g=h.session.selection.getRange(),S=h.renderer;!g.isEmpty()&&g.insideStart(E.row,E.column)?S.setCursorStyle("default"):S.setCursorStyle("")}},h)}return a.prototype.onMouseEvent=function(h,f){this.editor.session&&this.editor._emit(h,new d(f,this.editor))},a.prototype.onMouseMove=function(h,f){var v=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;!v||!v.length||this.editor._emit(h,new d(f,this.editor))},a.prototype.onMouseWheel=function(h,f){var v=new d(f,this.editor);v.speed=this.$scrollSpeed*2,v.wheelX=f.wheelX,v.wheelY=f.wheelY,this.editor._emit(h,v)},a.prototype.setState=function(h){this.state=h},a.prototype.captureMouse=function(h,f){this.x=h.x,this.y=h.y,this.isMousePressed=!0;var v=this.editor,b=this.editor.renderer;b.$isMousePressed=!0;var A=this,D=function(_){if(_){if(c.isWebKit&&!_.which&&A.releaseMouse)return A.releaseMouse();A.x=_.clientX,A.y=_.clientY,f&&f(_),A.mouseEvent=new d(_,A.editor),A.$mouseMoved=!0}},E=function(_){v.off("beforeEndOperation",S),clearInterval($),v.session&&g(),A[A.state+"End"]&&A[A.state+"End"](_),A.state="",A.isMousePressed=b.$isMousePressed=!1,b.$keepTextAreaAtCursor&&b.$moveTextAreaToCursor(),A.$onCaptureMouseMove=A.releaseMouse=null,_&&A.onMouseEvent("mouseup",_),v.endOperation()},g=function(){A[A.state]&&A[A.state](),A.$mouseMoved=!1};if(c.isOldIE&&h.domEvent.type=="dblclick")return setTimeout(function(){E(h)});var S=function(_){A.releaseMouse&&v.curOp.command.name&&v.curOp.selectionChanged&&(A[A.state+"End"]&&A[A.state+"End"](),A.state="",A.releaseMouse())};v.on("beforeEndOperation",S),v.startOperation({command:{name:"mouse"}}),A.$onCaptureMouseMove=D,A.releaseMouse=s.capture(this.editor.container,D,E);var $=setInterval(g,20)},a.prototype.cancelContextMenu=function(){var h=function(f){f&&f.domEvent&&f.domEvent.type!="contextmenu"||(this.editor.off("nativecontextmenu",h),f&&f.domEvent&&s.stopEvent(f.domEvent))}.bind(this);setTimeout(h,10),this.editor.on("nativecontextmenu",h)},a.prototype.destroy=function(){this.releaseMouse&&this.releaseMouse()},a}();l.prototype.releaseMouse=null,r.defineOptions(l.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:c.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),u.MouseHandler=l}),ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],function(n,u,y){var s=n("../lib/dom"),c=function(){function p(o){o.on("click",function(d){var e=d.getDocumentPosition(),t=o.session,r=t.getFoldAt(e.row,e.column,1);r&&(d.getAccelKey()?t.removeFold(r):t.expandFold(r),d.stop());var l=d.domEvent&&d.domEvent.target;l&&s.hasCssClass(l,"ace_inline_button")&&s.hasCssClass(l,"ace_toggle_wrap")&&(t.setOption("wrap",!t.getUseWrapMode()),o.renderer.scrollCursorIntoView())}),o.on("gutterclick",function(d){var e=o.renderer.$gutterLayer.getRegion(d);if(e=="foldWidgets"){var t=d.getDocumentPosition().row,r=o.session;r.foldWidgets&&r.foldWidgets[t]&&o.session.onFoldWidgetClick(t,d),o.isFocused()||o.focus(),d.stop()}}),o.on("gutterdblclick",function(d){var e=o.renderer.$gutterLayer.getRegion(d);if(e=="foldWidgets"){var t=d.getDocumentPosition().row,r=o.session,l=r.getParentFoldRangeData(t,!0),a=l.range||l.firstRange;if(a){t=a.start.row;var h=r.getFoldAt(t,r.getLine(t).length,1);h?r.removeFold(h):(r.addFold("...",a),o.renderer.scrollCursorIntoView({row:a.start.row,column:0}))}d.stop()}})}return p}();u.FoldHandler=c}),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(n,u,y){var s=n("../lib/keys"),c=n("../lib/event"),p=function(){function o(d){this.$editor=d,this.$data={editor:d},this.$handlers=[],this.setDefaultHandler(d.commands)}return o.prototype.setDefaultHandler=function(d){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=d,this.addKeyboardHandler(d,0)},o.prototype.setKeyboardHandler=function(d){var e=this.$handlers;if(e[e.length-1]!=d){for(;e[e.length-1]&&e[e.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(e[e.length-1]);this.addKeyboardHandler(d,1)}},o.prototype.addKeyboardHandler=function(d,e){if(d){typeof d=="function"&&!d.handleKeyboard&&(d.handleKeyboard=d);var t=this.$handlers.indexOf(d);t!=-1&&this.$handlers.splice(t,1),e==null?this.$handlers.push(d):this.$handlers.splice(e,0,d),t==-1&&d.attach&&d.attach(this.$editor)}},o.prototype.removeKeyboardHandler=function(d){var e=this.$handlers.indexOf(d);return e==-1?!1:(this.$handlers.splice(e,1),d.detach&&d.detach(this.$editor),!0)},o.prototype.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},o.prototype.getStatusText=function(){var d=this.$data,e=d.editor;return this.$handlers.map(function(t){return t.getStatusText&&t.getStatusText(e,d)||""}).filter(Boolean).join(" ")},o.prototype.$callKeyboardHandlers=function(d,e,t,r){for(var l,a=!1,h=this.$editor.commands,f=this.$handlers.length;f--&&(l=this.$handlers[f].handleKeyboard(this.$data,d,e,t,r),!(!(!l||!l.command)&&(l.command=="null"?a=!0:a=h.exec(l.command,this.$editor,l.args,r),a&&r&&d!=-1&&l.passEvent!=!0&&l.command.passEvent!=!0&&c.stopEvent(r),a))););return!a&&d==-1&&(l={command:"insertstring"},a=h.exec("insertstring",this.$editor,e)),a&&this.$editor._signal&&this.$editor._signal("keyboardActivity",l),a},o.prototype.onCommandKey=function(d,e,t){var r=s.keyCodeToString(t);return this.$callKeyboardHandlers(e,r,t,d)},o.prototype.onTextInput=function(d){return this.$callKeyboardHandlers(-1,d)},o}();u.KeyBinding=p}),ace.define("ace/lib/bidiutil",["require","exports","module"],function(n,u,y){var s=0,c=0,p=!1,o=!1,d=!1,e=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],t=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],r=0,l=1,a=0,h=1,f=2,v=3,b=4,A=5,D=6,E=7,g=8,S=9,$=10,_=11,T=12,I=13,w=14,m=15,C=16,x=17,M=18,F=[M,M,M,M,M,M,M,M,M,D,A,D,g,A,M,M,M,M,M,M,M,M,M,M,M,M,M,M,A,A,A,D,g,b,b,_,_,_,b,b,b,b,b,$,S,$,S,S,f,f,f,f,f,f,f,f,f,f,S,b,b,b,b,b,b,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,b,b,b,b,b,b,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,b,b,b,b,M,M,M,M,M,M,A,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,S,b,_,_,_,_,b,b,b,b,a,b,b,M,b,b,_,_,f,f,b,a,b,b,b,f,a,b,b,b,b,b],R=[g,g,g,g,g,g,g,g,g,g,g,M,M,M,a,h,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,g,A,I,w,m,C,x,S,_,_,_,_,_,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,S,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,g];function N(P,z,K,V){var Y=s?t:e,ee=null,ne=null,te=null,se=0,ve=null,Me=null,_e=-1,we=null,Ne=null,Xe=[];if(!V)for(we=0,V=[];we<K;we++)V[we]=U(P[we]);for(c=s,p=!1,o=!1,d=!1,Ne=0;Ne<K;Ne++){if(ee=se,Xe[Ne]=ne=B(P,V,Xe,Ne),se=Y[ee][ne],ve=se&240,se&=15,z[Ne]=te=Y[se][5],ve>0)if(ve==16){for(we=_e;we<Ne;we++)z[we]=1;_e=-1}else _e=-1;if(Me=Y[se][6],Me)_e==-1&&(_e=Ne);else if(_e>-1){for(we=_e;we<Ne;we++)z[we]=te;_e=-1}V[Ne]==A&&(z[Ne]=0),c|=te}if(d){for(we=0;we<K;we++)if(V[we]==D){z[we]=s;for(var Ze=we-1;Ze>=0&&V[Ze]==g;Ze--)z[Ze]=s}}}function W(P,z,K){if(!(c<P)){if(P==1&&s==l&&!o){K.reverse();return}for(var V=K.length,Y=0,ee,ne,te,se;Y<V;){if(z[Y]>=P){for(ee=Y+1;ee<V&&z[ee]>=P;)ee++;for(ne=Y,te=ee-1;ne<te;ne++,te--)se=K[ne],K[ne]=K[te],K[te]=se;Y=ee}Y++}}}function B(P,z,K,V){var Y=z[V],ee,ne,te,se;switch(Y){case a:case h:p=!1;case b:case v:return Y;case f:return p?v:f;case E:return p=!0,h;case g:return b;case S:return V<1||V+1>=z.length||(ee=K[V-1])!=f&&ee!=v||(ne=z[V+1])!=f&&ne!=v?b:(p&&(ne=v),ne==ee?ne:b);case $:return ee=V>0?K[V-1]:A,ee==f&&V+1<z.length&&z[V+1]==f?f:b;case _:if(V>0&&K[V-1]==f)return f;if(p)return b;for(se=V+1,te=z.length;se<te&&z[se]==_;)se++;return se<te&&z[se]==f?f:b;case T:for(te=z.length,se=V+1;se<te&&z[se]==T;)se++;if(se<te){var ve=P[V],Me=ve>=1425&&ve<=2303||ve==64286;if(ee=z[se],Me&&(ee==h||ee==E))return h}return V<1||(ee=z[V-1])==A?b:K[V-1];case A:return p=!1,o=!0,s;case D:return d=!0,b;case I:case w:case C:case x:case m:p=!1;case M:return b}}function U(P){var z=P.charCodeAt(0),K=z>>8;return K==0?z>191?a:F[z]:K==5?/[\u0591-\u05f4]/.test(P)?h:a:K==6?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(P)?T:/[\u0660-\u0669\u066b-\u066c]/.test(P)?v:z==1642?_:/[\u06f0-\u06f9]/.test(P)?f:E:K==32&&z<=8287?R[z&255]:K==254&&z>=65136?E:b}u.L=a,u.R=h,u.EN=f,u.ON_R=3,u.AN=4,u.R_H=5,u.B=6,u.RLE=7,u.DOT="·",u.doBidiReorder=function(P,z,K){if(P.length<2)return{};var V=P.split(""),Y=new Array(V.length),ee=new Array(V.length),ne=[];s=K?l:r,N(V,ne,V.length,z);for(var te=0;te<Y.length;Y[te]=te,te++);W(2,ne,Y),W(1,ne,Y);for(var te=0;te<Y.length-1;te++)z[te]===v?ne[te]=u.AN:ne[te]===h&&(z[te]>E&&z[te]<I||z[te]===b||z[te]===M)?ne[te]=u.ON_R:te>0&&V[te-1]==="ل"&&/\u0622|\u0623|\u0625|\u0627/.test(V[te])&&(ne[te-1]=ne[te]=u.R_H,te++);V[V.length-1]===u.DOT&&(ne[V.length-1]=u.B),V[0]==="‫"&&(ne[0]=u.RLE);for(var te=0;te<Y.length;te++)ee[te]=ne[Y[te]];return{logicalFromVisual:Y,bidiLevels:ee}},u.hasBidiCharacters=function(P,z){for(var K=!1,V=0;V<P.length;V++)z[V]=U(P.charAt(V)),!K&&(z[V]==h||z[V]==E||z[V]==v)&&(K=!0);return K},u.getVisualFromLogicalIdx=function(P,z){for(var K=0;K<z.logicalFromVisual.length;K++)if(z.logicalFromVisual[K]==P)return K;return 0}}),ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],function(n,u,y){var s=n("./lib/bidiutil"),c=n("./lib/lang"),p=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,o=function(){function d(e){this.session=e,this.bidiMap={},this.currentRow=null,this.bidiUtil=s,this.charWidths=[],this.EOL="¬",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="¶",this.RLE="‫",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=p.test(e.getValue())}return d.prototype.isBidiRow=function(e,t,r){return this.seenBidi?(e!==this.currentRow&&(this.currentRow=e,this.updateRowLine(t,r),this.updateBidiMap()),this.bidiMap.bidiLevels):!1},d.prototype.onChange=function(e){this.seenBidi?this.currentRow=null:e.action=="insert"&&p.test(e.lines.join(`
`))&&(this.seenBidi=!0,this.currentRow=null)},d.prototype.getDocumentRow=function(){var e=0,t=this.session.$screenRowCache;if(t.length){var r=this.session.$getRowCacheIndex(t,this.currentRow);r>=0&&(e=this.session.$docRowCache[r])}return e},d.prototype.getSplitIndex=function(){var e=0,t=this.session.$screenRowCache;if(t.length)for(var r,l=this.session.$getRowCacheIndex(t,this.currentRow);this.currentRow-e>0&&(r=this.session.$getRowCacheIndex(t,this.currentRow-e-1),r===l);)l=r,e++;else e=this.currentRow;return e},d.prototype.updateRowLine=function(e,t){e===void 0&&(e=this.getDocumentRow());var r=e===this.session.getLength()-1,l=r?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(e),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var a=this.session.$wrapData[e];a&&(t===void 0&&(t=this.getSplitIndex()),t>0&&a.length?(this.wrapIndent=a.indent,this.wrapOffset=this.wrapIndent*this.charWidths[s.L],this.line=t<a.length?this.line.substring(a[t-1],a[t]):this.line.substring(a[a.length-1])):this.line=this.line.substring(0,a[t]),t==a.length&&(this.line+=this.showInvisibles?l:s.DOT))}else this.line+=this.showInvisibles?l:s.DOT;var h=this.session,f=0,v;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(b,A){return b==="	"||h.isFullWidth(b.charCodeAt(0))?(v=b==="	"?h.getScreenTabSize(A+f):2,f+=v-1,c.stringRepeat(s.DOT,v)):b}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==s.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},d.prototype.updateBidiMap=function(){var e=[];s.hasBidiCharacters(this.line,e)||this.isRtlDir?this.bidiMap=s.doBidiReorder(this.line,e,this.isRtlDir):this.bidiMap={}},d.prototype.markAsDirty=function(){this.currentRow=null},d.prototype.updateCharacterWidths=function(e){if(this.characterWidth!==e.$characterSize.width){this.fontMetrics=e;var t=this.characterWidth=e.$characterSize.width,r=e.$measureCharWidth("ה");this.charWidths[s.L]=this.charWidths[s.EN]=this.charWidths[s.ON_R]=t,this.charWidths[s.R]=this.charWidths[s.AN]=r,this.charWidths[s.R_H]=r*.45,this.charWidths[s.B]=this.charWidths[s.RLE]=0,this.currentRow=null}},d.prototype.setShowInvisibles=function(e){this.showInvisibles=e,this.currentRow=null},d.prototype.setEolChar=function(e){this.EOL=e},d.prototype.setContentWidth=function(e){this.contentWidth=e},d.prototype.isRtlLine=function(e){return this.$isRtl?!0:e!=null?this.session.getLine(e).charAt(0)==this.RLE:this.isRtlDir},d.prototype.setRtlDirection=function(e,t){for(var r=e.getCursorPosition(),l=e.selection.getSelectionAnchor().row;l<=r.row;l++)!t&&e.session.getLine(l).charAt(0)===e.session.$bidiHandler.RLE?e.session.doc.removeInLine(l,0,1):t&&e.session.getLine(l).charAt(0)!==e.session.$bidiHandler.RLE&&e.session.doc.insert({column:0,row:l},e.session.$bidiHandler.RLE)},d.prototype.getPosLeft=function(e){e-=this.wrapIndent;var t=this.line.charAt(0)===this.RLE?1:0,r=e>t?this.session.getOverwrite()?e:e-1:t,l=s.getVisualFromLogicalIdx(r,this.bidiMap),a=this.bidiMap.bidiLevels,h=0;!this.session.getOverwrite()&&e<=t&&a[l]%2!==0&&l++;for(var f=0;f<l;f++)h+=this.charWidths[a[f]];return!this.session.getOverwrite()&&e>t&&a[l]%2===0&&(h+=this.charWidths[a[l]]),this.wrapIndent&&(h+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(h+=this.rtlLineOffset),h},d.prototype.getSelections=function(e,t){var r=this.bidiMap,l=r.bidiLevels,a,h=[],f=0,v=Math.min(e,t)-this.wrapIndent,b=Math.max(e,t)-this.wrapIndent,A=!1,D=!1,E=0;this.wrapIndent&&(f+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var g,S=0;S<l.length;S++)g=r.logicalFromVisual[S],a=l[S],A=g>=v&&g<b,A&&!D?E=f:!A&&D&&h.push({left:E,width:f-E}),f+=this.charWidths[a],D=A;if(A&&S===l.length&&h.push({left:E,width:f-E}),this.isRtlDir)for(var $=0;$<h.length;$++)h[$].left+=this.rtlLineOffset;return h},d.prototype.offsetToCol=function(r){this.isRtlDir&&(r-=this.rtlLineOffset);var t=0,r=Math.max(r,0),l=0,a=0,h=this.bidiMap.bidiLevels,f=this.charWidths[h[a]];for(this.wrapIndent&&(r-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);r>l+f/2;){if(l+=f,a===h.length-1){f=0;break}f=this.charWidths[h[++a]]}return a>0&&h[a-1]%2!==0&&h[a]%2===0?(r<l&&a--,t=this.bidiMap.logicalFromVisual[a]):a>0&&h[a-1]%2===0&&h[a]%2!==0?t=1+(r>l?this.bidiMap.logicalFromVisual[a]:this.bidiMap.logicalFromVisual[a-1]):this.isRtlDir&&a===h.length-1&&f===0&&h[a-1]%2===0||!this.isRtlDir&&a===0&&h[a]%2!==0?t=1+this.bidiMap.logicalFromVisual[a]:(a>0&&h[a-1]%2!==0&&f!==0&&a--,t=this.bidiMap.logicalFromVisual[a]),t===0&&this.isRtlDir&&t++,t+this.wrapIndent},d}();u.BidiHandler=o}),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(n,u,y){var s=n("./lib/oop"),c=n("./lib/lang"),p=n("./lib/event_emitter").EventEmitter,o=n("./range").Range,d=function(){function e(t){this.session=t,this.doc=t.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var r=this;this.cursor.on("change",function(l){r.$cursorChanged=!0,r.$silent||r._emit("changeCursor"),!r.$isEmpty&&!r.$silent&&r._emit("changeSelection"),!r.$keepDesiredColumnOnChange&&l.old.column!=l.value.column&&(r.$desiredColumn=null)}),this.anchor.on("change",function(){r.$anchorChanged=!0,!r.$isEmpty&&!r.$silent&&r._emit("changeSelection")})}return e.prototype.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},e.prototype.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},e.prototype.getCursor=function(){return this.lead.getPosition()},e.prototype.setAnchor=function(t,r){this.$isEmpty=!1,this.anchor.setPosition(t,r)},e.prototype.getAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},e.prototype.getSelectionLead=function(){return this.lead.getPosition()},e.prototype.isBackwards=function(){var t=this.anchor,r=this.lead;return t.row>r.row||t.row==r.row&&t.column>r.column},e.prototype.getRange=function(){var t=this.anchor,r=this.lead;return this.$isEmpty?o.fromPoints(r,r):this.isBackwards()?o.fromPoints(r,t):o.fromPoints(t,r)},e.prototype.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},e.prototype.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},e.prototype.setRange=function(t,r){var l=r?t.end:t.start,a=r?t.start:t.end;this.$setSelection(l.row,l.column,a.row,a.column)},e.prototype.$setSelection=function(t,r,l,a){if(!this.$silent){var h=this.$isEmpty,f=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(t,r),this.cursor.setPosition(l,a),this.$isEmpty=!o.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||h!=this.$isEmpty||f)&&this._emit("changeSelection")}},e.prototype.$moveSelection=function(t){var r=this.lead;this.$isEmpty&&this.setSelectionAnchor(r.row,r.column),t.call(this)},e.prototype.selectTo=function(t,r){this.$moveSelection(function(){this.moveCursorTo(t,r)})},e.prototype.selectToPosition=function(t){this.$moveSelection(function(){this.moveCursorToPosition(t)})},e.prototype.moveTo=function(t,r){this.clearSelection(),this.moveCursorTo(t,r)},e.prototype.moveToPosition=function(t){this.clearSelection(),this.moveCursorToPosition(t)},e.prototype.selectUp=function(){this.$moveSelection(this.moveCursorUp)},e.prototype.selectDown=function(){this.$moveSelection(this.moveCursorDown)},e.prototype.selectRight=function(){this.$moveSelection(this.moveCursorRight)},e.prototype.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},e.prototype.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},e.prototype.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},e.prototype.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},e.prototype.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},e.prototype.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},e.prototype.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},e.prototype.getWordRange=function(t,r){if(typeof r>"u"){var l=t||this.lead;t=l.row,r=l.column}return this.session.getWordRange(t,r)},e.prototype.selectWord=function(){this.setSelectionRange(this.getWordRange())},e.prototype.selectAWord=function(){var t=this.getCursor(),r=this.session.getAWordRange(t.row,t.column);this.setSelectionRange(r)},e.prototype.getLineRange=function(t,r){var l=typeof t=="number"?t:this.lead.row,a,h=this.session.getFoldLine(l);return h?(l=h.start.row,a=h.end.row):a=l,r===!0?new o(l,0,a,this.session.getLine(a).length):new o(l,0,a+1,0)},e.prototype.selectLine=function(){this.setSelectionRange(this.getLineRange())},e.prototype.moveCursorUp=function(){this.moveCursorBy(-1,0)},e.prototype.moveCursorDown=function(){this.moveCursorBy(1,0)},e.prototype.wouldMoveIntoSoftTab=function(t,r,l){var a=t.column,h=t.column+r;return l<0&&(a=t.column-r,h=t.column),this.session.isTabStop(t)&&this.doc.getLine(t.row).slice(a,h).split(" ").length-1==r},e.prototype.moveCursorLeft=function(){var t=this.lead.getPosition(),r;if(r=this.session.getFoldAt(t.row,t.column,-1))this.moveCursorTo(r.start.row,r.start.column);else if(t.column===0)t.row>0&&this.moveCursorTo(t.row-1,this.doc.getLine(t.row-1).length);else{var l=this.session.getTabSize();this.wouldMoveIntoSoftTab(t,l,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-l):this.moveCursorBy(0,-1)}},e.prototype.moveCursorRight=function(){var t=this.lead.getPosition(),r;if(r=this.session.getFoldAt(t.row,t.column,1))this.moveCursorTo(r.end.row,r.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var l=this.session.getTabSize(),t=this.lead;this.wouldMoveIntoSoftTab(t,l,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,l):this.moveCursorBy(0,1)}},e.prototype.moveCursorLineStart=function(){var t=this.lead.row,r=this.lead.column,l=this.session.documentToScreenRow(t,r),a=this.session.screenToDocumentPosition(l,0),h=this.session.getDisplayLine(t,null,a.row,a.column),f=h.match(/^\s*/);f[0].length!=r&&!this.session.$useEmacsStyleLineStart&&(a.column+=f[0].length),this.moveCursorToPosition(a)},e.prototype.moveCursorLineEnd=function(){var t=this.lead,r=this.session.getDocumentLastRowColumnPosition(t.row,t.column);if(this.lead.column==r.column){var l=this.session.getLine(r.row);if(r.column==l.length){var a=l.search(/\s+$/);a>0&&(r.column=a)}}this.moveCursorTo(r.row,r.column)},e.prototype.moveCursorFileEnd=function(){var t=this.doc.getLength()-1,r=this.doc.getLine(t).length;this.moveCursorTo(t,r)},e.prototype.moveCursorFileStart=function(){this.moveCursorTo(0,0)},e.prototype.moveCursorLongWordRight=function(){var t=this.lead.row,r=this.lead.column,l=this.doc.getLine(t),a=l.substring(r);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var h=this.session.getFoldAt(t,r,1);if(h){this.moveCursorTo(h.end.row,h.end.column);return}if(this.session.nonTokenRe.exec(a)&&(r+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,a=l.substring(r)),r>=l.length){this.moveCursorTo(t,l.length),this.moveCursorRight(),t<this.doc.getLength()-1&&this.moveCursorWordRight();return}this.session.tokenRe.exec(a)&&(r+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(t,r)},e.prototype.moveCursorLongWordLeft=function(){var t=this.lead.row,r=this.lead.column,l;if(l=this.session.getFoldAt(t,r,-1)){this.moveCursorTo(l.start.row,l.start.column);return}var a=this.session.getFoldStringAt(t,r,-1);a==null&&(a=this.doc.getLine(t).substring(0,r));var h=c.stringReverse(a);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(h)&&(r-=this.session.nonTokenRe.lastIndex,h=h.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),r<=0){this.moveCursorTo(t,0),this.moveCursorLeft(),t>0&&this.moveCursorWordLeft();return}this.session.tokenRe.exec(h)&&(r-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(t,r)},e.prototype.$shortWordEndIndex=function(t){var r=0,l,a=/\s/,h=this.session.tokenRe;if(h.lastIndex=0,this.session.tokenRe.exec(t))r=this.session.tokenRe.lastIndex;else{for(;(l=t[r])&&a.test(l);)r++;if(r<1){for(h.lastIndex=0;(l=t[r])&&!h.test(l);)if(h.lastIndex=0,r++,a.test(l))if(r>2){r--;break}else{for(;(l=t[r])&&a.test(l);)r++;if(r>2)break}}}return h.lastIndex=0,r},e.prototype.moveCursorShortWordRight=function(){var t=this.lead.row,r=this.lead.column,l=this.doc.getLine(t),a=l.substring(r),h=this.session.getFoldAt(t,r,1);if(h)return this.moveCursorTo(h.end.row,h.end.column);if(r==l.length){var f=this.doc.getLength();do t++,a=this.doc.getLine(t);while(t<f&&/^\s*$/.test(a));/^\s+/.test(a)||(a=""),r=0}var v=this.$shortWordEndIndex(a);this.moveCursorTo(t,r+v)},e.prototype.moveCursorShortWordLeft=function(){var t=this.lead.row,r=this.lead.column,l;if(l=this.session.getFoldAt(t,r,-1))return this.moveCursorTo(l.start.row,l.start.column);var a=this.session.getLine(t).substring(0,r);if(r===0){do t--,a=this.doc.getLine(t);while(t>0&&/^\s*$/.test(a));r=a.length,/\s+$/.test(a)||(a="")}var h=c.stringReverse(a),f=this.$shortWordEndIndex(h);return this.moveCursorTo(t,r-f)},e.prototype.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},e.prototype.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},e.prototype.moveCursorBy=function(t,r){var l=this.session.documentToScreenPosition(this.lead.row,this.lead.column),a;if(r===0&&(t!==0&&(this.session.$bidiHandler.isBidiRow(l.row,this.lead.row)?(a=this.session.$bidiHandler.getPosLeft(l.column),l.column=Math.round(a/this.session.$bidiHandler.charWidths[0])):a=l.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?l.column=this.$desiredColumn:this.$desiredColumn=l.column),t!=0&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var h=this.session.lineWidgets[this.lead.row];t<0?t-=h.rowsAbove||0:t>0&&(t+=h.rowCount-(h.rowsAbove||0))}var f=this.session.screenToDocumentPosition(l.row+t,l.column,a);t!==0&&r===0&&f.row===this.lead.row&&(f.column,this.lead.column),this.moveCursorTo(f.row,f.column+r,r===0)},e.prototype.moveCursorToPosition=function(t){this.moveCursorTo(t.row,t.column)},e.prototype.moveCursorTo=function(t,r,l){var a=this.session.getFoldAt(t,r,1);a&&(t=a.start.row,r=a.start.column),this.$keepDesiredColumnOnChange=!0;var h=this.session.getLine(t);/[\uDC00-\uDFFF]/.test(h.charAt(r))&&h.charAt(r-1)&&(this.lead.row==t&&this.lead.column==r+1?r=r-1:r=r+1),this.lead.setPosition(t,r),this.$keepDesiredColumnOnChange=!1,l||(this.$desiredColumn=null)},e.prototype.moveCursorToScreen=function(t,r,l){var a=this.session.screenToDocumentPosition(t,r);this.moveCursorTo(a.row,a.column,l)},e.prototype.detach=function(){this.lead.detach(),this.anchor.detach()},e.prototype.fromOrientedRange=function(t){this.setSelectionRange(t,t.cursor==t.start),this.$desiredColumn=t.desiredColumn||this.$desiredColumn},e.prototype.toOrientedRange=function(t){var r=this.getRange();return t?(t.start.column=r.start.column,t.start.row=r.start.row,t.end.column=r.end.column,t.end.row=r.end.row):t=r,t.cursor=this.isBackwards()?t.start:t.end,t.desiredColumn=this.$desiredColumn,t},e.prototype.getRangeOfMovements=function(t){var r=this.getCursor();try{t(this);var l=this.getCursor();return o.fromPoints(r,l)}catch{return o.fromPoints(r,r)}finally{this.moveCursorToPosition(r)}},e.prototype.toJSON=function(){if(this.rangeCount)var t=this.ranges.map(function(r){var l=r.clone();return l.isBackwards=r.cursor==r.start,l});else{var t=this.getRange();t.isBackwards=this.isBackwards()}return t},e.prototype.fromJSON=function(t){if(t.start==null)if(this.rangeList&&t.length>1){this.toSingleRange(t[0]);for(var r=t.length;r--;){var l=o.fromPoints(t[r].start,t[r].end);t[r].isBackwards&&(l.cursor=l.start),this.addRange(l,!0)}return}else t=t[0];this.rangeList&&this.toSingleRange(t),this.setSelectionRange(t,t.isBackwards)},e.prototype.isEqual=function(t){if((t.length||this.rangeCount)&&t.length!=this.rangeCount)return!1;if(!t.length||!this.ranges)return this.getRange().isEqual(t);for(var r=this.ranges.length;r--;)if(!this.ranges[r].isEqual(t[r]))return!1;return!0},e}();d.prototype.setSelectionAnchor=d.prototype.setAnchor,d.prototype.getSelectionAnchor=d.prototype.getAnchor,d.prototype.setSelectionRange=d.prototype.setRange,s.implement(d.prototype,p),u.Selection=d}),ace.define("ace/tokenizer",["require","exports","module","ace/lib/report_error"],function(n,u,y){var s=n("./lib/report_error").reportError,c=2e3,p=function(){function o(d){this.splitRegex,this.states=d,this.regExps={},this.matchMappings={};for(var e in this.states){for(var t=this.states[e],r=[],l=0,a=this.matchMappings[e]={defaultToken:"text"},h="g",f=[],v=0;v<t.length;v++){var b=t[v];if(b.defaultToken&&(a.defaultToken=b.defaultToken),b.caseInsensitive&&h.indexOf("i")===-1&&(h+="i"),b.unicode&&h.indexOf("u")===-1&&(h+="u"),b.regex!=null){b.regex instanceof RegExp&&(b.regex=b.regex.toString().slice(1,-1));var A=b.regex,D=new RegExp("(?:("+A+")|(.))").exec("a").length-2;Array.isArray(b.token)?b.token.length==1||D==1?b.token=b.token[0]:D-1!=b.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:b,groupCount:D-1}),b.token=b.token[0]):(b.tokenArray=b.token,b.token=null,b.onMatch=this.$arrayTokens):typeof b.token=="function"&&!b.onMatch&&(D>1?b.onMatch=this.$applyToken:b.onMatch=b.token),D>1&&(/\\\d/.test(b.regex)?A=b.regex.replace(/\\([0-9]+)/g,function(E,g){return"\\"+(parseInt(g,10)+l+1)}):(D=1,A=this.removeCapturingGroups(b.regex)),!b.splitRegex&&typeof b.token!="string"&&f.push(b)),a[l]=v,l+=D,r.push(A),b.onMatch||(b.onMatch=null)}}r.length||(a[0]=0,r.push("$")),f.forEach(function(E){E.splitRegex=this.createSplitterRegexp(E.regex,h)},this),this.regExps[e]=new RegExp("("+r.join(")|(")+")|($)",h)}}return o.prototype.$setMaxTokenCount=function(d){c=d|0},o.prototype.$applyToken=function(d){var e=this.splitRegex.exec(d).slice(1),t=this.token.apply(this,e);if(typeof t=="string")return[{type:t,value:d}];for(var r=[],l=0,a=t.length;l<a;l++)e[l]&&(r[r.length]={type:t[l],value:e[l]});return r},o.prototype.$arrayTokens=function(d){if(!d)return[];var e=this.splitRegex.exec(d);if(!e)return"text";for(var t=[],r=this.tokenArray,l=0,a=r.length;l<a;l++)e[l+1]&&(t[t.length]={type:r[l],value:e[l+1]});return t},o.prototype.removeCapturingGroups=function(d){var e=d.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!<]|(\()/g,function(t,r){return r?"(?:":t});return e},o.prototype.createSplitterRegexp=function(d,e){if(d.indexOf("(?=")!=-1){var t=0,r=!1,l={};d.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(a,h,f,v,b,A){return r?r=b!="]":b?r=!0:v?(t==l.stack&&(l.end=A+1,l.stack=-1),t--):f&&(t++,f.length!=1&&(l.stack=t,l.start=A)),a}),l.end!=null&&/^\)*$/.test(d.substr(l.end))&&(d=d.substring(0,l.start)+d.substr(l.end))}return d.charAt(0)!="^"&&(d="^"+d),d.charAt(d.length-1)!="$"&&(d+="$"),new RegExp(d,(e||"").replace("g",""))},o.prototype.getLineTokens=function(d,e){if(e&&typeof e!="string"){var t=e.slice(0);e=t[0],e==="#tmp"&&(t.shift(),e=t.shift())}else var t=[];var r=e||"start",l=this.states[r];l||(r="start",l=this.states[r]);var a=this.matchMappings[r],h=this.regExps[r];h.lastIndex=0;for(var f,v=[],b=0,A=0,D={type:null,value:""};f=h.exec(d);){var E=a.defaultToken,g=null,S=f[0],$=h.lastIndex;if($-S.length>b){var _=d.substring(b,$-S.length);D.type==E?D.value+=_:(D.type&&v.push(D),D={type:E,value:_})}for(var T=0;T<f.length-2;T++)if(f[T+1]!==void 0){g=l[a[T]],g.onMatch?E=g.onMatch(S,r,t,d):E=g.token,g.next&&(typeof g.next=="string"?r=g.next:r=g.next(r,t),l=this.states[r],l||(this.reportError("state doesn't exist",r),r="start",l=this.states[r]),a=this.matchMappings[r],b=$,h=this.regExps[r],h.lastIndex=$),g.consumeLineEnd&&(b=$);break}if(S){if(typeof E=="string")(!g||g.merge!==!1)&&D.type===E?D.value+=S:(D.type&&v.push(D),D={type:E,value:S});else if(E){D.type&&v.push(D),D={type:null,value:""};for(var T=0;T<E.length;T++)v.push(E[T])}}if(b==d.length)break;if(b=$,A++>c){for(A>2*d.length&&this.reportError("infinite loop with in ace tokenizer",{startState:e,line:d});b<d.length;)D.type&&v.push(D),D={value:d.substring(b,b+=500),type:"overflow"};r="start",t=[];break}}return D.type&&v.push(D),t.length>1&&t[0]!==r&&t.unshift("#tmp",r),{tokens:v,state:t.length?t:r}},o}();p.prototype.reportError=s,u.Tokenizer=p}),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/deep_copy"],function(n,u,y){var s=n("../lib/deep_copy").deepCopy,c;c=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}},function(){this.addRules=function(d,e){if(!e){for(var t in d)this.$rules[t]=d[t];return}for(var t in d){for(var r=d[t],l=0;l<r.length;l++){var a=r[l];(a.next||a.onMatch)&&(typeof a.next=="string"&&a.next.indexOf(e)!==0&&(a.next=e+a.next),a.nextState&&a.nextState.indexOf(e)!==0&&(a.nextState=e+a.nextState))}this.$rules[e+t]=r}},this.getRules=function(){return this.$rules},this.embedRules=function(d,e,t,r,l){var a=typeof d=="function"?new d().getRules():d;if(r)for(var h=0;h<r.length;h++)r[h]=e+r[h];else{r=[];for(var f in a)r.push(e+f)}if(this.addRules(a,e),t)for(var v=Array.prototype[l?"push":"unshift"],h=0;h<r.length;h++)v.apply(this.$rules[r[h]],s(t));this.$embeds||(this.$embeds=[]),this.$embeds.push(e)},this.getEmbeds=function(){return this.$embeds};var p=function(d,e){return(d!="start"||e.length)&&e.unshift(this.nextState,d),this.nextState},o=function(d,e){return e.shift(),e.shift()||"start"};this.normalizeRules=function(){var d=0,e=this.$rules;function t(r){var l=e[r];l.processed=!0;for(var a=0;a<l.length;a++){var h=l[a],f=null;Array.isArray(h)&&(f=h,h={}),!h.regex&&h.start&&(h.regex=h.start,h.next||(h.next=[]),h.next.push({defaultToken:h.token},{token:h.token+".end",regex:h.end||h.start,next:"pop"}),h.token=h.token+".start",h.push=!0);var v=h.next||h.push;if(v&&Array.isArray(v)){var b=h.stateName;b||(b=h.token,typeof b!="string"&&(b=b[0]||""),e[b]&&(b+=d++)),e[b]=v,h.next=b,t(b)}else v=="pop"&&(h.next=o);if(h.push&&(h.nextState=h.next||h.push,h.next=p,delete h.push),h.rules)for(var A in h.rules)e[A]?e[A].push&&e[A].push.apply(e[A],h.rules[A]):e[A]=h.rules[A];var D=typeof h=="string"?h:h.include;if(D&&(D==="$self"&&(D="start"),Array.isArray(D)?f=D.map(function(g){return e[g]}):f=e[D]),f){var E=[a,1].concat(f);h.noEscape&&(E=E.filter(function(g){return!g.next})),l.splice.apply(l,E),a--}h.keywordMap&&(h.token=this.createKeywordMapper(h.keywordMap,h.defaultToken||"text",h.caseInsensitive),delete h.defaultToken)}}Object.keys(e).forEach(t,this)},this.createKeywordMapper=function(d,e,t,r){var l=Object.create(null);return this.$keywordList=[],Object.keys(d).forEach(function(a){for(var h=d[a],f=h.split(r||"|"),v=f.length;v--;){var b=f[v];this.$keywordList.push(b),t&&(b=b.toLowerCase()),l[b]=a}},this),d=null,t?function(a){return l[a.toLowerCase()]||e}:function(a){return l[a]||e}},this.getKeywords=function(){return this.$keywords}}.call(c.prototype),u.TextHighlightRules=c}),ace.define("ace/mode/behaviour",["require","exports","module"],function(n,u,y){var s;s=function(){this.$behaviours={}},function(){this.add=function(c,p,o){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[c]:this.$behaviours[c]={}}this.$behaviours[c][p]=o},this.addBehaviours=function(c){for(var p in c)for(var o in c[p])this.add(p,o,c[p][o])},this.remove=function(c){this.$behaviours&&this.$behaviours[c]&&delete this.$behaviours[c]},this.inherit=function(c,p){if(typeof c=="function")var o=new c().getBehaviours(p);else var o=c.getBehaviours(p);this.addBehaviours(o)},this.getBehaviours=function(c){if(c){for(var p={},o=0;o<c.length;o++)this.$behaviours[c[o]]&&(p[c[o]]=this.$behaviours[c[o]]);return p}else return this.$behaviours}}.call(s.prototype),u.Behaviour=s}),ace.define("ace/token_iterator",["require","exports","module","ace/range"],function(n,u,y){var s=n("./range").Range,c=function(){function p(o,d,e){this.$session=o,this.$row=d,this.$rowTokens=o.getTokens(d);var t=o.getTokenAt(d,e);this.$tokenIndex=t?t.index:-1}return p.prototype.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},p.prototype.stepForward=function(){this.$tokenIndex+=1;for(var o;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,o||(o=this.$session.getLength()),this.$row>=o)return this.$row=o-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},p.prototype.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},p.prototype.getCurrentTokenRow=function(){return this.$row},p.prototype.getCurrentTokenColumn=function(){var o=this.$rowTokens,d=this.$tokenIndex,e=o[d].start;if(e!==void 0)return e;for(e=0;d>0;)d-=1,e+=o[d].value.length;return e},p.prototype.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},p.prototype.getCurrentTokenRange=function(){var o=this.$rowTokens[this.$tokenIndex],d=this.getCurrentTokenColumn();return new s(this.$row,d,this.$row,d+o.value.length)},p}();u.TokenIterator=c}),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(n,u,y){var s=n("../../lib/oop"),c=n("../behaviour").Behaviour,p=n("../../token_iterator").TokenIterator,o=n("../../lib/lang"),d=["text","paren.rparen","rparen","paren","punctuation.operator"],e=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],t,r={},l={'"':'"',"'":"'"},a=function(v){var b=-1;if(v.multiSelect&&(b=v.selection.index,r.rangeCount!=v.multiSelect.rangeCount&&(r={rangeCount:v.multiSelect.rangeCount})),r[b])return t=r[b];t=r[b]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},h=function(v,b,A,D){var E=v.end.row-v.start.row;return{text:A+b+D,selection:[0,v.start.column+1,E,v.end.column+(E?0:1)]}},f;f=function(v){v=v||{},this.add("braces","insertion",function(b,A,D,E,g){var S=D.getCursorPosition(),$=E.doc.getLine(S.row);if(g=="{"){a(D);var _=D.getSelectionRange(),T=E.doc.getTextRange(_),I=E.getTokenAt(S.row,S.column);if(T!==""&&T!=="{"&&D.getWrapBehavioursEnabled())return h(_,T,"{","}");if(I&&/(?:string)\.quasi|\.xml/.test(I.type)){var w=[/tag\-(?:open|name)/,/attribute\-name/];return w.some(function(N){return N.test(I.type)})||/(string)\.quasi/.test(I.type)&&I.value[S.column-I.start-1]!=="$"?void 0:(f.recordAutoInsert(D,E,"}"),{text:"{}",selection:[1,1]})}else if(f.isSaneInsertion(D,E))return/[\]\}\)]/.test($[S.column])||D.inMultiSelectMode||v.braces?(f.recordAutoInsert(D,E,"}"),{text:"{}",selection:[1,1]}):(f.recordMaybeInsert(D,E,"{"),{text:"{",selection:[1,1]})}else if(g=="}"){a(D);var m=$.substring(S.column,S.column+1);if(m=="}"){var C=E.$findOpeningBracket("}",{column:S.column+1,row:S.row});if(C!==null&&f.isAutoInsertedClosing(S,$,g))return f.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else if(g==`
`||g==`\r
`){a(D);var x="";f.isMaybeInsertedClosing(S,$)&&(x=o.stringRepeat("}",t.maybeInsertedBrackets),f.clearMaybeInsertedClosing());var m=$.substring(S.column,S.column+1);if(m==="}"){var M=E.findMatchingBracket({row:S.row,column:S.column+1},"}");if(!M)return null;var F=this.$getIndent(E.getLine(M.row))}else if(x)var F=this.$getIndent($);else{f.clearMaybeInsertedClosing();return}var R=F+E.getTabString();return{text:`
`+R+`
`+F+x,selection:[1,R.length,1,R.length]}}else f.clearMaybeInsertedClosing()}),this.add("braces","deletion",function(b,A,D,E,g){var S=E.doc.getTextRange(g);if(!g.isMultiLine()&&S=="{"){a(D);var $=E.doc.getLine(g.start.row),_=$.substring(g.end.column,g.end.column+1);if(_=="}")return g.end.column++,g;t.maybeInsertedBrackets--}}),this.add("parens","insertion",function(b,A,D,E,g){if(g=="("){a(D);var S=D.getSelectionRange(),$=E.doc.getTextRange(S);if($!==""&&D.getWrapBehavioursEnabled())return h(S,$,"(",")");if(f.isSaneInsertion(D,E))return f.recordAutoInsert(D,E,")"),{text:"()",selection:[1,1]}}else if(g==")"){a(D);var _=D.getCursorPosition(),T=E.doc.getLine(_.row),I=T.substring(_.column,_.column+1);if(I==")"){var w=E.$findOpeningBracket(")",{column:_.column+1,row:_.row});if(w!==null&&f.isAutoInsertedClosing(_,T,g))return f.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(b,A,D,E,g){var S=E.doc.getTextRange(g);if(!g.isMultiLine()&&S=="("){a(D);var $=E.doc.getLine(g.start.row),_=$.substring(g.start.column+1,g.start.column+2);if(_==")")return g.end.column++,g}}),this.add("brackets","insertion",function(b,A,D,E,g){if(g=="["){a(D);var S=D.getSelectionRange(),$=E.doc.getTextRange(S);if($!==""&&D.getWrapBehavioursEnabled())return h(S,$,"[","]");if(f.isSaneInsertion(D,E))return f.recordAutoInsert(D,E,"]"),{text:"[]",selection:[1,1]}}else if(g=="]"){a(D);var _=D.getCursorPosition(),T=E.doc.getLine(_.row),I=T.substring(_.column,_.column+1);if(I=="]"){var w=E.$findOpeningBracket("]",{column:_.column+1,row:_.row});if(w!==null&&f.isAutoInsertedClosing(_,T,g))return f.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(b,A,D,E,g){var S=E.doc.getTextRange(g);if(!g.isMultiLine()&&S=="["){a(D);var $=E.doc.getLine(g.start.row),_=$.substring(g.start.column+1,g.start.column+2);if(_=="]")return g.end.column++,g}}),this.add("string_dquotes","insertion",function(b,A,D,E,g){var S=E.$mode.$quotes||l;if(g.length==1&&S[g]){if(this.lineCommentStart&&this.lineCommentStart.indexOf(g)!=-1)return;a(D);var $=g,_=D.getSelectionRange(),T=E.doc.getTextRange(_);if(T!==""&&(T.length!=1||!S[T])&&D.getWrapBehavioursEnabled())return h(_,T,$,$);if(!T){var I=D.getCursorPosition(),w=E.doc.getLine(I.row),m=w.substring(I.column-1,I.column),C=w.substring(I.column,I.column+1),x=E.getTokenAt(I.row,I.column),M=E.getTokenAt(I.row,I.column+1);if(m=="\\"&&x&&/escape/.test(x.type))return null;var F=x&&/string|escape/.test(x.type),R=!M||/string|escape/.test(M.type),N;if(C==$)N=F!==R,N&&/string\.end/.test(M.type)&&(N=!1);else{if(F&&!R||F&&R)return null;var W=E.$mode.tokenRe;W.lastIndex=0;var B=W.test(m);W.lastIndex=0;var U=W.test(C),P=E.$mode.$pairQuotesAfter,z=P&&P[$]&&P[$].test(m);if(!z&&B||U||C&&!/[\s;,.})\]\\]/.test(C))return null;var K=w[I.column-2];if(m==$&&(K==$||W.test(K)))return null;N=!0}return{text:N?$+$:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(b,A,D,E,g){var S=E.$mode.$quotes||l,$=E.doc.getTextRange(g);if(!g.isMultiLine()&&S.hasOwnProperty($)){a(D);var _=E.doc.getLine(g.start.row),T=_.substring(g.start.column+1,g.start.column+2);if(T==$)return g.end.column++,g}}),v.closeDocComment!==!1&&this.add("doc comment end","insertion",function(b,A,D,E,g){if(b==="doc-start"&&(g===`
`||g===`\r
`)&&D.selection.isEmpty()){var S=D.getCursorPosition();if(S.column===0)return;for(var $=E.doc.getLine(S.row),_=E.doc.getLine(S.row+1),T=E.getTokens(S.row),I=0,w=0;w<T.length;w++){I+=T[w].value.length;var m=T[w];if(I>=S.column){if(I===S.column){if(!/\.doc/.test(m.type))return;if(/\*\//.test(m.value)){var C=T[w+1];if(!C||!/\.doc/.test(C.type))return}}var x=S.column-(I-m.value.length),M=m.value.indexOf("*/"),F=m.value.indexOf("/**",M>-1?M+2:0);if(F!==-1&&x>F&&x<F+3||M!==-1&&F!==-1&&x>=M&&x<=F||!/\.doc/.test(m.type))return;break}}var R=this.$getIndent($);if(/\s*\*/.test(_))return/^\s*\*/.test($)?{text:g+R+"* ",selection:[1,2+R.length,1,2+R.length]}:{text:g+R+" * ",selection:[1,3+R.length,1,3+R.length]};if(/\/\*\*/.test($.substring(0,S.column)))return{text:g+R+" * "+g+" "+R+"*/",selection:[1,4+R.length,1,4+R.length]}}})},f.isSaneInsertion=function(v,b){var A=v.getCursorPosition(),D=new p(b,A.row,A.column);if(!this.$matchTokenType(D.getCurrentToken()||"text",d)){if(/[)}\]]/.test(v.session.getLine(A.row)[A.column]))return!0;var E=new p(b,A.row,A.column+1);if(!this.$matchTokenType(E.getCurrentToken()||"text",d))return!1}return D.stepForward(),D.getCurrentTokenRow()!==A.row||this.$matchTokenType(D.getCurrentToken()||"text",e)},f.$matchTokenType=function(v,b){return b.indexOf(v.type||v)>-1},f.recordAutoInsert=function(v,b,A){var D=v.getCursorPosition(),E=b.doc.getLine(D.row);this.isAutoInsertedClosing(D,E,t.autoInsertedLineEnd[0])||(t.autoInsertedBrackets=0),t.autoInsertedRow=D.row,t.autoInsertedLineEnd=A+E.substr(D.column),t.autoInsertedBrackets++},f.recordMaybeInsert=function(v,b,A){var D=v.getCursorPosition(),E=b.doc.getLine(D.row);this.isMaybeInsertedClosing(D,E)||(t.maybeInsertedBrackets=0),t.maybeInsertedRow=D.row,t.maybeInsertedLineStart=E.substr(0,D.column)+A,t.maybeInsertedLineEnd=E.substr(D.column),t.maybeInsertedBrackets++},f.isAutoInsertedClosing=function(v,b,A){return t.autoInsertedBrackets>0&&v.row===t.autoInsertedRow&&A===t.autoInsertedLineEnd[0]&&b.substr(v.column)===t.autoInsertedLineEnd},f.isMaybeInsertedClosing=function(v,b){return t.maybeInsertedBrackets>0&&v.row===t.maybeInsertedRow&&b.substr(v.column)===t.maybeInsertedLineEnd&&b.substr(0,v.column)==t.maybeInsertedLineStart},f.popAutoInsertedClosing=function(){t.autoInsertedLineEnd=t.autoInsertedLineEnd.substr(1),t.autoInsertedBrackets--},f.clearMaybeInsertedClosing=function(){t&&(t.maybeInsertedBrackets=0,t.maybeInsertedRow=-1)},s.inherits(f,c),u.CstyleBehaviour=f}),ace.define("ace/unicode",["require","exports","module"],function(n,u,y){for(var s=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],c=0,p=[],o=0;o<s.length;o+=2)p.push(c+=s[o]),s[o+1]&&p.push(45,c+=s[o+1]);u.wordChars=String.fromCharCode.apply(null,p)}),ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(n,u,y){var s=n("../config"),c=n("../tokenizer").Tokenizer,p=n("./text_highlight_rules").TextHighlightRules,o=n("./behaviour/cstyle").CstyleBehaviour,d=n("../unicode"),e=n("../lib/lang"),t=n("../token_iterator").TokenIterator,r=n("../range").Range,l;l=function(){this.HighlightRules=p},function(){this.$defaultBehaviour=new o,this.tokenRe=new RegExp("^["+d.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+d.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new c(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(a,h,f,v){var b=h.doc,A=!0,D=!0,E=1/0,g=h.getTabSize(),S=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var T=this.lineCommentStart.map(e.escapeRegExp).join("|"),$=this.lineCommentStart[0];else var T=e.escapeRegExp(this.lineCommentStart),$=this.lineCommentStart;T=new RegExp("^(\\s*)(?:"+T+") ?"),S=h.getUseSoftTabs();var m=function(U,P){var z=U.match(T);if(z){var K=z[1].length,V=z[0].length;!M(U,K,V)&&z[0][V-1]==" "&&V--,b.removeInLine(P,K,V)}},x=$+" ",w=function(U,P){(!A||/\S/.test(U))&&(M(U,E,E)?b.insertInLine({row:P,column:E},x):b.insertInLine({row:P,column:E},$))},C=function(U,P){return T.test(U)},M=function(U,P,z){for(var K=0;P--&&U.charAt(P)==" ";)K++;if(K%g!=0)return!1;for(var K=0;U.charAt(z++)==" ";)K++;return g>2?K%g!=g-1:K%g==0}}else{if(!this.blockComment)return!1;var $=this.blockComment.start,_=this.blockComment.end,T=new RegExp("^(\\s*)(?:"+e.escapeRegExp($)+")"),I=new RegExp("(?:"+e.escapeRegExp(_)+")\\s*$"),w=function(N,W){C(N,W)||(!A||/\S/.test(N))&&(b.insertInLine({row:W,column:N.length},_),b.insertInLine({row:W,column:E},$))},m=function(N,W){var B;(B=N.match(I))&&b.removeInLine(W,N.length-B[0].length,N.length),(B=N.match(T))&&b.removeInLine(W,B[1].length,B[0].length)},C=function(N,W){if(T.test(N))return!0;for(var B=h.getTokens(W),U=0;U<B.length;U++)if(B[U].type==="comment")return!0}}function F(N){for(var W=f;W<=v;W++)N(b.getLine(W),W)}var R=1/0;F(function(N,W){var B=N.search(/\S/);B!==-1?(B<E&&(E=B),D&&!C(N,W)&&(D=!1)):R>N.length&&(R=N.length)}),E==1/0&&(E=R,A=!1,D=!1),S&&E%g!=0&&(E=Math.floor(E/g)*g),F(D?m:w)},this.toggleBlockComment=function(a,h,f,v){var b=this.blockComment;if(b){!b.start&&b[0]&&(b=b[0]);var A=new t(h,v.row,v.column),D=A.getCurrentToken();h.selection;var E=h.selection.toOrientedRange(),g,S;if(D&&/comment/.test(D.type)){for(var $,_;D&&/comment/.test(D.type);){var T=D.value.indexOf(b.start);if(T!=-1){var I=A.getCurrentTokenRow(),w=A.getCurrentTokenColumn()+T;$=new r(I,w,I,w+b.start.length);break}D=A.stepBackward()}for(var A=new t(h,v.row,v.column),D=A.getCurrentToken();D&&/comment/.test(D.type);){var T=D.value.indexOf(b.end);if(T!=-1){var I=A.getCurrentTokenRow(),w=A.getCurrentTokenColumn()+T;_=new r(I,w,I,w+b.end.length);break}D=A.stepForward()}_&&h.remove(_),$&&(h.remove($),g=$.start.row,S=-b.start.length)}else S=b.start.length,g=f.start.row,h.insert(f.end,b.end),h.insert(f.start,b.start);E.start.row==g&&(E.start.column+=S),E.end.row==g&&(E.end.column+=S),h.selection.fromOrientedRange(E)}},this.getNextLineIndent=function(a,h,f){return this.$getIndent(h)},this.checkOutdent=function(a,h,f){return!1},this.autoOutdent=function(a,h,f){},this.$getIndent=function(a){return a.match(/^\s*/)[0]},this.createWorker=function(a){return null},this.createModeDelegates=function(a){this.$embeds=[],this.$modes={};for(var h in a)if(a[h]){var f=a[h],v=f.prototype.$id,b=s.$modes[v];b||(s.$modes[v]=b=new f),s.$modes[h]||(s.$modes[h]=b),this.$embeds.push(h),this.$modes[h]=b}for(var A=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],D=function(g){(function(S){var $=A[g],_=S[$];S[A[g]]=function(){return this.$delegator($,arguments,_)}})(E)},E=this,h=0;h<A.length;h++)D(h)},this.$delegator=function(a,h,f){var v=h[0]||"start";if(typeof v!="string"){if(Array.isArray(v[2])){var b=v[2][v[2].length-1],A=this.$modes[b];if(A)return A[a].apply(A,[v[1]].concat([].slice.call(h,1)))}v=v[0]||"start"}for(var D=0;D<this.$embeds.length;D++)if(this.$modes[this.$embeds[D]]){var E=v.split(this.$embeds[D]);if(!E[0]&&E[1]){h[0]=E[1];var A=this.$modes[this.$embeds[D]];return A[a].apply(A,h)}}var g=f.apply(this,h);return f?g:void 0},this.transformAction=function(a,h,f,v,b){if(this.$behaviour){var A=this.$behaviour.getBehaviours();for(var D in A)if(A[D][h]){var E=A[D][h].apply(this,arguments);if(E)return E}}},this.getKeywords=function(a){if(!this.completionKeywords){var h=this.$tokenizer.rules,f=[];for(var v in h)for(var b=h[v],A=0,D=b.length;A<D;A++)if(typeof b[A].token=="string")/keyword|support|storage/.test(b[A].token)&&f.push(b[A].regex);else if(typeof b[A].token=="object"){for(var E=0,g=b[A].token.length;E<g;E++)if(/keyword|support|storage/.test(b[A].token[E])){var v=b[A].regex.match(/\(.+?\)/g)[E];f.push(v.substr(1,v.length-2))}}this.completionKeywords=f}return a?f.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(a,h,f,v){var b=this.$keywordList||this.$createKeywordList();return b.map(function(A){return{name:A,value:A,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}.call(l.prototype),u.Mode=l}),ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],function(n,u,y){var s=n("./lib/dom"),c=function(){function p(o){this.session=o,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}return p.prototype.getRowLength=function(o){var d;return this.lineWidgets?d=this.lineWidgets[o]&&this.lineWidgets[o].rowCount||0:d=0,!this.$useWrapMode||!this.$wrapData[o]?1+d:this.$wrapData[o].length+1+d},p.prototype.$getWidgetScreenLength=function(){var o=0;return this.lineWidgets.forEach(function(d){d&&d.rowCount&&!d.hidden&&(o+=d.rowCount)}),o},p.prototype.$onChangeEditor=function(o){this.attach(o.editor)},p.prototype.attach=function(o){o&&o.widgetManager&&o.widgetManager!=this&&o.widgetManager.detach(),this.editor!=o&&(this.detach(),this.editor=o,o&&(o.widgetManager=this,o.renderer.on("beforeRender",this.measureWidgets),o.renderer.on("afterRender",this.renderWidgets)))},p.prototype.detach=function(o){var d=this.editor;if(d){this.editor=null,d.widgetManager=null,d.renderer.off("beforeRender",this.measureWidgets),d.renderer.off("afterRender",this.renderWidgets);var e=this.session.lineWidgets;e&&e.forEach(function(t){t&&t.el&&t.el.parentNode&&(t._inDocument=!1,t.el.parentNode.removeChild(t.el))})}},p.prototype.updateOnFold=function(o,d){var e=d.lineWidgets;if(!(!e||!o.action)){for(var t=o.data,r=t.start.row,l=t.end.row,a=o.action=="add",h=r+1;h<l;h++)e[h]&&(e[h].hidden=a);e[l]&&(a?e[r]?e[l].hidden=a:e[r]=e[l]:(e[r]==e[l]&&(e[r]=void 0),e[l].hidden=a))}},p.prototype.updateOnChange=function(o){var d=this.session.lineWidgets;if(d){var e=o.start.row,t=o.end.row-e;if(t!==0)if(o.action=="remove"){var r=d.splice(e+1,t);!d[e]&&r[r.length-1]&&(d[e]=r.pop()),r.forEach(function(a){a&&this.removeLineWidget(a)},this),this.$updateRows()}else{var l=new Array(t);d[e]&&d[e].column!=null&&o.start.column>d[e].column&&e++,l.unshift(e,0),d.splice.apply(d,l),this.$updateRows()}}},p.prototype.$updateRows=function(){var o=this.session.lineWidgets;if(o){var d=!0;o.forEach(function(e,t){if(e)for(d=!1,e.row=t;e.$oldWidget;)e.$oldWidget.row=t,e=e.$oldWidget}),d&&(this.session.lineWidgets=null)}},p.prototype.$registerLineWidget=function(o){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var d=this.session.lineWidgets[o.row];return d&&(o.$oldWidget=d,d.el&&d.el.parentNode&&(d.el.parentNode.removeChild(d.el),d._inDocument=!1)),this.session.lineWidgets[o.row]=o,o},p.prototype.addLineWidget=function(o){if(this.$registerLineWidget(o),o.session=this.session,!this.editor)return o;var d=this.editor.renderer;o.html&&!o.el&&(o.el=s.createElement("div"),o.el.innerHTML=o.html),o.text&&!o.el&&(o.el=s.createElement("div"),o.el.textContent=o.text),o.el&&(s.addCssClass(o.el,"ace_lineWidgetContainer"),o.className&&s.addCssClass(o.el,o.className),o.el.style.position="absolute",o.el.style.zIndex="5",d.container.appendChild(o.el),o._inDocument=!0,o.coverGutter||(o.el.style.zIndex="3"),o.pixelHeight==null&&(o.pixelHeight=o.el.offsetHeight)),o.rowCount==null&&(o.rowCount=o.pixelHeight/d.layerConfig.lineHeight);var e=this.session.getFoldAt(o.row,0);if(o.$fold=e,e){var t=this.session.lineWidgets;o.row==e.end.row&&!t[e.start.row]?t[e.start.row]=o:o.hidden=!0}return this.session._emit("changeFold",{data:{start:{row:o.row}}}),this.$updateRows(),this.renderWidgets(null,d),this.onWidgetChanged(o),o},p.prototype.removeLineWidget=function(o){if(o._inDocument=!1,o.session=null,o.el&&o.el.parentNode&&o.el.parentNode.removeChild(o.el),o.editor&&o.editor.destroy)try{o.editor.destroy()}catch{}if(this.session.lineWidgets){var d=this.session.lineWidgets[o.row];if(d==o)this.session.lineWidgets[o.row]=o.$oldWidget,o.$oldWidget&&this.onWidgetChanged(o.$oldWidget);else for(;d;){if(d.$oldWidget==o){d.$oldWidget=o.$oldWidget;break}d=d.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:o.row}}}),this.$updateRows()},p.prototype.getWidgetsAtRow=function(o){for(var d=this.session.lineWidgets,e=d&&d[o],t=[];e;)t.push(e),e=e.$oldWidget;return t},p.prototype.onWidgetChanged=function(o){this.session._changedWidgets.push(o),this.editor&&this.editor.renderer.updateFull()},p.prototype.measureWidgets=function(o,d){var e=this.session._changedWidgets,t=d.layerConfig;if(!(!e||!e.length)){for(var r=1/0,l=0;l<e.length;l++){var a=e[l];if(!(!a||!a.el)&&a.session==this.session){if(!a._inDocument){if(this.session.lineWidgets[a.row]!=a)continue;a._inDocument=!0,d.container.appendChild(a.el)}a.h=a.el.offsetHeight,a.fixedWidth||(a.w=a.el.offsetWidth,a.screenWidth=Math.ceil(a.w/t.characterWidth));var h=a.h/t.lineHeight;a.coverLine&&(h-=this.session.getRowLineCount(a.row),h<0&&(h=0)),a.rowCount!=h&&(a.rowCount=h,a.row<r&&(r=a.row))}}r!=1/0&&(this.session._emit("changeFold",{data:{start:{row:r}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},p.prototype.renderWidgets=function(o,d){var e=d.layerConfig,t=this.session.lineWidgets;if(t){for(var r=Math.min(this.firstRow,e.firstRow),l=Math.max(this.lastRow,e.lastRow,t.length);r>0&&!t[r];)r--;this.firstRow=e.firstRow,this.lastRow=e.lastRow,d.$cursorLayer.config=e;for(var a=r;a<=l;a++){var h=t[a];if(!(!h||!h.el)){if(h.hidden){h.el.style.top=-100-(h.pixelHeight||0)+"px";continue}h._inDocument||(h._inDocument=!0,d.container.appendChild(h.el));var f=d.$cursorLayer.getPixelPosition({row:a,column:0},!0).top;h.coverLine||(f+=e.lineHeight*this.session.getRowLineCount(h.row)),h.el.style.top=f-e.offset+"px";var v=h.coverGutter?0:d.gutterWidth;h.fixedWidth||(v-=d.scrollLeft),h.el.style.left=v+"px",h.fullWidth&&h.screenWidth&&(h.el.style.minWidth=e.width+2*e.padding+"px"),h.fixedWidth?h.el.style.right=d.scrollBar.getWidth()+"px":h.el.style.right=""}}}},p}();u.LineWidgets=c}),ace.define("ace/apply_delta",["require","exports","module"],function(n,u,y){u.applyDelta=function(s,c,p){var o=c.start.row,d=c.start.column,e=s[o]||"";switch(c.action){case"insert":var t=c.lines;if(t.length===1)s[o]=e.substring(0,d)+c.lines[0]+e.substring(d);else{var r=[o,1].concat(c.lines);s.splice.apply(s,r),s[o]=e.substring(0,d)+s[o],s[o+c.lines.length-1]+=e.substring(d)}break;case"remove":var l=c.end.column,a=c.end.row;o===a?s[o]=e.substring(0,d)+e.substring(l):s.splice(o,a-o+1,e.substring(0,d)+s[a].substring(l));break}}}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(n,u,y){var s=n("./lib/oop"),c=n("./lib/event_emitter").EventEmitter,p=function(){function e(t,r,l){this.$onChange=this.onChange.bind(this),this.attach(t),typeof r!="number"?this.setPosition(r.row,r.column):this.setPosition(r,l)}return e.prototype.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},e.prototype.getDocument=function(){return this.document},e.prototype.onChange=function(t){if(!(t.start.row==t.end.row&&t.start.row!=this.row)&&!(t.start.row>this.row)){var r=d(t,{row:this.row,column:this.column},this.$insertRight);this.setPosition(r.row,r.column,!0)}},e.prototype.setPosition=function(t,r,l){var a;if(l?a={row:t,column:r}:a=this.$clipPositionToDocument(t,r),!(this.row==a.row&&this.column==a.column)){var h={row:this.row,column:this.column};this.row=a.row,this.column=a.column,this._signal("change",{old:h,value:a})}},e.prototype.detach=function(){this.document.off("change",this.$onChange)},e.prototype.attach=function(t){this.document=t||this.document,this.document.on("change",this.$onChange)},e.prototype.$clipPositionToDocument=function(t,r){var l={};return t>=this.document.getLength()?(l.row=Math.max(0,this.document.getLength()-1),l.column=this.document.getLine(l.row).length):t<0?(l.row=0,l.column=0):(l.row=t,l.column=Math.min(this.document.getLine(l.row).length,Math.max(0,r))),r<0&&(l.column=0),l},e}();p.prototype.$insertRight=!1,s.implement(p.prototype,c);function o(e,t,r){var l=r?e.column<=t.column:e.column<t.column;return e.row<t.row||e.row==t.row&&l}function d(e,t,r){var l=e.action=="insert",a=(l?1:-1)*(e.end.row-e.start.row),h=(l?1:-1)*(e.end.column-e.start.column),f=e.start,v=l?f:e.end;return o(t,f,r)?{row:t.row,column:t.column}:o(v,t,!r)?{row:t.row+a,column:t.column+(t.row==v.row?h:0)}:{row:f.row,column:f.column}}u.Anchor=p}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(n,u,y){var s=n("./lib/oop"),c=n("./apply_delta").applyDelta,p=n("./lib/event_emitter").EventEmitter,o=n("./range").Range,d=n("./anchor").Anchor,e=function(){function t(r){this.$lines=[""],r.length===0?this.$lines=[""]:Array.isArray(r)?this.insertMergedLines({row:0,column:0},r):this.insert({row:0,column:0},r)}return t.prototype.setValue=function(r){var l=this.getLength()-1;this.remove(new o(0,0,l,this.getLine(l).length)),this.insert({row:0,column:0},r||"")},t.prototype.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},t.prototype.createAnchor=function(r,l){return new d(this,r,l)},t.prototype.$detectNewLine=function(r){var l=r.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=l?l[1]:`
`,this._signal("changeNewLineMode")},t.prototype.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return`\r
`;case"unix":return`
`;default:return this.$autoNewLine||`
`}},t.prototype.setNewLineMode=function(r){this.$newLineMode!==r&&(this.$newLineMode=r,this._signal("changeNewLineMode"))},t.prototype.getNewLineMode=function(){return this.$newLineMode},t.prototype.isNewLine=function(r){return r==`\r
`||r=="\r"||r==`
`},t.prototype.getLine=function(r){return this.$lines[r]||""},t.prototype.getLines=function(r,l){return this.$lines.slice(r,l+1)},t.prototype.getAllLines=function(){return this.getLines(0,this.getLength())},t.prototype.getLength=function(){return this.$lines.length},t.prototype.getTextRange=function(r){return this.getLinesForRange(r).join(this.getNewLineCharacter())},t.prototype.getLinesForRange=function(r){var l;if(r.start.row===r.end.row)l=[this.getLine(r.start.row).substring(r.start.column,r.end.column)];else{l=this.getLines(r.start.row,r.end.row),l[0]=(l[0]||"").substring(r.start.column);var a=l.length-1;r.end.row-r.start.row==a&&(l[a]=l[a].substring(0,r.end.column))}return l},t.prototype.insertLines=function(r,l){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(r,l)},t.prototype.removeLines=function(r,l){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(r,l)},t.prototype.insertNewLine=function(r){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(r,["",""])},t.prototype.insert=function(r,l){return this.getLength()<=1&&this.$detectNewLine(l),this.insertMergedLines(r,this.$split(l))},t.prototype.insertInLine=function(r,l){var a=this.clippedPos(r.row,r.column),h=this.pos(r.row,r.column+l.length);return this.applyDelta({start:a,end:h,action:"insert",lines:[l]},!0),this.clonePos(h)},t.prototype.clippedPos=function(r,l){var a=this.getLength();r===void 0?r=a:r<0?r=0:r>=a&&(r=a-1,l=void 0);var h=this.getLine(r);return l==null&&(l=h.length),l=Math.min(Math.max(l,0),h.length),{row:r,column:l}},t.prototype.clonePos=function(r){return{row:r.row,column:r.column}},t.prototype.pos=function(r,l){return{row:r,column:l}},t.prototype.$clipPosition=function(r){var l=this.getLength();return r.row>=l?(r.row=Math.max(0,l-1),r.column=this.getLine(l-1).length):(r.row=Math.max(0,r.row),r.column=Math.min(Math.max(r.column,0),this.getLine(r.row).length)),r},t.prototype.insertFullLines=function(r,l){r=Math.min(Math.max(r,0),this.getLength());var a=0;r<this.getLength()?(l=l.concat([""]),a=0):(l=[""].concat(l),r--,a=this.$lines[r].length),this.insertMergedLines({row:r,column:a},l)},t.prototype.insertMergedLines=function(r,l){var a=this.clippedPos(r.row,r.column),h={row:a.row+l.length-1,column:(l.length==1?a.column:0)+l[l.length-1].length};return this.applyDelta({start:a,end:h,action:"insert",lines:l}),this.clonePos(h)},t.prototype.remove=function(r){var l=this.clippedPos(r.start.row,r.start.column),a=this.clippedPos(r.end.row,r.end.column);return this.applyDelta({start:l,end:a,action:"remove",lines:this.getLinesForRange({start:l,end:a})}),this.clonePos(l)},t.prototype.removeInLine=function(r,l,a){var h=this.clippedPos(r,l),f=this.clippedPos(r,a);return this.applyDelta({start:h,end:f,action:"remove",lines:this.getLinesForRange({start:h,end:f})},!0),this.clonePos(h)},t.prototype.removeFullLines=function(r,l){r=Math.min(Math.max(0,r),this.getLength()-1),l=Math.min(Math.max(0,l),this.getLength()-1);var a=l==this.getLength()-1&&r>0,h=l<this.getLength()-1,f=a?r-1:r,v=a?this.getLine(f).length:0,b=h?l+1:l,A=h?0:this.getLine(b).length,D=new o(f,v,b,A),E=this.$lines.slice(r,l+1);return this.applyDelta({start:D.start,end:D.end,action:"remove",lines:this.getLinesForRange(D)}),E},t.prototype.removeNewLine=function(r){r<this.getLength()-1&&r>=0&&this.applyDelta({start:this.pos(r,this.getLine(r).length),end:this.pos(r+1,0),action:"remove",lines:["",""]})},t.prototype.replace=function(r,l){if(r instanceof o||(r=o.fromPoints(r.start,r.end)),l.length===0&&r.isEmpty())return r.start;if(l==this.getTextRange(r))return r.end;this.remove(r);var a;return l?a=this.insert(r.start,l):a=r.start,a},t.prototype.applyDeltas=function(r){for(var l=0;l<r.length;l++)this.applyDelta(r[l])},t.prototype.revertDeltas=function(r){for(var l=r.length-1;l>=0;l--)this.revertDelta(r[l])},t.prototype.applyDelta=function(r,l){var a=r.action=="insert";(a?r.lines.length<=1&&!r.lines[0]:!o.comparePoints(r.start,r.end))||(a&&r.lines.length>2e4?this.$splitAndapplyLargeDelta(r,2e4):(c(this.$lines,r,l),this._signal("change",r)))},t.prototype.$safeApplyDelta=function(r){var l=this.$lines.length;(r.action=="remove"&&r.start.row<l&&r.end.row<l||r.action=="insert"&&r.start.row<=l)&&this.applyDelta(r)},t.prototype.$splitAndapplyLargeDelta=function(r,l){for(var a=r.lines,h=a.length-l+1,f=r.start.row,v=r.start.column,b=0,A=0;b<h;b=A){A+=l-1;var D=a.slice(b,A);D.push(""),this.applyDelta({start:this.pos(f+b,v),end:this.pos(f+A,v=0),action:r.action,lines:D},!0)}r.lines=a.slice(b),r.start.row=f+b,r.start.column=v,this.applyDelta(r,!0)},t.prototype.revertDelta=function(r){this.$safeApplyDelta({start:this.clonePos(r.start),end:this.clonePos(r.end),action:r.action=="insert"?"remove":"insert",lines:r.lines.slice()})},t.prototype.indexToPosition=function(r,l){for(var a=this.$lines||this.getAllLines(),h=this.getNewLineCharacter().length,f=l||0,v=a.length;f<v;f++)if(r-=a[f].length+h,r<0)return{row:f,column:r+a[f].length+h};return{row:v-1,column:r+a[v-1].length+h}},t.prototype.positionToIndex=function(r,l){for(var a=this.$lines||this.getAllLines(),h=this.getNewLineCharacter().length,f=0,v=Math.min(r.row,a.length),b=l||0;b<v;++b)f+=a[b].length+h;return f+r.column},t.prototype.$split=function(r){return r.split(/\r\n|\r|\n/)},t}();e.prototype.$autoNewLine="",e.prototype.$newLineMode="auto",s.implement(e.prototype,p),u.Document=e}),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(n,u,y){var s=n("./lib/oop"),c=n("./lib/event_emitter").EventEmitter,p=function(){function o(d,e){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=d;var t=this;this.$worker=function(){if(t.running){for(var r=new Date,l=t.currentLine,a=-1,h=t.doc,f=l;t.lines[l];)l++;var v=h.getLength(),b=0;for(t.running=!1;l<v;){t.$tokenizeRow(l),a=l;do l++;while(t.lines[l]);if(b++,b%5===0&&new Date-r>20){t.running=setTimeout(t.$worker,20);break}}t.currentLine=l,a==-1&&(a=l),f<=a&&t.fireUpdateEvent(f,a)}}}return o.prototype.setTokenizer=function(d){this.tokenizer=d,this.lines=[],this.states=[],this.start(0)},o.prototype.setDocument=function(d){this.doc=d,this.lines=[],this.states=[],this.stop()},o.prototype.fireUpdateEvent=function(d,e){var t={first:d,last:e};this._signal("update",{data:t})},o.prototype.start=function(d){this.currentLine=Math.min(d||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},o.prototype.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},o.prototype.$updateOnChange=function(d){var e=d.start.row,t=d.end.row-e;if(t===0)this.lines[e]=null;else if(d.action=="remove")this.lines.splice(e,t+1,null),this.states.splice(e,t+1,null);else{var r=Array(t+1);r.unshift(e,1),this.lines.splice.apply(this.lines,r),this.states.splice.apply(this.states,r)}this.currentLine=Math.min(e,this.currentLine,this.doc.getLength()),this.stop()},o.prototype.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},o.prototype.getTokens=function(d){return this.lines[d]||this.$tokenizeRow(d)},o.prototype.getState=function(d){return this.currentLine==d&&this.$tokenizeRow(d),this.states[d]||"start"},o.prototype.$tokenizeRow=function(d){var e=this.doc.getLine(d),t=this.states[d-1],r=this.tokenizer.getLineTokens(e,t,d);return this.states[d]+""!=r.state+""?(this.states[d]=r.state,this.lines[d+1]=null,this.currentLine>d+1&&(this.currentLine=d+1)):this.currentLine==d&&(this.currentLine=d+1),this.lines[d]=r.tokens},o.prototype.cleanup=function(){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.removeAllListeners()},o}();s.implement(p.prototype,c),u.BackgroundTokenizer=p}),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/range"],function(n,u,y){var s=n("./lib/lang"),c=n("./range").Range,p=function(){function o(d,e,t){t===void 0&&(t="text"),this.setRegexp(d),this.clazz=e,this.type=t,this.docLen=0}return o.prototype.setRegexp=function(d){this.regExp+""!=d+""&&(this.regExp=d,this.cache=[])},o.prototype.update=function(d,e,t,r){if(this.regExp){for(var l=r.firstRow,a=r.lastRow,h={},f=t.$editor.$search,v=f.$isMultilineSearch(t.$editor.getLastSearchOptions()),b=l;b<=a;b++){var A=this.cache[b];if(A==null||t.getValue().length!=this.docLen){if(v){A=[];var D=f.$multiLineForward(t,this.regExp,b,a);if(D){var E=D.endRow<=a?D.endRow-1:a;E>b&&(b=E),A.push(new c(D.startRow,D.startCol,D.endRow,D.endCol))}A.length>this.MAX_RANGES&&(A=A.slice(0,this.MAX_RANGES))}else A=s.getMatchOffsets(t.getLine(b),this.regExp),A.length>this.MAX_RANGES&&(A=A.slice(0,this.MAX_RANGES)),A=A.map(function(_){return new c(b,_.offset,b,_.offset+_.length)});this.cache[b]=A.length?A:""}if(A.length!==0)for(var g=A.length;g--;){var S=A[g].toScreenRange(t),$=S.toString();h[$]||(h[$]=!0,e.drawSingleLineMarker(d,S,this.clazz,r))}}this.docLen=t.getValue().length}},o}();p.prototype.MAX_RANGES=500,u.SearchHighlight=p}),ace.define("ace/undomanager",["require","exports","module","ace/range"],function(n,u,y){var s=function(){function E(){this.$keepRedoStack,this.$maxRev=0,this.$fromUndo=!1,this.$undoDepth=1/0,this.reset()}return E.prototype.addSession=function(g){this.$session=g},E.prototype.add=function(g,S,$){if(!this.$fromUndo&&g!=this.$lastDelta){if(this.$keepRedoStack||(this.$redoStack.length=0),S===!1||!this.lastDeltas){this.lastDeltas=[];var _=this.$undoStack.length;_>this.$undoDepth-1&&this.$undoStack.splice(0,_-this.$undoDepth+1),this.$undoStack.push(this.lastDeltas),g.id=this.$rev=++this.$maxRev}(g.action=="remove"||g.action=="insert")&&(this.$lastDelta=g),this.lastDeltas.push(g)}},E.prototype.addSelection=function(g,S){this.selections.push({value:g,rev:S||this.$rev})},E.prototype.startNewGroup=function(){return this.lastDeltas=null,this.$rev},E.prototype.markIgnored=function(g,S){S==null&&(S=this.$rev+1);for(var $=this.$undoStack,_=$.length;_--;){var T=$[_][0];if(T.id<=g)break;T.id<S&&(T.ignore=!0)}this.lastDeltas=null},E.prototype.getSelection=function(g,S){for(var $=this.selections,_=$.length;_--;){var T=$[_];if(T.rev<g)return S&&(T=$[_+1]),T}},E.prototype.getRevision=function(){return this.$rev},E.prototype.getDeltas=function(g,S){S==null&&(S=this.$rev+1);for(var $=this.$undoStack,_=null,T=0,I=$.length;I--;){var w=$[I][0];if(w.id<S&&!_&&(_=I+1),w.id<=g){T=I+1;break}}return $.slice(T,_)},E.prototype.getChangedRanges=function(g,S){S==null&&(S=this.$rev+1)},E.prototype.getChangedLines=function(g,S){S==null&&(S=this.$rev+1)},E.prototype.undo=function(g,S){this.lastDeltas=null;var $=this.$undoStack;if(c($,$.length)){g||(g=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var _=$.pop(),T=null;return _&&(T=g.undoChanges(_,S),this.$redoStack.push(_),this.$syncRev()),this.$fromUndo=!1,T}},E.prototype.redo=function(g,S){if(this.lastDeltas=null,g||(g=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var $=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);D(this.$redoStack,$),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(I){I[0].id=++this.$maxRev},this)}var _=this.$redoStack.pop(),T=null;return _&&(T=g.redoChanges(_,S),this.$undoStack.push(_),this.$syncRev()),this.$fromUndo=!1,T},E.prototype.$syncRev=function(){var g=this.$undoStack,S=g[g.length-1],$=S&&S[0].id||0;this.$redoStackBaseRev=$,this.$rev=$},E.prototype.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},E.prototype.canUndo=function(){return this.$undoStack.length>0},E.prototype.canRedo=function(){return this.$redoStack.length>0},E.prototype.bookmark=function(g){g==null&&(g=this.$rev),this.mark=g},E.prototype.isAtBookmark=function(){return this.$rev===this.mark},E.prototype.toJSON=function(){return{$redoStack:this.$redoStack,$undoStack:this.$undoStack}},E.prototype.fromJSON=function(g){this.reset(),this.$undoStack=g.$undoStack,this.$redoStack=g.$redoStack},E.prototype.$prettyPrint=function(g){return g?t(g):t(this.$undoStack)+`
---
`+t(this.$redoStack)},E}();s.prototype.hasUndo=s.prototype.canUndo,s.prototype.hasRedo=s.prototype.canRedo,s.prototype.isClean=s.prototype.isAtBookmark,s.prototype.markClean=s.prototype.bookmark;function c(E,g){for(var S=g;S--;){var $=E[S];if($&&!$[0].ignore){for(;S<g-1;){var _=a(E[S],E[S+1]);E[S]=_[0],E[S+1]=_[1],S++}return!0}}}var p=n("./range").Range,o=p.comparePoints;p.comparePoints;function d(E){return{row:E.row,column:E.column}}function e(E){return{start:d(E.start),end:d(E.end),action:E.action,lines:E.lines.slice()}}function t(E){if(E=E||this,Array.isArray(E))return E.map(t).join(`
`);var g="";return E.action?(g=E.action=="insert"?"+":"-",g+="["+E.lines+"]"):E.value&&(Array.isArray(E.value)?g=E.value.map(r).join(`
`):g=r(E.value)),E.start&&(g+=r(E)),(E.id||E.rev)&&(g+="	("+(E.id||E.rev)+")"),g}function r(E){return E.start.row+":"+E.start.column+"=>"+E.end.row+":"+E.end.column}function l(E,g){var S=E.action=="insert",$=g.action=="insert";if(S&&$)if(o(g.start,E.end)>=0)f(g,E,-1);else if(o(g.start,E.start)<=0)f(E,g,1);else return null;else if(S&&!$)if(o(g.start,E.end)>=0)f(g,E,-1);else if(o(g.end,E.start)<=0)f(E,g,-1);else return null;else if(!S&&$)if(o(g.start,E.start)>=0)f(g,E,1);else if(o(g.start,E.start)<=0)f(E,g,1);else return null;else if(!S&&!$)if(o(g.start,E.start)>=0)f(g,E,1);else if(o(g.end,E.start)<=0)f(E,g,-1);else return null;return[g,E]}function a(E,g){for(var S=E.length;S--;)for(var $=0;$<g.length;$++)if(!l(E[S],g[$])){for(;S<E.length;){for(;$--;)l(g[$],E[S]);$=g.length,S++}return[E,g]}return E.selectionBefore=g.selectionBefore=E.selectionAfter=g.selectionAfter=null,[g,E]}function h(E,g){var S=E.action=="insert",$=g.action=="insert";if(S&&$)o(E.start,g.start)<0?f(g,E,1):f(E,g,1);else if(S&&!$)o(E.start,g.end)>=0?f(E,g,-1):(o(E.start,g.start)<=0||f(E,p.fromPoints(g.start,E.start),-1),f(g,E,1));else if(!S&&$)o(g.start,E.end)>=0?f(g,E,-1):(o(g.start,E.start)<=0||f(g,p.fromPoints(E.start,g.start),-1),f(E,g,1));else if(!S&&!$)if(o(g.start,E.end)>=0)f(g,E,-1);else if(o(g.end,E.start)<=0)f(E,g,-1);else{var _,T;return o(E.start,g.start)<0&&(_=E,E=b(E,g.start)),o(E.end,g.end)>0&&(T=b(E,g.end)),v(g.end,E.start,E.end,-1),T&&!_&&(E.lines=T.lines,E.start=T.start,E.end=T.end,T=E),[g,_,T].filter(Boolean)}return[g,E]}function f(E,g,S){v(E.start,g.start,g.end,S),v(E.end,g.start,g.end,S)}function v(E,g,S,$){E.row==($==1?g:S).row&&(E.column+=$*(S.column-g.column)),E.row+=$*(S.row-g.row)}function b(E,g){var S=E.lines,$=E.end;E.end=d(g);var _=E.end.row-E.start.row,T=S.splice(_,S.length),I=_?g.column:g.column-E.start.column;S.push(T[0].substring(0,I)),T[0]=T[0].substr(I);var w={start:d(g),end:$,lines:T,action:E.action};return w}function A(E,g){g=e(g);for(var S=E.length;S--;){for(var $=E[S],_=0;_<$.length;_++){var T=$[_],I=h(T,g);g=I[0],I.length!=2&&(I[2]?($.splice(_+1,1,I[1],I[2]),_++):I[1]||($.splice(_,1),_--))}$.length||E.splice(S,1)}return E}function D(E,g){for(var S=0;S<g.length;S++)for(var $=g[S],_=0;_<$.length;_++)A(E,$[_])}u.UndoManager=s}),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(n,u,y){var s=n("../range").Range,c=function(){function p(o,d){this.foldData=o,Array.isArray(d)?this.folds=d:d=this.folds=[d];var e=d[d.length-1];this.range=new s(d[0].start.row,d[0].start.column,e.end.row,e.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(t){t.setFoldLine(this)},this)}return p.prototype.shiftRow=function(o){this.start.row+=o,this.end.row+=o,this.folds.forEach(function(d){d.start.row+=o,d.end.row+=o})},p.prototype.addFold=function(o){if(o.sameRow){if(o.start.row<this.startRow||o.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(o),this.folds.sort(function(d,e){return-d.range.compareEnd(e.start.row,e.start.column)}),this.range.compareEnd(o.start.row,o.start.column)>0?(this.end.row=o.end.row,this.end.column=o.end.column):this.range.compareStart(o.end.row,o.end.column)<0&&(this.start.row=o.start.row,this.start.column=o.start.column)}else if(o.start.row==this.end.row)this.folds.push(o),this.end.row=o.end.row,this.end.column=o.end.column;else if(o.end.row==this.start.row)this.folds.unshift(o),this.start.row=o.start.row,this.start.column=o.start.column;else throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");o.foldLine=this},p.prototype.containsRow=function(o){return o>=this.start.row&&o<=this.end.row},p.prototype.walk=function(o,d,e){var t=0,r=this.folds,l,a,h,f=!0;d==null&&(d=this.end.row,e=this.end.column);for(var v=0;v<r.length;v++){if(l=r[v],a=l.range.compareStart(d,e),a==-1){o(null,d,e,t,f);return}if(h=o(null,l.start.row,l.start.column,t,f),h=!h&&o(l.placeholder,l.start.row,l.start.column,t),h||a===0)return;f=!l.sameRow,t=l.end.column}o(null,d,e,t,f)},p.prototype.getNextFoldTo=function(o,d){for(var e,t,r=0;r<this.folds.length;r++){if(e=this.folds[r],t=e.range.compareEnd(o,d),t==-1)return{fold:e,kind:"after"};if(t===0)return{fold:e,kind:"inside"}}return null},p.prototype.addRemoveChars=function(o,d,e){var t=this.getNextFoldTo(o,d),r,l;if(t){if(r=t.fold,t.kind=="inside"&&r.start.column!=d&&r.start.row!=o)window.console&&window.console.log(o,d,r);else if(r.start.row==o){l=this.folds;var a=l.indexOf(r);for(a===0&&(this.start.column+=e),a;a<l.length;a++){if(r=l[a],r.start.column+=e,!r.sameRow)return;r.end.column+=e}this.end.column+=e}}},p.prototype.split=function(o,d){var e=this.getNextFoldTo(o,d);if(!e||e.kind=="inside")return null;var t=e.fold,r=this.folds,l=this.foldData,a=r.indexOf(t),h=r[a-1];this.end.row=h.end.row,this.end.column=h.end.column,r=r.splice(a,r.length-a);var f=new p(l,r);return l.splice(l.indexOf(this)+1,0,f),f},p.prototype.merge=function(o){for(var d=o.folds,e=0;e<d.length;e++)this.addFold(d[e]);var t=this.foldData;t.splice(t.indexOf(o),1)},p.prototype.toString=function(){var o=[this.range.toString()+": ["];return this.folds.forEach(function(d){o.push("  "+d.toString())}),o.push("]"),o.join(`
`)},p.prototype.idxToPosition=function(o){for(var d=0,e=0;e<this.folds.length;e++){var t=this.folds[e];if(o-=t.start.column-d,o<0)return{row:t.start.row,column:t.start.column+o};if(o-=t.placeholder.length,o<0)return t.start;d=t.end.column}return{row:this.end.row,column:this.end.column+o}},p}();u.FoldLine=c}),ace.define("ace/range_list",["require","exports","module","ace/range"],function(n,u,y){var s=n("./range").Range,c=s.comparePoints,p=function(){function o(){this.ranges=[],this.$bias=1}return o.prototype.pointIndex=function(d,e,t){for(var r=this.ranges,l=t||0;l<r.length;l++){var a=r[l],h=c(d,a.end);if(!(h>0)){var f=c(d,a.start);return h===0?e&&f!==0?-l-2:l:f>0||f===0&&!e?l:-l-1}}return-l-1},o.prototype.add=function(d){var e=!d.isEmpty(),t=this.pointIndex(d.start,e);t<0&&(t=-t-1);var r=this.pointIndex(d.end,e,t);return r<0?r=-r-1:r++,this.ranges.splice(t,r-t,d)},o.prototype.addList=function(d){for(var e=[],t=d.length;t--;)e.push.apply(e,this.add(d[t]));return e},o.prototype.substractPoint=function(d){var e=this.pointIndex(d);if(e>=0)return this.ranges.splice(e,1)},o.prototype.merge=function(){var d=[],e=this.ranges;e=e.sort(function(h,f){return c(h.start,f.start)});for(var t=e[0],r,l=1;l<e.length;l++){r=t,t=e[l];var a=c(r.end,t.start);a<0||a==0&&!r.isEmpty()&&!t.isEmpty()||(c(r.end,t.end)<0&&(r.end.row=t.end.row,r.end.column=t.end.column),e.splice(l,1),d.push(t),t=r,l--)}return this.ranges=e,d},o.prototype.contains=function(d,e){return this.pointIndex({row:d,column:e})>=0},o.prototype.containsPoint=function(d){return this.pointIndex(d)>=0},o.prototype.rangeAtPoint=function(d){var e=this.pointIndex(d);if(e>=0)return this.ranges[e]},o.prototype.clipRows=function(d,e){var t=this.ranges;if(t[0].start.row>e||t[t.length-1].start.row<d)return[];var r=this.pointIndex({row:d,column:0});r<0&&(r=-r-1);var l=this.pointIndex({row:e,column:0},r);l<0&&(l=-l-1);for(var a=[],h=r;h<l;h++)a.push(t[h]);return a},o.prototype.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},o.prototype.attach=function(d){this.session&&this.detach(),this.session=d,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},o.prototype.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},o.prototype.$onChange=function(d){for(var e=d.start,t=d.end,r=e.row,l=t.row,a=this.ranges,h=0,f=a.length;h<f;h++){var v=a[h];if(v.end.row>=r)break}if(d.action=="insert")for(var b=l-r,A=-e.column+t.column;h<f;h++){var v=a[h];if(v.start.row>r)break;if(v.start.row==r&&v.start.column>=e.column&&(v.start.column==e.column&&this.$bias<=0||(v.start.column+=A,v.start.row+=b)),v.end.row==r&&v.end.column>=e.column){if(v.end.column==e.column&&this.$bias<0)continue;v.end.column==e.column&&A>0&&h<f-1&&v.end.column>v.start.column&&v.end.column==a[h+1].start.column&&(v.end.column-=A),v.end.column+=A,v.end.row+=b}}else for(var b=r-l,A=e.column-t.column;h<f;h++){var v=a[h];if(v.start.row>l)break;v.end.row<l&&(r<v.end.row||r==v.end.row&&e.column<v.end.column)?(v.end.row=r,v.end.column=e.column):v.end.row==l?v.end.column<=t.column?(b||v.end.column>e.column)&&(v.end.column=e.column,v.end.row=e.row):(v.end.column+=A,v.end.row+=b):v.end.row>l&&(v.end.row+=b),v.start.row<l&&(r<v.start.row||r==v.start.row&&e.column<v.start.column)?(v.start.row=r,v.start.column=e.column):v.start.row==l?v.start.column<=t.column?(b||v.start.column>e.column)&&(v.start.column=e.column,v.start.row=e.row):(v.start.column+=A,v.start.row+=b):v.start.row>l&&(v.start.row+=b)}if(b!=0&&h<f)for(;h<f;h++){var v=a[h];v.start.row+=b,v.end.row+=b}},o}();p.prototype.comparePoints=c,u.RangeList=p}),ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list"],function(n,u,y){var s=this&&this.__extends||function(){var r=function(l,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var v in f)Object.prototype.hasOwnProperty.call(f,v)&&(h[v]=f[v])},r(l,a)};return function(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");r(l,a);function h(){this.constructor=l}l.prototype=a===null?Object.create(a):(h.prototype=a.prototype,new h)}}(),c=n("../range_list").RangeList,p=function(r){s(l,r);function l(a,h){var f=r.call(this)||this;return f.foldLine=null,f.placeholder=h,f.range=a,f.start=a.start,f.end=a.end,f.sameRow=a.start.row==a.end.row,f.subFolds=f.ranges=[],f}return l.prototype.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},l.prototype.setFoldLine=function(a){this.foldLine=a,this.subFolds.forEach(function(h){h.setFoldLine(a)})},l.prototype.clone=function(){var a=this.range.clone(),h=new l(a,this.placeholder);return this.subFolds.forEach(function(f){h.subFolds.push(f.clone())}),h.collapseChildren=this.collapseChildren,h},l.prototype.addSubFold=function(a){if(!this.range.isEqual(a)){d(a,this.start);for(var A=a.start.row,D=a.start.column,h=0,f=-1;h<this.subFolds.length&&(f=this.subFolds[h].range.compare(A,D),f==1);h++);var v=this.subFolds[h],b=0;if(f==0){if(v.range.containsRange(a))return v.addSubFold(a);b=1}for(var A=a.range.end.row,D=a.range.end.column,E=h,f=-1;E<this.subFolds.length&&(f=this.subFolds[E].range.compare(A,D),f==1);E++);f==0&&E++;for(var g=this.subFolds.splice(h,E-h,a),S=f==0?g.length-1:g.length,$=b;$<S;$++)a.addSubFold(g[$]);return a.setFoldLine(this.foldLine),a}},l.prototype.restoreRange=function(a){return t(a,this.start)},l}(c);function o(r,l){r.row-=l.row,r.row==0&&(r.column-=l.column)}function d(r,l){o(r.start,l),o(r.end,l)}function e(r,l){r.row==0&&(r.column+=l.column),r.row+=l.row}function t(r,l){e(r.start,l),e(r.end,l)}u.Fold=p}),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator","ace/mouse/mouse_event"],function(n,u,y){var s=n("../range").Range,c=n("./fold_line").FoldLine,p=n("./fold").Fold,o=n("../token_iterator").TokenIterator,d=n("../mouse/mouse_event").MouseEvent;function e(){this.getFoldAt=function(t,r,l){var a=this.getFoldLine(t);if(!a)return null;for(var h=a.folds,f=0;f<h.length;f++){var v=h[f].range;if(v.contains(t,r)){if(l==1&&v.isEnd(t,r)&&!v.isEmpty())continue;if(l==-1&&v.isStart(t,r)&&!v.isEmpty())continue;return h[f]}}},this.getFoldsInRange=function(t){var r=t.start,l=t.end,a=this.$foldData,h=[];r.column+=1,l.column-=1;for(var f=0;f<a.length;f++){var v=a[f].range.compareRange(t);if(v!=2){if(v==-2)break;for(var b=a[f].folds,A=0;A<b.length;A++){var D=b[A];if(v=D.range.compareRange(t),v==-2)break;if(v==2)continue;if(v==42)break;h.push(D)}}}return r.column-=1,l.column+=1,h},this.getFoldsInRangeList=function(t){if(Array.isArray(t)){var r=[];t.forEach(function(l){r=r.concat(this.getFoldsInRange(l))},this)}else var r=this.getFoldsInRange(t);return r},this.getAllFolds=function(){for(var t=[],r=this.$foldData,l=0;l<r.length;l++)for(var a=0;a<r[l].folds.length;a++)t.push(r[l].folds[a]);return t},this.getFoldStringAt=function(t,r,l,a){if(a=a||this.getFoldLine(t),!a)return null;for(var h={end:{column:0}},f,v,b=0;b<a.folds.length;b++){v=a.folds[b];var A=v.range.compareEnd(t,r);if(A==-1){f=this.getLine(v.start.row).substring(h.end.column,v.start.column);break}else if(A===0)return null;h=v}return f||(f=this.getLine(v.start.row).substring(h.end.column)),l==-1?f.substring(0,r-h.end.column):l==1?f.substring(r-h.end.column):f},this.getFoldLine=function(t,r){var l=this.$foldData,a=0;for(r&&(a=l.indexOf(r)),a==-1&&(a=0),a;a<l.length;a++){var h=l[a];if(h.start.row<=t&&h.end.row>=t)return h;if(h.end.row>t)return null}return null},this.getNextFoldLine=function(t,r){var l=this.$foldData,a=0;for(r&&(a=l.indexOf(r)),a==-1&&(a=0),a;a<l.length;a++){var h=l[a];if(h.end.row>=t)return h}return null},this.getFoldedRowCount=function(t,r){for(var l=this.$foldData,a=r-t+1,h=0;h<l.length;h++){var f=l[h],v=f.end.row,b=f.start.row;if(v>=r){b<r&&(b>=t?a-=r-b:a=0);break}else v>=t&&(b>=t?a-=v-b:a-=v-t+1)}return a},this.$addFoldLine=function(t){return this.$foldData.push(t),this.$foldData.sort(function(r,l){return r.start.row-l.start.row}),t},this.addFold=function(t,r){var l=this.$foldData,a=!1,h;t instanceof p?h=t:(h=new p(r,t),h.collapseChildren=r.collapseChildren),this.$clipRangeToDocument(h.range);var f=h.start.row,v=h.start.column,b=h.end.row,A=h.end.column,D=this.getFoldAt(f,v,1),E=this.getFoldAt(b,A,-1);if(D&&E==D)return D.addSubFold(h);D&&!D.range.isStart(f,v)&&this.removeFold(D),E&&!E.range.isEnd(b,A)&&this.removeFold(E);var g=this.getFoldsInRange(h.range);g.length>0&&(this.removeFolds(g),h.collapseChildren||g.forEach(function(T){h.addSubFold(T)}));for(var S=0;S<l.length;S++){var $=l[S];if(b==$.start.row){$.addFold(h),a=!0;break}else if(f==$.end.row){if($.addFold(h),a=!0,!h.sameRow){var _=l[S+1];if(_&&_.start.row==b){$.merge(_);break}}break}else if(b<=$.start.row)break}return a||($=this.$addFoldLine(new c(this.$foldData,h))),this.$useWrapMode?this.$updateWrapData($.start.row,$.start.row):this.$updateRowLengthCache($.start.row,$.start.row),this.$modified=!0,this._signal("changeFold",{data:h,action:"add"}),h},this.addFolds=function(t){t.forEach(function(r){this.addFold(r)},this)},this.removeFold=function(t){var r=t.foldLine,l=r.start.row,a=r.end.row,h=this.$foldData,f=r.folds;if(f.length==1)h.splice(h.indexOf(r),1);else if(r.range.isEnd(t.end.row,t.end.column))f.pop(),r.end.row=f[f.length-1].end.row,r.end.column=f[f.length-1].end.column;else if(r.range.isStart(t.start.row,t.start.column))f.shift(),r.start.row=f[0].start.row,r.start.column=f[0].start.column;else if(t.sameRow)f.splice(f.indexOf(t),1);else{var v=r.split(t.start.row,t.start.column);f=v.folds,f.shift(),v.start.row=f[0].start.row,v.start.column=f[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(l,a):this.$updateRowLengthCache(l,a)),this.$modified=!0,this._signal("changeFold",{data:t,action:"remove"})},this.removeFolds=function(t){for(var r=[],l=0;l<t.length;l++)r.push(t[l]);r.forEach(function(a){this.removeFold(a)},this),this.$modified=!0},this.expandFold=function(t){this.removeFold(t),t.subFolds.forEach(function(r){t.restoreRange(r),this.addFold(r)},this),t.collapseChildren>0&&this.foldAll(t.start.row+1,t.end.row,t.collapseChildren-1),t.subFolds=[]},this.expandFolds=function(t){t.forEach(function(r){this.expandFold(r)},this)},this.unfold=function(t,r){var l,a;if(t==null)l=new s(0,0,this.getLength(),0),r==null&&(r=!0);else if(typeof t=="number")l=new s(t,0,t,this.getLine(t).length);else if("row"in t)l=s.fromPoints(t,t);else{if(Array.isArray(t))return a=[],t.forEach(function(f){a=a.concat(this.unfold(f))},this),a;l=t}a=this.getFoldsInRangeList(l);for(var h=a;a.length==1&&s.comparePoints(a[0].start,l.start)<0&&s.comparePoints(a[0].end,l.end)>0;)this.expandFolds(a),a=this.getFoldsInRangeList(l);if(r!=!1?this.removeFolds(a):this.expandFolds(a),h.length)return h},this.isRowFolded=function(t,r){return!!this.getFoldLine(t,r)},this.getRowFoldEnd=function(t,r){var l=this.getFoldLine(t,r);return l?l.end.row:t},this.getRowFoldStart=function(t,r){var l=this.getFoldLine(t,r);return l?l.start.row:t},this.getFoldDisplayLine=function(t,r,l,a,h){a==null&&(a=t.start.row),h==null&&(h=0),r==null&&(r=t.end.row),l==null&&(l=this.getLine(r).length);var f=this.doc,v="";return t.walk(function(b,A,D,E){if(!(A<a)){if(A==a){if(D<h)return;E=Math.max(h,E)}b!=null?v+=b:v+=f.getLine(A).substring(E,D)}},r,l),v},this.getDisplayLine=function(t,r,l,a){var h=this.getFoldLine(t);if(h)return this.getFoldDisplayLine(h,t,r,l,a);var f;return f=this.doc.getLine(t),f.substring(a||0,r||f.length)},this.$cloneFoldData=function(){var t=[];return t=this.$foldData.map(function(r){var l=r.folds.map(function(a){return a.clone()});return new c(t,l)}),t},this.toggleFold=function(t){var r=this.selection,l=r.getRange(),a,h;if(l.isEmpty()){var f=l.start;if(a=this.getFoldAt(f.row,f.column),a){this.expandFold(a);return}else(h=this.findMatchingBracket(f))?l.comparePoint(h)==1?l.end=h:(l.start=h,l.start.column++,l.end.column--):(h=this.findMatchingBracket({row:f.row,column:f.column+1}))?(l.comparePoint(h)==1?l.end=h:l.start=h,l.start.column++):l=this.getCommentFoldRange(f.row,f.column)||l}else{var v=this.getFoldsInRange(l);if(t&&v.length){this.expandFolds(v);return}else v.length==1&&(a=v[0])}if(a||(a=this.getFoldAt(l.start.row,l.start.column)),a&&a.range.toString()==l.toString()){this.expandFold(a);return}var b="...";if(!l.isMultiLine()){if(b=this.getTextRange(l),b.length<4)return;b=b.trim().substring(0,2)+".."}this.addFold(b,l)},this.getCommentFoldRange=function(t,r,l){var a=new o(this,t,r),h=a.getCurrentToken(),f=h&&h.type;if(h&&/^comment|string/.test(f)){f=f.match(/comment|string/)[0],f=="comment"&&(f+="|doc-start|\\.doc");var v=new RegExp(f),b=new s;if(l!=1){do h=a.stepBackward();while(h&&v.test(h.type));h=a.stepForward()}b.start.row=a.getCurrentTokenRow(),b.start.column=a.getCurrentTokenColumn()+h.value.length,a=new o(this,t,r);var A=this.getState(a.$row);if(l!=-1){var D=-1;do if(h=a.stepForward(),D==-1){var E=this.getState(a.$row);A.toString()!==E.toString()&&(D=a.$row)}else if(a.$row>D)break;while(h&&v.test(h.type));h=a.stepBackward()}else h=a.getCurrentToken();return b.end.row=a.getCurrentTokenRow(),b.end.column=a.getCurrentTokenColumn(),b}},this.foldAll=function(t,r,l,a){l==null&&(l=1e5);var h=this.foldWidgets;if(h){r=r||this.getLength(),t=t||0;for(var f=t;f<r;f++)if(h[f]==null&&(h[f]=this.getFoldWidget(f)),h[f]=="start"&&!(a&&!a(f))){var v=this.getFoldWidgetRange(f);v&&v.isMultiLine()&&v.end.row<=r&&v.start.row>=t&&(f=v.end.row,v.collapseChildren=l,this.addFold("...",v))}}},this.foldToLevel=function(t){for(this.foldAll();t-- >0;)this.unfold(null,!1)},this.foldAllComments=function(){var t=this;this.foldAll(null,null,null,function(r){for(var l=t.getTokens(r),a=0;a<l.length;a++){var h=l[a];if(!(h.type=="text"&&/^\s+$/.test(h.value)))return!!/comment/.test(h.type)}})},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(t){if(!this.$foldStyles[t])throw new Error("invalid fold style: "+t+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=t){this.$foldStyle=t,t=="manual"&&this.unfold();var r=this.$foldMode;this.$setFolding(null),this.$setFolding(r)}},this.$setFolding=function(t){if(this.$foldMode!=t){if(this.$foldMode=t,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),!t||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[],this.getFoldWidget=t.getFoldWidget.bind(t,this,this.$foldStyle),this.getFoldWidgetRange=t.getFoldWidgetRange.bind(t,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(t,r){var l=this.foldWidgets;if(!l||r&&l[t])return{};for(var a=t-1,h;a>=0;){var f=l[a];if(f==null&&(f=l[a]=this.getFoldWidget(a)),f=="start"){var v=this.getFoldWidgetRange(a);if(h||(h=v),v&&v.end.row>=t)break}a--}return{range:a!==-1&&v,firstRange:h}},this.onFoldWidgetClick=function(t,r){r instanceof d&&(r=r.domEvent);var l={children:r.shiftKey,all:r.ctrlKey||r.metaKey,siblings:r.altKey},a=this.$toggleFoldWidget(t,l);if(!a){var h=r.target||r.srcElement;h&&/ace_fold-widget/.test(h.className)&&(h.className+=" ace_invalid")}},this.$toggleFoldWidget=function(t,r){if(this.getFoldWidget){var l=this.getFoldWidget(t),a=this.getLine(t),h=l==="end"?-1:1,f=this.getFoldAt(t,h===-1?0:a.length,h);if(f)return r.children||r.all?this.removeFold(f):this.expandFold(f),f;var v=this.getFoldWidgetRange(t,!0);if(v&&!v.isMultiLine()&&(f=this.getFoldAt(v.start.row,v.start.column,1),f&&v.isEqual(f.range)))return this.removeFold(f),f;if(r.siblings){var b=this.getParentFoldRangeData(t);if(b.range)var A=b.range.start.row+1,D=b.range.end.row;this.foldAll(A,D,r.all?1e4:0)}else r.children?(D=v?v.end.row:this.getLength(),this.foldAll(t+1,D,r.all?1e4:0)):v&&(r.all&&(v.collapseChildren=1e4),this.addFold("...",v));return v}},this.toggleFoldWidget=function(t){var r=this.selection.getCursor().row;r=this.getRowFoldStart(r);var l=this.$toggleFoldWidget(r,{});if(!l){var a=this.getParentFoldRangeData(r,!0);if(l=a.range||a.firstRange,l){r=l.start.row;var h=this.getFoldAt(r,this.getLine(r).length,1);h?this.removeFold(h):this.addFold("...",l)}}},this.updateFoldWidgets=function(t){var r=t.start.row,l=t.end.row-r;if(l===0)this.foldWidgets[r]=null;else if(t.action=="remove")this.foldWidgets.splice(r,l+1,null);else{var a=Array(l+1);a.unshift(r,1),this.foldWidgets.splice.apply(this.foldWidgets,a)}},this.tokenizerUpdateFoldWidgets=function(t){var r=t.data;r.first!=r.last&&this.foldWidgets.length>r.first&&this.foldWidgets.splice(r.first,this.foldWidgets.length)}}u.Folding=e}),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(n,u,y){var s=n("../token_iterator").TokenIterator,c=n("../range").Range;function p(){this.findMatchingBracket=function(o,d){if(o.column==0)return null;var e=d||this.getLine(o.row).charAt(o.column-1);if(e=="")return null;var t=e.match(/([\(\[\{])|([\)\]\}])/);return t?t[1]?this.$findClosingBracket(t[1],o):this.$findOpeningBracket(t[2],o):null},this.getBracketRange=function(o){var d=this.getLine(o.row),e=!0,t,r=d.charAt(o.column-1),l=r&&r.match(/([\(\[\{])|([\)\]\}])/);if(l||(r=d.charAt(o.column),o={row:o.row,column:o.column+1},l=r&&r.match(/([\(\[\{])|([\)\]\}])/),e=!1),!l)return null;if(l[1]){var a=this.$findClosingBracket(l[1],o);if(!a)return null;t=c.fromPoints(o,a),e||(t.end.column++,t.start.column--),t.cursor=t.end}else{var a=this.$findOpeningBracket(l[2],o);if(!a)return null;t=c.fromPoints(a,o),e||(t.start.column++,t.end.column--),t.cursor=t.start}return t},this.getMatchingBracketRanges=function(o,d){var e=this.getLine(o.row),t=/([\(\[\{])|([\)\]\}])/,r=!d&&e.charAt(o.column-1),l=r&&r.match(t);if(l||(r=(d===void 0||d)&&e.charAt(o.column),o={row:o.row,column:o.column+1},l=r&&r.match(t)),!l)return null;var a=new c(o.row,o.column-1,o.row,o.column),h=l[1]?this.$findClosingBracket(l[1],o):this.$findOpeningBracket(l[2],o);if(!h)return[a];var f=new c(h.row,h.column,h.row,h.column+1);return[a,f]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(o,d,e){var t=this.$brackets[o],r=1,l=new s(this,d.row,d.column),a=l.getCurrentToken();if(a||(a=l.stepForward()),!!a){e||(e=new RegExp("(\\.?"+a.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)").replace(/-close\b/,"-(close|open)")+")+"));for(var h=d.column-l.getCurrentTokenColumn()-2,f=a.value;;){for(;h>=0;){var v=f.charAt(h);if(v==t){if(r-=1,r==0)return{row:l.getCurrentTokenRow(),column:h+l.getCurrentTokenColumn()}}else v==o&&(r+=1);h-=1}do a=l.stepBackward();while(a&&!e.test(a.type));if(a==null)break;f=a.value,h=f.length-1}return null}},this.$findClosingBracket=function(o,d,e){var t=this.$brackets[o],r=1,l=new s(this,d.row,d.column),a=l.getCurrentToken();if(a||(a=l.stepForward()),!!a){e||(e=new RegExp("(\\.?"+a.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)").replace(/-open\b/,"-(close|open)")+")+"));for(var h=d.column-l.getCurrentTokenColumn();;){for(var f=a.value,v=f.length;h<v;){var b=f.charAt(h);if(b==t){if(r-=1,r==0)return{row:l.getCurrentTokenRow(),column:h+l.getCurrentTokenColumn()}}else b==o&&(r+=1);h+=1}do a=l.stepForward();while(a&&!e.test(a.type));if(a==null)break;h=0}return null}},this.getMatchingTags=function(o){var d=new s(this,o.row,o.column),e=this.$findTagName(d);if(e){var t=d.stepBackward();return t.value==="<"?this.$findClosingTag(d,e):this.$findOpeningTag(d,e)}},this.$findTagName=function(o){var d=o.getCurrentToken(),e=!1,t=!1;if(d&&d.type.indexOf("tag-name")===-1)do t?d=o.stepBackward():d=o.stepForward(),d&&(d.value==="/>"?t=!0:d.type.indexOf("tag-name")!==-1&&(e=!0));while(d&&!e);return d},this.$findClosingTag=function(o,d){var e,t=d.value,r=d.value,l=0,a=new c(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+1);d=o.stepForward();var h=new c(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+d.value.length),f=!1;do{if(e=d,e.type.indexOf("tag-close")!==-1&&!f){var v=new c(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+1);f=!0}if(d=o.stepForward(),d){if(d.value===">"&&!f){var v=new c(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+1);f=!0}if(d.type.indexOf("tag-name")!==-1){if(t=d.value,r===t){if(e.value==="<")l++;else if(e.value==="</"&&(l--,l<0)){o.stepBackward();var b=new c(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+2);d=o.stepForward();var A=new c(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+d.value.length);if(d.type.indexOf("tag-close")===-1&&(d=o.stepForward()),d&&d.value===">")var D=new c(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+1);else return}}}else if(r===t&&d.value==="/>"&&(l--,l<0))var b=new c(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+2),A=b,D=A,v=new c(h.end.row,h.end.column,h.end.row,h.end.column+1)}}while(d&&l>=0);if(a&&v&&b&&D&&h&&A)return{openTag:new c(a.start.row,a.start.column,v.end.row,v.end.column),closeTag:new c(b.start.row,b.start.column,D.end.row,D.end.column),openTagName:h,closeTagName:A}},this.$findOpeningTag=function(o,d){var e=o.getCurrentToken(),t=d.value,r=0,l=o.getCurrentTokenRow(),a=o.getCurrentTokenColumn(),h=a+2,f=new c(l,a,l,h);o.stepForward();var v=new c(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+d.value.length);if(d.type.indexOf("tag-close")===-1&&(d=o.stepForward()),!(!d||d.value!==">")){var b=new c(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+1);o.stepBackward(),o.stepBackward();do if(d=e,l=o.getCurrentTokenRow(),a=o.getCurrentTokenColumn(),h=a+d.value.length,e=o.stepBackward(),d){if(d.type.indexOf("tag-name")!==-1){if(t===d.value)if(e.value==="<"){if(r++,r>0){var A=new c(l,a,l,h),D=new c(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+1);do d=o.stepForward();while(d&&d.value!==">");var E=new c(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+1)}}else e.value==="</"&&r--}else if(d.value==="/>"){for(var g=0,S=e;S;){if(S.type.indexOf("tag-name")!==-1&&S.value===t){r--;break}else if(S.value==="<")break;S=o.stepBackward(),g++}for(var $=0;$<g;$++)o.stepForward()}}while(e&&r<=0);if(D&&E&&f&&b&&A&&v)return{openTag:new c(D.start.row,D.start.column,E.end.row,E.end.column),closeTag:new c(f.start.row,f.start.column,b.end.row,b.end.column),openTagName:A,closeTagName:v}}}}u.BracketMatch=p}),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/line_widgets","ace/document","ace/background_tokenizer","ace/search_highlight","ace/undomanager","ace/edit_session/folding","ace/edit_session/bracket_match"],function(n,u,y){var s=n("./lib/oop"),c=n("./lib/lang"),p=n("./bidihandler").BidiHandler,o=n("./config"),d=n("./lib/event_emitter").EventEmitter,e=n("./selection").Selection,t=n("./mode/text").Mode,r=n("./range").Range,l=n("./line_widgets").LineWidgets,a=n("./document").Document,h=n("./background_tokenizer").BackgroundTokenizer,f=n("./search_highlight").SearchHighlight,v=n("./undomanager").UndoManager,b=function(){function w(m,C){this.doc,this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$editor=null,this.prevOp={},this.$foldData=[],this.id="session"+ ++w.$uid,this.$foldData.toString=function(){return this.join(`
`)},this.bgTokenizer=new h(new t().getTokenizer(),this);var x=this;this.bgTokenizer.on("update",function(M){x._signal("tokenizerUpdate",M)}),this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),(typeof m!="object"||!m.getLine)&&(m=new a(m)),this.setDocument(m),this.selection=new e(this),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.selection.on("changeCursor",this.$onSelectionChange),this.$bidiHandler=new p(this),o.resetOptions(this),this.setMode(C),o._signal("session",this),this.destroyed=!1,this.$initOperationListeners()}return w.prototype.$initOperationListeners=function(){var m=this;this.curOp=null,this.on("change",function(){m.curOp||(m.startOperation(),m.curOp.selectionBefore=m.$lastSel),m.curOp.docChanged=!0},!0),this.on("changeSelection",function(){m.curOp||(m.startOperation(),m.curOp.selectionBefore=m.$lastSel),m.curOp.selectionChanged=!0},!0),this.$operationResetTimer=c.delayedCall(this.endOperation.bind(this,!0))},w.prototype.startOperation=function(m){if(this.curOp){if(!m||this.curOp.command)return;this.prevOp=this.curOp}m||(m={}),this.$operationResetTimer.schedule(),this.curOp={command:m.command||{},args:m.args},this.curOp.selectionBefore=this.selection.toJSON(),this._signal("startOperation",m)},w.prototype.endOperation=function(m){if(this.curOp){if(m&&m.returnValue===!1){this.curOp=null,this._signal("endOperation",m);return}if(m==!0&&this.curOp.command&&this.curOp.command.name=="mouse")return;var C=this.selection.toJSON();this.curOp.selectionAfter=C,this.$lastSel=this.selection.toJSON(),this.getUndoManager().addSelection(C),this._signal("beforeEndOperation"),this.prevOp=this.curOp,this.curOp=null,this._signal("endOperation",m)}},w.prototype.setDocument=function(m){this.doc&&this.doc.off("change",this.$onChange),this.doc=m,m.on("change",this.$onChange,!0),this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},w.prototype.getDocument=function(){return this.doc},Object.defineProperty(w.prototype,"widgetManager",{get:function(){var m=new l(this);return this.widgetManager=m,this.$editor&&m.attach(this.$editor),m},set:function(m){Object.defineProperty(this,"widgetManager",{writable:!0,enumerable:!0,configurable:!0,value:m})},enumerable:!1,configurable:!0}),w.prototype.$resetRowCache=function(m){if(!m){this.$docRowCache=[],this.$screenRowCache=[];return}var C=this.$docRowCache.length,x=this.$getRowCacheIndex(this.$docRowCache,m)+1;C>x&&(this.$docRowCache.splice(x,C),this.$screenRowCache.splice(x,C))},w.prototype.$getRowCacheIndex=function(m,C){for(var x=0,M=m.length-1;x<=M;){var F=x+M>>1,R=m[F];if(C>R)x=F+1;else if(C<R)M=F-1;else return F}return x-1},w.prototype.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.destroyed||this.bgTokenizer.start(0)},w.prototype.onChangeFold=function(m){var C=m.data;this.$resetRowCache(C.start.row)},w.prototype.onChange=function(m){this.$modified=!0,this.$bidiHandler.onChange(m),this.$resetRowCache(m.start.row);var C=this.$updateInternalDataOnChange(m);!this.$fromUndo&&this.$undoManager&&(C&&C.length&&(this.$undoManager.add({action:"removeFolds",folds:C},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(m,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(m),this._signal("change",m)},w.prototype.onSelectionChange=function(){this._signal("changeSelection")},w.prototype.setValue=function(m){this.doc.setValue(m),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},w.fromJSON=function(m){typeof m=="string"&&(m=JSON.parse(m));var C=new v;C.$undoStack=m.history.undo,C.$redoStack=m.history.redo,C.mark=m.history.mark,C.$rev=m.history.rev;var x=new w(m.value);return m.folds.forEach(function(M){x.addFold("...",r.fromPoints(M.start,M.end))}),x.setAnnotations(m.annotations),x.setBreakpoints(m.breakpoints),x.setMode(m.mode),x.setScrollLeft(m.scrollLeft),x.setScrollTop(m.scrollTop),x.setUndoManager(C),x.selection.fromJSON(m.selection),x},w.prototype.toJSON=function(){return{annotations:this.$annotations,breakpoints:this.$breakpoints,folds:this.getAllFolds().map(function(m){return m.range}),history:this.getUndoManager(),mode:this.$mode.$id,scrollLeft:this.$scrollLeft,scrollTop:this.$scrollTop,selection:this.selection.toJSON(),value:this.doc.getValue()}},w.prototype.toString=function(){return this.doc.getValue()},w.prototype.getSelection=function(){return this.selection},w.prototype.getState=function(m){return this.bgTokenizer.getState(m)},w.prototype.getTokens=function(m){return this.bgTokenizer.getTokens(m)},w.prototype.getTokenAt=function(m,C){var x=this.bgTokenizer.getTokens(m),M,F=0;if(C==null){var R=x.length-1;F=this.getLine(m).length}else for(var R=0;R<x.length&&(F+=x[R].value.length,!(F>=C));R++);return M=x[R],M?(M.index=R,M.start=F-M.value.length,M):null},w.prototype.setUndoManager=function(m){if(this.$undoManager=m,this.$informUndoManager&&this.$informUndoManager.cancel(),m){var C=this;m.addSession(this),this.$syncInformUndoManager=function(){C.$informUndoManager.cancel(),C.mergeUndoDeltas=!1},this.$informUndoManager=c.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},w.prototype.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},w.prototype.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},w.prototype.getTabString=function(){return this.getUseSoftTabs()?c.stringRepeat(" ",this.getTabSize()):"	"},w.prototype.setUseSoftTabs=function(m){this.setOption("useSoftTabs",m)},w.prototype.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},w.prototype.setTabSize=function(m){this.setOption("tabSize",m)},w.prototype.getTabSize=function(){return this.$tabSize},w.prototype.isTabStop=function(m){return this.$useSoftTabs&&m.column%this.$tabSize===0},w.prototype.setNavigateWithinSoftTabs=function(m){this.setOption("navigateWithinSoftTabs",m)},w.prototype.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},w.prototype.setOverwrite=function(m){this.setOption("overwrite",m)},w.prototype.getOverwrite=function(){return this.$overwrite},w.prototype.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},w.prototype.addGutterDecoration=function(m,C){this.$decorations[m]||(this.$decorations[m]=""),this.$decorations[m]+=" "+C,this._signal("changeBreakpoint",{})},w.prototype.removeGutterDecoration=function(m,C){this.$decorations[m]=(this.$decorations[m]||"").replace(" "+C,""),this._signal("changeBreakpoint",{})},w.prototype.getBreakpoints=function(){return this.$breakpoints},w.prototype.setBreakpoints=function(m){this.$breakpoints=[];for(var C=0;C<m.length;C++)this.$breakpoints[m[C]]="ace_breakpoint";this._signal("changeBreakpoint",{})},w.prototype.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},w.prototype.setBreakpoint=function(m,C){C===void 0&&(C="ace_breakpoint"),C?this.$breakpoints[m]=C:delete this.$breakpoints[m],this._signal("changeBreakpoint",{})},w.prototype.clearBreakpoint=function(m){delete this.$breakpoints[m],this._signal("changeBreakpoint",{})},w.prototype.addMarker=function(m,C,x,M){var F=this.$markerId++,R={range:m,type:x||"line",renderer:typeof x=="function"?x:null,clazz:C,inFront:!!M,id:F};return M?(this.$frontMarkers[F]=R,this._signal("changeFrontMarker")):(this.$backMarkers[F]=R,this._signal("changeBackMarker")),F},w.prototype.addDynamicMarker=function(m,C){if(m.update){var x=this.$markerId++;return m.id=x,m.inFront=!!C,C?(this.$frontMarkers[x]=m,this._signal("changeFrontMarker")):(this.$backMarkers[x]=m,this._signal("changeBackMarker")),m}},w.prototype.removeMarker=function(m){var C=this.$frontMarkers[m]||this.$backMarkers[m];if(C){var x=C.inFront?this.$frontMarkers:this.$backMarkers;delete x[m],this._signal(C.inFront?"changeFrontMarker":"changeBackMarker")}},w.prototype.getMarkers=function(m){return m?this.$frontMarkers:this.$backMarkers},w.prototype.highlight=function(m){if(!this.$searchHighlight){var C=new f(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(C)}this.$searchHighlight.setRegexp(m)},w.prototype.highlightLines=function(m,C,x,M){typeof C!="number"&&(x=C,C=m),x||(x="ace_step");var F=new r(m,0,C,1/0);return F.id=this.addMarker(F,x,"fullLine",M),F},w.prototype.setAnnotations=function(m){this.$annotations=m,this._signal("changeAnnotation",{})},w.prototype.getAnnotations=function(){return this.$annotations||[]},w.prototype.clearAnnotations=function(){this.setAnnotations([])},w.prototype.$detectNewLine=function(m){var C=m.match(/^.*?(\r?\n)/m);C?this.$autoNewLine=C[1]:this.$autoNewLine=`
`},w.prototype.getWordRange=function(m,C){var x=this.getLine(m),M=!1;if(C>0&&(M=!!x.charAt(C-1).match(this.tokenRe)),M||(M=!!x.charAt(C).match(this.tokenRe)),M)var F=this.tokenRe;else if(/^\s+$/.test(x.slice(C-1,C+1)))var F=/\s/;else var F=this.nonTokenRe;var R=C;if(R>0){do R--;while(R>=0&&x.charAt(R).match(F));R++}for(var N=C;N<x.length&&x.charAt(N).match(F);)N++;return new r(m,R,m,N)},w.prototype.getAWordRange=function(m,C){for(var x=this.getWordRange(m,C),M=this.getLine(x.end.row);M.charAt(x.end.column).match(/[ \t]/);)x.end.column+=1;return x},w.prototype.setNewLineMode=function(m){this.doc.setNewLineMode(m)},w.prototype.getNewLineMode=function(){return this.doc.getNewLineMode()},w.prototype.setUseWorker=function(m){this.setOption("useWorker",m)},w.prototype.getUseWorker=function(){return this.$useWorker},w.prototype.onReloadTokenizer=function(m){var C=m.data;this.bgTokenizer.start(C.first),this._signal("tokenizerUpdate",m)},w.prototype.setMode=function(m,C){if(m&&typeof m=="object"){if(m.getTokenizer)return this.$onChangeMode(m);var x=m,M=x.path}else M=m||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new t),this.$modes[M]&&!x){this.$onChangeMode(this.$modes[M]),C&&C();return}this.$modeId=M,o.loadModule(["mode",M],function(F){if(!this.destroyed){if(this.$modeId!==M)return C&&C();this.$modes[M]&&!x?this.$onChangeMode(this.$modes[M]):F&&F.Mode&&(F=new F.Mode(x),x||(this.$modes[M]=F,F.$id=M),this.$onChangeMode(F)),C&&C()}}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},w.prototype.$onChangeMode=function(m,C){if(C||(this.$modeId=m.$id),this.$mode!==m){var x=this.$mode;this.$mode=m,this.$stopWorker(),this.$useWorker&&this.$startWorker();var M=m.getTokenizer();if(M.on!==void 0){var F=this.onReloadTokenizer.bind(this);M.on("update",F)}this.bgTokenizer.setTokenizer(M),this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=m.tokenRe,this.nonTokenRe=m.nonTokenRe,C||(m.attachToSession&&m.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(m.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:x,mode:m}))}},w.prototype.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},w.prototype.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(m){o.warn("Could not load worker",m),this.$worker=null}},w.prototype.getMode=function(){return this.$mode},w.prototype.setScrollTop=function(m){this.$scrollTop===m||isNaN(m)||(this.$scrollTop=m,this._signal("changeScrollTop",m))},w.prototype.getScrollTop=function(){return this.$scrollTop},w.prototype.setScrollLeft=function(m){this.$scrollLeft===m||isNaN(m)||(this.$scrollLeft=m,this._signal("changeScrollLeft",m))},w.prototype.getScrollLeft=function(){return this.$scrollLeft},w.prototype.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},w.prototype.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var m=0;return this.lineWidgets.forEach(function(C){C&&C.screenWidth>m&&(m=C.screenWidth)}),this.lineWidgetWidth=m},w.prototype.$computeWidth=function(m){if(this.$modified||m){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var C=this.doc.getAllLines(),x=this.$rowLengthCache,M=0,F=0,R=this.$foldData[F],N=R?R.start.row:1/0,W=C.length,B=0;B<W;B++){if(B>N){if(B=R.end.row+1,B>=W)break;R=this.$foldData[F++],N=R?R.start.row:1/0}x[B]==null&&(x[B]=this.$getStringScreenWidth(C[B])[0]),x[B]>M&&(M=x[B])}this.screenWidth=M}},w.prototype.getLine=function(m){return this.doc.getLine(m)},w.prototype.getLines=function(m,C){return this.doc.getLines(m,C)},w.prototype.getLength=function(){return this.doc.getLength()},w.prototype.getTextRange=function(m){return this.doc.getTextRange(m||this.selection.getRange())},w.prototype.insert=function(m,C){return this.doc.insert(m,C)},w.prototype.remove=function(m){return this.doc.remove(m)},w.prototype.removeFullLines=function(m,C){return this.doc.removeFullLines(m,C)},w.prototype.undoChanges=function(m,C){if(m.length){this.$fromUndo=!0;for(var x=m.length-1;x!=-1;x--){var M=m[x];M.action=="insert"||M.action=="remove"?this.doc.revertDelta(M):M.folds&&this.addFolds(M.folds)}!C&&this.$undoSelect&&(m.selectionBefore?this.selection.fromJSON(m.selectionBefore):this.selection.setRange(this.$getUndoSelection(m,!0))),this.$fromUndo=!1}},w.prototype.redoChanges=function(m,C){if(m.length){this.$fromUndo=!0;for(var x=0;x<m.length;x++){var M=m[x];(M.action=="insert"||M.action=="remove")&&this.doc.$safeApplyDelta(M)}!C&&this.$undoSelect&&(m.selectionAfter?this.selection.fromJSON(m.selectionAfter):this.selection.setRange(this.$getUndoSelection(m,!1))),this.$fromUndo=!1}},w.prototype.setUndoSelect=function(m){this.$undoSelect=m},w.prototype.$getUndoSelection=function(m,C){function x(W){return C?W.action!=="insert":W.action==="insert"}for(var M,F,R=0;R<m.length;R++){var N=m[R];if(N.start){if(!M){x(N)?M=r.fromPoints(N.start,N.end):M=r.fromPoints(N.start,N.start);continue}x(N)?(F=N.start,M.compare(F.row,F.column)==-1&&M.setStart(F),F=N.end,M.compare(F.row,F.column)==1&&M.setEnd(F)):(F=N.start,M.compare(F.row,F.column)==-1&&(M=r.fromPoints(N.start,N.start)))}}return M},w.prototype.replace=function(m,C){return this.doc.replace(m,C)},w.prototype.moveText=function(m,C,x){var M=this.getTextRange(m),F=this.getFoldsInRange(m),R=r.fromPoints(C,C);if(!x){this.remove(m);var N=m.start.row-m.end.row,W=N?-m.end.column:m.start.column-m.end.column;W&&(R.start.row==m.end.row&&R.start.column>m.end.column&&(R.start.column+=W),R.end.row==m.end.row&&R.end.column>m.end.column&&(R.end.column+=W)),N&&R.start.row>=m.end.row&&(R.start.row+=N,R.end.row+=N)}if(R.end=this.insert(R.start,M),F.length){var B=m.start,U=R.start,N=U.row-B.row,W=U.column-B.column;this.addFolds(F.map(function(K){return K=K.clone(),K.start.row==B.row&&(K.start.column+=W),K.end.row==B.row&&(K.end.column+=W),K.start.row+=N,K.end.row+=N,K}))}return R},w.prototype.indentRows=function(m,C,x){x=x.replace(/\t/g,this.getTabString());for(var M=m;M<=C;M++)this.doc.insertInLine({row:M,column:0},x)},w.prototype.outdentRows=function(m){for(var C=m.collapseRows(),x=new r(0,0,0,0),M=this.getTabSize(),F=C.start.row;F<=C.end.row;++F){var R=this.getLine(F);x.start.row=F,x.end.row=F;for(var N=0;N<M&&R.charAt(N)==" ";++N);N<M&&R.charAt(N)=="	"?(x.start.column=N,x.end.column=N+1):(x.start.column=0,x.end.column=N),this.remove(x)}},w.prototype.$moveLines=function(m,C,x){if(m=this.getRowFoldStart(m),C=this.getRowFoldEnd(C),x<0){var M=this.getRowFoldStart(m+x);if(M<0)return 0;var F=M-m}else if(x>0){var M=this.getRowFoldEnd(C+x);if(M>this.doc.getLength()-1)return 0;var F=M-C}else{m=this.$clipRowToDocument(m),C=this.$clipRowToDocument(C);var F=C-m+1}var R=new r(m,0,C,Number.MAX_VALUE),N=this.getFoldsInRange(R).map(function(B){return B=B.clone(),B.start.row+=F,B.end.row+=F,B}),W=x==0?this.doc.getLines(m,C):this.doc.removeFullLines(m,C);return this.doc.insertFullLines(m+F,W),N.length&&this.addFolds(N),F},w.prototype.moveLinesUp=function(m,C){return this.$moveLines(m,C,-1)},w.prototype.moveLinesDown=function(m,C){return this.$moveLines(m,C,1)},w.prototype.duplicateLines=function(m,C){return this.$moveLines(m,C,0)},w.prototype.$clipRowToDocument=function(m){return Math.max(0,Math.min(m,this.doc.getLength()-1))},w.prototype.$clipColumnToRow=function(m,C){return C<0?0:Math.min(this.doc.getLine(m).length,C)},w.prototype.$clipPositionToDocument=function(m,C){if(C=Math.max(0,C),m<0)m=0,C=0;else{var x=this.doc.getLength();m>=x?(m=x-1,C=this.doc.getLine(x-1).length):C=Math.min(this.doc.getLine(m).length,C)}return{row:m,column:C}},w.prototype.$clipRangeToDocument=function(m){m.start.row<0?(m.start.row=0,m.start.column=0):m.start.column=this.$clipColumnToRow(m.start.row,m.start.column);var C=this.doc.getLength()-1;return m.end.row>C?(m.end.row=C,m.end.column=this.doc.getLine(C).length):m.end.column=this.$clipColumnToRow(m.end.row,m.end.column),m},w.prototype.setUseWrapMode=function(m){if(m!=this.$useWrapMode){if(this.$useWrapMode=m,this.$modified=!0,this.$resetRowCache(0),m){var C=this.getLength();this.$wrapData=Array(C),this.$updateWrapData(0,C-1)}this._signal("changeWrapMode")}},w.prototype.getUseWrapMode=function(){return this.$useWrapMode},w.prototype.setWrapLimitRange=function(m,C){(this.$wrapLimitRange.min!==m||this.$wrapLimitRange.max!==C)&&(this.$wrapLimitRange={min:m,max:C},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},w.prototype.adjustWrapLimit=function(m,C){var x=this.$wrapLimitRange;x.max<0&&(x={min:C,max:C});var M=this.$constrainWrapLimit(m,x.min,x.max);return M!=this.$wrapLimit&&M>1?(this.$wrapLimit=M,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1},w.prototype.$constrainWrapLimit=function(m,C,x){return C&&(m=Math.max(C,m)),x&&(m=Math.min(x,m)),m},w.prototype.getWrapLimit=function(){return this.$wrapLimit},w.prototype.setWrapLimit=function(m){this.setWrapLimitRange(m,m)},w.prototype.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},w.prototype.$updateInternalDataOnChange=function(m){var C=this.$useWrapMode,x=m.action,M=m.start,F=m.end,R=M.row,N=F.row,W=N-R,B=null;if(this.$updating=!0,W!=0)if(x==="remove"){this[C?"$wrapData":"$rowLengthCache"].splice(R,W);var U=this.$foldData;B=this.getFoldsInRange(m),this.removeFolds(B);var P=this.getFoldLine(F.row),z=0;if(P){P.addRemoveChars(F.row,F.column,M.column-F.column),P.shiftRow(-W);var K=this.getFoldLine(R);K&&K!==P&&(K.merge(P),P=K),z=U.indexOf(P)+1}for(z;z<U.length;z++){var P=U[z];P.start.row>=F.row&&P.shiftRow(-W)}N=R}else{var V=Array(W);V.unshift(R,0);var Y=C?this.$wrapData:this.$rowLengthCache;Y.splice.apply(Y,V);var U=this.$foldData,P=this.getFoldLine(R),z=0;if(P){var ee=P.range.compareInside(M.row,M.column);ee==0?(P=P.split(M.row,M.column),P&&(P.shiftRow(W),P.addRemoveChars(N,0,F.column-M.column))):ee==-1&&(P.addRemoveChars(R,0,F.column-M.column),P.shiftRow(W)),z=U.indexOf(P)+1}for(z;z<U.length;z++){var P=U[z];P.start.row>=R&&P.shiftRow(W)}}else{W=Math.abs(m.start.column-m.end.column),x==="remove"&&(B=this.getFoldsInRange(m),this.removeFolds(B),W=-W);var P=this.getFoldLine(R);P&&P.addRemoveChars(R,M.column,W)}return C&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,C?this.$updateWrapData(R,N):this.$updateRowLengthCache(R,N),B},w.prototype.$updateRowLengthCache=function(m,C){this.$rowLengthCache[m]=null,this.$rowLengthCache[C]=null},w.prototype.$updateWrapData=function(m,C){var x=this.doc.getAllLines(),M=this.getTabSize(),F=this.$wrapData,R=this.$wrapLimit,N,W,B=m;for(C=Math.min(C,x.length-1);B<=C;)W=this.getFoldLine(B,W),W?(N=[],W.walk(function(U,P,z,K){var V;if(U!=null){V=this.$getDisplayTokens(U,N.length),V[0]=E;for(var Y=1;Y<V.length;Y++)V[Y]=g}else V=this.$getDisplayTokens(x[P].substring(K,z),N.length);N=N.concat(V)}.bind(this),W.end.row,x[W.end.row].length+1),F[W.start.row]=this.$computeWrapSplits(N,R,M),B=W.end.row+1):(N=this.$getDisplayTokens(x[B]),F[B]=this.$computeWrapSplits(N,R,M),B++)},w.prototype.$computeWrapSplits=function(m,C,x){if(m.length==0)return[];var M=[],F=m.length,R=0,N=0,W=this.$wrapAsCode,B=this.$indentedSoftWrap,U=C<=Math.max(2*x,8)||B===!1?0:Math.floor(C/2);function P(){var ee=0;if(U===0)return ee;if(B)for(var ne=0;ne<m.length;ne++){var te=m[ne];if(te==$)ee+=1;else if(te==_)ee+=x;else{if(te==T)continue;break}}return W&&B!==!1&&(ee+=x),Math.min(ee,U)}function z(ee){for(var ne=ee-R,te=R;te<ee;te++){var se=m[te];(se===12||se===2)&&(ne-=1)}M.length||(K=P(),M.indent=K),N+=ne,M.push(N),R=ee}for(var K=0;F-R>C-K;){var V=R+C-K;if(m[V-1]>=$&&m[V]>=$){z(V);continue}if(m[V]==E||m[V]==g){for(V;V!=R-1&&m[V]!=E;V--);if(V>R){z(V);continue}for(V=R+C,V;V<m.length&&m[V]==g;V++);if(V==m.length)break;z(V);continue}for(var Y=Math.max(V-(C-(C>>2)),R-1);V>Y&&m[V]<E;)V--;if(W){for(;V>Y&&m[V]<E;)V--;for(;V>Y&&m[V]==S;)V--}else for(;V>Y&&m[V]<$;)V--;if(V>Y){z(++V);continue}V=R+C,m[V]==D&&V--,z(V-K)}return M},w.prototype.$getDisplayTokens=function(m,C){var x=[],M;C=C||0;for(var F=0;F<m.length;F++){var R=m.charCodeAt(F);if(R==9){M=this.getScreenTabSize(x.length+C),x.push(_);for(var N=1;N<M;N++)x.push(T)}else R==32?x.push($):R>39&&R<48||R>57&&R<64?x.push(S):R>=4352&&I(R)?x.push(A,D):x.push(A)}return x},w.prototype.$getStringScreenWidth=function(m,C,x){if(C==0)return[0,0];C==null&&(C=1/0),x=x||0;var M,F;for(F=0;F<m.length&&(M=m.charCodeAt(F),M==9?x+=this.getScreenTabSize(x):M>=4352&&I(M)?x+=2:x+=1,!(x>C));F++);return[x,F]},w.prototype.getRowLength=function(m){var C=1;return this.lineWidgets&&(C+=this.lineWidgets[m]&&this.lineWidgets[m].rowCount||0),!this.$useWrapMode||!this.$wrapData[m]?C:this.$wrapData[m].length+C},w.prototype.getRowLineCount=function(m){return!this.$useWrapMode||!this.$wrapData[m]?1:this.$wrapData[m].length+1},w.prototype.getRowWrapIndent=function(m){if(this.$useWrapMode){var C=this.screenToDocumentPosition(m,Number.MAX_VALUE),x=this.$wrapData[C.row];return x.length&&x[0]<C.column?x.indent:0}else return 0},w.prototype.getScreenLastRowColumn=function(m){var C=this.screenToDocumentPosition(m,Number.MAX_VALUE);return this.documentToScreenColumn(C.row,C.column)},w.prototype.getDocumentLastRowColumn=function(m,C){var x=this.documentToScreenRow(m,C);return this.getScreenLastRowColumn(x)},w.prototype.getDocumentLastRowColumnPosition=function(m,C){var x=this.documentToScreenRow(m,C);return this.screenToDocumentPosition(x,Number.MAX_VALUE/10)},w.prototype.getRowSplitData=function(m){if(this.$useWrapMode)return this.$wrapData[m]},w.prototype.getScreenTabSize=function(m){return this.$tabSize-(m%this.$tabSize|0)},w.prototype.screenToDocumentRow=function(m,C){return this.screenToDocumentPosition(m,C).row},w.prototype.screenToDocumentColumn=function(m,C){return this.screenToDocumentPosition(m,C).column},w.prototype.screenToDocumentPosition=function(m,C,x){if(m<0)return{row:0,column:0};var M,F=0,R=0,N,W=0,B=0,U=this.$screenRowCache,P=this.$getRowCacheIndex(U,m),z=U.length;if(z&&P>=0)var W=U[P],F=this.$docRowCache[P],K=m>U[z-1];else var K=!z;for(var V=this.getLength()-1,Y=this.getNextFoldLine(F),ee=Y?Y.start.row:1/0;W<=m&&(B=this.getRowLength(F),!(W+B>m||F>=V));)W+=B,F++,F>ee&&(F=Y.end.row+1,Y=this.getNextFoldLine(F,Y),ee=Y?Y.start.row:1/0),K&&(this.$docRowCache.push(F),this.$screenRowCache.push(W));if(Y&&Y.start.row<=F)M=this.getFoldDisplayLine(Y),F=Y.start.row;else{if(W+B<=m||F>V)return{row:V,column:this.getLine(V).length};M=this.getLine(F),Y=null}var ne=0,te=Math.floor(m-W);if(this.$useWrapMode){var se=this.$wrapData[F];se&&(N=se[te],te>0&&se.length&&(ne=se.indent,R=se[te-1]||se[se.length-1],M=M.substring(R)))}return x!==void 0&&this.$bidiHandler.isBidiRow(W+te,F,te)&&(C=this.$bidiHandler.offsetToCol(x)),R+=this.$getStringScreenWidth(M,C-ne)[1],this.$useWrapMode&&R>=N&&(R=N-1),Y?Y.idxToPosition(R):{row:F,column:R}},w.prototype.documentToScreenPosition=function(m,C){if(typeof C>"u")var x=this.$clipPositionToDocument(m.row,m.column);else x=this.$clipPositionToDocument(m,C);m=x.row,C=x.column;var M=0,F=null,R=null;R=this.getFoldAt(m,C,1),R&&(m=R.start.row,C=R.start.column);var N,W=0,B=this.$docRowCache,U=this.$getRowCacheIndex(B,m),P=B.length;if(P&&U>=0)var W=B[U],M=this.$screenRowCache[U],z=m>B[P-1];else var z=!P;for(var K=this.getNextFoldLine(W),V=K?K.start.row:1/0;W<m;){if(W>=V){if(N=K.end.row+1,N>m)break;K=this.getNextFoldLine(N,K),V=K?K.start.row:1/0}else N=W+1;M+=this.getRowLength(W),W=N,z&&(this.$docRowCache.push(W),this.$screenRowCache.push(M))}var Y="";K&&W>=V?(Y=this.getFoldDisplayLine(K,m,C),F=K.start.row):(Y=this.getLine(m).substring(0,C),F=m);var ee=0;if(this.$useWrapMode){var ne=this.$wrapData[F];if(ne){for(var te=0;Y.length>=ne[te];)M++,te++;Y=Y.substring(ne[te-1]||0,Y.length),ee=te>0?ne.indent:0}}return this.lineWidgets&&this.lineWidgets[W]&&this.lineWidgets[W].rowsAbove&&(M+=this.lineWidgets[W].rowsAbove),{row:M,column:ee+this.$getStringScreenWidth(Y)[0]}},w.prototype.documentToScreenColumn=function(m,C){return this.documentToScreenPosition(m,C).column},w.prototype.documentToScreenRow=function(m,C){return this.documentToScreenPosition(m,C).row},w.prototype.getScreenLength=function(){var m=0,C=null;if(this.$useWrapMode)for(var F=this.$wrapData.length,R=0,M=0,C=this.$foldData[M++],N=C?C.start.row:1/0;R<F;){var W=this.$wrapData[R];m+=W?W.length+1:1,R++,R>N&&(R=C.end.row+1,C=this.$foldData[M++],N=C?C.start.row:1/0)}else{m=this.getLength();for(var x=this.$foldData,M=0;M<x.length;M++)C=x[M],m-=C.end.row-C.start.row}return this.lineWidgets&&(m+=this.$getWidgetScreenLength()),m},w.prototype.$setFontMetrics=function(m){this.$enableVarChar&&(this.$getStringScreenWidth=function(C,x,M){if(x===0)return[0,0];x||(x=1/0),M=M||0;var F,R;for(R=0;R<C.length&&(F=C.charAt(R),F==="	"?M+=this.getScreenTabSize(M):M+=m.getCharacterWidth(F),!(M>x));R++);return[M,R]})},w.prototype.getPrecedingCharacter=function(){var m=this.selection.getCursor();if(m.column===0)return m.row===0?"":this.doc.getNewLineCharacter();var C=this.getLine(m.row);return C[m.column-1]},w.prototype.destroy=function(){this.destroyed||(this.bgTokenizer.setDocument(null),this.bgTokenizer.cleanup(),this.destroyed=!0),this.endOperation(),this.$stopWorker(),this.removeAllListeners(),this.doc&&this.doc.off("change",this.$onChange),this.selection&&(this.selection.off("changeCursor",this.$onSelectionChange),this.selection.off("changeSelection",this.$onSelectionChange)),this.selection.detach()},w}();b.$uid=0,b.prototype.$modes=o.$modes,b.prototype.getValue=b.prototype.toString,b.prototype.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},b.prototype.$overwrite=!1,b.prototype.$mode=null,b.prototype.$modeId=null,b.prototype.$scrollTop=0,b.prototype.$scrollLeft=0,b.prototype.$wrapLimit=80,b.prototype.$useWrapMode=!1,b.prototype.$wrapLimitRange={min:null,max:null},b.prototype.lineWidgets=null,b.prototype.isFullWidth=I,s.implement(b.prototype,d);var A=1,D=2,E=3,g=4,S=9,$=10,_=11,T=12;function I(w){return w<4352?!1:w>=4352&&w<=4447||w>=4515&&w<=4519||w>=4602&&w<=4607||w>=9001&&w<=9002||w>=11904&&w<=11929||w>=11931&&w<=12019||w>=12032&&w<=12245||w>=12272&&w<=12283||w>=12288&&w<=12350||w>=12353&&w<=12438||w>=12441&&w<=12543||w>=12549&&w<=12589||w>=12593&&w<=12686||w>=12688&&w<=12730||w>=12736&&w<=12771||w>=12784&&w<=12830||w>=12832&&w<=12871||w>=12880&&w<=13054||w>=13056&&w<=19903||w>=19968&&w<=42124||w>=42128&&w<=42182||w>=43360&&w<=43388||w>=44032&&w<=55203||w>=55216&&w<=55238||w>=55243&&w<=55291||w>=63744&&w<=64255||w>=65040&&w<=65049||w>=65072&&w<=65106||w>=65108&&w<=65126||w>=65128&&w<=65131||w>=65281&&w<=65376||w>=65504&&w<=65510}n("./edit_session/folding").Folding.call(b.prototype),n("./edit_session/bracket_match").BracketMatch.call(b.prototype),o.defineOptions(b.prototype,"session",{wrap:{set:function(w){if(!w||w=="off"?w=!1:w=="free"?w=!0:w=="printMargin"?w=-1:typeof w=="string"&&(w=parseInt(w,10)||!1),this.$wrap!=w)if(this.$wrap=w,!w)this.setUseWrapMode(!1);else{var m=typeof w=="number"?w:null;this.setWrapLimitRange(m,m),this.setUseWrapMode(!0)}},get:function(){return this.getUseWrapMode()?this.$wrap==-1?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(w){w=w=="auto"?this.$mode.type!="text":w!="text",w!=this.$wrapAsCode&&(this.$wrapAsCode=w,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(w){this.$useWorker=w,this.$stopWorker(),w&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(w){w=parseInt(w),w>0&&this.$tabSize!==w&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=w,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(w){this.setFoldStyle(w)},handlesSet:!0},overwrite:{set:function(w){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(w){this.doc.setNewLineMode(w)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(w){this.setMode(w)},get:function(){return this.$modeId},handlesSet:!0}}),u.EditSession=b}),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(n,u,y){var s=n("./lib/lang"),c=n("./lib/oop"),p=n("./range").Range,o=function(){function r(){this.$options={}}return r.prototype.set=function(l){return c.mixin(this.$options,l),this},r.prototype.getOptions=function(){return s.copyObject(this.$options)},r.prototype.setOptions=function(l){this.$options=l},r.prototype.find=function(l){var a=this.$options,h=this.$matchIterator(l,a);if(!h)return!1;var f=null;return h.forEach(function(v,b,A,D){return f=new p(v,b,A,D),b==D&&a.start&&a.start.start&&a.skipCurrent!=!1&&f.isEqual(a.start)?(f=null,!1):!0}),f},r.prototype.findAll=function(l){var a=this.$options;if(!a.needle)return[];this.$assembleRegExp(a);var h=a.range,f=h?l.getLines(h.start.row,h.end.row):l.doc.getAllLines(),v=[],b=a.re;if(a.$isMultiLine){var A=b.length,D=f.length-A,E;e:for(var g=b.offset||0;g<=D;g++){for(var S=0;S<A;S++)if(f[g+S].search(b[S])==-1)continue e;var $=f[g],_=f[g+A-1],T=$.length-$.match(b[0])[0].length,I=_.match(b[A-1])[0].length;E&&E.end.row===g&&E.end.column>T||(v.push(E=new p(g,T,g+A-1,I)),A>2&&(g=g+A-2))}}else for(var w,m=0;m<f.length;m++)if(this.$isMultilineSearch(a)){var C=f.length-1;if(w=this.$multiLineForward(l,b,m,C),w){var x=w.endRow<=C?w.endRow-1:C;x>m&&(m=x),v.push(new p(w.startRow,w.startCol,w.endRow,w.endCol))}}else{w=s.getMatchOffsets(f[m],b);for(var S=0;S<w.length;S++){var M=w[S];v.push(new p(m,M.offset,m,M.offset+M.length))}}if(h){for(var F=h.start.column,R=h.end.column,m=0,S=v.length-1;m<S&&v[m].start.column<F&&v[m].start.row==0;)m++;for(var N=h.end.row-h.start.row;m<S&&v[S].end.column>R&&v[S].end.row==N;)S--;for(v=v.slice(m,S+1),m=0,S=v.length;m<S;m++)v[m].start.row+=h.start.row,v[m].end.row+=h.start.row}return v},r.prototype.parseReplaceString=function(l){for(var a={DollarSign:36,Ampersand:38,Digit0:48,Digit1:49,Digit9:57,Backslash:92,n:110,t:116},h="",f=0,v=l.length;f<v;f++){var b=l.charCodeAt(f);if(b===a.Backslash){if(f++,f>=v){h+="\\";break}var A=l.charCodeAt(f);switch(A){case a.Backslash:h+="\\";break;case a.n:h+=`
`;break;case a.t:h+="	";break}continue}if(b===a.DollarSign){if(f++,f>=v){h+="$";break}var D=l.charCodeAt(f);if(D===a.DollarSign){h+="$$";continue}if(D===a.Digit0||D===a.Ampersand){h+="$&";continue}if(a.Digit1<=D&&D<=a.Digit9){h+="$"+l[f];continue}}h+=l[f]}return h||l},r.prototype.replace=function(l,a){var h=this.$options,f=this.$assembleRegExp(h);if(h.$isMultiLine)return a;if(f){var v=this.$isMultilineSearch(h);v&&(l=l.replace(/\r\n|\r|\n/g,`
`));var b=f.exec(l);if(!b||!v&&b[0].length!=l.length)return null;if(a=h.regExp?this.parseReplaceString(a):a.replace(/\$/g,"$$$$"),a=l.replace(f,a),h.preserveCase){a=a.split("");for(var A=Math.min(l.length,l.length);A--;){var D=l[A];D&&D.toLowerCase()!=D?a[A]=a[A].toUpperCase():a[A]=a[A].toLowerCase()}a=a.join("")}return a}},r.prototype.$assembleRegExp=function(l,a){if(l.needle instanceof RegExp)return l.re=l.needle;var h=l.needle;if(!l.needle)return l.re=!1;l.regExp||(h=s.escapeRegExp(h));var f=l.caseSensitive?"gm":"gmi";try{new RegExp(h,"u"),l.$supportsUnicodeFlag=!0,f+="u"}catch{l.$supportsUnicodeFlag=!1}if(l.wholeWord&&(h=d(h,l)),l.$isMultiLine=!a&&/[\n\r]/.test(h),l.$isMultiLine)return l.re=this.$assembleMultilineRegExp(h,f);try{var v=new RegExp(h,f)}catch{v=!1}return l.re=v},r.prototype.$assembleMultilineRegExp=function(l,a){for(var h=l.replace(/\r\n|\r|\n/g,`$
^`).split(`
`),f=[],v=0;v<h.length;v++)try{f.push(new RegExp(h[v],a))}catch{return!1}return f},r.prototype.$isMultilineSearch=function(l){return l.re&&/\\r\\n|\\r|\\n/.test(l.re.source)&&l.regExp&&!l.$isMultiLine},r.prototype.$multiLineForward=function(l,a,h,f){for(var v,b=t(l,h),A=h;A<=f;){for(var D=0;D<b&&!(A>f);D++){var E=l.getLine(A++);v=v==null?E:v+`
`+E}var g=a.exec(v);if(a.lastIndex=0,g){var S=v.slice(0,g.index).split(`
`),$=g[0].split(`
`),_=h+S.length-1,T=S[S.length-1].length,I=_+$.length-1,w=$.length==1?T+$[0].length:$[$.length-1].length;return{startRow:_,startCol:T,endRow:I,endCol:w}}}return null},r.prototype.$multiLineBackward=function(l,a,h,f,v){for(var b,A=t(l,f),D=l.getLine(f).length-h,E=f;E>=v;){for(var g=0;g<A&&E>=v;g++){var S=l.getLine(E--);b=b==null?S:S+`
`+b}var $=e(b,a,D);if($){var _=b.slice(0,$.index).split(`
`),T=$[0].split(`
`),I=E+_.length,w=_[_.length-1].length,m=I+T.length-1,C=T.length==1?w+T[0].length:T[T.length-1].length;return{startRow:I,startCol:w,endRow:m,endCol:C}}}return null},r.prototype.$matchIterator=function(l,a){var h=this.$assembleRegExp(a);if(!h)return!1;var f=this.$isMultilineSearch(a),v=this.$multiLineForward,b=this.$multiLineBackward,A=a.backwards==!0,D=a.skipCurrent!=!1,E=h.unicode,g=a.range,S=a.start;S||(S=g?g[A?"end":"start"]:l.selection.getRange()),S.start&&(S=S[D!=A?"end":"start"]);var $=g?g.start.row:0,_=g?g.end.row:l.getLength()-1;if(A)var T=function(m){var C=S.row;if(!w(C,S.column,m)){for(C--;C>=$;C--)if(w(C,Number.MAX_VALUE,m))return;if(a.wrap!=!1){for(C=_,$=S.row;C>=$;C--)if(w(C,Number.MAX_VALUE,m))return}}};else var T=function(C){var x=S.row;if(!w(x,S.column,C)){for(x=x+1;x<=_;x++)if(w(x,0,C))return;if(a.wrap!=!1){for(x=$,_=S.row;x<=_;x++)if(w(x,0,C))return}}};if(a.$isMultiLine)var I=h.length,w=function(m,C,x){var M=A?m-I+1:m;if(!(M<0||M+I>l.getLength())){var F=l.getLine(M),R=F.search(h[0]);if(!(!A&&R<C||R===-1)){for(var N=1;N<I;N++)if(F=l.getLine(M+N),F.search(h[N])==-1)return;var W=F.match(h[I-1])[0].length;if(!(A&&W>C)&&x(M,R,M+I-1,W))return!0}}};else if(A)var w=function(C,x,M){if(f){var F=b(l,h,x,C,$);if(!F)return!1;if(M(F.startRow,F.startCol,F.endRow,F.endCol))return!0}else{var R=l.getLine(C),N=[],W,B=0;for(h.lastIndex=0;W=h.exec(R);){var U=W[0].length;if(B=W.index,!U){if(B>=R.length)break;h.lastIndex=B+=s.skipEmptyMatch(R,B,E)}if(W.index+U>x)break;N.push(W.index,U)}for(var P=N.length-1;P>=0;P-=2){var z=N[P-1],U=N[P];if(M(C,z,C,z+U))return!0}}};else var w=function(C,x,M){if(h.lastIndex=x,f){var F=v(l,h,C,_);if(F){var R=F.endRow<=_?F.endRow-1:_;R>C&&(C=R)}if(!F)return!1;if(M(F.startRow,F.startCol,F.endRow,F.endCol))return!0}else for(var N=l.getLine(C),W,B;B=h.exec(N);){var U=B[0].length;if(W=B.index,M(C,W,C,W+U))return!0;if(!U&&(h.lastIndex=W+=s.skipEmptyMatch(N,W,E),W>=N.length))return!1}};return{forEach:T}},r}();function d(r,l){var a=s.supportsLookbehind();function h(A,D){D===void 0&&(D=!0);var E=a&&l.$supportsUnicodeFlag?new RegExp("[\\p{L}\\p{N}_]","u"):new RegExp("\\w");return E.test(A)||l.regExp?a&&l.$supportsUnicodeFlag?D?"(?<=^|[^\\p{L}\\p{N}_])":"(?=[^\\p{L}\\p{N}_]|$)":"\\b":""}var f=Array.from(r),v=f[0],b=f[f.length-1];return h(v)+r+h(b,!1)}function e(r,l,a){for(var h=null,f=0;f<=r.length;){l.lastIndex=f;var v=l.exec(r);if(!v)break;var b=v.index+v[0].length;if(b>r.length-a)break;(!h||b>h.index+h[0].length)&&(h=v),f=v.index+1}return h}function t(r,l){var a=5e3,h={row:l,column:0},f=r.doc.positionToIndex(h),v=f+a,b=r.doc.indexToPosition(v),A=b.row;return A+1}u.Search=o}),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(n,u,y){var s=this&&this.__extends||function(){var r=function(l,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var v in f)Object.prototype.hasOwnProperty.call(f,v)&&(h[v]=f[v])},r(l,a)};return function(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");r(l,a);function h(){this.constructor=l}l.prototype=a===null?Object.create(a):(h.prototype=a.prototype,new h)}}(),c=n("../lib/keys"),p=n("../lib/useragent"),o=c.KEY_MODS,d=function(){function r(l,a){this.$init(l,a,!1)}return r.prototype.$init=function(l,a,h){this.platform=a||(p.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(l),this.$singleCommand=h},r.prototype.addCommand=function(l){this.commands[l.name]&&this.removeCommand(l),this.commands[l.name]=l,l.bindKey&&this._buildKeyHash(l)},r.prototype.removeCommand=function(l,a){var h=l&&(typeof l=="string"?l:l.name);l=this.commands[h],a||delete this.commands[h];var f=this.commandKeyBinding;for(var v in f){var b=f[v];if(b==l)delete f[v];else if(Array.isArray(b)){var A=b.indexOf(l);A!=-1&&(b.splice(A,1),b.length==1&&(f[v]=b[0]))}}},r.prototype.bindKey=function(l,a,h){if(typeof l=="object"&&l&&(h==null&&(h=l.position),l=l[this.platform]),!!l){if(typeof a=="function")return this.addCommand({exec:a,bindKey:l,name:a.name||l});l.split("|").forEach(function(f){var v="";if(f.indexOf(" ")!=-1){var b=f.split(/\s+/);f=b.pop(),b.forEach(function(E){var g=this.parseKeys(E),S=o[g.hashId]+g.key;v+=(v?" ":"")+S,this._addCommandToBinding(v,"chainKeys")},this),v+=" "}var A=this.parseKeys(f),D=o[A.hashId]+A.key;this._addCommandToBinding(v+D,a,h)},this)}},r.prototype._addCommandToBinding=function(l,a,h){var f=this.commandKeyBinding,v;if(!a)delete f[l];else if(!f[l]||this.$singleCommand)f[l]=a;else{Array.isArray(f[l])?(v=f[l].indexOf(a))!=-1&&f[l].splice(v,1):f[l]=[f[l]],typeof h!="number"&&(h=e(a));var b=f[l];for(v=0;v<b.length;v++){var A=b[v],D=e(A);if(D>h)break}b.splice(v,0,a)}},r.prototype.addCommands=function(l){l&&Object.keys(l).forEach(function(a){var h=l[a];if(h){if(typeof h=="string")return this.bindKey(h,a);typeof h=="function"&&(h={exec:h}),typeof h=="object"&&(h.name||(h.name=a),this.addCommand(h))}},this)},r.prototype.removeCommands=function(l){Object.keys(l).forEach(function(a){this.removeCommand(l[a])},this)},r.prototype.bindKeys=function(l){Object.keys(l).forEach(function(a){this.bindKey(a,l[a])},this)},r.prototype._buildKeyHash=function(l){this.bindKey(l.bindKey,l)},r.prototype.parseKeys=function(l){var a=l.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(D){return D}),h=a.pop(),f=c[h];if(c.FUNCTION_KEYS[f])h=c.FUNCTION_KEYS[f].toLowerCase();else if(a.length){if(a.length==1&&a[0]=="shift")return{key:h.toUpperCase(),hashId:-1}}else return{key:h,hashId:-1};for(var v=0,b=a.length;b--;){var A=c.KEY_MODS[a[b]];if(A==null)return typeof console<"u"&&console.error("invalid modifier "+a[b]+" in "+l),!1;v|=A}return{key:h,hashId:v}},r.prototype.findKeyCommand=function(l,a){var h=o[l]+a;return this.commandKeyBinding[h]},r.prototype.handleKeyboard=function(l,a,h,f){if(!(f<0)){var v=o[a]+h,b=this.commandKeyBinding[v];return l.$keyChain&&(l.$keyChain+=" "+v,b=this.commandKeyBinding[l.$keyChain]||b),b&&(b=="chainKeys"||b[b.length-1]=="chainKeys")?(l.$keyChain=l.$keyChain||v,{command:"null"}):(l.$keyChain&&((!a||a==4)&&h.length==1?l.$keyChain=l.$keyChain.slice(0,-v.length-1):(a==-1||f>0)&&(l.$keyChain="")),{command:b})}},r.prototype.getStatusText=function(l,a){return a.$keyChain||""},r}();function e(r){return typeof r=="object"&&r.bindKey&&r.bindKey.position||(r.isDefault?-100:0)}var t=function(r){s(l,r);function l(a,h){var f=r.call(this,a,h)||this;return f.$singleCommand=!0,f}return l}(d);t.call=function(r,l,a){d.prototype.$init.call(r,l,a,!0)},d.call=function(r,l,a){d.prototype.$init.call(r,l,a,!1)},u.HashHandler=t,u.MultiHashHandler=d}),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(n,u,y){var s=this&&this.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,a){l.__proto__=a}||function(l,a){for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&(l[h]=a[h])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function l(){this.constructor=t}t.prototype=r===null?Object.create(r):(l.prototype=r.prototype,new l)}}(),c=n("../lib/oop"),p=n("../keyboard/hash_handler").MultiHashHandler,o=n("../lib/event_emitter").EventEmitter,d=function(e){s(t,e);function t(r,l){var a=e.call(this,l,r)||this;return a.byName=a.commands,a.setDefaultHandler("exec",function(h){return h.args?h.command.exec(h.editor,h.args,h.event,!1):h.command.exec(h.editor,{},h.event,!0)}),a}return t.prototype.exec=function(r,l,a){if(Array.isArray(r)){for(var h=r.length;h--;)if(this.exec(r[h],l,a))return!0;return!1}if(typeof r=="string"&&(r=this.commands[r]),!this.canExecute(r,l))return!1;var f={editor:l,command:r,args:a};return f.returnValue=this._emit("exec",f),this._signal("afterExec",f),f.returnValue!==!1},t.prototype.canExecute=function(r,l){return typeof r=="string"&&(r=this.commands[r]),!(!r||l&&l.$readOnly&&!r.readOnly||this.$checkCommandState!=!1&&r.isAvailable&&!r.isAvailable(l))},t.prototype.toggleRecording=function(r){if(!this.$inReplay)return r&&r._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(l){this.macro.push([l.command,l.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},t.prototype.replay=function(r){if(!(this.$inReplay||!this.macro)){if(this.recording)return this.toggleRecording(r);try{this.$inReplay=!0,this.macro.forEach(function(l){typeof l=="string"?this.exec(l,r):this.exec(l[0],r,l[1])},this)}finally{this.$inReplay=!1}}},t.prototype.trimMacro=function(r){return r.map(function(l){return typeof l[0]!="string"&&(l[0]=l[0].name),l[1]||(l=l[0]),l})},t}(p);c.implement(d.prototype,o),u.CommandManager=d}),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(n,u,y){var s=n("../lib/lang"),c=n("../config"),p=n("../range").Range;function o(e,t){return{win:e,mac:t}}u.commands=[{name:"showSettingsMenu",description:"Show settings menu",bindKey:o("Ctrl-,","Command-,"),exec:function(e){c.loadModule("ace/ext/settings_menu",function(t){t.init(e),e.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",description:"Go to next error",bindKey:o("Alt-E","F4"),exec:function(e){c.loadModule("ace/ext/error_marker",function(t){t.showErrorMarker(e,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",description:"Go to previous error",bindKey:o("Alt-Shift-E","Shift-F4"),exec:function(e){c.loadModule("ace/ext/error_marker",function(t){t.showErrorMarker(e,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:o("Ctrl-A","Command-A"),exec:function(e){e.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:o(null,"Ctrl-L"),exec:function(e){e.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:o("Ctrl-L","Command-L"),exec:function(e,t){typeof t=="number"&&!isNaN(t)&&e.gotoLine(t),e.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:o("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(e){e.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:o("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(e){e.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",description:"Toggle fold widget",bindKey:o("F2","F2"),exec:function(e){e.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",description:"Toggle parent fold widget",bindKey:o("Alt-F2","Alt-F2"),exec:function(e){e.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:o(null,"Ctrl-Command-Option-0"),exec:function(e){e.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:o(null,"Ctrl-Command-Option-0"),exec:function(e){e.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:o("Alt-0","Command-Option-0"),exec:function(e){e.session.foldAll(),e.session.unfold(e.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:o("Alt-Shift-0","Command-Option-Shift-0"),exec:function(e){e.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:o("Ctrl-K","Command-G"),exec:function(e){e.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:o("Ctrl-Shift-K","Command-Shift-G"),exec:function(e){e.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:o("Alt-K","Ctrl-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:o("Alt-Shift-K","Ctrl-Shift-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:o("Ctrl-F","Command-F"),exec:function(e){c.loadModule("ace/ext/searchbox",function(t){t.Search(e)})},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(e){e.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:o("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(e){e.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:o("Ctrl-Home","Command-Home|Command-Up"),exec:function(e){e.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:o("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(e){e.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:o("Up","Up|Ctrl-P"),exec:function(e,t){e.navigateUp(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:o("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(e){e.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:o("Ctrl-End","Command-End|Command-Down"),exec:function(e){e.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:o("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(e){e.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:o("Down","Down|Ctrl-N"),exec:function(e,t){e.navigateDown(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:o("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(e){e.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:o("Ctrl-Left","Option-Left"),exec:function(e){e.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:o("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:o("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(e){e.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:o("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(e){e.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:o("Left","Left|Ctrl-B"),exec:function(e,t){e.navigateLeft(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:o("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(e){e.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:o("Ctrl-Right","Option-Right"),exec:function(e){e.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:o("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:o("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(e){e.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:o("Shift-Right","Shift-Right"),exec:function(e){e.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:o("Right","Right|Ctrl-F"),exec:function(e,t){e.navigateRight(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(e){e.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:o(null,"Option-PageDown"),exec:function(e){e.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:o("PageDown","PageDown|Ctrl-V"),exec:function(e){e.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(e){e.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:o(null,"Option-PageUp"),exec:function(e){e.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(e){e.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:o("Ctrl-Up",null),exec:function(e){e.renderer.scrollBy(0,-2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:o("Ctrl-Down",null),exec:function(e){e.renderer.scrollBy(0,2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:o("Ctrl-Alt-E","Command-Option-E"),exec:function(e){e.commands.toggleRecording(e)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:o("Ctrl-Shift-E","Command-Shift-E"),exec:function(e){e.commands.replay(e)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:o("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(e){e.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:o("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(e){e.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:o("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(e){e.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:o(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(e){},readOnly:!0},{name:"cut",description:"Cut",exec:function(e){var t=e.$copyWithEmptySelection&&e.selection.isEmpty(),r=t?e.selection.getLineRange():e.selection.getRange();e._emit("cut",r),r.isEmpty()||e.session.remove(r),e.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(e,t){e.$handlePaste(t)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:o("Ctrl-D","Command-D"),exec:function(e){e.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:o("Ctrl-Shift-D","Command-Shift-D"),exec:function(e){e.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:o("Ctrl-Alt-S","Command-Alt-S"),exec:function(e){e.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:o("Ctrl-/","Command-/"),exec:function(e){e.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:o("Ctrl-Shift-/","Command-Shift-/"),exec:function(e){e.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:o("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(e){e.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:o("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(e){e.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:o("Ctrl-H","Command-Option-F"),exec:function(e){c.loadModule("ace/ext/searchbox",function(t){t.Search(e,!0)})}},{name:"undo",description:"Undo",bindKey:o("Ctrl-Z","Command-Z"),exec:function(e){e.undo()}},{name:"redo",description:"Redo",bindKey:o("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(e){e.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:o("Alt-Shift-Up","Command-Option-Up"),exec:function(e){e.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:o("Alt-Up","Option-Up"),exec:function(e){e.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:o("Alt-Shift-Down","Command-Option-Down"),exec:function(e){e.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:o("Alt-Down","Option-Down"),exec:function(e){e.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:o("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(e){e.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:o("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(e){e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:o("Shift-Delete",null),exec:function(e){if(e.selection.isEmpty())e.remove("left");else return!1},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:o("Alt-Backspace","Command-Backspace"),exec:function(e){e.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:o("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(e){e.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:o("Ctrl-Shift-Backspace",null),exec:function(e){var t=e.selection.getRange();t.start.column=0,e.session.remove(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:o("Ctrl-Shift-Delete",null),exec:function(e){var t=e.selection.getRange();t.end.column=Number.MAX_VALUE,e.session.remove(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:o("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(e){e.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:o("Ctrl-Delete","Alt-Delete"),exec:function(e){e.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:o("Shift-Tab","Shift-Tab"),exec:function(e){e.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:o("Tab","Tab"),exec:function(e){e.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:o("Ctrl-[","Ctrl-["),exec:function(e){e.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:o("Ctrl-]","Ctrl-]"),exec:function(e){e.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(e,t){e.insert(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(e,t){e.insert(s.stringRepeat(t.text||"",t.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:o(null,"Ctrl-O"),exec:function(e){e.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:o("Alt-Shift-X","Ctrl-T"),exec:function(e){e.transposeLetters()},multiSelectAction:function(e){e.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:o("Ctrl-U","Ctrl-U"),exec:function(e){e.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:o("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(e){e.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:o(null,null),exec:function(e){e.autoIndent()},scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:o("Ctrl-Shift-L","Command-Shift-L"),exec:function(e){var t=e.selection.getRange();t.start.column=t.end.column=0,t.end.row++,e.selection.setRange(t,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"openlink",bindKey:o("Ctrl+F3","F3"),exec:function(e){e.openLink()}},{name:"joinlines",description:"Join lines",bindKey:o(null,null),exec:function(e){for(var t=e.selection.isBackwards(),r=t?e.selection.getSelectionLead():e.selection.getSelectionAnchor(),l=t?e.selection.getSelectionAnchor():e.selection.getSelectionLead(),a=e.session.doc.getLine(r.row).length,h=e.session.doc.getTextRange(e.selection.getRange()),f=h.replace(/\n\s*/," ").length,v=e.session.doc.getLine(r.row),b=r.row+1;b<=l.row+1;b++){var A=s.stringTrimLeft(s.stringTrimRight(e.session.doc.getLine(b)));A.length!==0&&(A=" "+A),v+=A}l.row+1<e.session.doc.getLength()-1&&(v+=e.session.doc.getNewLineCharacter()),e.clearSelection(),e.session.doc.replace(new p(r.row,0,l.row+2,0),v),f>0?(e.selection.moveCursorTo(r.row,r.column),e.selection.selectTo(r.row,r.column+f)):(a=e.session.doc.getLine(r.row).length>a?a+1:a,e.selection.moveCursorTo(r.row,a))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:o(null,null),exec:function(e){var t=e.session.doc.getLength()-1,r=e.session.doc.getLine(t).length,l=e.selection.rangeList.ranges,a=[];l.length<1&&(l=[e.selection.getRange()]);for(var h=0;h<l.length;h++)h==l.length-1&&(l[h].end.row===t&&l[h].end.column===r||a.push(new p(l[h].end.row,l[h].end.column,t,r))),h===0?l[h].start.row===0&&l[h].start.column===0||a.push(new p(0,0,l[h].start.row,l[h].start.column)):a.push(new p(l[h-1].end.row,l[h-1].end.column,l[h].start.row,l[h].start.column));e.exitMultiSelectMode(),e.clearSelection();for(var h=0;h<a.length;h++)e.selection.addRange(a[h],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",description:"Add new line after the current line",exec:function(e){e.selection.clearSelection(),e.navigateLineEnd(),e.insert(`
`)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",description:"Add new line before the current line",exec:function(e){e.selection.clearSelection();var t=e.getCursorPosition();e.selection.moveTo(t.row-1,Number.MAX_VALUE),e.insert(`
`),t.row===0&&e.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",exec:function(e){console.warn("This is an obsolete command. Please use `openCommandPalette` instead."),e.prompt({$type:"commands"})},readOnly:!0},{name:"openCommandPalette",description:"Open command palette",bindKey:o("F1","F1"),exec:function(e){e.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:o(null,null),exec:function(e){e.prompt({$type:"modes"})},readOnly:!0}];for(var d=1;d<9;d++)u.commands.push({name:"foldToLevel"+d,description:"Fold To Level "+d,level:d,exec:function(e){e.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})}),ace.define("ace/keyboard/gutter_handler",["require","exports","module","ace/lib/keys","ace/mouse/default_gutter_handler"],function(n,u,y){var s=n("../lib/keys"),c=n("../mouse/default_gutter_handler").GutterTooltip,p=function(){function d(e){this.editor=e,this.gutterLayer=e.renderer.$gutterLayer,this.element=e.renderer.$gutter,this.lines=e.renderer.$gutterLayer.$lines,this.activeRowIndex=null,this.activeLane=null,this.annotationTooltip=new c(this.editor)}return d.prototype.addListener=function(){this.element.addEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.addEventListener("focusout",this.$blurGutter.bind(this)),this.editor.on("mousewheel",this.$blurGutter.bind(this))},d.prototype.removeListener=function(){this.element.removeEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.removeEventListener("focusout",this.$blurGutter.bind(this)),this.editor.off("mousewheel",this.$blurGutter.bind(this))},d.prototype.$onGutterKeyDown=function(e){if(this.annotationTooltip.isOpen){e.preventDefault(),e.keyCode===s.escape&&this.annotationTooltip.hideTooltip();return}if(e.target===this.element){if(e.keyCode!=s.enter)return;e.preventDefault();var t=this.editor.getCursorPosition().row;this.editor.isRowVisible(t)||this.editor.scrollToLine(t,!0,!0),setTimeout(function(){var r=this.$rowToRowIndex(this.gutterLayer.$cursorCell.row),l=this.$findNearestFoldWidget(r),a=this.$findNearestAnnotation(r);if(!(l===null&&a===null)){if(l===null&&a!==null){this.activeRowIndex=a,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}if(l!==null&&a===null){this.activeRowIndex=l,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}if(Math.abs(a-r)<Math.abs(l-r)){this.activeRowIndex=a,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}else{this.activeRowIndex=l,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}}}.bind(this),10);return}this.$handleGutterKeyboardInteraction(e),setTimeout(function(){this.editor._signal("gutterkeydown",new o(e,this))}.bind(this),10)},d.prototype.$handleGutterKeyboardInteraction=function(e){if(e.keyCode===s.tab){e.preventDefault();return}if(e.keyCode===s.escape){e.preventDefault(),this.$blurGutter(),this.element.focus(),this.lane=null;return}if(e.keyCode===s.up){switch(e.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetUp();break;case"annotation":this.$moveAnnotationUp();break}return}if(e.keyCode===s.down){switch(e.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetDown();break;case"annotation":this.$moveAnnotationDown();break}return}if(e.keyCode===s.left){e.preventDefault(),this.$switchLane("annotation");return}if(e.keyCode===s.right){e.preventDefault(),this.$switchLane("fold");return}if(e.keyCode===s.enter||e.keyCode===s.space){switch(e.preventDefault(),this.activeLane){case"fold":if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="start"){var t=this.$rowIndexToRow(this.activeRowIndex);this.editor.session.onFoldWidgetClick(this.$rowIndexToRow(this.activeRowIndex),e),setTimeout(function(){this.$rowIndexToRow(this.activeRowIndex)!==t&&(this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=this.$rowToRowIndex(t),this.$focusFoldWidget(this.activeRowIndex))}.bind(this),10);break}else if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="end")break;return;case"annotation":var r=this.lines.cells[this.activeRowIndex].element.childNodes[2],l=r.getBoundingClientRect(),a=this.annotationTooltip.getElement().style;a.left=l.right+"px",a.top=l.bottom+"px",this.annotationTooltip.showTooltip(this.$rowIndexToRow(this.activeRowIndex));break}return}},d.prototype.$blurGutter=function(){if(this.activeRowIndex!==null)switch(this.activeLane){case"fold":this.$blurFoldWidget(this.activeRowIndex);break;case"annotation":this.$blurAnnotation(this.activeRowIndex);break}this.annotationTooltip.isOpen&&this.annotationTooltip.hideTooltip()},d.prototype.$isFoldWidgetVisible=function(e){var t=this.editor.isRowFullyVisible(this.$rowIndexToRow(e)),r=this.$getFoldWidget(e).style.display!=="none";return t&&r},d.prototype.$isAnnotationVisible=function(e){var t=this.editor.isRowFullyVisible(this.$rowIndexToRow(e)),r=this.$getAnnotation(e).style.display!=="none";return t&&r},d.prototype.$getFoldWidget=function(e){var t=this.lines.get(e),r=t.element;return r.childNodes[1]},d.prototype.$getAnnotation=function(e){var t=this.lines.get(e),r=t.element;return r.childNodes[2]},d.prototype.$findNearestFoldWidget=function(e){if(this.$isFoldWidgetVisible(e))return e;for(var t=0;e-t>0||e+t<this.lines.getLength()-1;){if(t++,e-t>=0&&this.$isFoldWidgetVisible(e-t))return e-t;if(e+t<=this.lines.getLength()-1&&this.$isFoldWidgetVisible(e+t))return e+t}return null},d.prototype.$findNearestAnnotation=function(e){if(this.$isAnnotationVisible(e))return e;for(var t=0;e-t>0||e+t<this.lines.getLength()-1;){if(t++,e-t>=0&&this.$isAnnotationVisible(e-t))return e-t;if(e+t<=this.lines.getLength()-1&&this.$isAnnotationVisible(e+t))return e+t}return null},d.prototype.$focusFoldWidget=function(e){if(e!=null){var t=this.$getFoldWidget(e);t.classList.add(this.editor.renderer.keyboardFocusClassName),t.focus()}},d.prototype.$focusAnnotation=function(e){if(e!=null){var t=this.$getAnnotation(e);t.classList.add(this.editor.renderer.keyboardFocusClassName),t.focus()}},d.prototype.$blurFoldWidget=function(e){var t=this.$getFoldWidget(e);t.classList.remove(this.editor.renderer.keyboardFocusClassName),t.blur()},d.prototype.$blurAnnotation=function(e){var t=this.$getAnnotation(e);t.classList.remove(this.editor.renderer.keyboardFocusClassName),t.blur()},d.prototype.$moveFoldWidgetUp=function(){for(var e=this.activeRowIndex;e>0;)if(e--,this.$isFoldWidgetVisible(e)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=e,this.$focusFoldWidget(this.activeRowIndex);return}},d.prototype.$moveFoldWidgetDown=function(){for(var e=this.activeRowIndex;e<this.lines.getLength()-1;)if(e++,this.$isFoldWidgetVisible(e)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=e,this.$focusFoldWidget(this.activeRowIndex);return}},d.prototype.$moveAnnotationUp=function(){for(var e=this.activeRowIndex;e>0;)if(e--,this.$isAnnotationVisible(e)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=e,this.$focusAnnotation(this.activeRowIndex);return}},d.prototype.$moveAnnotationDown=function(){for(var e=this.activeRowIndex;e<this.lines.getLength()-1;)if(e++,this.$isAnnotationVisible(e)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=e,this.$focusAnnotation(this.activeRowIndex);return}},d.prototype.$switchLane=function(e){switch(e){case"annotation":if(this.activeLane==="annotation")break;var t=this.$findNearestAnnotation(this.activeRowIndex);if(t==null)break;this.activeLane="annotation",this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=t,this.$focusAnnotation(this.activeRowIndex);break;case"fold":if(this.activeLane==="fold")break;var r=this.$findNearestFoldWidget(this.activeRowIndex);if(r==null)break;this.activeLane="fold",this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=r,this.$focusFoldWidget(this.activeRowIndex);break}},d.prototype.$rowIndexToRow=function(e){var t=this.lines.get(e);return t?t.row:null},d.prototype.$rowToRowIndex=function(e){for(var t=0;t<this.lines.getLength();t++){var r=this.lines.get(t);if(r.row==e)return t}return null},d}();u.GutterKeyboardHandler=p;var o=function(){function d(e,t){this.gutterKeyboardHandler=t,this.domEvent=e}return d.prototype.getKey=function(){return s.keyCodeToString(this.domEvent.keyCode)},d.prototype.getRow=function(){return this.gutterKeyboardHandler.$rowIndexToRow(this.gutterKeyboardHandler.activeRowIndex)},d.prototype.isInAnnotationLane=function(){return this.gutterKeyboardHandler.activeLane==="annotation"},d.prototype.isInFoldLane=function(){return this.gutterKeyboardHandler.activeLane==="fold"},d}();u.GutterKeyboardEvent=o}),ace.define("ace/editor",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/keyboard/gutter_handler","ace/config","ace/clipboard","ace/lib/keys"],function(n,u,y){var s=this&&this.__values||function(w){var m=typeof Symbol=="function"&&Symbol.iterator,C=m&&w[m],x=0;if(C)return C.call(w);if(w&&typeof w.length=="number")return{next:function(){return w&&x>=w.length&&(w=void 0),{value:w&&w[x++],done:!w}}};throw new TypeError(m?"Object is not iterable.":"Symbol.iterator is not defined.")},c=n("./lib/oop"),p=n("./lib/dom"),o=n("./lib/lang"),d=n("./lib/useragent"),e=n("./keyboard/textinput").TextInput,t=n("./mouse/mouse_handler").MouseHandler,r=n("./mouse/fold_handler").FoldHandler,l=n("./keyboard/keybinding").KeyBinding,a=n("./edit_session").EditSession,h=n("./search").Search,f=n("./range").Range,v=n("./lib/event_emitter").EventEmitter,b=n("./commands/command_manager").CommandManager,A=n("./commands/default_commands").commands,D=n("./config"),E=n("./token_iterator").TokenIterator,g=n("./keyboard/gutter_handler").GutterKeyboardHandler,S=n("./config").nls,$=n("./clipboard"),_=n("./lib/keys"),T=function(){function w(m,C,x){this.session,this.$toDestroy=[];var M=m.getContainerElement();this.container=M,this.renderer=m,this.id="editor"+ ++w.$uid,this.commands=new b(d.isMac?"mac":"win",A),typeof document=="object"&&(this.textInput=new e(m.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new t(this),new r(this)),this.keyBinding=new l(this),this.$search=new h().set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=o.delayedCall(function(){this._signal("input",{}),this.session&&!this.session.destroyed&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(F,R){R._$emitInputEvent.schedule(31)}),this.setSession(C||x&&x.session||new a("")),D.resetOptions(this),x&&this.setOptions(x),D._signal("editor",this)}return w.prototype.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0)},w.prototype.startOperation=function(m){this.session.startOperation(m)},w.prototype.endOperation=function(m){this.session.endOperation(m)},w.prototype.onStartOperation=function(m){this.curOp=this.session.curOp,this.curOp.scrollTop=this.renderer.scrollTop,this.prevOp=this.session.prevOp,m||(this.previousCommand=null)},w.prototype.onEndOperation=function(m){if(this.curOp&&this.session){if(m&&m.returnValue===!1){this.curOp=null;return}if(this._signal("beforeEndOperation"),!this.curOp)return;var C=this.curOp.command,x=C&&C.scrollIntoView;if(x){switch(x){case"center-animate":x="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var M=this.selection.getRange(),F=this.renderer.layerConfig;(M.start.row>=F.lastRow||M.end.row<=F.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead);break}x=="animate"&&this.renderer.animateScrolling(this.curOp.scrollTop)}this.$lastSel=this.session.selection.toJSON(),this.prevOp=this.curOp,this.curOp=null}},w.prototype.$historyTracker=function(m){if(this.$mergeUndoDeltas){var C=this.prevOp,x=this.$mergeableCommands,M=C.command&&m.command.name==C.command.name;if(m.command.name=="insertstring"){var F=m.args;this.mergeNextCommand===void 0&&(this.mergeNextCommand=!0),M=M&&this.mergeNextCommand&&(!/\s/.test(F)||/\s/.test(C.args)),this.mergeNextCommand=!0}else M=M&&x.indexOf(m.command.name)!==-1;this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3&&(M=!1),M?this.session.mergeUndoDeltas=!0:x.indexOf(m.command.name)!==-1&&(this.sequenceStartTime=Date.now())}},w.prototype.setKeyboardHandler=function(m,C){if(m&&typeof m=="string"&&m!="ace"){this.$keybindingId=m;var x=this;D.loadModule(["keybinding",m],function(M){x.$keybindingId==m&&x.keyBinding.setKeyboardHandler(M&&M.handler),C&&C()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(m),C&&C()},w.prototype.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},w.prototype.setSession=function(m){if(this.session!=m){this.curOp&&this.endOperation(),this.curOp={};var C=this.session;if(C){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange),this.session.off("startOperation",this.$onStartOperation),this.session.off("endOperation",this.$onEndOperation);var x=this.session.getSelection();x.off("changeCursor",this.$onCursorChange),x.off("changeSelection",this.$onSelectionChange)}this.session=m,m?(this.$onDocumentChange=this.onDocumentChange.bind(this),m.on("change",this.$onDocumentChange),this.renderer.setSession(m),this.$onChangeMode=this.onChangeMode.bind(this),m.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),m.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),m.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),m.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),m.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),m.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=m.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.$onStartOperation=this.onStartOperation.bind(this),this.session.on("startOperation",this.$onStartOperation),this.$onEndOperation=this.onEndOperation.bind(this),this.session.on("endOperation",this.$onEndOperation),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(m)),this._signal("changeSession",{session:m,oldSession:C}),this.curOp=null,C&&C._signal("changeEditor",{oldEditor:this}),C&&(C.$editor=null),m&&m._signal("changeEditor",{editor:this}),m&&(m.$editor=this),m&&!m.destroyed&&m.bgTokenizer.scheduleStart()}},w.prototype.getSession=function(){return this.session},w.prototype.setValue=function(m,C){return this.session.doc.setValue(m),C?C==1?this.navigateFileEnd():C==-1&&this.navigateFileStart():this.selectAll(),m},w.prototype.getValue=function(){return this.session.getValue()},w.prototype.getSelection=function(){return this.selection},w.prototype.resize=function(m){this.renderer.onResize(m)},w.prototype.setTheme=function(m,C){this.renderer.setTheme(m,C)},w.prototype.getTheme=function(){return this.renderer.getTheme()},w.prototype.setStyle=function(m){this.renderer.setStyle(m)},w.prototype.unsetStyle=function(m){this.renderer.unsetStyle(m)},w.prototype.getFontSize=function(){return this.getOption("fontSize")||p.computedStyle(this.container).fontSize},w.prototype.setFontSize=function(m){this.setOption("fontSize",m)},w.prototype.$highlightBrackets=function(){if(!this.$highlightPending){var m=this;this.$highlightPending=!0,setTimeout(function(){m.$highlightPending=!1;var C=m.session;if(!(!C||C.destroyed)){C.$bracketHighlight&&(C.$bracketHighlight.markerIds.forEach(function(P){C.removeMarker(P)}),C.$bracketHighlight=null);var x=m.getCursorPosition(),M=m.getKeyboardHandler(),F=M&&M.$getDirectionForHighlight&&M.$getDirectionForHighlight(m),R=C.getMatchingBracketRanges(x,F);if(!R){var N=new E(C,x.row,x.column),W=N.getCurrentToken();if(W&&/\b(?:tag-open|tag-name)/.test(W.type)){var B=C.getMatchingTags(x);B&&(R=[B.openTagName.isEmpty()?B.openTag:B.openTagName,B.closeTagName.isEmpty()?B.closeTag:B.closeTagName])}}if(!R&&C.$mode.getMatching&&(R=C.$mode.getMatching(m.session)),!R){m.getHighlightIndentGuides()&&m.renderer.$textLayer.$highlightIndentGuide();return}var U="ace_bracket";Array.isArray(R)?R.length==1&&(U="ace_error_bracket"):R=[R],R.length==2&&(f.comparePoints(R[0].end,R[1].start)==0?R=[f.fromPoints(R[0].start,R[1].end)]:f.comparePoints(R[0].start,R[1].end)==0&&(R=[f.fromPoints(R[1].start,R[0].end)])),C.$bracketHighlight={ranges:R,markerIds:R.map(function(P){return C.addMarker(P,U,"text")})},m.getHighlightIndentGuides()&&m.renderer.$textLayer.$highlightIndentGuide()}},50)}},w.prototype.focus=function(){this.textInput.focus()},w.prototype.isFocused=function(){return this.textInput.isFocused()},w.prototype.blur=function(){this.textInput.blur()},w.prototype.onFocus=function(m){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",m))},w.prototype.onBlur=function(m){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",m))},w.prototype.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$updateHighlightActiveLine()},w.prototype.onDocumentChange=function(m){var C=this.session.$useWrapMode,x=m.start.row==m.end.row?m.end.row:1/0;this.renderer.updateLines(m.start.row,x,C),this._signal("change",m),this.$cursorChange()},w.prototype.onTokenizerUpdate=function(m){var C=m.data;this.renderer.updateLines(C.first,C.last)},w.prototype.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},w.prototype.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},w.prototype.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},w.prototype.$updateHighlightActiveLine=function(){var m=this.getSession(),C;if(this.$highlightActiveLine&&((this.$selectionStyle!="line"||!this.selection.isMultiLine())&&(C=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(C=!1),this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1)&&(C=!1)),m.$highlightLineMarker&&!C)m.removeMarker(m.$highlightLineMarker.id),m.$highlightLineMarker=null;else if(!m.$highlightLineMarker&&C){var x=new f(C.row,C.column,C.row,1/0);x.id=m.addMarker(x,"ace_active-line","screenLine"),m.$highlightLineMarker=x}else C&&(m.$highlightLineMarker.start.row=C.row,m.$highlightLineMarker.end.row=C.row,m.$highlightLineMarker.start.column=C.column,m._signal("changeBackMarker"))},w.prototype.onSelectionChange=function(m){var C=this.session;if(C.$selectionMarker&&C.removeMarker(C.$selectionMarker),C.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var x=this.selection.getRange(),M=this.getSelectionStyle();C.$selectionMarker=C.addMarker(x,"ace_selection",M)}var F=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(F),this._signal("changeSelection")},w.prototype.$getSelectionHighLightRegexp=function(){var m=this.session,C=this.getSelectionRange();if(!(C.isEmpty()||C.isMultiLine())){var x=C.start.column,M=C.end.column,F=m.getLine(C.start.row),R=F.substring(x,M);if(!(R.length>5e3||!/[\w\d]/.test(R))){var N=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:R}),W=F.substring(x-1,M+1);if(N.test(W))return N}}},w.prototype.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},w.prototype.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},w.prototype.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},w.prototype.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},w.prototype.onChangeMode=function(m){this.renderer.updateText(),this._emit("changeMode",m)},w.prototype.onChangeWrapLimit=function(){this.renderer.updateFull()},w.prototype.onChangeWrapMode=function(){this.renderer.onResize(!0)},w.prototype.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},w.prototype.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},w.prototype.getCopyText=function(){var m=this.getSelectedText(),C=this.session.doc.getNewLineCharacter(),x=!1;if(!m&&this.$copyWithEmptySelection){x=!0;for(var M=this.selection.getAllRanges(),F=0;F<M.length;F++){var R=M[F];F&&M[F-1].start.row==R.start.row||(m+=this.session.getLine(R.start.row)+C)}}var N={text:m};return this._signal("copy",N),$.lineMode=x?N.text:!1,N.text},w.prototype.onCopy=function(){this.commands.exec("copy",this)},w.prototype.onCut=function(){this.commands.exec("cut",this)},w.prototype.onPaste=function(m,C){var x={text:m,event:C};this.commands.exec("paste",this,x)},w.prototype.$handlePaste=function(m){typeof m=="string"&&(m={text:m}),this._signal("paste",m);var C=m.text,x=C===$.lineMode,M=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)x?M.insert({row:this.selection.lead.row,column:0},C):this.insert(C);else if(x)this.selection.rangeList.ranges.forEach(function(U){M.insert({row:U.start.row,column:0},C)});else{var F=C.split(/\r\n|\r|\n/),R=this.selection.rangeList.ranges,N=F.length==2&&(!F[0]||!F[1]);if(F.length!=R.length||N)return this.commands.exec("insertstring",this,C);for(var W=R.length;W--;){var B=R[W];B.isEmpty()||M.remove(B),M.insert(B.start,F[W])}}},w.prototype.execCommand=function(m,C){return this.commands.exec(m,this,C)},w.prototype.insert=function(m,C){var x=this.session,M=x.getMode(),F=this.getCursorPosition();if(this.getBehavioursEnabled()&&!C){var R=M.transformAction(x.getState(F.row),"insertion",this,x,m);R&&(m!==R.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),m=R.text)}if(m=="	"&&(m=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&m.indexOf(`
`)==-1){var N=f.fromPoints(F,F);N.end.column+=m.length,this.session.remove(N)}}else{var N=this.getSelectionRange();F=this.session.remove(N),this.clearSelection()}if(m==`
`||m==`\r
`){var P=x.getLine(F.row);if(F.column>P.search(/\S|$/)){var W=P.substr(F.column).search(/\S|$/);x.doc.removeInLine(F.row,F.column,F.column+W)}}this.clearSelection();var B=F.column,U=x.getState(F.row),P=x.getLine(F.row),z=M.checkOutdent(U,P,m);if(x.insert(F,m),R&&R.selection&&(R.selection.length==2?this.selection.setSelectionRange(new f(F.row,B+R.selection[0],F.row,B+R.selection[1])):this.selection.setSelectionRange(new f(F.row+R.selection[0],R.selection[1],F.row+R.selection[2],R.selection[3]))),this.$enableAutoIndent){if(x.getDocument().isNewLine(m)){var K=M.getNextLineIndent(U,P.slice(0,F.column),x.getTabString());x.insert({row:F.row+1,column:0},K)}z&&M.autoOutdent(U,x,F.row)}},w.prototype.autoIndent=function(){for(var m=this.session,C=m.getMode(),x=this.selection.isEmpty()?[new f(0,0,m.doc.getLength()-1,0)]:this.selection.getAllRanges(),M="",F="",R="",N=m.getTabString(),W=0;W<x.length;W++)for(var B=x[W].start.row,U=x[W].end.row,P=B;P<=U;P++){P>0&&(M=m.getState(P-1),F=m.getLine(P-1),R=C.getNextLineIndent(M,F,N));var z=m.getLine(P),K=C.$getIndent(z);if(R!==K){if(K.length>0){var V=new f(P,0,P,K.length);m.remove(V)}R.length>0&&m.insert({row:P,column:0},R)}C.autoOutdent(M,m,P)}},w.prototype.onTextInput=function(m,C){if(!C)return this.keyBinding.onTextInput(m);this.startOperation({command:{name:"insertstring"}});var x=this.applyComposition.bind(this,m,C);this.selection.rangeCount?this.forEachSelection(x):x(),this.endOperation()},w.prototype.applyComposition=function(m,C){if(C.extendLeft||C.extendRight){var x=this.selection.getRange();x.start.column-=C.extendLeft,x.end.column+=C.extendRight,x.start.column<0&&(x.start.row--,x.start.column+=this.session.getLine(x.start.row).length+1),this.selection.setRange(x),!m&&!x.isEmpty()&&this.remove()}if((m||!this.selection.isEmpty())&&this.insert(m,!0),C.restoreStart||C.restoreEnd){var x=this.selection.getRange();x.start.column-=C.restoreStart,x.end.column-=C.restoreEnd,this.selection.setRange(x)}},w.prototype.onCommandKey=function(m,C,x){return this.keyBinding.onCommandKey(m,C,x)},w.prototype.setOverwrite=function(m){this.session.setOverwrite(m)},w.prototype.getOverwrite=function(){return this.session.getOverwrite()},w.prototype.toggleOverwrite=function(){this.session.toggleOverwrite()},w.prototype.setScrollSpeed=function(m){this.setOption("scrollSpeed",m)},w.prototype.getScrollSpeed=function(){return this.getOption("scrollSpeed")},w.prototype.setDragDelay=function(m){this.setOption("dragDelay",m)},w.prototype.getDragDelay=function(){return this.getOption("dragDelay")},w.prototype.setSelectionStyle=function(m){this.setOption("selectionStyle",m)},w.prototype.getSelectionStyle=function(){return this.getOption("selectionStyle")},w.prototype.setHighlightActiveLine=function(m){this.setOption("highlightActiveLine",m)},w.prototype.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},w.prototype.setHighlightGutterLine=function(m){this.setOption("highlightGutterLine",m)},w.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},w.prototype.setHighlightSelectedWord=function(m){this.setOption("highlightSelectedWord",m)},w.prototype.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},w.prototype.setAnimatedScroll=function(m){this.renderer.setAnimatedScroll(m)},w.prototype.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},w.prototype.setShowInvisibles=function(m){this.renderer.setShowInvisibles(m)},w.prototype.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},w.prototype.setDisplayIndentGuides=function(m){this.renderer.setDisplayIndentGuides(m)},w.prototype.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},w.prototype.setHighlightIndentGuides=function(m){this.renderer.setHighlightIndentGuides(m)},w.prototype.getHighlightIndentGuides=function(){return this.renderer.getHighlightIndentGuides()},w.prototype.setShowPrintMargin=function(m){this.renderer.setShowPrintMargin(m)},w.prototype.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},w.prototype.setPrintMarginColumn=function(m){this.renderer.setPrintMarginColumn(m)},w.prototype.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},w.prototype.setReadOnly=function(m){this.setOption("readOnly",m)},w.prototype.getReadOnly=function(){return this.getOption("readOnly")},w.prototype.setBehavioursEnabled=function(m){this.setOption("behavioursEnabled",m)},w.prototype.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},w.prototype.setWrapBehavioursEnabled=function(m){this.setOption("wrapBehavioursEnabled",m)},w.prototype.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},w.prototype.setShowFoldWidgets=function(m){this.setOption("showFoldWidgets",m)},w.prototype.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},w.prototype.setFadeFoldWidgets=function(m){this.setOption("fadeFoldWidgets",m)},w.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},w.prototype.remove=function(m){this.selection.isEmpty()&&(m=="left"?this.selection.selectLeft():this.selection.selectRight());var C=this.getSelectionRange();if(this.getBehavioursEnabled()){var x=this.session,M=x.getState(C.start.row),F=x.getMode().transformAction(M,"deletion",this,x,C);if(C.end.column===0){var R=x.getTextRange(C);if(R[R.length-1]==`
`){var N=x.getLine(C.end.row);/^\s+$/.test(N)&&(C.end.column=N.length)}}F&&(C=F)}this.session.remove(C),this.clearSelection()},w.prototype.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},w.prototype.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},w.prototype.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},w.prototype.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var m=this.getSelectionRange();m.start.column==m.end.column&&m.start.row==m.end.row&&(m.end.column=0,m.end.row++),this.session.remove(m),this.clearSelection()},w.prototype.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var m=this.getCursorPosition();this.insert(`
`),this.moveCursorToPosition(m)},w.prototype.setGhostText=function(m,C){this.renderer.setGhostText(m,C)},w.prototype.removeGhostText=function(){this.renderer.removeGhostText()},w.prototype.transposeLetters=function(){if(this.selection.isEmpty()){var m=this.getCursorPosition(),C=m.column;if(C!==0){var x=this.session.getLine(m.row),M,F;C<x.length?(M=x.charAt(C)+x.charAt(C-1),F=new f(m.row,C-1,m.row,C+1)):(M=x.charAt(C-1)+x.charAt(C-2),F=new f(m.row,C-2,m.row,C)),this.session.replace(F,M),this.session.selection.moveToPosition(F.end)}}},w.prototype.toLowerCase=function(){var m=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var C=this.getSelectionRange(),x=this.session.getTextRange(C);this.session.replace(C,x.toLowerCase()),this.selection.setSelectionRange(m)},w.prototype.toUpperCase=function(){var m=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var C=this.getSelectionRange(),x=this.session.getTextRange(C);this.session.replace(C,x.toUpperCase()),this.selection.setSelectionRange(m)},w.prototype.indent=function(){var m=this.session,C=this.getSelectionRange();if(C.start.row<C.end.row){var x=this.$getSelectedRows();m.indentRows(x.first,x.last,"	");return}else if(C.start.column<C.end.column){var M=m.getTextRange(C);if(!/^\s+$/.test(M)){var x=this.$getSelectedRows();m.indentRows(x.first,x.last,"	");return}}var F=m.getLine(C.start.row),R=C.start,N=m.getTabSize(),W=m.documentToScreenColumn(R.row,R.column);if(this.session.getUseSoftTabs())var B=N-W%N,U=o.stringRepeat(" ",B);else{for(var B=W%N;F[C.start.column-1]==" "&&B;)C.start.column--,B--;this.selection.setSelectionRange(C),U="	"}return this.insert(U)},w.prototype.blockIndent=function(){var m=this.$getSelectedRows();this.session.indentRows(m.first,m.last,"	")},w.prototype.blockOutdent=function(){var m=this.session.getSelection();this.session.outdentRows(m.getRange())},w.prototype.sortLines=function(){for(var m=this.$getSelectedRows(),C=this.session,x=[],M=m.first;M<=m.last;M++)x.push(C.getLine(M));x.sort(function(N,W){return N.toLowerCase()<W.toLowerCase()?-1:N.toLowerCase()>W.toLowerCase()?1:0});for(var F=new f(0,0,0,0),M=m.first;M<=m.last;M++){var R=C.getLine(M);F.start.row=M,F.end.row=M,F.end.column=R.length,C.replace(F,x[M-m.first])}},w.prototype.toggleCommentLines=function(){var m=this.session.getState(this.getCursorPosition().row),C=this.$getSelectedRows();this.session.getMode().toggleCommentLines(m,this.session,C.first,C.last)},w.prototype.toggleBlockComment=function(){var m=this.getCursorPosition(),C=this.session.getState(m.row),x=this.getSelectionRange();this.session.getMode().toggleBlockComment(C,this.session,x,m)},w.prototype.getNumberAt=function(m,C){var x=/[\-]?[0-9]+(?:\.[0-9]+)?/g;x.lastIndex=0;for(var M=this.session.getLine(m);x.lastIndex<C;){var F=x.exec(M);if(F.index<=C&&F.index+F[0].length>=C){var R={value:F[0],start:F.index,end:F.index+F[0].length};return R}}return null},w.prototype.modifyNumber=function(m){var C=this.selection.getCursor().row,x=this.selection.getCursor().column,M=new f(C,x-1,C,x),F=this.session.getTextRange(M);if(!isNaN(parseFloat(F))&&isFinite(F)){var R=this.getNumberAt(C,x);if(R){var N=R.value.indexOf(".")>=0?R.start+R.value.indexOf(".")+1:R.end,W=R.start+R.value.length-N,B=parseFloat(R.value);B*=Math.pow(10,W),N!==R.end&&x<N?m*=Math.pow(10,R.end-x-1):m*=Math.pow(10,R.end-x),B+=m,B/=Math.pow(10,W);var U=B.toFixed(W),P=new f(C,R.start,C,R.end);this.session.replace(P,U),this.moveCursorTo(C,Math.max(R.start+1,x+U.length-R.value.length))}}else this.toggleWord()},w.prototype.toggleWord=function(){var m=this.selection.getCursor().row,C=this.selection.getCursor().column;this.selection.selectWord();var x=this.getSelectedText(),M=this.selection.getWordRange().start.column,F=x.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),R=C-M-1;R<0&&(R=0);var N=0,W=0,B=this;x.match(/[A-Za-z0-9_]+/)&&F.forEach(function(te,se){W=N+te.length,R>=N&&R<=W&&(x=te,B.selection.clearSelection(),B.moveCursorTo(m,N+M),B.selection.selectTo(m,W+M)),N=W});for(var U=this.$toggleWordPairs,P,z=0;z<U.length;z++)for(var K=U[z],V=0;V<=1;V++){var Y=+!V,ee=x.match(new RegExp("^\\s?_?("+o.escapeRegExp(K[V])+")\\s?$","i"));if(ee){var ne=x.match(new RegExp("([_]|^|\\s)("+o.escapeRegExp(ee[1])+")($|\\s)","g"));ne&&(P=x.replace(new RegExp(o.escapeRegExp(K[V]),"i"),function(te){var se=K[Y];return te.toUpperCase()==te?se=se.toUpperCase():te.charAt(0).toUpperCase()==te.charAt(0)&&(se=se.substr(0,0)+K[Y].charAt(0).toUpperCase()+se.substr(1)),se}),this.insert(P),P="")}}},w.prototype.findLinkAt=function(m,C){var x,M,F=this.session.getLine(m),R=F.split(/((?:https?|ftp):\/\/[\S]+)/),N=C;N<0&&(N=0);var W=0,B=0,U;try{for(var P=s(R),z=P.next();!z.done;z=P.next()){var K=z.value;if(B=W+K.length,N>=W&&N<=B&&K.match(/((?:https?|ftp):\/\/[\S]+)/)){U=K.replace(/[\s:.,'";}\]]+$/,"");break}W=B}}catch(V){x={error:V}}finally{try{z&&!z.done&&(M=P.return)&&M.call(P)}finally{if(x)throw x.error}}return U},w.prototype.openLink=function(){var m=this.selection.getCursor(),C=this.findLinkAt(m.row,m.column);return C&&window.open(C,"_blank"),C!=null},w.prototype.removeLines=function(){var m=this.$getSelectedRows();this.session.removeFullLines(m.first,m.last),this.clearSelection()},w.prototype.duplicateSelection=function(){var m=this.selection,C=this.session,x=m.getRange(),M=m.isBackwards();if(x.isEmpty()){var F=x.start.row;C.duplicateLines(F,F)}else{var R=M?x.start:x.end,N=C.insert(R,C.getTextRange(x));x.start=R,x.end=N,m.setSelectionRange(x,M)}},w.prototype.moveLinesDown=function(){this.$moveLines(1,!1)},w.prototype.moveLinesUp=function(){this.$moveLines(-1,!1)},w.prototype.moveText=function(m,C,x){return this.session.moveText(m,C,x)},w.prototype.copyLinesUp=function(){this.$moveLines(-1,!0)},w.prototype.copyLinesDown=function(){this.$moveLines(1,!0)},w.prototype.$moveLines=function(m,C){var x,M,F=this.selection;if(!F.inMultiSelectMode||this.inVirtualSelectionMode){var R=F.toOrientedRange();x=this.$getSelectedRows(R),M=this.session.$moveLines(x.first,x.last,C?0:m),C&&m==-1&&(M=0),R.moveBy(M,0),F.fromOrientedRange(R)}else{var N=F.rangeList.ranges;F.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var W=0,B=0,U=N.length,P=0;P<U;P++){var z=P;N[P].moveBy(W,0),x=this.$getSelectedRows(N[P]);for(var K=x.first,V=x.last;++P<U;){B&&N[P].moveBy(B,0);var Y=this.$getSelectedRows(N[P]);if(C&&Y.first!=V)break;if(!C&&Y.first>V+1)break;V=Y.last}for(P--,W=this.session.$moveLines(K,V,C?0:m),C&&m==-1&&(z=P+1);z<=P;)N[z].moveBy(W,0),z++;C||(W=0),B+=W}F.fromOrientedRange(F.ranges[0]),F.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},w.prototype.$getSelectedRows=function(m){return m=(m||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(m.start.row),last:this.session.getRowFoldEnd(m.end.row)}},w.prototype.onCompositionStart=function(m){this.renderer.showComposition(m)},w.prototype.onCompositionUpdate=function(m){this.renderer.setCompositionText(m)},w.prototype.onCompositionEnd=function(){this.renderer.hideComposition()},w.prototype.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},w.prototype.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},w.prototype.isRowVisible=function(m){return m>=this.getFirstVisibleRow()&&m<=this.getLastVisibleRow()},w.prototype.isRowFullyVisible=function(m){return m>=this.renderer.getFirstFullyVisibleRow()&&m<=this.renderer.getLastFullyVisibleRow()},w.prototype.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},w.prototype.$moveByPage=function(m,C){var x=this.renderer,M=this.renderer.layerConfig,F=m*Math.floor(M.height/M.lineHeight);C===!0?this.selection.$moveSelection(function(){this.moveCursorBy(F,0)}):C===!1&&(this.selection.moveCursorBy(F,0),this.selection.clearSelection());var R=x.scrollTop;x.scrollBy(0,F*M.lineHeight),C!=null&&x.scrollCursorIntoView(null,.5),x.animateScrolling(R)},w.prototype.selectPageDown=function(){this.$moveByPage(1,!0)},w.prototype.selectPageUp=function(){this.$moveByPage(-1,!0)},w.prototype.gotoPageDown=function(){this.$moveByPage(1,!1)},w.prototype.gotoPageUp=function(){this.$moveByPage(-1,!1)},w.prototype.scrollPageDown=function(){this.$moveByPage(1)},w.prototype.scrollPageUp=function(){this.$moveByPage(-1)},w.prototype.scrollToRow=function(m){this.renderer.scrollToRow(m)},w.prototype.scrollToLine=function(m,C,x,M){this.renderer.scrollToLine(m,C,x,M)},w.prototype.centerSelection=function(){var m=this.getSelectionRange(),C={row:Math.floor(m.start.row+(m.end.row-m.start.row)/2),column:Math.floor(m.start.column+(m.end.column-m.start.column)/2)};this.renderer.alignCursor(C,.5)},w.prototype.getCursorPosition=function(){return this.selection.getCursor()},w.prototype.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},w.prototype.getSelectionRange=function(){return this.selection.getRange()},w.prototype.selectAll=function(){this.selection.selectAll()},w.prototype.clearSelection=function(){this.selection.clearSelection()},w.prototype.moveCursorTo=function(m,C){this.selection.moveCursorTo(m,C)},w.prototype.moveCursorToPosition=function(m){this.selection.moveCursorToPosition(m)},w.prototype.jumpToMatching=function(m,C){var x=this.getCursorPosition(),M=new E(this.session,x.row,x.column),F=M.getCurrentToken(),R=0;F&&F.type.indexOf("tag-name")!==-1&&(F=M.stepBackward());var N=F||M.stepForward();if(N){var W,B=!1,U={},P=x.column-N.start,z,K={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(N.value.match(/[{}()\[\]]/g)){for(;P<N.value.length&&!B;P++)if(K[N.value[P]])switch(z=K[N.value[P]]+"."+N.type.replace("rparen","lparen"),isNaN(U[z])&&(U[z]=0),N.value[P]){case"(":case"[":case"{":U[z]++;break;case")":case"]":case"}":U[z]--,U[z]===-1&&(W="bracket",B=!0);break}}else N.type.indexOf("tag-name")!==-1&&(isNaN(U[N.value])&&(U[N.value]=0),F.value==="<"&&R>1?U[N.value]++:F.value==="</"&&U[N.value]--,U[N.value]===-1&&(W="tag",B=!0));B||(F=N,R++,N=M.stepForward(),P=0)}while(N&&!B);if(W){var V,Y;if(W==="bracket")V=this.session.getBracketRange(x),V||(V=new f(M.getCurrentTokenRow(),M.getCurrentTokenColumn()+P-1,M.getCurrentTokenRow(),M.getCurrentTokenColumn()+P-1),Y=V.start,(C||Y.row===x.row&&Math.abs(Y.column-x.column)<2)&&(V=this.session.getBracketRange(Y)));else if(W==="tag"){if(!N||N.type.indexOf("tag-name")===-1)return;if(V=new f(M.getCurrentTokenRow(),M.getCurrentTokenColumn()-2,M.getCurrentTokenRow(),M.getCurrentTokenColumn()-2),V.compare(x.row,x.column)===0){var ee=this.session.getMatchingTags(x);ee&&(ee.openTag.contains(x.row,x.column)?(V=ee.closeTag,Y=V.start):(V=ee.openTag,ee.closeTag.start.row===x.row&&ee.closeTag.start.column===x.column?Y=V.end:Y=V.start))}Y=Y||V.start}Y=V&&V.cursor||Y,Y&&(m?V&&C?this.selection.setRange(V):V&&V.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(Y.row,Y.column):this.selection.moveTo(Y.row,Y.column))}}},w.prototype.gotoLine=function(m,C,x){this.selection.clearSelection(),this.session.unfold({row:m-1,column:C||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(m-1,C||0),this.isRowFullyVisible(m-1)||this.scrollToLine(m-1,!0,x)},w.prototype.navigateTo=function(m,C){this.selection.moveTo(m,C)},w.prototype.navigateUp=function(m){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var C=this.selection.anchor.getPosition();return this.moveCursorToPosition(C)}this.selection.clearSelection(),this.selection.moveCursorBy(-m||-1,0)},w.prototype.navigateDown=function(m){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var C=this.selection.anchor.getPosition();return this.moveCursorToPosition(C)}this.selection.clearSelection(),this.selection.moveCursorBy(m||1,0)},w.prototype.navigateLeft=function(m){if(this.selection.isEmpty())for(m=m||1;m--;)this.selection.moveCursorLeft();else{var C=this.getSelectionRange().start;this.moveCursorToPosition(C)}this.clearSelection()},w.prototype.navigateRight=function(m){if(this.selection.isEmpty())for(m=m||1;m--;)this.selection.moveCursorRight();else{var C=this.getSelectionRange().end;this.moveCursorToPosition(C)}this.clearSelection()},w.prototype.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},w.prototype.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},w.prototype.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},w.prototype.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},w.prototype.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},w.prototype.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},w.prototype.replace=function(m,C){C&&this.$search.set(C);var x=this.$search.find(this.session),M=0;return x&&(this.$tryReplace(x,m)&&(M=1),this.selection.setSelectionRange(x),this.renderer.scrollSelectionIntoView(x.start,x.end)),M},w.prototype.replaceAll=function(m,C){C&&this.$search.set(C);var x=this.$search.findAll(this.session),M=0;if(!x.length)return M;var F=this.getSelectionRange();this.selection.moveTo(0,0);for(var R=x.length-1;R>=0;--R)this.$tryReplace(x[R],m)&&M++;return this.selection.setSelectionRange(F),M},w.prototype.$tryReplace=function(m,C){var x=this.session.getTextRange(m);return C=this.$search.replace(x,C),C!==null?(m.end=this.session.replace(m,C),m):null},w.prototype.getLastSearchOptions=function(){return this.$search.getOptions()},w.prototype.find=function(m,C,x){C||(C={}),typeof m=="string"||m instanceof RegExp?C.needle=m:typeof m=="object"&&c.mixin(C,m);var M=this.selection.getRange();C.needle==null&&(m=this.session.getTextRange(M)||this.$search.$options.needle,m||(M=this.session.getWordRange(M.start.row,M.start.column),m=this.session.getTextRange(M)),this.$search.set({needle:m})),this.$search.set(C),C.start||this.$search.set({start:M});var F=this.$search.find(this.session);if(C.preventScroll)return F;if(F)return this.revealRange(F,x),F;C.backwards?M.start=M.end:M.end=M.start,this.selection.setRange(M)},w.prototype.findNext=function(m,C){this.find({skipCurrent:!0,backwards:!1},m,C)},w.prototype.findPrevious=function(m,C){this.find(m,{skipCurrent:!0,backwards:!0},C)},w.prototype.revealRange=function(m,C){this.session.unfold(m),this.selection.setSelectionRange(m);var x=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(m.start,m.end,.5),C!==!1&&this.renderer.animateScrolling(x)},w.prototype.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},w.prototype.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},w.prototype.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach(function(m){m.destroy()}),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},w.prototype.setAutoScrollEditorIntoView=function(m){if(m){var C,x=this,M=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var F=this.$scrollAnchor;F.style.cssText="position:absolute",this.container.insertBefore(F,this.container.firstChild);var R=this.on("changeSelection",function(){M=!0}),N=this.renderer.on("beforeRender",function(){M&&(C=x.renderer.container.getBoundingClientRect())}),W=this.renderer.on("afterRender",function(){if(M&&C&&(x.isFocused()||x.searchBox&&x.searchBox.isFocused())){var B=x.renderer,U=B.$cursorLayer.$pixelPos,P=B.layerConfig,z=U.top-P.offset;U.top>=0&&z+C.top<0?M=!0:U.top<P.height&&U.top+C.top+P.lineHeight>window.innerHeight?M=!1:M=null,M!=null&&(F.style.top=z+"px",F.style.left=U.left+"px",F.style.height=P.lineHeight+"px",F.scrollIntoView(M)),M=C=null}});this.setAutoScrollEditorIntoView=function(B){B||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",R),this.renderer.off("afterRender",W),this.renderer.off("beforeRender",N))}}},w.prototype.$resetCursorStyle=function(){var m=this.$cursorStyle||"ace",C=this.renderer.$cursorLayer;C&&(C.setSmoothBlinking(/smooth/.test(m)),C.isBlinking=!this.$readOnly&&m!="wide",p.setCssClass(C.element,"ace_slim-cursors",/slim/.test(m)))},w.prototype.prompt=function(m,C,x){var M=this;D.loadModule("ace/ext/prompt",function(F){F.prompt(M,m,C,x)})},w}();T.$uid=0,T.prototype.curOp=null,T.prototype.prevOp={},T.prototype.$mergeableCommands=["backspace","del","insertstring"],T.prototype.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],c.implement(T.prototype,v),D.defineOptions(T.prototype,"editor",{selectionStyle:{set:function(w){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:w})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(w){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(w){this.textInput.setReadOnly(w),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(w){this.textInput.setCopyWithEmptySelection(w)},initialValue:!1},cursorStyle:{set:function(w){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(w){this.setAutoScrollEditorIntoView(w)}},keyboardHandler:{set:function(w){this.setKeyboardHandler(w)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(w){this.session.setValue(w)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(w){this.setSession(w)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(w){this.renderer.$gutterLayer.setShowLineNumbers(w),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),w&&this.$relativeLineNumbers?I.attach(this):I.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(w){this.$showLineNumbers&&w?I.attach(this):I.detach(this)}},placeholder:{set:function(w){this.$updatePlaceholder||(this.$updatePlaceholder=function(){var m=this.session&&(this.renderer.$composition||this.session.getLength()>1||this.session.getLine(0).length>0);if(m&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),p.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!m&&!this.renderer.placeholderNode){this.renderer.on("afterRender",this.$updatePlaceholder),p.addCssClass(this.container,"ace_hasPlaceholder");var C=p.createElement("div");C.className="ace_placeholder",C.textContent=this.$placeholder||"",this.renderer.placeholderNode=C,this.renderer.content.appendChild(this.renderer.placeholderNode)}else!m&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"")}.bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},enableKeyboardAccessibility:{set:function(w){var m={name:"blurTextInput",description:"Set focus to the editor content div to allow tabbing through the page",bindKey:"Esc",exec:function(M){M.blur(),M.renderer.scroller.focus()},readOnly:!0},C=function(M){if(M.target==this.renderer.scroller&&M.keyCode===_.enter){M.preventDefault();var F=this.getCursorPosition().row;this.isRowVisible(F)||this.scrollToLine(F,!0,!0),this.focus()}},x;w?(this.renderer.enableKeyboardAccessibility=!0,this.renderer.keyboardFocusClassName="ace_keyboard-focus",this.textInput.getElement().setAttribute("tabindex",-1),this.textInput.setNumberOfExtraLines(d.isWin?3:0),this.renderer.scroller.setAttribute("tabindex",0),this.renderer.scroller.setAttribute("role","group"),this.renderer.scroller.setAttribute("aria-roledescription",S("editor.scroller.aria-roledescription","editor")),this.renderer.scroller.classList.add(this.renderer.keyboardFocusClassName),this.renderer.scroller.setAttribute("aria-label",S("editor.scroller.aria-label","Editor content, press Enter to start editing, press Escape to exit")),this.renderer.scroller.addEventListener("keyup",C.bind(this)),this.commands.addCommand(m),this.renderer.$gutter.setAttribute("tabindex",0),this.renderer.$gutter.setAttribute("aria-hidden",!1),this.renderer.$gutter.setAttribute("role","group"),this.renderer.$gutter.setAttribute("aria-roledescription",S("editor.gutter.aria-roledescription","editor gutter")),this.renderer.$gutter.setAttribute("aria-label",S("editor.gutter.aria-label","Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit")),this.renderer.$gutter.classList.add(this.renderer.keyboardFocusClassName),this.renderer.content.setAttribute("aria-hidden",!0),x||(x=new g(this)),x.addListener(),this.textInput.setAriaOptions({setLabel:!0})):(this.renderer.enableKeyboardAccessibility=!1,this.textInput.getElement().setAttribute("tabindex",0),this.textInput.setNumberOfExtraLines(0),this.renderer.scroller.setAttribute("tabindex",-1),this.renderer.scroller.removeAttribute("role"),this.renderer.scroller.removeAttribute("aria-roledescription"),this.renderer.scroller.classList.remove(this.renderer.keyboardFocusClassName),this.renderer.scroller.removeAttribute("aria-label"),this.renderer.scroller.removeEventListener("keyup",C.bind(this)),this.commands.removeCommand(m),this.renderer.content.removeAttribute("aria-hidden"),this.renderer.$gutter.setAttribute("tabindex",-1),this.renderer.$gutter.setAttribute("aria-hidden",!0),this.renderer.$gutter.removeAttribute("role"),this.renderer.$gutter.removeAttribute("aria-roledescription"),this.renderer.$gutter.removeAttribute("aria-label"),this.renderer.$gutter.classList.remove(this.renderer.keyboardFocusClassName),x&&x.removeListener())},initialValue:!1},textInputAriaLabel:{set:function(w){this.$textInputAriaLabel=w},initialValue:""},enableMobileMenu:{set:function(w){this.$enableMobileMenu=w},initialValue:!0},customScrollbar:"renderer",hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",highlightIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",useResizeObserver:"renderer",useSvgGutterIcons:"renderer",showFoldedAnnotations:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var I={getText:function(w,m){return(Math.abs(w.selection.lead.row-m)||m+1+(m<9?"·":""))+""},getWidth:function(w,m,C){return Math.max(m.toString().length,(C.lastRow+1).toString().length,2)*C.characterWidth},update:function(w,m){m.renderer.$loop.schedule(m.renderer.CHANGE_GUTTER)},attach:function(w){w.renderer.$gutterLayer.$renderer=this,w.on("changeSelection",this.update),this.update(null,w)},detach:function(w){w.renderer.$gutterLayer.$renderer==this&&(w.renderer.$gutterLayer.$renderer=null),w.off("changeSelection",this.update),this.update(null,w)}};u.Editor=T}),ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],function(n,u,y){var s=n("../lib/dom"),c=function(){function p(o,d){this.element=o,this.canvasHeight=d||5e5,this.element.style.height=this.canvasHeight*2+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0}return p.prototype.moveContainer=function(o){s.translate(this.element,0,-(o.firstRowScreen*o.lineHeight%this.canvasHeight)-o.offset*this.$offsetCoefficient)},p.prototype.pageChanged=function(o,d){return Math.floor(o.firstRowScreen*o.lineHeight/this.canvasHeight)!==Math.floor(d.firstRowScreen*d.lineHeight/this.canvasHeight)},p.prototype.computeLineTop=function(o,d,e){var t=d.firstRowScreen*d.lineHeight,r=Math.floor(t/this.canvasHeight),l=e.documentToScreenRow(o,0)*d.lineHeight;return l-r*this.canvasHeight},p.prototype.computeLineHeight=function(o,d,e){return d.lineHeight*e.getRowLineCount(o)},p.prototype.getLength=function(){return this.cells.length},p.prototype.get=function(o){return this.cells[o]},p.prototype.shift=function(){this.$cacheCell(this.cells.shift())},p.prototype.pop=function(){this.$cacheCell(this.cells.pop())},p.prototype.push=function(o){if(Array.isArray(o)){this.cells.push.apply(this.cells,o);for(var d=s.createFragment(this.element),e=0;e<o.length;e++)d.appendChild(o[e].element);this.element.appendChild(d)}else this.cells.push(o),this.element.appendChild(o.element)},p.prototype.unshift=function(o){if(Array.isArray(o)){this.cells.unshift.apply(this.cells,o);for(var d=s.createFragment(this.element),e=0;e<o.length;e++)d.appendChild(o[e].element);this.element.firstChild?this.element.insertBefore(d,this.element.firstChild):this.element.appendChild(d)}else this.cells.unshift(o),this.element.insertAdjacentElement("afterbegin",o.element)},p.prototype.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},p.prototype.$cacheCell=function(o){o&&(o.element.remove(),this.cellCache.push(o))},p.prototype.createCell=function(o,d,e,t){var r=this.cellCache.pop();if(!r){var l=s.createElement("div");t&&t(l),this.element.appendChild(l),r={element:l,text:"",row:o}}return r.row=o,r},p}();u.Lines=c}),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines","ace/config"],function(n,u,y){var s=n("../lib/dom"),c=n("../lib/oop"),p=n("../lib/lang"),o=n("../lib/event_emitter").EventEmitter,d=n("./lines").Lines,e=n("../config").nls,t=function(){function l(a){this.element=s.createElement("div"),this.element.className="ace_layer ace_gutter-layer",a.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new d(this.element),this.$lines.$offsetCoefficient=1}return l.prototype.setSession=function(a){this.session&&this.session.off("change",this.$updateAnnotations),this.session=a,a&&a.on("change",this.$updateAnnotations)},l.prototype.addGutterDecoration=function(a,h){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(a,h)},l.prototype.removeGutterDecoration=function(a,h){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(a,h)},l.prototype.setAnnotations=function(a){this.$annotations=[];for(var h=0;h<a.length;h++){var f=a[h],v=f.row,b=this.$annotations[v];b||(b=this.$annotations[v]={text:[],type:[],displayText:[]});var A=f.text,D=f.text,E=f.type;A=A?p.escapeHTML(A):f.html||"",D=D||f.html||"",b.text.indexOf(A)===-1&&(b.text.push(A),b.type.push(E),b.displayText.push(D));var g=f.className;g?b.className=g:E==="error"?b.className=" ace_error":E==="security"&&!/\bace_error\b/.test(b.className)?b.className=" ace_security":E==="warning"&&!/\bace_(error|security)\b/.test(b.className)?b.className=" ace_warning":E==="info"&&!b.className?b.className=" ace_info":E==="hint"&&!b.className&&(b.className=" ace_hint")}},l.prototype.$updateAnnotations=function(a){if(this.$annotations.length){var h=a.start.row,f=a.end.row-h;if(f!==0)if(a.action=="remove")this.$annotations.splice(h,f+1,null);else{var v=new Array(f+1);v.unshift(h,1),this.$annotations.splice.apply(this.$annotations,v)}}},l.prototype.update=function(a){this.config=a;var h=this.session,f=a.firstRow,v=Math.min(a.lastRow+a.gutterOffset,h.getLength()-1);this.oldLastRow=v,this.config=a,this.$lines.moveContainer(a),this.$updateCursorRow();for(var b=h.getNextFoldLine(f),A=b?b.start.row:1/0,D=null,E=-1,g=f;;){if(g>A&&(g=b.end.row+1,b=h.getNextFoldLine(g,b),A=b?b.start.row:1/0),g>v){for(;this.$lines.getLength()>E+1;)this.$lines.pop();break}D=this.$lines.get(++E),D?D.row=g:(D=this.$lines.createCell(g,a,this.session,r),this.$lines.push(D)),this.$renderCell(D,a,b,g),g++}this._signal("afterRender"),this.$updateGutterWidth(a)},l.prototype.$updateGutterWidth=function(a){var h=this.session,f=h.gutterRenderer||this.$renderer,v=h.$firstLineNumber,b=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||h.$useWrapMode)&&(b=h.getLength()+v-1);var A=f?f.getWidth(h,b,a):b.toString().length*a.characterWidth,D=this.$padding||this.$computePadding();A+=D.left+D.right,A!==this.gutterWidth&&!isNaN(A)&&(this.gutterWidth=A,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",A))},l.prototype.$updateCursorRow=function(){if(this.$highlightGutterLine){var a=this.session.selection.getCursor();this.$cursorRow!==a.row&&(this.$cursorRow=a.row)}},l.prototype.updateLineHighlight=function(){if(this.$highlightGutterLine){var a=this.session.selection.cursor.row;if(this.$cursorRow=a,!(this.$cursorCell&&this.$cursorCell.row==a)){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var h=this.$lines.cells;this.$cursorCell=null;for(var f=0;f<h.length;f++){var v=h[f];if(v.row>=this.$cursorRow){if(v.row>this.$cursorRow){var b=this.session.getFoldLine(this.$cursorRow);if(f>0&&b&&b.start.row==h[f-1].row)v=h[f-1];else break}v.element.className="ace_gutter-active-line "+v.element.className,this.$cursorCell=v;break}}}}},l.prototype.scrollLines=function(a){var h=this.config;if(this.config=a,this.$updateCursorRow(),this.$lines.pageChanged(h,a))return this.update(a);this.$lines.moveContainer(a);var f=Math.min(a.lastRow+a.gutterOffset,this.session.getLength()-1),v=this.oldLastRow;if(this.oldLastRow=f,!h||v<a.firstRow)return this.update(a);if(f<h.firstRow)return this.update(a);if(h.firstRow<a.firstRow)for(var b=this.session.getFoldedRowCount(h.firstRow,a.firstRow-1);b>0;b--)this.$lines.shift();if(v>f)for(var b=this.session.getFoldedRowCount(f+1,v);b>0;b--)this.$lines.pop();a.firstRow<h.firstRow&&this.$lines.unshift(this.$renderLines(a,a.firstRow,h.firstRow-1)),f>v&&this.$lines.push(this.$renderLines(a,v+1,f)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(a)},l.prototype.$renderLines=function(a,h,f){for(var v=[],b=h,A=this.session.getNextFoldLine(b),D=A?A.start.row:1/0;b>D&&(b=A.end.row+1,A=this.session.getNextFoldLine(b,A),D=A?A.start.row:1/0),!(b>f);){var E=this.$lines.createCell(b,a,this.session,r);this.$renderCell(E,a,A,b),v.push(E),b++}return v},l.prototype.$renderCell=function(a,h,f,v){var b=a.element,A=this.session,D=b.childNodes[0],E=b.childNodes[1],g=b.childNodes[2],S=g.firstChild,$=A.$firstLineNumber,_=A.$breakpoints,T=A.$decorations,I=A.gutterRenderer||this.$renderer,w=this.$showFoldWidgets&&A.foldWidgets,m=f?f.start.row:Number.MAX_VALUE,C=h.lineHeight+"px",x=this.$useSvgGutterIcons?"ace_gutter-cell_svg-icons ":"ace_gutter-cell ",M=this.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",F=(I?I.getText(A,v):v+$).toString();if(this.$highlightGutterLine&&(v==this.$cursorRow||f&&v<this.$cursorRow&&v>=m&&this.$cursorRow<=f.end.row)&&(x+="ace_gutter-active-line ",this.$cursorCell!=a&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=a)),_[v]&&(x+=_[v]),T[v]&&(x+=T[v]),this.$annotations[v]&&v!==m&&(x+=this.$annotations[v].className),w){var R=w[v];R==null&&(R=w[v]=A.getFoldWidget(v))}if(R){var N="ace_fold-widget ace_"+R,W=R=="start"&&v==m&&v<f.end.row;if(W){N+=" ace_closed";for(var B="",U=!1,P=v+1;P<=f.end.row;P++)if(this.$annotations[P]){if(this.$annotations[P].className===" ace_error"){U=!0,B=" ace_error_fold";break}this.$annotations[P].className===" ace_security"?(U=!0,B=" ace_security_fold"):this.$annotations[P].className===" ace_warning"&&B!==" ace_security_fold"&&(U=!0,B=" ace_warning_fold")}x+=B}else N+=" ace_open";E.className!=N&&(E.className=N),s.setStyle(E.style,"height",C),s.setStyle(E.style,"display","inline-block"),E.setAttribute("role","button"),E.setAttribute("tabindex","-1");var z=A.getFoldWidgetRange(v);z?E.setAttribute("aria-label",e("gutter.code-folding.range.aria-label","Toggle code folding, rows $0 through $1",[z.start.row+1,z.end.row+1])):f?E.setAttribute("aria-label",e("gutter.code-folding.closed.aria-label","Toggle code folding, rows $0 through $1",[f.start.row+1,f.end.row+1])):E.setAttribute("aria-label",e("gutter.code-folding.open.aria-label","Toggle code folding, row $0",[v+1])),W?(E.setAttribute("aria-expanded","false"),E.setAttribute("title",e("gutter.code-folding.closed.title","Unfold code"))):(E.setAttribute("aria-expanded","true"),E.setAttribute("title",e("gutter.code-folding.open.title","Fold code")))}else E&&(s.setStyle(E.style,"display","none"),E.setAttribute("tabindex","0"),E.removeAttribute("role"),E.removeAttribute("aria-label"));if(U&&this.$showFoldedAnnotations){g.className="ace_gutter_annotation",S.className=M,S.className+=B,s.setStyle(S.style,"height",C),s.setStyle(g.style,"display","block"),s.setStyle(g.style,"height",C);var K;switch(B){case" ace_error_fold":K=e("gutter.annotation.aria-label.error","Error, read annotations row $0",[F]);break;case" ace_security_fold":K=e("gutter.annotation.aria-label.security","Security finding, read annotations row $0",[F]);break;case" ace_warning_fold":K=e("gutter.annotation.aria-label.warning","Warning, read annotations row $0",[F]);break}g.setAttribute("aria-label",K),g.setAttribute("tabindex","-1"),g.setAttribute("role","button")}else if(this.$annotations[v]){g.className="ace_gutter_annotation",S.className=M,this.$useSvgGutterIcons?S.className+=this.$annotations[v].className:b.classList.add(this.$annotations[v].className.replace(" ","")),s.setStyle(S.style,"height",C),s.setStyle(g.style,"display","block"),s.setStyle(g.style,"height",C);var K;switch(this.$annotations[v].className){case" ace_error":K=e("gutter.annotation.aria-label.error","Error, read annotations row $0",[F]);break;case" ace_security":K=e("gutter.annotation.aria-label.security","Security finding, read annotations row $0",[F]);break;case" ace_warning":K=e("gutter.annotation.aria-label.warning","Warning, read annotations row $0",[F]);break;case" ace_info":K=e("gutter.annotation.aria-label.info","Info, read annotations row $0",[F]);break;case" ace_hint":K=e("gutter.annotation.aria-label.hint","Suggestion, read annotations row $0",[F]);break}g.setAttribute("aria-label",K),g.setAttribute("tabindex","-1"),g.setAttribute("role","button")}else s.setStyle(g.style,"display","none"),g.removeAttribute("aria-label"),g.removeAttribute("role"),g.setAttribute("tabindex","0");return F!==D.data&&(D.data=F),b.className!=x&&(b.className=x),s.setStyle(a.element.style,"height",this.$lines.computeLineHeight(v,h,A)+"px"),s.setStyle(a.element.style,"top",this.$lines.computeLineTop(v,h,A)+"px"),a.text=F,g.style.display==="none"&&E.style.display==="none"?a.element.setAttribute("aria-hidden",!0):a.element.setAttribute("aria-hidden",!1),a},l.prototype.setHighlightGutterLine=function(a){this.$highlightGutterLine=a},l.prototype.setShowLineNumbers=function(a){this.$renderer=!a&&{getWidth:function(){return 0},getText:function(){return""}}},l.prototype.getShowLineNumbers=function(){return this.$showLineNumbers},l.prototype.setShowFoldWidgets=function(a){a?s.addCssClass(this.element,"ace_folding-enabled"):s.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=a,this.$padding=null},l.prototype.getShowFoldWidgets=function(){return this.$showFoldWidgets},l.prototype.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var a=s.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(a.borderLeftWidth)||0)+(parseInt(a.paddingLeft)||0)+1,this.$padding.right=(parseInt(a.borderRightWidth)||0)+(parseInt(a.paddingRight)||0),this.$padding},l.prototype.getRegion=function(a){var h=this.$padding||this.$computePadding(),f=this.element.getBoundingClientRect();if(a.x<h.left+f.left)return"markers";if(this.$showFoldWidgets&&a.x>f.right-h.right)return"foldWidgets"},l}();t.prototype.$fixedWidth=!1,t.prototype.$highlightGutterLine=!0,t.prototype.$renderer="",t.prototype.$showLineNumbers=!0,t.prototype.$showFoldWidgets=!0,c.implement(t.prototype,o);function r(l){var a=document.createTextNode("");l.appendChild(a);var h=s.createElement("span");l.appendChild(h);var f=s.createElement("span");l.appendChild(f);var v=s.createElement("span");return f.appendChild(v),l}u.Gutter=t}),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(n,u,y){var s=n("../range").Range,c=n("../lib/dom"),p=function(){function d(e){this.element=c.createElement("div"),this.element.className="ace_layer ace_marker-layer",e.appendChild(this.element)}return d.prototype.setPadding=function(e){this.$padding=e},d.prototype.setSession=function(e){this.session=e},d.prototype.setMarkers=function(e){this.markers=e},d.prototype.elt=function(e,t){var r=this.i!=-1&&this.element.childNodes[this.i];r?this.i++:(r=document.createElement("div"),this.element.appendChild(r),this.i=-1),r.style.cssText=t,r.className=e},d.prototype.update=function(e){if(e){this.config=e,this.i=0;var t;for(var r in this.markers){var l=this.markers[r];if(!l.range){l.update(t,this,this.session,e);continue}var a=l.range.clipRows(e.firstRow,e.lastRow);if(!a.isEmpty())if(a=a.toScreenRange(this.session),l.renderer){var h=this.$getTop(a.start.row,e),f=this.$padding+a.start.column*e.characterWidth;l.renderer(t,a,f,h,e)}else l.type=="fullLine"?this.drawFullLineMarker(t,a,l.clazz,e):l.type=="screenLine"?this.drawScreenLineMarker(t,a,l.clazz,e):a.isMultiLine()?l.type=="text"?this.drawTextMarker(t,a,l.clazz,e):this.drawMultiLineMarker(t,a,l.clazz,e):this.drawSingleLineMarker(t,a,l.clazz+" ace_start ace_br15",e)}if(this.i!=-1)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},d.prototype.$getTop=function(e,t){return(e-t.firstRowScreen)*t.lineHeight},d.prototype.drawTextMarker=function(e,t,r,l,a){for(var h=this.session,f=t.start.row,v=t.end.row,b=f,A=0,D=0,E=h.getScreenLastRowColumn(b),g=new s(b,t.start.column,b,D);b<=v;b++)g.start.row=g.end.row=b,g.start.column=b==f?t.start.column:h.getRowWrapIndent(b),g.end.column=E,A=D,D=E,E=b+1<v?h.getScreenLastRowColumn(b+1):b==v?0:t.end.column,this.drawSingleLineMarker(e,g,r+(b==f?" ace_start":"")+" ace_br"+o(b==f||b==f+1&&t.start.column,A<D,D>E,b==v),l,b==v?0:1,a)},d.prototype.drawMultiLineMarker=function(e,t,r,l,a){var h=this.$padding,f=l.lineHeight,v=this.$getTop(t.start.row,l),b=h+t.start.column*l.characterWidth;if(a=a||"",this.session.$bidiHandler.isBidiRow(t.start.row)){var A=t.clone();A.end.row=A.start.row,A.end.column=this.session.getLine(A.start.row).length,this.drawBidiSingleLineMarker(e,A,r+" ace_br1 ace_start",l,null,a)}else this.elt(r+" ace_br1 ace_start","height:"+f+"px;right:"+h+"px;top:"+v+"px;left:"+b+"px;"+(a||""));if(this.session.$bidiHandler.isBidiRow(t.end.row)){var A=t.clone();A.start.row=A.end.row,A.start.column=0,this.drawBidiSingleLineMarker(e,A,r+" ace_br12",l,null,a)}else{v=this.$getTop(t.end.row,l);var D=t.end.column*l.characterWidth;this.elt(r+" ace_br12","height:"+f+"px;width:"+D+"px;top:"+v+"px;left:"+h+"px;"+(a||""))}if(f=(t.end.row-t.start.row-1)*l.lineHeight,!(f<=0)){v=this.$getTop(t.start.row+1,l);var E=(t.start.column?1:0)|(t.end.column?0:8);this.elt(r+(E?" ace_br"+E:""),"height:"+f+"px;right:"+h+"px;top:"+v+"px;left:"+h+"px;"+(a||""))}},d.prototype.drawSingleLineMarker=function(e,t,r,l,a,h){if(this.session.$bidiHandler.isBidiRow(t.start.row))return this.drawBidiSingleLineMarker(e,t,r,l,a,h);var f=l.lineHeight,v=(t.end.column+(a||0)-t.start.column)*l.characterWidth,b=this.$getTop(t.start.row,l),A=this.$padding+t.start.column*l.characterWidth;this.elt(r,"height:"+f+"px;width:"+v+"px;top:"+b+"px;left:"+A+"px;"+(h||""))},d.prototype.drawBidiSingleLineMarker=function(e,t,r,l,a,h){var f=l.lineHeight,v=this.$getTop(t.start.row,l),b=this.$padding,A=this.session.$bidiHandler.getSelections(t.start.column,t.end.column);A.forEach(function(D){this.elt(r,"height:"+f+"px;width:"+(D.width+(a||0))+"px;top:"+v+"px;left:"+(b+D.left)+"px;"+(h||""))},this)},d.prototype.drawFullLineMarker=function(e,t,r,l,a){var h=this.$getTop(t.start.row,l),f=l.lineHeight;t.start.row!=t.end.row&&(f+=this.$getTop(t.end.row,l)-h),this.elt(r,"height:"+f+"px;top:"+h+"px;left:0;right:0;"+(a||""))},d.prototype.drawScreenLineMarker=function(e,t,r,l,a){var h=this.$getTop(t.start.row,l),f=l.lineHeight;this.elt(r,"height:"+f+"px;top:"+h+"px;left:0;right:0;"+(a||""))},d}();p.prototype.$padding=0;function o(d,e,t,r){return(d?1:0)|(e?2:0)|(t?4:0)|(r?8:0)}u.Marker=p}),ace.define("ace/layer/text_util",["require","exports","module"],function(n,u,y){var s=new Set(["text","rparen","lparen"]);u.isTextToken=function(c){return s.has(c)}}),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter","ace/config","ace/layer/text_util"],function(n,u,y){var s=n("../lib/oop"),c=n("../lib/dom"),p=n("../lib/lang"),o=n("./lines").Lines,d=n("../lib/event_emitter").EventEmitter,e=n("../config").nls,t=n("./text_util").isTextToken,r=function(){function l(a){this.dom=c,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",a.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new o(this.element)}return l.prototype.$updateEolChar=function(){var a=this.session.doc,h=a.getNewLineCharacter()==`
`&&a.getNewLineMode()!="windows",f=h?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=f)return this.EOL_CHAR=f,!0},l.prototype.setPadding=function(a){this.$padding=a,this.element.style.margin="0 "+a+"px"},l.prototype.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},l.prototype.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},l.prototype.$setFontMetrics=function(a){this.$fontMetrics=a,this.$fontMetrics.on("changeCharacterSize",function(h){this._signal("changeCharacterSize",h)}.bind(this)),this.$pollSizeChanges()},l.prototype.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},l.prototype.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},l.prototype.setSession=function(a){this.session=a,a&&this.$computeTabString()},l.prototype.setShowInvisibles=function(a){return this.showInvisibles==a?!1:(this.showInvisibles=a,typeof a=="string"?(this.showSpaces=/tab/i.test(a),this.showTabs=/space/i.test(a),this.showEOL=/eol/i.test(a)):this.showSpaces=this.showTabs=this.showEOL=a,this.$computeTabString(),!0)},l.prototype.setDisplayIndentGuides=function(a){return this.displayIndentGuides==a?!1:(this.displayIndentGuides=a,this.$computeTabString(),!0)},l.prototype.setHighlightIndentGuides=function(a){return this.$highlightIndentGuides===a?!1:(this.$highlightIndentGuides=a,a)},l.prototype.$computeTabString=function(){var a=this.session.getTabSize();this.tabSize=a;for(var h=this.$tabStrings=[0],f=1;f<a+1;f++)if(this.showTabs){var v=this.dom.createElement("span");v.className="ace_invisible ace_invisible_tab",v.textContent=p.stringRepeat(this.TAB_CHAR,f),h.push(v)}else h.push(this.dom.createTextNode(p.stringRepeat(" ",f),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var b="ace_indent-guide",A=this.showSpaces?" ace_invisible ace_invisible_space":"",D=this.showSpaces?p.stringRepeat(this.SPACE_CHAR,this.tabSize):p.stringRepeat(" ",this.tabSize),E=this.showTabs?" ace_invisible ace_invisible_tab":"",g=this.showTabs?p.stringRepeat(this.TAB_CHAR,this.tabSize):D,v=this.dom.createElement("span");v.className=b+A,v.textContent=D,this.$tabStrings[" "]=v;var v=this.dom.createElement("span");v.className=b+E,v.textContent=g,this.$tabStrings["	"]=v}},l.prototype.updateLines=function(a,h,f){if(this.config.lastRow!=a.lastRow||this.config.firstRow!=a.firstRow)return this.update(a);this.config=a;for(var v=Math.max(h,a.firstRow),b=Math.min(f,a.lastRow),A=this.element.childNodes,D=0,g=a.firstRow;g<v;g++){var S=this.session.getFoldLine(g);if(S)if(S.containsRow(v)){v=S.start.row;break}else g=S.end.row;D++}for(var E=!1,g=v,S=this.session.getNextFoldLine(g),$=S?S.start.row:1/0;g>$&&(g=S.end.row+1,S=this.session.getNextFoldLine(g,S),$=S?S.start.row:1/0),!(g>b);){var _=A[D++];if(_){this.dom.removeChildren(_),this.$renderLine(_,g,g==$?S:!1),E&&(_.style.top=this.$lines.computeLineTop(g,a,this.session)+"px");var T=a.lineHeight*this.session.getRowLength(g)+"px";_.style.height!=T&&(E=!0,_.style.height=T)}g++}if(E)for(;D<this.$lines.cells.length;){var I=this.$lines.cells[D++];I.element.style.top=this.$lines.computeLineTop(I.row,a,this.session)+"px"}},l.prototype.scrollLines=function(a){var h=this.config;if(this.config=a,this.$lines.pageChanged(h,a))return this.update(a);this.$lines.moveContainer(a);var f=a.lastRow,v=h?h.lastRow:-1;if(!h||v<a.firstRow)return this.update(a);if(f<h.firstRow)return this.update(a);if(!h||h.lastRow<a.firstRow)return this.update(a);if(a.lastRow<h.firstRow)return this.update(a);if(h.firstRow<a.firstRow)for(var b=this.session.getFoldedRowCount(h.firstRow,a.firstRow-1);b>0;b--)this.$lines.shift();if(h.lastRow>a.lastRow)for(var b=this.session.getFoldedRowCount(a.lastRow+1,h.lastRow);b>0;b--)this.$lines.pop();a.firstRow<h.firstRow&&this.$lines.unshift(this.$renderLinesFragment(a,a.firstRow,h.firstRow-1)),a.lastRow>h.lastRow&&this.$lines.push(this.$renderLinesFragment(a,h.lastRow+1,a.lastRow)),this.$highlightIndentGuide()},l.prototype.$renderLinesFragment=function(a,h,f){for(var v=[],b=h,A=this.session.getNextFoldLine(b),D=A?A.start.row:1/0;b>D&&(b=A.end.row+1,A=this.session.getNextFoldLine(b,A),D=A?A.start.row:1/0),!(b>f);){var E=this.$lines.createCell(b,a,this.session),g=E.element;this.dom.removeChildren(g),c.setStyle(g.style,"height",this.$lines.computeLineHeight(b,a,this.session)+"px"),c.setStyle(g.style,"top",this.$lines.computeLineTop(b,a,this.session)+"px"),this.$renderLine(g,b,b==D?A:!1),this.$useLineGroups()?g.className="ace_line_group":g.className="ace_line",v.push(E),b++}return v},l.prototype.update=function(a){this.$lines.moveContainer(a),this.config=a;for(var h=a.firstRow,f=a.lastRow,v=this.$lines;v.getLength();)v.pop();v.push(this.$renderLinesFragment(a,h,f))},l.prototype.$renderToken=function(a,h,f,v){for(var b=this,A=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC\u2066\u2067\u2068\u202A\u202B\u202D\u202E\u202C\u2069\u2060\u2061\u2062\u2063\u2064\u206A\u206B\u206B\u206C\u206D\u206E\u206F]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,D=this.dom.createFragment(this.element),E,g=0;E=A.exec(v);){var S=E[1],$=E[2],_=E[3],T=E[4],I=E[5];if(!(!b.showSpaces&&$)){var w=g!=E.index?v.slice(g,E.index):"";if(g=E.index+E[0].length,w&&D.appendChild(this.dom.createTextNode(w,this.element)),S){var m=b.session.getScreenTabSize(h+E.index);D.appendChild(b.$tabStrings[m].cloneNode(!0)),h+=m-1}else if($)if(b.showSpaces){var C=this.dom.createElement("span");C.className="ace_invisible ace_invisible_space",C.textContent=p.stringRepeat(b.SPACE_CHAR,$.length),D.appendChild(C)}else D.appendChild(this.dom.createTextNode($,this.element));else if(_){var C=this.dom.createElement("span");C.className="ace_invisible ace_invisible_space ace_invalid",C.textContent=p.stringRepeat(b.SPACE_CHAR,_.length),D.appendChild(C)}else if(T){h+=1;var C=this.dom.createElement("span");C.style.width=b.config.characterWidth*2+"px",C.className=b.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",C.textContent=b.showSpaces?b.SPACE_CHAR:T,D.appendChild(C)}else if(I){h+=1;var C=this.dom.createElement("span");C.style.width=b.config.characterWidth*2+"px",C.className="ace_cjk",C.textContent=I,D.appendChild(C)}}}if(D.appendChild(this.dom.createTextNode(g?v.slice(g):v,this.element)),t(f.type))a.appendChild(D);else{var x="ace_"+f.type.replace(/\./g," ace_"),C=this.dom.createElement("span");f.type=="fold"&&(C.style.width=f.value.length*this.config.characterWidth+"px",C.setAttribute("title",e("inline-fold.closed.title","Unfold code"))),C.className=x,C.appendChild(D),a.appendChild(C)}return h+v.length},l.prototype.renderIndentGuide=function(a,h,f){var v=h.search(this.$indentGuideRe);if(v<=0||v>=f)return h;if(h[0]==" "){v-=v%this.tabSize;for(var b=v/this.tabSize,A=0;A<b;A++)a.appendChild(this.$tabStrings[" "].cloneNode(!0));return this.$highlightIndentGuide(),h.substr(v)}else if(h[0]=="	"){for(var A=0;A<v;A++)a.appendChild(this.$tabStrings["	"].cloneNode(!0));return this.$highlightIndentGuide(),h.substr(v)}return this.$highlightIndentGuide(),h},l.prototype.$highlightIndentGuide=function(){if(!(!this.$highlightIndentGuides||!this.displayIndentGuides)){this.$highlightIndentGuideMarker={indentLevel:void 0,start:void 0,end:void 0,dir:void 0};var a=this.session.doc.$lines;if(a){var h=this.session.selection.getCursor(),f=/^\s*/.exec(this.session.doc.getLine(h.row))[0].length,v=Math.floor(f/this.tabSize);this.$highlightIndentGuideMarker={indentLevel:v,start:h.row};var b=this.session.$bracketHighlight;if(b){for(var A=this.session.$bracketHighlight.ranges,D=0;D<A.length;D++)if(h.row!==A[D].start.row){this.$highlightIndentGuideMarker.end=A[D].start.row+1,h.row>A[D].start.row?this.$highlightIndentGuideMarker.dir=-1:this.$highlightIndentGuideMarker.dir=1;break}}if(!this.$highlightIndentGuideMarker.end&&a[h.row]!==""&&h.column===a[h.row].length){this.$highlightIndentGuideMarker.dir=1;for(var D=h.row+1;D<a.length;D++){var E=a[D],g=/^\s*/.exec(E)[0].length;if(E!==""&&(this.$highlightIndentGuideMarker.end=D,g<=f))break}}this.$renderHighlightIndentGuide()}}},l.prototype.$clearActiveIndentGuide=function(){var a=this.element.querySelectorAll(".ace_indent-guide-active");a.forEach(function(h){h.classList.remove("ace_indent-guide-active")})},l.prototype.$setIndentGuideActive=function(a,h){var f=this.session.doc.getLine(a.row);if(f!==""){var v=a.element;if(a.element.classList&&a.element.classList.contains("ace_line_group"))if(a.element.childNodes.length>0)v=a.element.childNodes[0];else return;var b=v.childNodes;if(b){var A=b[h-1];A&&A.classList&&A.classList.contains("ace_indent-guide")&&A.classList.add("ace_indent-guide-active")}}},l.prototype.$renderHighlightIndentGuide=function(){if(this.$lines){var a=this.$lines.cells;this.$clearActiveIndentGuide();var h=this.$highlightIndentGuideMarker.indentLevel;if(h!==0)if(this.$highlightIndentGuideMarker.dir===1)for(var f=0;f<a.length;f++){var v=a[f];if(this.$highlightIndentGuideMarker.end&&v.row>=this.$highlightIndentGuideMarker.start+1){if(v.row>=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(v,h)}}else for(var f=a.length-1;f>=0;f--){var v=a[f];if(this.$highlightIndentGuideMarker.end&&v.row<this.$highlightIndentGuideMarker.start){if(v.row<this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(v,h)}}}},l.prototype.$createLineElement=function(a){var h=this.dom.createElement("div");return h.className="ace_line",h.style.height=this.config.lineHeight+"px",h},l.prototype.$renderWrappedLine=function(a,h,f){var v=0,b=0,A=f[0],D=0,E=this.$createLineElement();a.appendChild(E);for(var g=0;g<h.length;g++){var S=h[g],$=S.value;if(g==0&&this.displayIndentGuides){if(v=$.length,$=this.renderIndentGuide(E,$,A),!$)continue;v-=$.length}if(v+$.length<A)D=this.$renderToken(E,D,S,$),v+=$.length;else{for(;v+$.length>=A;)D=this.$renderToken(E,D,S,$.substring(0,A-v)),$=$.substring(A-v),v=A,E=this.$createLineElement(),a.appendChild(E),E.appendChild(this.dom.createTextNode(p.stringRepeat(" ",f.indent),this.element)),b++,D=0,A=f[b]||Number.MAX_VALUE;$.length!=0&&(v+=$.length,D=this.$renderToken(E,D,S,$))}}f[f.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(E,D,null,"",!0)},l.prototype.$renderSimpleLine=function(a,h){for(var f=0,v=0;v<h.length;v++){var b=h[v],A=b.value;if(!(v==0&&this.displayIndentGuides&&(A=this.renderIndentGuide(a,A),!A))){if(f+A.length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(a,f,b,A);f=this.$renderToken(a,f,b,A)}}},l.prototype.$renderOverflowMessage=function(a,h,f,v,b){f&&this.$renderToken(a,h,f,v.slice(0,this.MAX_LINE_LENGTH-h));var A=this.dom.createElement("span");A.className="ace_inline_button ace_keyword ace_toggle_wrap",A.textContent=b?"<hide>":"<click to see more...>",a.appendChild(A)},l.prototype.$renderLine=function(a,h,f){if(!f&&f!=!1&&(f=this.session.getFoldLine(h)),f)var v=this.$getFoldLineTokens(h,f);else var v=this.session.getTokens(h);var b=a;if(v.length){var A=this.session.getRowSplitData(h);if(A&&A.length){this.$renderWrappedLine(a,v,A);var b=a.lastChild}else{var b=a;this.$useLineGroups()&&(b=this.$createLineElement(),a.appendChild(b)),this.$renderSimpleLine(b,v)}}else this.$useLineGroups()&&(b=this.$createLineElement(),a.appendChild(b));if(this.showEOL&&b){f&&(h=f.end.row);var D=this.dom.createElement("span");D.className="ace_invisible ace_invisible_eol",D.textContent=h==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,b.appendChild(D)}},l.prototype.$getFoldLineTokens=function(a,h){var f=this.session,v=[];function b(D,E,g){for(var S=0,$=0;$+D[S].value.length<E;)if($+=D[S].value.length,S++,S==D.length)return;if($!=E){var _=D[S].value.substring(E-$);_.length>g-E&&(_=_.substring(0,g-E)),v.push({type:D[S].type,value:_}),$=E+_.length,S+=1}for(;$<g&&S<D.length;){var _=D[S].value;_.length+$>g?v.push({type:D[S].type,value:_.substring(0,g-$)}):v.push(D[S]),$+=_.length,S+=1}}var A=f.getTokens(a);return h.walk(function(D,E,g,S,$){D!=null?v.push({type:"fold",value:D}):($&&(A=f.getTokens(E)),A.length&&b(A,S,g))},h.end.row,this.session.getLine(h.end.row).length),v},l.prototype.$useLineGroups=function(){return this.session.getUseWrapMode()},l}();r.prototype.EOF_CHAR="¶",r.prototype.EOL_CHAR_LF="¬",r.prototype.EOL_CHAR_CRLF="¤",r.prototype.EOL_CHAR=r.prototype.EOL_CHAR_LF,r.prototype.TAB_CHAR="—",r.prototype.SPACE_CHAR="·",r.prototype.$padding=0,r.prototype.MAX_LINE_LENGTH=1e4,r.prototype.showInvisibles=!1,r.prototype.showSpaces=!1,r.prototype.showTabs=!1,r.prototype.showEOL=!1,r.prototype.displayIndentGuides=!0,r.prototype.$highlightIndentGuides=!0,r.prototype.$tabStrings=[],r.prototype.destroy={},r.prototype.onChangeTabSize=r.prototype.$computeTabString,s.implement(r.prototype,d),u.Text=r}),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(n,u,y){var s=n("../lib/dom"),c=function(){function p(o){this.element=s.createElement("div"),this.element.className="ace_layer ace_cursor-layer",o.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),s.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)}return p.prototype.$updateOpacity=function(o){for(var d=this.cursors,e=d.length;e--;)s.setStyle(d[e].style,"opacity",o?"":"0")},p.prototype.$startCssAnimation=function(){for(var o=this.cursors,d=o.length;d--;)o[d].style.animationDuration=this.blinkInterval+"ms";this.$isAnimating=!0,setTimeout(function(){this.$isAnimating&&s.addCssClass(this.element,"ace_animate-blinking")}.bind(this))},p.prototype.$stopCssAnimation=function(){this.$isAnimating=!1,s.removeCssClass(this.element,"ace_animate-blinking")},p.prototype.setPadding=function(o){this.$padding=o},p.prototype.setSession=function(o){this.session=o},p.prototype.setBlinking=function(o){o!=this.isBlinking&&(this.isBlinking=o,this.restartTimer())},p.prototype.setBlinkInterval=function(o){o!=this.blinkInterval&&(this.blinkInterval=o,this.restartTimer())},p.prototype.setSmoothBlinking=function(o){o!=this.smoothBlinking&&(this.smoothBlinking=o,s.setCssClass(this.element,"ace_smooth-blinking",o),this.$updateCursors(!0),this.restartTimer())},p.prototype.addCursor=function(){var o=s.createElement("div");return o.className="ace_cursor",this.element.appendChild(o),this.cursors.push(o),o},p.prototype.removeCursor=function(){if(this.cursors.length>1){var o=this.cursors.pop();return o.parentNode.removeChild(o),o}},p.prototype.hideCursor=function(){this.isVisible=!1,s.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},p.prototype.showCursor=function(){this.isVisible=!0,s.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},p.prototype.restartTimer=function(){var o=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&(this.$isSmoothBlinking=!1,s.removeCssClass(this.element,"ace_smooth-blinking")),o(!0),!this.isBlinking||!this.blinkInterval||!this.isVisible){this.$stopCssAnimation();return}if(this.smoothBlinking&&(this.$isSmoothBlinking=!0,setTimeout(function(){this.$isSmoothBlinking&&s.addCssClass(this.element,"ace_smooth-blinking")}.bind(this))),s.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var d=function(){this.timeoutId=setTimeout(function(){o(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){o(!0),d()},this.blinkInterval),d()}},p.prototype.getPixelPosition=function(o,d){if(!this.config||!this.session)return{left:0,top:0};o||(o=this.session.selection.getCursor());var e=this.session.documentToScreenPosition(o),t=this.$padding+(this.session.$bidiHandler.isBidiRow(e.row,o.row)?this.session.$bidiHandler.getPosLeft(e.column):e.column*this.config.characterWidth),r=(e.row-(d?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:t,top:r}},p.prototype.isCursorInView=function(o,d){return o.top>=0&&o.top<d.maxHeight},p.prototype.update=function(o){this.config=o;var d=this.session.$selectionMarkers,e=0,t=0;(d===void 0||d.length===0)&&(d=[{cursor:null}]);for(var e=0,r=d.length;e<r;e++){var l=this.getPixelPosition(d[e].cursor,!0);if(!((l.top>o.height+o.offset||l.top<0)&&e>1)){var a=this.cursors[t++]||this.addCursor(),h=a.style;this.drawCursor?this.drawCursor(a,l,o,d[e],this.session):this.isCursorInView(l,o)?(s.setStyle(h,"display","block"),s.translate(a,l.left,l.top),s.setStyle(h,"width",Math.round(o.characterWidth)+"px"),s.setStyle(h,"height",o.lineHeight+"px")):s.setStyle(h,"display","none")}}for(;this.cursors.length>t;)this.removeCursor();var f=this.session.getOverwrite();this.$setOverwrite(f),this.$pixelPos=l,this.restartTimer()},p.prototype.$setOverwrite=function(o){o!=this.overwrite&&(this.overwrite=o,o?s.addCssClass(this.element,"ace_overwrite-cursors"):s.removeCssClass(this.element,"ace_overwrite-cursors"))},p.prototype.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)},p}();c.prototype.$padding=0,c.prototype.drawCursor=null,u.Cursor=c}),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(n,u,y){var s=this&&this.__extends||function(){var a=function(h,f){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,b){v.__proto__=b}||function(v,b){for(var A in b)Object.prototype.hasOwnProperty.call(b,A)&&(v[A]=b[A])},a(h,f)};return function(h,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");a(h,f);function v(){this.constructor=h}h.prototype=f===null?Object.create(f):(v.prototype=f.prototype,new v)}}(),c=n("./lib/oop"),p=n("./lib/dom"),o=n("./lib/event"),d=n("./lib/event_emitter").EventEmitter,e=32768,t=function(){function a(h,f){this.element=p.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+f,this.inner=p.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent=" ",this.element.appendChild(this.inner),h.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,o.addListener(this.element,"scroll",this.onScroll.bind(this)),o.addListener(this.element,"mousedown",o.preventDefault)}return a.prototype.setVisible=function(h){this.element.style.display=h?"":"none",this.isVisible=h,this.coeff=1},a}();c.implement(t.prototype,d);var r=function(a){s(h,a);function h(f,v){var b=a.call(this,f,"-v")||this;return b.scrollTop=0,b.scrollHeight=0,v.$scrollbarWidth=b.width=p.scrollbarWidth(f.ownerDocument),b.inner.style.width=b.element.style.width=(b.width||15)+5+"px",b.$minWidth=0,b}return h.prototype.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,this.coeff!=1){var f=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-f)/(this.coeff-f)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},h.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},h.prototype.setHeight=function(f){this.element.style.height=f+"px"},h.prototype.setScrollHeight=function(f){this.scrollHeight=f,f>e?(this.coeff=e/f,f=e):this.coeff!=1&&(this.coeff=1),this.inner.style.height=f+"px"},h.prototype.setScrollTop=function(f){this.scrollTop!=f&&(this.skipEvent=!0,this.scrollTop=f,this.element.scrollTop=f*this.coeff)},h}(t);r.prototype.setInnerHeight=r.prototype.setScrollHeight;var l=function(a){s(h,a);function h(f,v){var b=a.call(this,f,"-h")||this;return b.scrollLeft=0,b.height=v.$scrollbarWidth,b.inner.style.height=b.element.style.height=(b.height||15)+5+"px",b}return h.prototype.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},h.prototype.getHeight=function(){return this.isVisible?this.height:0},h.prototype.setWidth=function(f){this.element.style.width=f+"px"},h.prototype.setInnerWidth=function(f){this.inner.style.width=f+"px"},h.prototype.setScrollWidth=function(f){this.inner.style.width=f+"px"},h.prototype.setScrollLeft=function(f){this.scrollLeft!=f&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=f)},h}(t);u.ScrollBar=r,u.ScrollBarV=r,u.ScrollBarH=l,u.VScrollBar=r,u.HScrollBar=l}),ace.define("ace/scrollbar_custom",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(n,u,y){var s=this&&this.__extends||function(){var l=function(a,h){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,v){f.__proto__=v}||function(f,v){for(var b in v)Object.prototype.hasOwnProperty.call(v,b)&&(f[b]=v[b])},l(a,h)};return function(a,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");l(a,h);function f(){this.constructor=a}a.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}(),c=n("./lib/oop"),p=n("./lib/dom"),o=n("./lib/event"),d=n("./lib/event_emitter").EventEmitter;p.importCssString(`.ace_editor>.ace_sb-v div, .ace_editor>.ace_sb-h div{
  position: absolute;
  background: rgba(128, 128, 128, 0.6);
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  border: 1px solid #bbb;
  border-radius: 2px;
  z-index: 8;
}
.ace_editor>.ace_sb-v, .ace_editor>.ace_sb-h {
  position: absolute;
  z-index: 6;
  background: none;
  overflow: hidden!important;
}
.ace_editor>.ace_sb-v {
  z-index: 6;
  right: 0;
  top: 0;
  width: 12px;
}
.ace_editor>.ace_sb-v div {
  z-index: 8;
  right: 0;
  width: 100%;
}
.ace_editor>.ace_sb-h {
  bottom: 0;
  left: 0;
  height: 12px;
}
.ace_editor>.ace_sb-h div {
  bottom: 0;
  height: 100%;
}
.ace_editor>.ace_sb_grabbed {
  z-index: 8;
  background: #000;
}`,"ace_scrollbar.css",!1);var e=function(){function l(a,h){this.element=p.createElement("div"),this.element.className="ace_sb"+h,this.inner=p.createElement("div"),this.inner.className="",this.element.appendChild(this.inner),this.VScrollWidth=12,this.HScrollHeight=12,a.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,o.addMultiMouseDownListener(this.element,[500,300,300],this,"onMouseDown")}return l.prototype.setVisible=function(a){this.element.style.display=a?"":"none",this.isVisible=a,this.coeff=1},l}();c.implement(e.prototype,d);var t=function(l){s(a,l);function a(h,f){var v=l.call(this,h,"-v")||this;return v.scrollTop=0,v.scrollHeight=0,v.parent=h,v.width=v.VScrollWidth,v.renderer=f,v.inner.style.width=v.element.style.width=(v.width||15)+"px",v.$minWidth=0,v}return a.prototype.onMouseDown=function(h,f){if(h==="mousedown"&&!(o.getButton(f)!==0||f.detail===2)){if(f.target===this.inner){var v=this,b=f.clientY,A=function(T){b=T.clientY},D=function(){clearInterval($)},E=f.clientY,g=this.thumbTop,S=function(){if(b!==void 0){var T=v.scrollTopFromThumbTop(g+b-E);T!==v.scrollTop&&v._emit("scroll",{data:T})}};o.capture(this.inner,A,D);var $=setInterval(S,20);return o.preventDefault(f)}var _=f.clientY-this.element.getBoundingClientRect().top-this.thumbHeight/2;return this._emit("scroll",{data:this.scrollTopFromThumbTop(_)}),o.preventDefault(f)}},a.prototype.getHeight=function(){return this.height},a.prototype.scrollTopFromThumbTop=function(h){var f=h*(this.pageHeight-this.viewHeight)/(this.slideHeight-this.thumbHeight);return f=f>>0,f<0?f=0:f>this.pageHeight-this.viewHeight&&(f=this.pageHeight-this.viewHeight),f},a.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},a.prototype.setHeight=function(h){this.height=Math.max(0,h),this.slideHeight=this.height,this.viewHeight=this.height,this.setScrollHeight(this.pageHeight,!0)},a.prototype.setScrollHeight=function(h,f){this.pageHeight===h&&!f||(this.pageHeight=h,this.thumbHeight=this.slideHeight*this.viewHeight/this.pageHeight,this.thumbHeight>this.slideHeight&&(this.thumbHeight=this.slideHeight),this.thumbHeight<15&&(this.thumbHeight=15),this.inner.style.height=this.thumbHeight+"px",this.scrollTop>this.pageHeight-this.viewHeight&&(this.scrollTop=this.pageHeight-this.viewHeight,this.scrollTop<0&&(this.scrollTop=0),this._emit("scroll",{data:this.scrollTop})))},a.prototype.setScrollTop=function(h){this.scrollTop=h,h<0&&(h=0),this.thumbTop=h*(this.slideHeight-this.thumbHeight)/(this.pageHeight-this.viewHeight),this.inner.style.top=this.thumbTop+"px"},a}(e);t.prototype.setInnerHeight=t.prototype.setScrollHeight;var r=function(l){s(a,l);function a(h,f){var v=l.call(this,h,"-h")||this;return v.scrollLeft=0,v.scrollWidth=0,v.height=v.HScrollHeight,v.inner.style.height=v.element.style.height=(v.height||12)+"px",v.renderer=f,v}return a.prototype.onMouseDown=function(h,f){if(h==="mousedown"&&!(o.getButton(f)!==0||f.detail===2)){if(f.target===this.inner){var v=this,b=f.clientX,A=function(T){b=T.clientX},D=function(){clearInterval($)},E=f.clientX,g=this.thumbLeft,S=function(){if(b!==void 0){var T=v.scrollLeftFromThumbLeft(g+b-E);T!==v.scrollLeft&&v._emit("scroll",{data:T})}};o.capture(this.inner,A,D);var $=setInterval(S,20);return o.preventDefault(f)}var _=f.clientX-this.element.getBoundingClientRect().left-this.thumbWidth/2;return this._emit("scroll",{data:this.scrollLeftFromThumbLeft(_)}),o.preventDefault(f)}},a.prototype.getHeight=function(){return this.isVisible?this.height:0},a.prototype.scrollLeftFromThumbLeft=function(h){var f=h*(this.pageWidth-this.viewWidth)/(this.slideWidth-this.thumbWidth);return f=f>>0,f<0?f=0:f>this.pageWidth-this.viewWidth&&(f=this.pageWidth-this.viewWidth),f},a.prototype.setWidth=function(h){this.width=Math.max(0,h),this.element.style.width=this.width+"px",this.slideWidth=this.width,this.viewWidth=this.width,this.setScrollWidth(this.pageWidth,!0)},a.prototype.setScrollWidth=function(h,f){this.pageWidth===h&&!f||(this.pageWidth=h,this.thumbWidth=this.slideWidth*this.viewWidth/this.pageWidth,this.thumbWidth>this.slideWidth&&(this.thumbWidth=this.slideWidth),this.thumbWidth<15&&(this.thumbWidth=15),this.inner.style.width=this.thumbWidth+"px",this.scrollLeft>this.pageWidth-this.viewWidth&&(this.scrollLeft=this.pageWidth-this.viewWidth,this.scrollLeft<0&&(this.scrollLeft=0),this._emit("scroll",{data:this.scrollLeft})))},a.prototype.setScrollLeft=function(h){this.scrollLeft=h,h<0&&(h=0),this.thumbLeft=h*(this.slideWidth-this.thumbWidth)/(this.pageWidth-this.viewWidth),this.inner.style.left=this.thumbLeft+"px"},a}(e);r.prototype.setInnerWidth=r.prototype.setScrollWidth,u.ScrollBar=t,u.ScrollBarV=t,u.ScrollBarH=r,u.VScrollBar=t,u.HScrollBar=r}),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(n,u,y){var s=n("./lib/event"),c=function(){function p(o,d){this.onRender=o,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=d||window;var e=this;this._flush=function(t){e.pending=!1;var r=e.changes;if(r&&(s.blockIdle(100),e.changes=0,e.onRender(r)),e.changes){if(e.$recursionLimit--<0)return;e.schedule()}else e.$recursionLimit=2}}return p.prototype.schedule=function(o){this.changes=this.changes|o,this.changes&&!this.pending&&(s.nextFrame(this._flush),this.pending=!0)},p.prototype.clear=function(o){var d=this.changes;return this.changes=0,d},p}();u.RenderLoop=c}),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],function(n,u,y){var s=n("../lib/oop"),c=n("../lib/dom"),p=n("../lib/lang"),o=n("../lib/event"),d=n("../lib/useragent"),e=n("../lib/event_emitter").EventEmitter,t=512,r=typeof ResizeObserver=="function",l=200,a=function(){function h(f){this.el=c.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=c.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=c.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),f.appendChild(this.el),this.$measureNode.textContent=p.stringRepeat("X",t),this.$characterSize={width:0,height:0},r?this.$addObserver():this.checkForSizeChanges()}return h.prototype.$setMeasureNodeStyles=function(f,v){f.width=f.height="auto",f.left=f.top="0px",f.visibility="hidden",f.position="absolute",f.whiteSpace="pre",d.isIE<8?f["font-family"]="inherit":f.font="inherit",f.overflow=v?"hidden":"visible"},h.prototype.checkForSizeChanges=function(f){if(f===void 0&&(f=this.$measureSizes()),f&&(this.$characterSize.width!==f.width||this.$characterSize.height!==f.height)){this.$measureNode.style.fontWeight="bold";var v=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=f,this.charSizes=Object.create(null),this.allowBoldFonts=v&&v.width===f.width&&v.height===f.height,this._emit("changeCharacterSize",{data:f})}},h.prototype.$addObserver=function(){var f=this;this.$observer=new window.ResizeObserver(function(v){f.checkForSizeChanges()}),this.$observer.observe(this.$measureNode)},h.prototype.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var f=this;return this.$pollSizeChangesTimer=o.onIdle(function v(){f.checkForSizeChanges(),o.onIdle(v,500)},500)},h.prototype.setPolling=function(f){f?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},h.prototype.$measureSizes=function(f){var v={height:(f||this.$measureNode).clientHeight,width:(f||this.$measureNode).clientWidth/t};return v.width===0||v.height===0?null:v},h.prototype.$measureCharWidth=function(f){this.$main.textContent=p.stringRepeat(f,t);var v=this.$main.getBoundingClientRect();return v.width/t},h.prototype.getCharacterWidth=function(f){var v=this.charSizes[f];return v===void 0&&(v=this.charSizes[f]=this.$measureCharWidth(f)/this.$characterSize.width),v},h.prototype.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},h.prototype.$getZoom=function(f){return!f||!f.parentElement?1:(Number(window.getComputedStyle(f).zoom)||1)*this.$getZoom(f.parentElement)},h.prototype.$initTransformMeasureNodes=function(){var f=function(v,b){return["div",{style:"position: absolute;top:"+v+"px;left:"+b+"px;"}]};this.els=c.buildDom([f(0,0),f(l,0),f(0,l),f(l,l)],this.el)},h.prototype.transformCoordinates=function(f,v){if(f){var b=this.$getZoom(this.el);f=g(1/b,f)}function A(W,B,U){var P=W[1]*B[0]-W[0]*B[1];return[(-B[1]*U[0]+B[0]*U[1])/P,(+W[1]*U[0]-W[0]*U[1])/P]}function D(W,B){return[W[0]-B[0],W[1]-B[1]]}function E(W,B){return[W[0]+B[0],W[1]+B[1]]}function g(W,B){return[W*B[0],W*B[1]]}this.els||this.$initTransformMeasureNodes();function S(W){var B=W.getBoundingClientRect();return[B.left,B.top]}var $=S(this.els[0]),_=S(this.els[1]),T=S(this.els[2]),I=S(this.els[3]),w=A(D(I,_),D(I,T),D(E(_,T),E(I,$))),m=g(1+w[0],D(_,$)),C=g(1+w[1],D(T,$));if(v){var x=v,M=w[0]*x[0]/l+w[1]*x[1]/l+1,F=E(g(x[0],m),g(x[1],C));return E(g(1/M/l,F),$)}var R=D(f,$),N=A(D(m,g(w[0],R)),D(C,g(w[1],R)),R);return g(l,N)},h}();a.prototype.$characterSize={width:0,height:0},s.implement(a.prototype,e),u.FontMetrics=a}),ace.define("ace/css/editor-css",["require","exports","module"],function(n,u,y){y.exports=`
.ace_br1 {border-top-left-radius    : 3px;}
.ace_br2 {border-top-right-radius   : 3px;}
.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}
.ace_br4 {border-bottom-right-radius: 3px;}
.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}
.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}
.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}
.ace_br8 {border-bottom-left-radius : 3px;}
.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}
.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}
.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}
.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}


.ace_editor {
    position: relative;
    overflow: hidden;
    padding: 0;
    font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'Source Code Pro', 'source-code-pro', monospace;
    direction: ltr;
    text-align: left;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
    forced-color-adjust: none;
}

.ace_scroller {
    position: absolute;
    overflow: hidden;
    top: 0;
    bottom: 0;
    background-color: inherit;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    cursor: text;
}

.ace_content {
    position: absolute;
    box-sizing: border-box;
    min-width: 100%;
    contain: style size layout;
    font-variant-ligatures: no-common-ligatures;
}

.ace_keyboard-focus:focus {
    box-shadow: inset 0 0 0 2px #5E9ED6;
    outline: none;
}

.ace_dragging .ace_scroller:before{
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    content: '';
    background: rgba(250, 250, 250, 0.01);
    z-index: 1000;
}
.ace_dragging.ace_dark .ace_scroller:before{
    background: rgba(0, 0, 0, 0.01);
}

.ace_gutter {
    position: absolute;
    overflow : hidden;
    width: auto;
    top: 0;
    bottom: 0;
    left: 0;
    cursor: default;
    z-index: 4;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    contain: style size layout;
}

.ace_gutter-active-line {
    position: absolute;
    left: 0;
    right: 0;
}

.ace_scroller.ace_scroll-left:after {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;
    pointer-events: none;
}

.ace_gutter-cell, .ace_gutter-cell_svg-icons {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    padding-left: 19px;
    padding-right: 6px;
    background-repeat: no-repeat;
}

.ace_gutter-cell_svg-icons .ace_gutter_annotation {
    margin-left: -14px;
    float: left;
}

.ace_gutter-cell .ace_gutter_annotation {
    margin-left: -19px;
    float: left;
}

.ace_gutter-cell.ace_error, .ace_icon.ace_error, .ace_icon.ace_error_fold, .ace_gutter-cell.ace_security, .ace_icon.ace_security, .ace_icon.ace_security_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_warning, .ace_icon.ace_warning, .ace_icon.ace_warning_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_info, .ace_icon.ace_info, .ace_gutter-cell.ace_hint, .ace_icon.ace_hint {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_dark .ace_gutter-cell.ace_info, .ace_dark .ace_icon.ace_info, .ace_dark .ace_gutter-cell.ace_hint, .ace_dark .ace_icon.ace_hint {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");
}

.ace_icon_svg.ace_error {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJyZWQiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KPGNpcmNsZSBmaWxsPSJub25lIiBjeD0iOCIgY3k9IjgiIHI9IjciIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPGxpbmUgeDE9IjExIiB5MT0iNSIgeDI9IjUiIHkyPSIxMSIvPgo8bGluZSB4MT0iMTEiIHkxPSIxMSIgeDI9IjUiIHkyPSI1Ii8+CjwvZz4KPC9zdmc+");
    background-color: crimson;
}
.ace_icon_svg.ace_security {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8ZyBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0iZGFya29yYW5nZSIgZmlsbD0ibm9uZSIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPgogICAgICAgIDxwYXRoIGNsYXNzPSJzdHJva2UtbGluZWpvaW4tcm91bmQiIGQ9Ik04IDE0LjgzMDdDOCAxNC44MzA3IDIgMTIuOTA0NyAyIDguMDg5OTJWMy4yNjU0OEM1LjMxIDMuMjY1NDggNy45ODk5OSAxLjM0OTE4IDcuOTg5OTkgMS4zNDkxOEM3Ljk4OTk5IDEuMzQ5MTggMTAuNjkgMy4yNjU0OCAxNCAzLjI2NTQ4VjguMDg5OTJDMTQgMTIuOTA0NyA4IDE0LjgzMDcgOCAxNC44MzA3WiIvPgogICAgICAgIDxwYXRoIGQ9Ik0yIDguMDg5OTJWMy4yNjU0OEM1LjMxIDMuMjY1NDggNy45ODk5OSAxLjM0OTE4IDcuOTg5OTkgMS4zNDkxOCIvPgogICAgICAgIDxwYXRoIGQ9Ik0xMy45OSA4LjA4OTkyVjMuMjY1NDhDMTAuNjggMy4yNjU0OCA4IDEuMzQ5MTggOCAxLjM0OTE4Ii8+CiAgICAgICAgPHBhdGggY2xhc3M9InN0cm9rZS1saW5lam9pbi1yb3VuZCIgZD0iTTggNFY5Ii8+CiAgICAgICAgPHBhdGggY2xhc3M9InN0cm9rZS1saW5lam9pbi1yb3VuZCIgZD0iTTggMTBWMTIiLz4KICAgIDwvZz4KPC9zdmc+");
    background-color: crimson;
}
.ace_icon_svg.ace_warning {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJkYXJrb3JhbmdlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+Cjxwb2x5Z29uIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGZpbGw9Im5vbmUiIHBvaW50cz0iOCAxIDE1IDE1IDEgMTUgOCAxIi8+CjxyZWN0IHg9IjgiIHk9IjEyIiB3aWR0aD0iMC4wMSIgaGVpZ2h0PSIwLjAxIi8+CjxsaW5lIHgxPSI4IiB5MT0iNiIgeDI9IjgiIHkyPSIxMCIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: darkorange;
}
.ace_icon_svg.ace_info {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJibHVlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CjxjaXJjbGUgZmlsbD0ibm9uZSIgY3g9IjgiIGN5PSI4IiByPSI3IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjxwb2x5bGluZSBwb2ludHM9IjggMTEgOCA4Ii8+Cjxwb2x5bGluZSBwb2ludHM9IjkgOCA2IDgiLz4KPGxpbmUgeDE9IjEwIiB5MT0iMTEiIHgyPSI2IiB5Mj0iMTEiLz4KPHJlY3QgeD0iOCIgeT0iNSIgd2lkdGg9IjAuMDEiIGhlaWdodD0iMC4wMSIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: royalblue;
}
.ace_icon_svg.ace_hint {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8ZyBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0ic2lsdmVyIiBmaWxsPSJub25lIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CiAgICAgICAgPHBhdGggY2xhc3M9InN0cm9rZS1saW5lam9pbi1yb3VuZCIgZD0iTTYgMTRIMTAiLz4KICAgICAgICA8cGF0aCBkPSJNOCAxMUg5QzkgOS40NzAwMiAxMiA4LjU0MDAyIDEyIDUuNzYwMDJDMTIuMDIgNC40MDAwMiAxMS4zOSAzLjM2MDAyIDEwLjQzIDIuNjcwMDJDOSAxLjY0MDAyIDcuMDAwMDEgMS42NDAwMiA1LjU3MDAxIDIuNjcwMDJDNC42MTAwMSAzLjM2MDAyIDMuOTggNC40MDAwMiA0IDUuNzYwMDJDNCA4LjU0MDAyIDcuMDAwMDEgOS40NzAwMiA3LjAwMDAxIDExSDhaIi8+CiAgICA8L2c+Cjwvc3ZnPg==");
    background-color: silver;
}

.ace_icon_svg.ace_error_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSI+CiAgPHBhdGggZD0ibSAxOC45Mjk4NTEsNy44Mjk4MDc2IGMgMC4xNDYzNTMsNi4zMzc0NjA0IC02LjMyMzE0Nyw3Ljc3Nzg0NDQgLTcuNDc3OTEyLDcuNzc3ODQ0NCAtMi4xMDcyNzI2LC0wLjEyODc1IDUuMTE3Njc4LDAuMzU2MjQ5IDUuMDUxNjk4LC03Ljg3MDA2MTggLTAuNjA0NjcyLC04LjAwMzk3MzQ5IC03LjA3NzI3MDYsLTcuNTYzMTE4OSAtNC44NTczLC03LjQzMDM5NTU2IDEuNjA2LC0wLjExNTE0MjI1IDYuODk3NDg1LDEuMjYyNTQ1OTYgNy4yODM1MTQsNy41MjI2MTI5NiB6IiBmaWxsPSJjcmltc29uIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibSA4LjExNDc1NjIsMi4wNTI5ODI4IGMgMy4zNDkxNjk4LDAgNi4wNjQxMzI4LDIuNjc2ODYyNyA2LjA2NDEzMjgsNS45Nzg5NTMgMCwzLjMwMjExMjIgLTIuNzE0OTYzLDUuOTc4OTIwMiAtNi4wNjQxMzI4LDUuOTc4OTIwMiAtMy4zNDkxNDczLDAgLTYuMDY0MTc3MiwtMi42NzY4MDggLTYuMDY0MTc3MiwtNS45Nzg5MjAyIDAuMDA1MzksLTMuMjk5ODg2MSAyLjcxNzI2NTYsLTUuOTczNjQwOCA2LjA2NDE3NzIsLTUuOTc4OTUzIHogbSAwLC0xLjczNTgyNzE5IGMgLTQuMzIxNDgzNiwwIC03LjgyNDc0MDM4LDMuNDU0MDE4NDkgLTcuODI0NzQwMzgsNy43MTQ3ODAxOSAwLDQuMjYwNzI4MiAzLjUwMzI1Njc4LDcuNzE0NzQ1MiA3LjgyNDc0MDM4LDcuNzE0NzQ1MiA0LjMyMTQ0OTgsMCA3LjgyNDY5OTgsLTMuNDU0MDE3IDcuODI0Njk5OCwtNy43MTQ3NDUyIDAsLTIuMDQ2MDkxNCAtMC44MjQzOTIsLTQuMDA4MzY3MiAtMi4yOTE3NTYsLTUuNDU1MTc0NiBDIDEyLjE4MDIyNSwxLjEyOTk2NDggMTAuMTkwMDEzLDAuMzE3MTU1NjEgOC4xMTQ3NTYyLDAuMzE3MTU1NjEgWiBNIDYuOTM3NDU2Myw4LjI0MDU5ODUgNC42NzE4Njg1LDEwLjQ4NTg1MiA2LjAwODY4MTQsMTEuODc2NzI4IDguMzE3MDAzNSw5LjYwMDc5MTEgMTAuNjI1MzM3LDExLjg3NjcyOCAxMS45NjIxMzgsMTAuNDg1ODUyIDkuNjk2NTUwOCw4LjI0MDU5ODUgMTEuOTYyMTM4LDYuMDA2ODA2NiAxMC41NzMyNDYsNC42Mzc0MzM1IDguMzE3MDAzNSw2Ljg3MzQyOTcgNi4wNjA3NjA3LDQuNjM3NDMzNSA0LjY3MTg2ODUsNi4wMDY4MDY2IFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=");
    background-color: crimson;
}
.ace_icon_svg.ace_security_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTcgMTQiIGZpbGw9Im5vbmUiPgogICAgPHBhdGggZD0iTTEwLjAwMDEgMTMuNjk5MkMxMC4wMDAxIDEzLjY5OTIgMTEuOTI0MSAxMy40NzYzIDEzIDEyLjY5OTJDMTQuNDEzOSAxMS42NzgxIDE2IDEwLjUgMTYuMTI1MSA2LjgxMTI2VjIuNTg5ODdDMTYuMTI1MSAyLjU0NzY4IDE2LjEyMjEgMi41MDYxOSAxNi4xMTY0IDIuNDY1NTlWMS43MTQ4NUgxNS4yNDE0TDE1LjIzMDcgMS43MTQ4NEwxNC42MjUxIDEuNjk5MjJWNi44MTEyM0MxNC42MjUxIDguNTEwNjEgMTQuNjI1MSA5LjQ2NDYxIDEyLjc4MjQgMTEuNzIxQzEyLjE1ODYgMTIuNDg0OCAxMC4wMDAxIDEzLjY5OTIgMTAuMDAwMSAxMy42OTkyWiIgZmlsbD0iY3JpbXNvbiIgc3Ryb2tlLXdpZHRoPSIyIi8+CiAgICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTcuMzM2MDkgMC4zNjc0NzVDNy4wMzIxNCAwLjE1MjY1MiA2LjYyNTQ4IDAuMTUzNjE0IDYuMzIyNTMgMC4zNjk5OTdMNi4zMDg2OSAwLjM3OTU1NEM2LjI5NTUzIDAuMzg4NTg4IDYuMjczODggMC40MDMyNjYgNi4yNDQxNyAwLjQyMjc4OUM2LjE4NDcxIDAuNDYxODYgNi4wOTMyMSAwLjUyMDE3MSA1Ljk3MzEzIDAuNTkxMzczQzUuNzMyNTEgMC43MzQwNTkgNS4zNzk5IDAuOTI2ODY0IDQuOTQyNzkgMS4xMjAwOUM0LjA2MTQ0IDEuNTA5NyAyLjg3NTQxIDEuODgzNzcgMS41ODk4NCAxLjg4Mzc3SDAuNzE0ODQ0VjIuNzU4NzdWNi45ODAxNUMwLjcxNDg0NCA5LjQ5Mzc0IDIuMjg4NjYgMTEuMTk3MyAzLjcwMjU0IDEyLjIxODVDNC40MTg0NSAxMi43MzU1IDUuMTI4NzQgMTMuMTA1MyA1LjY1NzMzIDEzLjM0NTdDNS45MjI4NCAxMy40NjY0IDYuMTQ1NjYgMTMuNTU1OSA2LjMwNDY1IDEzLjYxNjFDNi4zODQyMyAxMy42NDYyIDYuNDQ4MDUgMTMuNjY5IDYuNDkzNDkgMTMuNjg0OEM2LjUxNjIyIDEzLjY5MjcgNi41MzQzOCAxMy42OTg5IDYuNTQ3NjQgMTMuNzAzM0w2LjU2MzgyIDEzLjcwODdMNi41NjkwOCAxMy43MTA0TDYuNTcwOTkgMTMuNzExTDYuODM5ODQgMTMuNzUzM0w2LjU3MjQyIDEzLjcxMTVDNi43NDYzMyAxMy43NjczIDYuOTMzMzUgMTMuNzY3MyA3LjEwNzI3IDEzLjcxMTVMNy4xMDg3IDEzLjcxMUw3LjExMDYxIDEzLjcxMDRMNy4xMTU4NyAxMy43MDg3TDcuMTMyMDUgMTMuNzAzM0M3LjE0NTMxIDEzLjY5ODkgNy4xNjM0NiAxMy42OTI3IDcuMTg2MTkgMTMuNjg0OEM3LjIzMTY0IDEzLjY2OSA3LjI5NTQ2IDEzLjY0NjIgNy4zNzUwMyAxMy42MTYxQzcuNTM0MDMgMTMuNTU1OSA3Ljc1Njg1IDEzLjQ2NjQgOC4wMjIzNiAxMy4zNDU3QzguNTUwOTUgMTMuMTA1MyA5LjI2MTIzIDEyLjczNTUgOS45NzcxNSAxMi4yMTg1QzExLjM5MSAxMS4xOTczIDEyLjk2NDggOS40OTM3NyAxMi45NjQ4IDYuOTgwMThWMi43NTg4QzEyLjk2NDggMi43MTY2IDEyLjk2MTkgMi42NzUxMSAxMi45NTYxIDIuNjM0NTFWMS44ODM3N0gxMi4wODExQzEyLjA3NzUgMS44ODM3NyAxMi4wNzQgMS44ODM3NyAxMi4wNzA0IDEuODgzNzdDMTAuNzk3OSAxLjg4MDA0IDkuNjE5NjIgMS41MTEwMiA4LjczODk0IDEuMTI0ODZDOC43MzUzNCAxLjEyMzI3IDguNzMxNzQgMS4xMjE2OCA4LjcyODE0IDEuMTIwMDlDOC4yOTEwMyAwLjkyNjg2NCA3LjkzODQyIDAuNzM0MDU5IDcuNjk3NzkgMC41OTEzNzNDNy41Nzc3MiAwLjUyMDE3MSA3LjQ4NjIyIDAuNDYxODYgNy40MjY3NiAwLjQyMjc4OUM3LjM5NzA1IDAuNDAzMjY2IDcuMzc1MzkgMC4zODg1ODggNy4zNjIyNCAwLjM3OTU1NEw3LjM0ODk2IDAuMzcwMzVDNy4zNDg5NiAwLjM3MDM1IDcuMzQ4NDcgMC4zNzAwMiA3LjM0NTYzIDAuMzc0MDU0TDcuMzM3NzkgMC4zNjg2NTlMNy4zMzYwOSAwLjM2NzQ3NVpNOC4wMzQ3MSAyLjcyNjkxQzguODYwNCAzLjA5MDYzIDkuOTYwNjYgMy40NjMwOSAxMS4yMDYxIDMuNTg5MDdWNi45ODAxNUgxMS4yMTQ4QzExLjIxNDggOC42Nzk1MyAxMC4xNjM3IDkuOTI1MDcgOC45NTI1NCAxMC43OTk4QzguMzU1OTUgMTEuMjMwNiA3Ljc1Mzc0IDExLjU0NTQgNy4yOTc5NiAxMS43NTI3QzcuMTE2NzEgMTEuODM1MSA2Ljk2MDYyIDExLjg5OTYgNi44Mzk4NCAxMS45NDY5QzYuNzE5MDYgMTEuODk5NiA2LjU2Mjk3IDExLjgzNTEgNi4zODE3MyAxMS43NTI3QzUuOTI1OTUgMTEuNTQ1NCA1LjMyMzczIDExLjIzMDYgNC43MjcxNSAxMC43OTk4QzMuNTE2MDMgOS45MjUwNyAyLjQ2NDg0IDguNjc5NTUgMi40NjQ4NCA2Ljk4MDE4VjMuNTg5MDlDMy43MTczOCAzLjQ2MjM5IDQuODIzMDggMy4wODYzOSA1LjY1MDMzIDIuNzIwNzFDNi4xNDIyOCAyLjUwMzI0IDYuNTQ0ODUgMi4yODUzNyA2LjgzMjU0IDIuMTE2MjRDNy4xMjE4MSAyLjI4NTM1IDcuNTI3IDIuNTAzNTIgOC4wMjE5NiAyLjcyMTMxQzguMDI2MiAyLjcyMzE3IDguMDMwNDUgMi43MjUwNCA4LjAzNDcxIDIuNzI2OTFaTTUuOTY0ODQgMy40MDE0N1Y3Ljc3NjQ3SDcuNzE0ODRWMy40MDE0N0g1Ljk2NDg0Wk01Ljk2NDg0IDEwLjQwMTVWOC42NTE0N0g3LjcxNDg0VjEwLjQwMTVINS45NjQ4NFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=");
    background-color: crimson;
}
.ace_icon_svg.ace_warning_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC43NzY5IDE0LjczMzdMOC42NTE5MiAyLjQ4MzY5QzguMzI5NDYgMS44Mzg3NyA3LjQwOTEzIDEuODM4NzcgNy4wODY2NyAyLjQ4MzY5TDAuOTYxNjY5IDE0LjczMzdDMC42NzA3NzUgMTUuMzE1NSAxLjA5MzgzIDE2IDEuNzQ0MjkgMTZIMTMuOTk0M0MxNC42NDQ4IDE2IDE1LjA2NzggMTUuMzE1NSAxNC43NzY5IDE0LjczMzdaTTMuMTYwMDcgMTQuMjVMNy44NjkyOSA0LjgzMTU2TDEyLjU3ODUgMTQuMjVIMy4xNjAwN1pNOC43NDQyOSAxMS42MjVWMTMuMzc1SDYuOTk0MjlWMTEuNjI1SDguNzQ0MjlaTTYuOTk0MjkgMTAuNzVWNy4yNUg4Ljc0NDI5VjEwLjc1SDYuOTk0MjlaIiBmaWxsPSIjRUM3MjExIi8+CjxwYXRoIGQ9Ik0xMS4xOTkxIDIuOTUyMzhDMTAuODgwOSAyLjMxNDY3IDEwLjM1MzcgMS44MDUyNiA5LjcwNTUgMS41MDlMMTEuMDQxIDEuMDY5NzhDMTEuNjg4MyAwLjk0OTgxNCAxMi4zMzcgMS4yNzI2MyAxMi42MzE3IDEuODYxNDFMMTcuNjEzNiAxMS44MTYxQzE4LjM1MjcgMTMuMjkyOSAxNy41OTM4IDE1LjA4MDQgMTYuMDE4IDE1LjU3NDVDMTYuNDA0NCAxNC40NTA3IDE2LjMyMzEgMTMuMjE4OCAxNS43OTI0IDEyLjE1NTVMMTEuMTk5MSAyLjk1MjM4WiIgZmlsbD0iI0VDNzIxMSIvPgo8L3N2Zz4=");
    background-color: darkorange;
}

.ace_scrollbar {
    contain: strict;
    position: absolute;
    right: 0;
    bottom: 0;
    z-index: 6;
}

.ace_scrollbar-inner {
    position: absolute;
    cursor: text;
    left: 0;
    top: 0;
}

.ace_scrollbar-v{
    overflow-x: hidden;
    overflow-y: scroll;
    top: 0;
}

.ace_scrollbar-h {
    overflow-x: scroll;
    overflow-y: hidden;
    left: 0;
}

.ace_print-margin {
    position: absolute;
    height: 100%;
}

.ace_text-input {
    position: absolute;
    z-index: 0;
    width: 0.5em;
    height: 1em;
    opacity: 0;
    background: transparent;
    -moz-appearance: none;
    appearance: none;
    border: none;
    resize: none;
    outline: none;
    overflow: hidden;
    font: inherit;
    padding: 0 1px;
    margin: 0 -1px;
    contain: strict;
    -ms-user-select: text;
    -moz-user-select: text;
    -webkit-user-select: text;
    user-select: text;
    /*with \`pre-line\` chrome inserts &nbsp; instead of space*/
    white-space: pre!important;
}
.ace_text-input.ace_composition {
    background: transparent;
    color: inherit;
    z-index: 1000;
    opacity: 1;
}
.ace_composition_placeholder { color: transparent }
.ace_composition_marker { 
    border-bottom: 1px solid;
    position: absolute;
    border-radius: 0;
    margin-top: 1px;
}

[ace_nocontext=true] {
    transform: none!important;
    filter: none!important;
    clip-path: none!important;
    mask : none!important;
    contain: none!important;
    perspective: none!important;
    mix-blend-mode: initial!important;
    z-index: auto;
}

.ace_layer {
    z-index: 1;
    position: absolute;
    overflow: hidden;
    /* workaround for chrome bug https://github.com/ajaxorg/ace/issues/2312*/
    word-wrap: normal;
    white-space: pre;
    height: 100%;
    width: 100%;
    box-sizing: border-box;
    /* setting pointer-events: auto; on node under the mouse, which changes
        during scroll, will break mouse wheel scrolling in Safari */
    pointer-events: none;
}

.ace_gutter-layer {
    position: relative;
    width: auto;
    text-align: right;
    pointer-events: auto;
    height: 1000000px;
    contain: style size layout;
}

.ace_text-layer {
    font: inherit !important;
    position: absolute;
    height: 1000000px;
    width: 1000000px;
    contain: style size layout;
}

.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {
    contain: style size layout;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
}

.ace_hidpi .ace_text-layer,
.ace_hidpi .ace_gutter-layer,
.ace_hidpi .ace_content,
.ace_hidpi .ace_gutter {
    contain: strict;
}
.ace_hidpi .ace_text-layer > .ace_line, 
.ace_hidpi .ace_text-layer > .ace_line_group {
    contain: strict;
}

.ace_cjk {
    display: inline-block;
    text-align: center;
}

.ace_cursor-layer {
    z-index: 4;
}

.ace_cursor {
    z-index: 4;
    position: absolute;
    box-sizing: border-box;
    border-left: 2px solid;
    /* workaround for smooth cursor repaintng whole screen in chrome */
    transform: translatez(0);
}

.ace_multiselect .ace_cursor {
    border-left-width: 1px;
}

.ace_slim-cursors .ace_cursor {
    border-left-width: 1px;
}

.ace_overwrite-cursors .ace_cursor {
    border-left-width: 0;
    border-bottom: 1px solid;
}

.ace_hidden-cursors .ace_cursor {
    opacity: 0.2;
}

.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {
    opacity: 0;
}

.ace_smooth-blinking .ace_cursor {
    transition: opacity 0.18s;
}

.ace_animate-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: step-end;
    animation-name: blink-ace-animate;
    animation-iteration-count: infinite;
}

.ace_animate-blinking.ace_smooth-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: ease-in-out;
    animation-name: blink-ace-animate-smooth;
}
    
@keyframes blink-ace-animate {
    from, to { opacity: 1; }
    60% { opacity: 0; }
}

@keyframes blink-ace-animate-smooth {
    from, to { opacity: 1; }
    45% { opacity: 1; }
    60% { opacity: 0; }
    85% { opacity: 0; }
}

.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {
    position: absolute;
    z-index: 3;
}

.ace_marker-layer .ace_selection {
    position: absolute;
    z-index: 5;
}

.ace_marker-layer .ace_bracket {
    position: absolute;
    z-index: 6;
}

.ace_marker-layer .ace_error_bracket {
    position: absolute;
    border-bottom: 1px solid #DE5555;
    border-radius: 0;
}

.ace_marker-layer .ace_active-line {
    position: absolute;
    z-index: 2;
}

.ace_marker-layer .ace_selected-word {
    position: absolute;
    z-index: 4;
    box-sizing: border-box;
}

.ace_line .ace_fold {
    box-sizing: border-box;

    display: inline-block;
    height: 11px;
    margin-top: -2px;
    vertical-align: middle;

    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");
    background-repeat: no-repeat, repeat-x;
    background-position: center center, top left;
    color: transparent;

    border: 1px solid black;
    border-radius: 2px;

    cursor: pointer;
    pointer-events: auto;
}

.ace_dark .ace_fold {
}

.ace_fold:hover{
    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");
}

.ace_tooltip {
    background-color: #f5f5f5;
    border: 1px solid gray;
    border-radius: 1px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    color: black;
    max-width: 100%;
    padding: 3px 4px;
    position: fixed;
    z-index: 999999;
    box-sizing: border-box;
    cursor: default;
    white-space: pre-wrap;
    word-wrap: break-word;
    line-height: normal;
    font-style: normal;
    font-weight: normal;
    letter-spacing: normal;
    pointer-events: none;
    overflow: auto;
    max-width: min(60em, 66vw);
    overscroll-behavior: contain;
}
.ace_tooltip pre {
    white-space: pre-wrap;
}

.ace_tooltip.ace_dark {
    background-color: #636363;
    color: #fff;
}

.ace_tooltip:focus {
    outline: 1px solid #5E9ED6;
}

.ace_icon {
    display: inline-block;
    width: 18px;
    vertical-align: top;
}

.ace_icon_svg {
    display: inline-block;
    width: 12px;
    vertical-align: top;
    -webkit-mask-repeat: no-repeat;
    -webkit-mask-size: 12px;
    -webkit-mask-position: center;
}

.ace_folding-enabled > .ace_gutter-cell, .ace_folding-enabled > .ace_gutter-cell_svg-icons {
    padding-right: 13px;
}

.ace_fold-widget {
    box-sizing: border-box;

    margin: 0 -12px 0 1px;
    display: none;
    width: 11px;
    vertical-align: top;

    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: center;

    border-radius: 3px;
    
    border: 1px solid transparent;
    cursor: pointer;
}

.ace_folding-enabled .ace_fold-widget {
    display: inline-block;   
}

.ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");
}

.ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");
}

.ace_fold-widget:hover {
    border: 1px solid rgba(0, 0, 0, 0.3);
    background-color: rgba(255, 255, 255, 0.2);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);
}

.ace_fold-widget:active {
    border: 1px solid rgba(0, 0, 0, 0.4);
    background-color: rgba(0, 0, 0, 0.05);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);
}
/**
 * Dark version for fold widgets
 */
.ace_dark .ace_fold-widget {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");
}
.ace_dark .ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget:hover {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
    background-color: rgba(255, 255, 255, 0.1);
}
.ace_dark .ace_fold-widget:active {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
}

.ace_inline_button {
    border: 1px solid lightgray;
    display: inline-block;
    margin: -1px 8px;
    padding: 0 5px;
    pointer-events: auto;
    cursor: pointer;
}
.ace_inline_button:hover {
    border-color: gray;
    background: rgba(200,200,200,0.2);
    display: inline-block;
    pointer-events: auto;
}

.ace_fold-widget.ace_invalid {
    background-color: #FFB4B4;
    border-color: #DE5555;
}

.ace_fade-fold-widgets .ace_fold-widget {
    transition: opacity 0.4s ease 0.05s;
    opacity: 0;
}

.ace_fade-fold-widgets:hover .ace_fold-widget {
    transition: opacity 0.05s ease 0.05s;
    opacity:1;
}

.ace_underline {
    text-decoration: underline;
}

.ace_bold {
    font-weight: bold;
}

.ace_nobold .ace_bold {
    font-weight: normal;
}

.ace_italic {
    font-style: italic;
}


.ace_error-marker {
    background-color: rgba(255, 0, 0,0.2);
    position: absolute;
    z-index: 9;
}

.ace_highlight-marker {
    background-color: rgba(255, 255, 0,0.2);
    position: absolute;
    z-index: 8;
}

.ace_mobile-menu {
    position: absolute;
    line-height: 1.5;
    border-radius: 4px;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    background: white;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #dcdcdc;
    color: black;
}
.ace_dark > .ace_mobile-menu {
    background: #333;
    color: #ccc;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #444;

}
.ace_mobile-button {
    padding: 2px;
    cursor: pointer;
    overflow: hidden;
}
.ace_mobile-button:hover {
    background-color: #eee;
    opacity:1;
}
.ace_mobile-button:active {
    background-color: #ddd;
}

.ace_placeholder {
    position: relative;
    font-family: arial;
    transform: scale(0.9);
    transform-origin: left;
    white-space: pre;
    opacity: 0.7;
    margin: 0 10px;
    z-index: 1;
}

.ace_ghost_text {
    opacity: 0.5;
    font-style: italic;
}

.ace_ghost_text_container > div {
    white-space: pre;
}

.ghost_text_line_wrapped::after {
    content: "↩";
    position: absolute;
}

.ace_lineWidgetContainer.ace_ghost_text {
    margin: 0px 4px
}

.ace_screenreader-only {
    position:absolute;
    left:-10000px;
    top:auto;
    width:1px;
    height:1px;
    overflow:hidden;
}

.ace_hidden_token {
    display: none;
}`}),ace.define("ace/layer/decorators",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter"],function(n,u,y){var s=n("../lib/dom"),c=n("../lib/oop"),p=n("../lib/event_emitter").EventEmitter,o=function(){function d(e,t){this.canvas=s.createElement("canvas"),this.renderer=t,this.pixelRatio=1,this.maxHeight=t.layerConfig.maxHeight,this.lineHeight=t.layerConfig.lineHeight,this.canvasHeight=e.parent.scrollHeight,this.heightRatio=this.canvasHeight/this.maxHeight,this.canvasWidth=e.width,this.minDecorationHeight=2*this.pixelRatio|0,this.halfMinDecorationHeight=this.minDecorationHeight/2|0,this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.canvas.style.top="0px",this.canvas.style.right="0px",this.canvas.style.zIndex="7px",this.canvas.style.position="absolute",this.colors={},this.colors.dark={error:"rgba(255, 18, 18, 1)",warning:"rgba(18, 136, 18, 1)",info:"rgba(18, 18, 136, 1)"},this.colors.light={error:"rgb(255,51,51)",warning:"rgb(32,133,72)",info:"rgb(35,68,138)"},e.element.appendChild(this.canvas)}return d.prototype.$updateDecorators=function(e){var t=this.renderer.theme.isDark===!0?this.colors.dark:this.colors.light;if(e){this.maxHeight=e.maxHeight,this.lineHeight=e.lineHeight,this.canvasHeight=e.height;var r=(e.lastRow+1)*this.lineHeight;r<this.canvasHeight?this.heightRatio=1:this.heightRatio=this.canvasHeight/this.maxHeight}var l=this.canvas.getContext("2d");function a(I,w){return I.priority<w.priority?-1:I.priority>w.priority?1:0}var h=this.renderer.session.$annotations;if(l.clearRect(0,0,this.canvas.width,this.canvas.height),h){var f={info:1,warning:2,error:3};h.forEach(function(I){I.priority=f[I.type]||null}),h=h.sort(a);for(var v=this.renderer.session.$foldData,b=0;b<h.length;b++){var A=h[b].row,D=this.compensateFoldRows(A,v),E=Math.round((A-D)*this.lineHeight*this.heightRatio),g=Math.round((A-D)*this.lineHeight*this.heightRatio),S=Math.round(((A-D)*this.lineHeight+this.lineHeight)*this.heightRatio),$=S-g;if($<this.minDecorationHeight){var _=(g+S)/2|0;_<this.halfMinDecorationHeight?_=this.halfMinDecorationHeight:_+this.halfMinDecorationHeight>this.canvasHeight&&(_=this.canvasHeight-this.halfMinDecorationHeight),g=Math.round(_-this.halfMinDecorationHeight),S=Math.round(_+this.halfMinDecorationHeight)}l.fillStyle=t[h[b].type]||null,l.fillRect(0,E,this.canvasWidth,S-g)}}var T=this.renderer.session.selection.getCursor();if(T){var D=this.compensateFoldRows(T.row,v),E=Math.round((T.row-D)*this.lineHeight*this.heightRatio);l.fillStyle="rgba(0, 0, 0, 0.5)",l.fillRect(0,E,this.canvasWidth,2)}},d.prototype.compensateFoldRows=function(e,t){var r=0;if(t&&t.length>0)for(var l=0;l<t.length;l++)e>t[l].start.row&&e<t[l].end.row?r+=e-t[l].start.row:e>=t[l].end.row&&(r+=t[l].end.row-t[l].start.row);return r},d}();c.implement(o.prototype,p),u.Decorator=o}),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/scrollbar_custom","ace/scrollbar_custom","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/css/editor-css","ace/layer/decorators","ace/lib/useragent","ace/layer/text_util"],function(n,u,y){var s=n("./lib/oop"),c=n("./lib/dom"),p=n("./lib/lang"),o=n("./config"),d=n("./layer/gutter").Gutter,e=n("./layer/marker").Marker,t=n("./layer/text").Text,r=n("./layer/cursor").Cursor,l=n("./scrollbar").HScrollBar,a=n("./scrollbar").VScrollBar,h=n("./scrollbar_custom").HScrollBar,f=n("./scrollbar_custom").VScrollBar,v=n("./renderloop").RenderLoop,b=n("./layer/font_metrics").FontMetrics,A=n("./lib/event_emitter").EventEmitter,D=n("./css/editor-css"),E=n("./layer/decorators").Decorator,g=n("./lib/useragent"),S=n("./layer/text_util").isTextToken;c.importCssString(D,"ace_editor.css",!1);var $=function(){function _(T,I){var w=this;this.container=T||c.createElement("div"),c.addCssClass(this.container,"ace_editor"),c.HI_DPI&&c.addCssClass(this.container,"ace_hidpi"),this.setTheme(I),o.get("useStrictCSP")==null&&o.set("useStrictCSP",!1),this.$gutter=c.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden","true"),this.scroller=c.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=c.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new d(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new e(this.content);var m=this.$textLayer=new t(this.content);this.canvas=m.element,this.$markerFront=new e(this.content),this.$cursorLayer=new r(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new a(this.container,this),this.scrollBarH=new l(this.container,this),this.scrollBarV.on("scroll",function(C){w.$scrollAnimation||w.session.setScrollTop(C.data-w.scrollMargin.top)}),this.scrollBarH.on("scroll",function(C){w.$scrollAnimation||w.session.setScrollLeft(C.data-w.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new b(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",function(C){w.updateCharacterSize(),w.onResize(!0,w.gutterWidth,w.$size.width,w.$size.height),w._signal("changeCharacterSize",C)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!g.isIOS,this.$loop=new v(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),this.$addResizeObserver(),o.resetOptions(this),o._signal("renderer",this)}return _.prototype.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),c.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},_.prototype.setSession=function(T){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=T,T&&this.scrollMargin.top&&T.getScrollTop()<=0&&T.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(T),this.$markerBack.setSession(T),this.$markerFront.setSession(T),this.$gutterLayer.setSession(T),this.$textLayer.setSession(T),T&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},_.prototype.updateLines=function(T,I,w){if(I===void 0&&(I=1/0),this.$changedLines?(this.$changedLines.firstRow>T&&(this.$changedLines.firstRow=T),this.$changedLines.lastRow<I&&(this.$changedLines.lastRow=I)):this.$changedLines={firstRow:T,lastRow:I},this.$changedLines.lastRow<this.layerConfig.firstRow)if(w)this.$changedLines.lastRow=this.layerConfig.lastRow;else return;this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},_.prototype.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},_.prototype.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},_.prototype.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},_.prototype.updateFull=function(T){T?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},_.prototype.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},_.prototype.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},_.prototype.onResize=function(T,I,w,m){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=T?1:0;var C=this.container;m||(m=C.clientHeight||C.scrollHeight),!m&&this.$maxLines&&this.lineHeight>1&&(!C.style.height||C.style.height=="0px")&&(C.style.height="1px",m=C.clientHeight||C.scrollHeight),w||(w=C.clientWidth||C.scrollWidth);var x=this.$updateCachedSize(T,I,w,m);if(this.$resizeTimer&&this.$resizeTimer.cancel(),!this.$size.scrollerHeight||!w&&!m)return this.resizing=0;T&&(this.$gutterLayer.$padding=null),T?this.$renderChanges(x|this.$changes,!0):this.$loop.schedule(x|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.$customScrollbar&&this.$updateCustomScrollbar(!0)}},_.prototype.$updateCachedSize=function(T,I,w,m){m-=this.$extraHeight||0;var C=0,x=this.$size,M={width:x.width,height:x.height,scrollerHeight:x.scrollerHeight,scrollerWidth:x.scrollerWidth};if(m&&(T||x.height!=m)&&(x.height=m,C|=this.CHANGE_SIZE,x.scrollerHeight=x.height,this.$horizScroll&&(x.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.setHeight(x.scrollerHeight),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",C=C|this.CHANGE_SCROLL),w&&(T||x.width!=w)){C|=this.CHANGE_SIZE,x.width=w,I==null&&(I=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=I,c.setStyle(this.scrollBarH.element.style,"left",I+"px"),c.setStyle(this.scroller.style,"left",I+this.margin.left+"px"),x.scrollerWidth=Math.max(0,w-I-this.scrollBarV.getWidth()-this.margin.h),c.setStyle(this.$gutter.style,"left",this.margin.left+"px");var F=this.scrollBarV.getWidth()+"px";c.setStyle(this.scrollBarH.element.style,"right",F),c.setStyle(this.scroller.style,"right",F),c.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),this.scrollBarH.setWidth(x.scrollerWidth),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||T)&&(C|=this.CHANGE_FULL)}return x.$dirty=!w||!m,C&&this._signal("resize",M),C},_.prototype.onGutterResize=function(T){var I=this.$showGutter?T:0;I!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,I,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},_.prototype.adjustWrapLimit=function(){var T=this.$size.scrollerWidth-this.$padding*2,I=Math.floor(T/this.characterWidth);return this.session.adjustWrapLimit(I,this.$showPrintMargin&&this.$printMarginColumn)},_.prototype.setAnimatedScroll=function(T){this.setOption("animatedScroll",T)},_.prototype.getAnimatedScroll=function(){return this.$animatedScroll},_.prototype.setShowInvisibles=function(T){this.setOption("showInvisibles",T),this.session.$bidiHandler.setShowInvisibles(T)},_.prototype.getShowInvisibles=function(){return this.getOption("showInvisibles")},_.prototype.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},_.prototype.setDisplayIndentGuides=function(T){this.setOption("displayIndentGuides",T)},_.prototype.getHighlightIndentGuides=function(){return this.getOption("highlightIndentGuides")},_.prototype.setHighlightIndentGuides=function(T){this.setOption("highlightIndentGuides",T)},_.prototype.setShowPrintMargin=function(T){this.setOption("showPrintMargin",T)},_.prototype.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},_.prototype.setPrintMarginColumn=function(T){this.setOption("printMarginColumn",T)},_.prototype.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},_.prototype.getShowGutter=function(){return this.getOption("showGutter")},_.prototype.setShowGutter=function(T){return this.setOption("showGutter",T)},_.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},_.prototype.setFadeFoldWidgets=function(T){this.setOption("fadeFoldWidgets",T)},_.prototype.setHighlightGutterLine=function(T){this.setOption("highlightGutterLine",T)},_.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},_.prototype.$updatePrintMargin=function(){if(!(!this.$showPrintMargin&&!this.$printMarginEl)){if(!this.$printMarginEl){var T=c.createElement("div");T.className="ace_layer ace_print-margin-layer",this.$printMarginEl=c.createElement("div"),this.$printMarginEl.className="ace_print-margin",T.appendChild(this.$printMarginEl),this.content.insertBefore(T,this.content.firstChild)}var I=this.$printMarginEl.style;I.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",I.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()}},_.prototype.getContainerElement=function(){return this.container},_.prototype.getMouseEventTarget=function(){return this.scroller},_.prototype.getTextAreaContainer=function(){return this.container},_.prototype.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var T=this.textarea.style,I=this.$composition;if(!this.$keepTextAreaAtCursor&&!I){c.translate(this.textarea,-100,0);return}var w=this.$cursorLayer.$pixelPos;if(w){I&&I.markerRange&&(w=this.$cursorLayer.getPixelPosition(I.markerRange.start,!0));var m=this.layerConfig,C=w.top,x=w.left;C-=m.offset;var M=I&&I.useTextareaForIME||g.isMobile?this.lineHeight:1;if(C<0||C>m.height-M){c.translate(this.textarea,0,0);return}var F=1,R=this.$size.height-M;if(!I)C+=this.lineHeight;else if(I.useTextareaForIME){var N=this.textarea.value;F=this.characterWidth*this.session.$getStringScreenWidth(N)[0]}else C+=this.lineHeight+2;x-=this.scrollLeft,x>this.$size.scrollerWidth-F&&(x=this.$size.scrollerWidth-F),x+=this.gutterWidth+this.margin.left,c.setStyle(T,"height",M+"px"),c.setStyle(T,"width",F+"px"),c.translate(this.textarea,Math.min(x,this.$size.scrollerWidth-F),Math.min(C,R))}}},_.prototype.getFirstVisibleRow=function(){return this.layerConfig.firstRow},_.prototype.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},_.prototype.getLastFullyVisibleRow=function(){var T=this.layerConfig,I=T.lastRow,w=this.session.documentToScreenRow(I,0)*T.lineHeight;return w-this.session.getScrollTop()>T.height-T.lineHeight?I-1:I},_.prototype.getLastVisibleRow=function(){return this.layerConfig.lastRow},_.prototype.setPadding=function(T){this.$padding=T,this.$textLayer.setPadding(T),this.$cursorLayer.setPadding(T),this.$markerFront.setPadding(T),this.$markerBack.setPadding(T),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},_.prototype.setScrollMargin=function(T,I,w,m){var C=this.scrollMargin;C.top=T|0,C.bottom=I|0,C.right=m|0,C.left=w|0,C.v=C.top+C.bottom,C.h=C.left+C.right,C.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-C.top),this.updateFull()},_.prototype.setMargin=function(T,I,w,m){var C=this.margin;C.top=T|0,C.bottom=I|0,C.right=m|0,C.left=w|0,C.v=C.top+C.bottom,C.h=C.left+C.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},_.prototype.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},_.prototype.setHScrollBarAlwaysVisible=function(T){this.setOption("hScrollBarAlwaysVisible",T)},_.prototype.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},_.prototype.setVScrollBarAlwaysVisible=function(T){this.setOption("vScrollBarAlwaysVisible",T)},_.prototype.$updateScrollBarV=function(){var T=this.layerConfig.maxHeight,I=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(T-=(I-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>T-I&&(T=this.scrollTop+I,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(T+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},_.prototype.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},_.prototype.freeze=function(){this.$frozen=!0},_.prototype.unfreeze=function(){this.$frozen=!1},_.prototype.$renderChanges=function(T,I){if(this.$changes&&(T|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!T&&!I){this.$changes|=T;return}if(this.$size.$dirty)return this.$changes|=T,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",T),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var w=this.layerConfig;if(T&this.CHANGE_FULL||T&this.CHANGE_SIZE||T&this.CHANGE_TEXT||T&this.CHANGE_LINES||T&this.CHANGE_SCROLL||T&this.CHANGE_H_SCROLL){if(T|=this.$computeLayerConfig()|this.$loop.clear(),w.firstRow!=this.layerConfig.firstRow&&w.firstRowScreen==this.layerConfig.firstRowScreen){var m=this.scrollTop+(w.firstRow-Math.max(this.layerConfig.firstRow,0))*this.lineHeight;m>0&&(this.scrollTop=m,T=T|this.CHANGE_SCROLL,T|=this.$computeLayerConfig()|this.$loop.clear())}w=this.layerConfig,this.$updateScrollBarV(),T&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),c.translate(this.content,-this.scrollLeft,-w.offset);var C=w.width+2*this.$padding+"px",x=w.minHeight+"px";c.setStyle(this.content.style,"width",C),c.setStyle(this.content.style,"height",x)}if(T&this.CHANGE_H_SCROLL&&(c.translate(this.content,-this.scrollLeft,-w.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller ":"ace_scroller ace_scroll-left ",this.enableKeyboardAccessibility&&(this.scroller.className+=this.keyboardFocusClassName)),T&this.CHANGE_FULL){this.$changedLines=null,this.$textLayer.update(w),this.$showGutter&&this.$gutterLayer.update(w),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(w),this.$markerBack.update(w),this.$markerFront.update(w),this.$cursorLayer.update(w),this.$moveTextAreaToCursor(),this._signal("afterRender",T);return}if(T&this.CHANGE_SCROLL){this.$changedLines=null,T&this.CHANGE_TEXT||T&this.CHANGE_LINES?this.$textLayer.update(w):this.$textLayer.scrollLines(w),this.$showGutter&&(T&this.CHANGE_GUTTER||T&this.CHANGE_LINES?this.$gutterLayer.update(w):this.$gutterLayer.scrollLines(w)),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(w),this.$markerBack.update(w),this.$markerFront.update(w),this.$cursorLayer.update(w),this.$moveTextAreaToCursor(),this._signal("afterRender",T);return}T&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(w),this.$showGutter&&this.$gutterLayer.update(w),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(w)):T&this.CHANGE_LINES?((this.$updateLines()||T&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(w),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(w)):T&this.CHANGE_TEXT||T&this.CHANGE_GUTTER?(this.$showGutter&&this.$gutterLayer.update(w),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(w)):T&this.CHANGE_CURSOR&&(this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(w),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(w)),T&this.CHANGE_CURSOR&&(this.$cursorLayer.update(w),this.$moveTextAreaToCursor()),T&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(w),T&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(w),this._signal("afterRender",T)},_.prototype.$autosize=function(){var T=this.session.getScreenLength()*this.lineHeight,I=this.$maxLines*this.lineHeight,w=Math.min(I,Math.max((this.$minLines||1)*this.lineHeight,T))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(w+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&w>this.$maxPixelHeight&&(w=this.$maxPixelHeight);var m=w<=2*this.lineHeight,C=!m&&T>I;if(w!=this.desiredHeight||this.$size.height!=this.desiredHeight||C!=this.$vScroll){C!=this.$vScroll&&(this.$vScroll=C,this.scrollBarV.setVisible(C));var x=this.container.clientWidth;this.container.style.height=w+"px",this.$updateCachedSize(!0,this.$gutterWidth,x,w),this.desiredHeight=w,this._signal("autosize")}},_.prototype.$computeLayerConfig=function(){var T=this.session,I=this.$size,w=I.height<=2*this.lineHeight,m=this.session.getScreenLength(),C=m*this.lineHeight,x=this.$getLongestLine(),M=!w&&(this.$hScrollBarAlwaysVisible||I.scrollerWidth-x-2*this.$padding<0),F=this.$horizScroll!==M;F&&(this.$horizScroll=M,this.scrollBarH.setVisible(M));var R=this.$vScroll;this.$maxLines&&this.lineHeight>1&&(this.$autosize(),w=I.height<=2*this.lineHeight);var N=I.scrollerHeight+this.lineHeight,W=!this.$maxLines&&this.$scrollPastEnd?(I.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;C+=W;var B=this.scrollMargin;this.session.setScrollTop(Math.max(-B.top,Math.min(this.scrollTop,C-I.scrollerHeight+B.bottom))),this.session.setScrollLeft(Math.max(-B.left,Math.min(this.scrollLeft,x+2*this.$padding-I.scrollerWidth+B.right)));var U=!w&&(this.$vScrollBarAlwaysVisible||I.scrollerHeight-C+W<0||this.scrollTop>B.top),P=R!==U;P&&(this.$vScroll=U,this.scrollBarV.setVisible(U));var z=this.scrollTop%this.lineHeight,K=Math.ceil(N/this.lineHeight)-1,V=Math.max(0,Math.round((this.scrollTop-z)/this.lineHeight)),Y=V+K,ee,ne,te=this.lineHeight;V=T.screenToDocumentRow(V,0);var se=T.getFoldLine(V);se&&(V=se.start.row),ee=T.documentToScreenRow(V,0),ne=T.getRowLength(V)*te,Y=Math.min(T.screenToDocumentRow(Y,0),T.getLength()-1),N=I.scrollerHeight+T.getRowLength(Y)*te+ne,z=this.scrollTop-ee*te;var ve=0;return(this.layerConfig.width!=x||F)&&(ve=this.CHANGE_H_SCROLL),(F||P)&&(ve|=this.$updateCachedSize(!0,this.gutterWidth,I.width,I.height),this._signal("scrollbarVisibilityChanged"),P&&(x=this.$getLongestLine())),this.layerConfig={width:x,padding:this.$padding,firstRow:V,firstRowScreen:ee,lastRow:Y,lineHeight:te,characterWidth:this.characterWidth,minHeight:N,maxHeight:C,offset:z,gutterOffset:te?Math.max(0,Math.ceil((z+I.height-I.scrollerHeight)/te)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(x-this.$padding),ve},_.prototype.$updateLines=function(){if(this.$changedLines){var T=this.$changedLines.firstRow,I=this.$changedLines.lastRow;this.$changedLines=null;var w=this.layerConfig;if(!(T>w.lastRow+1)&&!(I<w.firstRow)){if(I===1/0){this.$showGutter&&this.$gutterLayer.update(w),this.$textLayer.update(w);return}return this.$textLayer.updateLines(w,T,I),!0}}},_.prototype.$getLongestLine=function(){var T=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(T+=1),this.$textLayer&&T>this.$textLayer.MAX_LINE_LENGTH&&(T=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(T*this.characterWidth))},_.prototype.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},_.prototype.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},_.prototype.addGutterDecoration=function(T,I){this.$gutterLayer.addGutterDecoration(T,I)},_.prototype.removeGutterDecoration=function(T,I){this.$gutterLayer.removeGutterDecoration(T,I)},_.prototype.updateBreakpoints=function(T){this._rows=T,this.$loop.schedule(this.CHANGE_GUTTER)},_.prototype.setAnnotations=function(T){this.$gutterLayer.setAnnotations(T),this.$loop.schedule(this.CHANGE_GUTTER)},_.prototype.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},_.prototype.hideCursor=function(){this.$cursorLayer.hideCursor()},_.prototype.showCursor=function(){this.$cursorLayer.showCursor()},_.prototype.scrollSelectionIntoView=function(T,I,w){this.scrollCursorIntoView(T,w),this.scrollCursorIntoView(I,w)},_.prototype.scrollCursorIntoView=function(T,I,w){if(this.$size.scrollerHeight!==0){var m=this.$cursorLayer.getPixelPosition(T),C=m.left,x=m.top,M=w&&w.top||0,F=w&&w.bottom||0;this.$scrollAnimation&&(this.$stopAnimation=!0);var R=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;R+M>x?(I&&R+M>x+this.lineHeight&&(x-=I*this.$size.scrollerHeight),x===0&&(x=-this.scrollMargin.top),this.session.setScrollTop(x)):R+this.$size.scrollerHeight-F<x+this.lineHeight&&(I&&R+this.$size.scrollerHeight-F<x-this.lineHeight&&(x+=I*this.$size.scrollerHeight),this.session.setScrollTop(x+this.lineHeight+F-this.$size.scrollerHeight));var N=this.scrollLeft,W=2*this.layerConfig.characterWidth;C-W<N?(C-=W,C<this.$padding+W&&(C=-this.scrollMargin.left),this.session.setScrollLeft(C)):(C+=W,N+this.$size.scrollerWidth<C+this.characterWidth?this.session.setScrollLeft(Math.round(C+this.characterWidth-this.$size.scrollerWidth)):N<=this.$padding&&C-N<this.characterWidth&&this.session.setScrollLeft(0))}},_.prototype.getScrollTop=function(){return this.session.getScrollTop()},_.prototype.getScrollLeft=function(){return this.session.getScrollLeft()},_.prototype.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},_.prototype.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},_.prototype.scrollToRow=function(T){this.session.setScrollTop(T*this.lineHeight)},_.prototype.alignCursor=function(T,I){typeof T=="number"&&(T={row:T,column:0});var w=this.$cursorLayer.getPixelPosition(T),m=this.$size.scrollerHeight-this.lineHeight,C=w.top-m*(I||0);return this.session.setScrollTop(C),C},_.prototype.$calcSteps=function(T,I){var w=0,m=this.STEPS,C=[],x=function(M,F,R){return R*(Math.pow(M-1,3)+1)+F};for(w=0;w<m;++w)C.push(x(w/this.STEPS,T,I-T));return C},_.prototype.scrollToLine=function(T,I,w,m){var C=this.$cursorLayer.getPixelPosition({row:T,column:0}),x=C.top;I&&(x-=this.$size.scrollerHeight/2);var M=this.scrollTop;this.session.setScrollTop(x),w!==!1&&this.animateScrolling(M,m)},_.prototype.animateScrolling=function(T,I){var w=this.scrollTop;if(!this.$animatedScroll)return;var m=this;if(T==w)return;if(this.$scrollAnimation){var C=this.$scrollAnimation.steps;if(C.length&&(T=C[0],T==w))return}var x=m.$calcSteps(T,w);this.$scrollAnimation={from:T,to:w,steps:x},clearInterval(this.$timer),m.session.setScrollTop(x.shift()),m.session.$scrollTop=w;function M(){m.$timer=clearInterval(m.$timer),m.$scrollAnimation=null,m.$stopAnimation=!1,I&&I()}this.$timer=setInterval(function(){if(m.$stopAnimation){M();return}if(!m.session)return clearInterval(m.$timer);x.length?(m.session.setScrollTop(x.shift()),m.session.$scrollTop=w):w!=null?(m.session.$scrollTop=-1,m.session.setScrollTop(w),w=null):M()},10)},_.prototype.scrollToY=function(T){this.scrollTop!==T&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=T)},_.prototype.scrollToX=function(T){this.scrollLeft!==T&&(this.scrollLeft=T),this.$loop.schedule(this.CHANGE_H_SCROLL)},_.prototype.scrollTo=function(T,I){this.session.setScrollTop(I),this.session.setScrollLeft(T)},_.prototype.scrollBy=function(T,I){I&&this.session.setScrollTop(this.session.getScrollTop()+I),T&&this.session.setScrollLeft(this.session.getScrollLeft()+T)},_.prototype.isScrollableBy=function(T,I){if(I<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||I>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||T<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||T>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return!0},_.prototype.pixelToScreenCoordinates=function(T,I){var w;if(this.$hasCssTransforms){w={top:0,left:0};var m=this.$fontMetrics.transformCoordinates([T,I]);T=m[1]-this.gutterWidth-this.margin.left,I=m[0]}else w=this.scroller.getBoundingClientRect();var C=T+this.scrollLeft-w.left-this.$padding,x=C/this.characterWidth,M=Math.floor((I+this.scrollTop-w.top)/this.lineHeight),F=this.$blockCursor?Math.floor(x):Math.round(x);return{row:M,column:F,side:x-F>0?1:-1,offsetX:C}},_.prototype.screenToTextCoordinates=function(T,I){var w;if(this.$hasCssTransforms){w={top:0,left:0};var m=this.$fontMetrics.transformCoordinates([T,I]);T=m[1]-this.gutterWidth-this.margin.left,I=m[0]}else w=this.scroller.getBoundingClientRect();var C=T+this.scrollLeft-w.left-this.$padding,x=C/this.characterWidth,M=this.$blockCursor?Math.floor(x):Math.round(x),F=Math.floor((I+this.scrollTop-w.top)/this.lineHeight);return this.session.screenToDocumentPosition(F,Math.max(M,0),C)},_.prototype.textToScreenCoordinates=function(T,I){var w=this.scroller.getBoundingClientRect(),m=this.session.documentToScreenPosition(T,I),C=this.$padding+(this.session.$bidiHandler.isBidiRow(m.row,T)?this.session.$bidiHandler.getPosLeft(m.column):Math.round(m.column*this.characterWidth)),x=m.row*this.lineHeight;return{pageX:w.left+C-this.scrollLeft,pageY:w.top+x-this.scrollTop}},_.prototype.visualizeFocus=function(){c.addCssClass(this.container,"ace_focus")},_.prototype.visualizeBlur=function(){c.removeCssClass(this.container,"ace_focus")},_.prototype.showComposition=function(T){this.$composition=T,T.cssText||(T.cssText=this.textarea.style.cssText),T.useTextareaForIME==null&&(T.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(c.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):T.markerId=this.session.addMarker(T.markerRange,"ace_composition_marker","text")},_.prototype.setCompositionText=function(T){var I=this.session.selection.cursor;this.addToken(T,"composition_placeholder",I.row,I.column),this.$moveTextAreaToCursor()},_.prototype.hideComposition=function(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),c.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var T=this.session.selection.cursor;this.removeExtraToken(T.row,T.column),this.$composition=null,this.$cursorLayer.element.style.display=""}},_.prototype.setGhostText=function(T,I){var w=this.session.selection.cursor,m=I||{row:w.row,column:w.column};this.removeGhostText();var C=this.$calculateWrappedTextChunks(T,m);this.addToken(C[0].text,"ghost_text",m.row,m.column),this.$ghostText={text:T,position:{row:m.row,column:m.column}};var x=c.createElement("div");if(C.length>1){var M=this.hideTokensAfterPosition(m.row,m.column),F;C.slice(1).forEach(function(P){var z=c.createElement("div"),K=c.createElement("span");K.className="ace_ghost_text",P.wrapped&&(z.className="ghost_text_line_wrapped"),P.text.length===0&&(P.text=" "),K.appendChild(c.createTextNode(P.text)),z.appendChild(K),x.appendChild(z),F=z}),M.forEach(function(P){var z=c.createElement("span");S(P.type)||(z.className="ace_"+P.type.replace(/\./g," ace_")),z.appendChild(c.createTextNode(P.value)),F.appendChild(z)}),this.$ghostTextWidget={el:x,row:m.row,column:m.column,className:"ace_ghost_text_container"},this.session.widgetManager.addLineWidget(this.$ghostTextWidget);var R=this.$cursorLayer.getPixelPosition(m,!0),N=this.container,W=N.getBoundingClientRect().height,B=C.length*this.lineHeight,U=B<W-R.top;if(U)return;B<W?this.scrollBy(0,(C.length-1)*this.lineHeight):this.scrollToRow(m.row)}},_.prototype.$calculateWrappedTextChunks=function(T,I){var w=this.$size.scrollerWidth-this.$padding*2,m=Math.floor(w/this.characterWidth)-2;m=m<=0?60:m;for(var C=T.split(/\r?\n/),x=[],M=0;M<C.length;M++){var F=this.session.$getDisplayTokens(C[M],I.column),R=this.session.$computeWrapSplits(F,m,this.session.$tabSize);if(R.length>0){var N=0;R.push(C[M].length);for(var W=0;W<R.length;W++){var B=C[M].slice(N,R[W]);x.push({text:B,wrapped:!0}),N=R[W]}}else x.push({text:C[M],wrapped:!1})}return x},_.prototype.removeGhostText=function(){if(this.$ghostText){var T=this.$ghostText.position;this.removeExtraToken(T.row,T.column),this.$ghostTextWidget&&(this.session.widgetManager.removeLineWidget(this.$ghostTextWidget),this.$ghostTextWidget=null),this.$ghostText=null}},_.prototype.addToken=function(T,I,w,m){var C=this.session;C.bgTokenizer.lines[w]=null;var x={type:I,value:T},M=C.getTokens(w);if(m==null||!M.length)M.push(x);else for(var F=0,R=0;R<M.length;R++){var N=M[R];if(F+=N.value.length,m<=F){var W=N.value.length-(F-m),B=N.value.slice(0,W),U=N.value.slice(W);M.splice(R,1,{type:N.type,value:B},x,{type:N.type,value:U});break}}this.updateLines(w,w)},_.prototype.hideTokensAfterPosition=function(T,I){for(var w=this.session.getTokens(T),m=0,C=!1,x=[],M=0;M<w.length;M++){var F=w[M];if(m+=F.value.length,F.type!=="ghost_text"){if(C){x.push({type:F.type,value:F.value}),F.type="hidden_token";continue}m===I&&(C=!0)}}return this.updateLines(T,T),x},_.prototype.removeExtraToken=function(T,I){this.session.bgTokenizer.lines[T]=null,this.updateLines(T,T)},_.prototype.setTheme=function(T,I){var w=this;if(this.$themeId=T,w._dispatchEvent("themeChange",{theme:T}),!T||typeof T=="string"){var m=T||this.$options.theme.initialValue;o.loadModule(["theme",m],C)}else C(T);function C(x){if(w.$themeId!=T)return I&&I();if(!x||!x.cssClass)throw new Error("couldn't load module "+T+" or it didn't call define");x.$id&&(w.$themeId=x.$id),c.importCssString(x.cssText,x.cssClass,w.container),w.theme&&c.removeCssClass(w.container,w.theme.cssClass);var M="padding"in x?x.padding:"padding"in(w.theme||{})?4:w.$padding;w.$padding&&M!=w.$padding&&w.setPadding(M),w.$theme=x.cssClass,w.theme=x,c.addCssClass(w.container,x.cssClass),c.setCssClass(w.container,"ace_dark",x.isDark),w.$size&&(w.$size.width=0,w.$updateSizeAsync()),w._dispatchEvent("themeLoaded",{theme:x}),I&&I(),g.isSafari&&w.scroller&&(w.scroller.style.background="red",w.scroller.style.background="")}},_.prototype.getTheme=function(){return this.$themeId},_.prototype.setStyle=function(T,I){c.setCssClass(this.container,T,I!==!1)},_.prototype.unsetStyle=function(T){c.removeCssClass(this.container,T)},_.prototype.setCursorStyle=function(T){c.setStyle(this.scroller.style,"cursor",T)},_.prototype.setMouseCursor=function(T){c.setStyle(this.scroller.style,"cursor",T)},_.prototype.attachToShadowRoot=function(){c.importCssString(D,"ace_editor.css",this.container)},_.prototype.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent="",this.setOption("useResizeObserver",!1)},_.prototype.$updateCustomScrollbar=function(T){var I=this;this.$horizScroll=this.$vScroll=null,this.scrollBarV.element.remove(),this.scrollBarH.element.remove(),this.$scrollDecorator&&delete this.$scrollDecorator,T===!0?(this.scrollBarV=new f(this.container,this),this.scrollBarH=new h(this.container,this),this.scrollBarV.setHeight(this.$size.scrollerHeight),this.scrollBarH.setWidth(this.$size.scrollerWidth),this.scrollBarV.addEventListener("scroll",function(w){I.$scrollAnimation||I.session.setScrollTop(w.data-I.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(w){I.$scrollAnimation||I.session.setScrollLeft(w.data-I.scrollMargin.left)}),this.$scrollDecorator=new E(this.scrollBarV,this),this.$scrollDecorator.$updateDecorators()):(this.scrollBarV=new a(this.container,this),this.scrollBarH=new l(this.container,this),this.scrollBarV.addEventListener("scroll",function(w){I.$scrollAnimation||I.session.setScrollTop(w.data-I.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(w){I.$scrollAnimation||I.session.setScrollLeft(w.data-I.scrollMargin.left)}))},_.prototype.$addResizeObserver=function(){if(!(!window.ResizeObserver||this.$resizeObserver)){var T=this;this.$resizeTimer=p.delayedCall(function(){T.destroyed||T.onResize()},50),this.$resizeObserver=new window.ResizeObserver(function(I){var w=I[0].contentRect.width,m=I[0].contentRect.height;Math.abs(T.$size.width-w)>1||Math.abs(T.$size.height-m)>1?T.$resizeTimer.delay():T.$resizeTimer.cancel()}),this.$resizeObserver.observe(this.container)}},_}();$.prototype.CHANGE_CURSOR=1,$.prototype.CHANGE_MARKER=2,$.prototype.CHANGE_GUTTER=4,$.prototype.CHANGE_SCROLL=8,$.prototype.CHANGE_LINES=16,$.prototype.CHANGE_TEXT=32,$.prototype.CHANGE_SIZE=64,$.prototype.CHANGE_MARKER_BACK=128,$.prototype.CHANGE_MARKER_FRONT=256,$.prototype.CHANGE_FULL=512,$.prototype.CHANGE_H_SCROLL=1024,$.prototype.$changes=0,$.prototype.$padding=null,$.prototype.$frozen=!1,$.prototype.STEPS=8,s.implement($.prototype,A),o.defineOptions($.prototype,"renderer",{useResizeObserver:{set:function(_){!_&&this.$resizeObserver?(this.$resizeObserver.disconnect(),this.$resizeTimer.cancel(),this.$resizeTimer=this.$resizeObserver=null):_&&!this.$resizeObserver&&this.$addResizeObserver()}},animatedScroll:{initialValue:!1},showInvisibles:{set:function(_){this.$textLayer.setShowInvisibles(_)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(_){typeof _=="number"&&(this.$printMarginColumn=_),this.$showPrintMargin=!!_,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(_){this.$gutter.style.display=_?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},useSvgGutterIcons:{set:function(_){this.$gutterLayer.$useSvgGutterIcons=_},initialValue:!1},showFoldedAnnotations:{set:function(_){this.$gutterLayer.$showFoldedAnnotations=_},initialValue:!1},fadeFoldWidgets:{set:function(_){c.setCssClass(this.$gutter,"ace_fade-fold-widgets",_)},initialValue:!1},showFoldWidgets:{set:function(_){this.$gutterLayer.setShowFoldWidgets(_),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(_){this.$textLayer.setDisplayIndentGuides(_)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightIndentGuides:{set:function(_){this.$textLayer.setHighlightIndentGuides(_)==!0?this.$textLayer.$highlightIndentGuide():this.$textLayer.$clearActiveIndentGuide(this.$textLayer.$lines.cells)},initialValue:!0},highlightGutterLine:{set:function(_){this.$gutterLayer.setHighlightGutterLine(_),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(_){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(_){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(_){typeof _=="number"&&(_=_+"px"),this.container.style.fontSize=_,this.updateFontSize()},initialValue:12},fontFamily:{set:function(_){this.container.style.fontFamily=_,this.updateFontSize()}},maxLines:{set:function(_){this.updateFull()}},minLines:{set:function(_){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(_){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(_){_=+_||0,this.$scrollPastEnd!=_&&(this.$scrollPastEnd=_,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(_){this.$gutterLayer.$fixedWidth=!!_,this.$loop.schedule(this.CHANGE_GUTTER)}},customScrollbar:{set:function(_){this.$updateCustomScrollbar(_)},initialValue:!1},theme:{set:function(_){this.setTheme(_)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!g.isMobile&&!g.isIE}}),u.VirtualRenderer=$}),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(n,u,y){var s=n("../lib/oop"),c=n("../lib/net"),p=n("../lib/event_emitter").EventEmitter,o=n("../config");function d(l){var a="importScripts('"+c.qualifyURL(l)+"');";try{return new Blob([a],{type:"application/javascript"})}catch{var h=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,f=new h;return f.append(a),f.getBlob("application/javascript")}}function e(l){if(typeof Worker>"u")return{postMessage:function(){},terminate:function(){}};if(o.get("loadWorkerFromBlob")){var a=d(l),h=window.URL||window.webkitURL,f=h.createObjectURL(a);return new Worker(f)}return new Worker(l)}var t=function(l){l.postMessage||(l=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=l,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){s.implement(this,p),this.$createWorkerFromOldConfig=function(l,a,h,f,v){if(n.nameToUrl&&!n.toUrl&&(n.toUrl=n.nameToUrl),o.get("packaged")||!n.toUrl)f=f||o.moduleUrl(a,"worker");else{var b=this.$normalizePath;f=f||b(n.toUrl("ace/worker/worker.js",null,"_"));var A={};l.forEach(function(D){A[D]=b(n.toUrl(D,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}return this.$worker=e(f),v&&this.send("importScripts",v),this.$worker.postMessage({init:!0,tlns:A,module:a,classname:h}),this.$worker},this.onMessage=function(l){var a=l.data;switch(a.type){case"event":this._signal(a.name,{data:a.data});break;case"call":var h=this.callbacks[a.id];h&&(h(a.data),delete this.callbacks[a.id]);break;case"error":this.reportError(a.data);break;case"log":window.console&&console.log&&console.log.apply(console,a.data);break}},this.reportError=function(l){window.console&&console.error&&console.error(l)},this.$normalizePath=function(l){return c.qualifyURL(l)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker.onerror=function(l){l.preventDefault()},this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(l,a){this.$worker.postMessage({command:l,args:a})},this.call=function(l,a,h){if(h){var f=this.callbackId++;this.callbacks[f]=h,a.push(f)}this.send(l,a)},this.emit=function(l,a){try{a.data&&a.data.err&&(a.data.err={message:a.data.err.message,stack:a.data.err.stack,code:a.data.err.code}),this.$worker&&this.$worker.postMessage({event:l,data:{data:a.data}})}catch(h){console.error(h.stack)}},this.attachToDocument=function(l){this.$doc&&this.terminate(),this.$doc=l,this.call("setValue",[l.getValue()]),l.on("change",this.changeListener,!0)},this.changeListener=function(l){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),l.action=="insert"?this.deltaQueue.push(l.start,l.lines):this.deltaQueue.push(l.start,l.end)},this.$sendDeltaQueue=function(){var l=this.deltaQueue;l&&(this.deltaQueue=null,l.length>50&&l.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:l}))}}).call(t.prototype);var r=function(l,a,h){var f=null,v=!1,b=Object.create(p),A=[],D=new t({messageBuffer:A,terminate:function(){},postMessage:function(g){A.push(g),f&&(v?setTimeout(E):E())}});D.setEmitSync=function(g){v=g};var E=function(){var g=A.shift();g.command?f[g.command].apply(f,g.args):g.event&&b._signal(g.event,g.data)};return b.postMessage=function(g){D.onMessage({data:g})},b.callback=function(g,S){this.postMessage({type:"call",id:S,data:g})},b.emit=function(g,S){this.postMessage({type:"event",name:g,data:S})},o.loadModule(["worker",a],function(g){for(f=new g[h](b);A.length;)E()}),D};u.UIWorkerClient=r,u.WorkerClient=t,u.createWorker=e}),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(n,u,y){var s=n("./range").Range,c=n("./lib/event_emitter").EventEmitter,p=n("./lib/oop"),o=function(){function d(e,t,r,l,a,h){var f=this;this.length=t,this.session=e,this.doc=e.getDocument(),this.mainClass=a,this.othersClass=h,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate,!0),this.$others=l,this.$onCursorChange=function(){setTimeout(function(){f.onCursorChange()})},this.$pos=r;var v=e.getUndoManager().$undoStack||e.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=v.length,this.setup(),e.selection.on("changeCursor",this.$onCursorChange)}return d.prototype.setup=function(){var e=this,t=this.doc,r=this.session;this.selectionBefore=r.selection.toJSON(),r.selection.inMultiSelectMode&&r.selection.toSingleRange(),this.pos=t.createAnchor(this.$pos.row,this.$pos.column);var l=this.pos;l.$insertRight=!0,l.detach(),l.markerId=r.addMarker(new s(l.row,l.column,l.row,l.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(a){var h=t.createAnchor(a.row,a.column);h.$insertRight=!0,h.detach(),e.others.push(h)}),r.setUndoSelect(!1)},d.prototype.showOtherMarkers=function(){if(!this.othersActive){var e=this.session,t=this;this.othersActive=!0,this.others.forEach(function(r){r.markerId=e.addMarker(new s(r.row,r.column,r.row,r.column+t.length),t.othersClass,null,!1)})}},d.prototype.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var e=0;e<this.others.length;e++)this.session.removeMarker(this.others[e].markerId)}},d.prototype.onUpdate=function(e){if(this.$updating)return this.updateAnchors(e);var t=e;if(t.start.row===t.end.row&&t.start.row===this.pos.row){this.$updating=!0;var r=e.action==="insert"?t.end.column-t.start.column:t.start.column-t.end.column,l=t.start.column>=this.pos.column&&t.start.column<=this.pos.column+this.length+1,a=t.start.column-this.pos.column;if(this.updateAnchors(e),l&&(this.length+=r),l&&!this.session.$fromUndo){if(e.action==="insert")for(var h=this.others.length-1;h>=0;h--){var f=this.others[h],v={row:f.row,column:f.column+a};this.doc.insertMergedLines(v,e.lines)}else if(e.action==="remove")for(var h=this.others.length-1;h>=0;h--){var f=this.others[h],v={row:f.row,column:f.column+a};this.doc.remove(new s(v.row,v.column,v.row,v.column-r))}}this.$updating=!1,this.updateMarkers()}},d.prototype.updateAnchors=function(e){this.pos.onChange(e);for(var t=this.others.length;t--;)this.others[t].onChange(e);this.updateMarkers()},d.prototype.updateMarkers=function(){if(!this.$updating){var e=this,t=this.session,r=function(a,h){t.removeMarker(a.markerId),a.markerId=t.addMarker(new s(a.row,a.column,a.row,a.column+e.length),h,null,!1)};r(this.pos,this.mainClass);for(var l=this.others.length;l--;)r(this.others[l],this.othersClass)}},d.prototype.onCursorChange=function(e){if(!(this.$updating||!this.session)){var t=this.session.selection.getCursor();t.row===this.pos.row&&t.column>=this.pos.column&&t.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",e)):(this.hideOtherMarkers(),this._emit("cursorLeave",e))}},d.prototype.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},d.prototype.cancel=function(){if(this.$undoStackDepth!==-1){for(var e=this.session.getUndoManager(),t=(e.$undoStack||e.$undostack).length-this.$undoStackDepth,r=0;r<t;r++)e.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}},d}();p.implement(o.prototype,c),u.PlaceHolder=o}),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(n,u,y){var s=n("../lib/event"),c=n("../lib/useragent");function p(d,e){return d.row==e.row&&d.column==e.column}function o(d){var e=d.domEvent,t=e.altKey,r=e.shiftKey,l=e.ctrlKey,a=d.getAccelKey(),h=d.getButton();if(l&&c.isMac&&(h=e.button),d.editor.inMultiSelectMode&&h==2){d.editor.textInput.onContextMenu(d.domEvent);return}if(!l&&!t&&!a){h===0&&d.editor.inMultiSelectMode&&d.editor.exitMultiSelectMode();return}if(h===0){var f=d.editor,v=f.selection,b=f.inMultiSelectMode,A=d.getDocumentPosition(),D=v.getCursor(),E=d.inSelection()||v.isEmpty()&&p(A,D),g=d.x,S=d.y,$=function(B){g=B.clientX,S=B.clientY},_=f.session,T=f.renderer.pixelToScreenCoordinates(g,S),I=T,w;if(f.$mouseHandler.$enableJumpToDef)l&&t||a&&t?w=r?"block":"add":t&&f.$blockSelectEnabled&&(w="block");else if(a&&!t){if(w="add",!b&&r)return}else t&&f.$blockSelectEnabled&&(w="block");if(w&&c.isMac&&e.ctrlKey&&f.$mouseHandler.cancelContextMenu(),w=="add"){if(!b&&E)return;if(!b){var m=v.toOrientedRange();f.addSelectionMarker(m)}var C=v.rangeList.rangeAtPoint(A);f.inVirtualSelectionMode=!0,r&&(C=null,m=v.ranges[0]||m,f.removeSelectionMarker(m)),f.once("mouseup",function(){var B=v.toOrientedRange();C&&B.isEmpty()&&p(C.cursor,B.cursor)?v.substractPoint(B.cursor):(r?v.substractPoint(m.cursor):m&&(f.removeSelectionMarker(m),v.addRange(m)),v.addRange(B)),f.inVirtualSelectionMode=!1})}else if(w=="block"){d.stop(),f.inVirtualSelectionMode=!0;var x,M=[],F=function(){var B=f.renderer.pixelToScreenCoordinates(g,S),U=_.screenToDocumentPosition(B.row,B.column,B.offsetX);p(I,B)&&p(U,v.lead)||(I=B,f.selection.moveToPosition(U),f.renderer.scrollCursorIntoView(),f.removeSelectionMarkers(M),M=v.rectangularRangeBlock(I,T),f.$mouseHandler.$clickSelection&&M.length==1&&M[0].isEmpty()&&(M[0]=f.$mouseHandler.$clickSelection.clone()),M.forEach(f.addSelectionMarker,f),f.updateSelectionMarkers())};b&&!a?v.toSingleRange():!b&&a&&(x=v.toOrientedRange(),f.addSelectionMarker(x)),r?T=_.documentToScreenPosition(v.lead):v.moveToPosition(A),I={row:-1,column:-1};var R=function(B){F(),clearInterval(W),f.removeSelectionMarkers(M),M.length||(M=[v.toOrientedRange()]),x&&(f.removeSelectionMarker(x),v.toSingleRange(x));for(var U=0;U<M.length;U++)v.addRange(M[U]);f.inVirtualSelectionMode=!1,f.$mouseHandler.$clickSelection=null},N=F;s.capture(f.container,$,R);var W=setInterval(function(){N()},20);return d.preventDefault()}}}u.onMouseDown=o}),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(n,u,y){u.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(c){c.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(c){c.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(c){c.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(c){c.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(c){c.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(c){c.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(c){c.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(c){c.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split selection into lines",exec:function(c){c.multiSelect.rangeCount>1?c.multiSelect.joinSelections():c.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(c){c.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(c){c.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(c){c.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],u.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(c){c.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(c){return c&&c.inMultiSelectMode}}];var s=n("../keyboard/hash_handler").HashHandler;u.keyboardHandler=new s(u.multiSelectCommands)}),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(n,u,y){var s=n("./range_list").RangeList,c=n("./range").Range,p=n("./selection").Selection,o=n("./mouse/multi_select_handler").onMouseDown,d=n("./lib/event"),e=n("./lib/lang"),t=n("./commands/multi_select_commands");u.commands=t.defaultCommands.concat(t.multiSelectCommands);var r=n("./search").Search,l=new r;function a(D,E,g){return l.$options.wrap=!0,l.$options.needle=E,l.$options.backwards=g==-1,l.find(D)}var h=n("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(h.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(D,E){if(D){if(!this.inMultiSelectMode&&this.rangeCount===0){var g=this.toOrientedRange();if(this.rangeList.add(g),this.rangeList.add(D),this.rangeList.ranges.length!=2)return this.rangeList.removeAll(),E||this.fromOrientedRange(D);this.rangeList.removeAll(),this.rangeList.add(g),this.$onAddRange(g)}D.cursor||(D.cursor=D.end);var S=this.rangeList.add(D);return this.$onAddRange(D),S.length&&this.$onRemoveRange(S),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),E||this.fromOrientedRange(D)}},this.toSingleRange=function(D){D=D||this.ranges[0];var E=this.rangeList.removeAll();E.length&&this.$onRemoveRange(E),D&&this.fromOrientedRange(D)},this.substractPoint=function(D){var E=this.rangeList.substractPoint(D);if(E)return this.$onRemoveRange(E),E[0]},this.mergeOverlappingRanges=function(){var D=this.rangeList.merge();D.length&&this.$onRemoveRange(D)},this.$onAddRange=function(D){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(D),this._signal("addRange",{range:D})},this.$onRemoveRange=function(D){if(this.rangeCount=this.rangeList.ranges.length,this.rangeCount==1&&this.inMultiSelectMode){var E=this.rangeList.ranges.pop();D.push(E),this.rangeCount=0}for(var g=D.length;g--;){var S=this.ranges.indexOf(D[g]);this.ranges.splice(S,1)}this._signal("removeRange",{ranges:D}),this.rangeCount===0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),E=E||this.ranges[0],E&&!E.isEqual(this.getRange())&&this.fromOrientedRange(E)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new s,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var D=this.ranges.length?this.ranges:[this.getRange()],E=[],g=0;g<D.length;g++){var S=D[g],$=S.start.row,_=S.end.row;if($===_)E.push(S.clone());else{for(E.push(new c($,S.start.column,$,this.session.getLine($).length));++$<_;)E.push(this.getLineRange($,!0));E.push(new c(_,0,_,S.end.column))}g==0&&!this.isBackwards()&&(E=E.reverse())}this.toSingleRange();for(var g=E.length;g--;)this.addRange(E[g])},this.joinSelections=function(){var D=this.rangeList.ranges,E=D[D.length-1],g=c.fromPoints(D[0].start,E.end);this.toSingleRange(),this.setSelectionRange(g,E.cursor==E.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var D=this.rangeList.ranges,E=D[D.length-1],g=c.fromPoints(D[0].start,E.end);this.toSingleRange(),this.setSelectionRange(g,E.cursor==E.start)}else{var S=this.session.documentToScreenPosition(this.cursor),$=this.session.documentToScreenPosition(this.anchor),_=this.rectangularRangeBlock(S,$);_.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(D,E,g){var S=[],$=D.column<E.column;if($)var _=D.column,T=E.column,I=D.offsetX,w=E.offsetX;else var _=E.column,T=D.column,I=E.offsetX,w=D.offsetX;var m=D.row<E.row;if(m)var C=D.row,x=E.row;else var C=E.row,x=D.row;_<0&&(_=0),C<0&&(C=0),C==x&&(g=!0);for(var M,F=C;F<=x;F++){var R=c.fromPoints(this.session.screenToDocumentPosition(F,_,I),this.session.screenToDocumentPosition(F,T,w));if(R.isEmpty()){if(M&&v(R.end,M))break;M=R.end}R.cursor=$?R.start:R.end,S.push(R)}if(m&&S.reverse(),!g){for(var N=S.length-1;S[N].isEmpty()&&N>0;)N--;if(N>0)for(var W=0;S[W].isEmpty();)W++;for(var B=N;B>=W;B--)S[B].isEmpty()&&S.splice(B,1)}return S}}.call(p.prototype);var f=n("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(D){D.cursor||(D.cursor=D.end);var E=this.getSelectionStyle();return D.marker=this.session.addMarker(D,"ace_selection",E),this.session.$selectionMarkers.push(D),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,D},this.removeSelectionMarker=function(D){if(D.marker){this.session.removeMarker(D.marker);var E=this.session.$selectionMarkers.indexOf(D);E!=-1&&this.session.$selectionMarkers.splice(E,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(D){for(var E=this.session.$selectionMarkers,g=D.length;g--;){var S=D[g];if(S.marker){this.session.removeMarker(S.marker);var $=E.indexOf(S);$!=-1&&E.splice($,1)}}this.session.selectionMarkerCount=E.length},this.$onAddRange=function(D){this.addSelectionMarker(D.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(D){this.removeSelectionMarkers(D.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(D){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(t.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(D){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(t.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(D){var E=D.command,g=D.editor;if(g.multiSelect){if(E.multiSelectAction)E.multiSelectAction=="forEach"?S=g.forEachSelection(E,D.args):E.multiSelectAction=="forEachLine"?S=g.forEachSelection(E,D.args,!0):E.multiSelectAction=="single"?(g.exitMultiSelectMode(),S=E.exec(g,D.args||{})):S=E.multiSelectAction(g,D.args||{});else{var S=E.exec(g,D.args||{});g.multiSelect.addRange(g.multiSelect.toOrientedRange()),g.multiSelect.mergeOverlappingRanges()}return S}},this.forEachSelection=function(D,E,g){if(!this.inVirtualSelectionMode){var S=g&&g.keepOrder,$=g==!0||g&&g.$byLines,_=this.session,T=this.selection,I=T.rangeList,w=(S?T:I).ranges,m;if(!w.length)return D.exec?D.exec(this,E||{}):D(this,E||{});var C=T._eventRegistry;T._eventRegistry={};var x=new p(_);this.inVirtualSelectionMode=!0;for(var M=w.length;M--;){if($)for(;M>0&&w[M].start.row==w[M-1].end.row;)M--;x.fromOrientedRange(w[M]),x.index=M,this.selection=_.selection=x;var F=D.exec?D.exec(this,E||{}):D(this,E||{});!m&&F!==void 0&&(m=F),x.toOrientedRange(w[M])}x.detach(),this.selection=_.selection=T,this.inVirtualSelectionMode=!1,T._eventRegistry=C,T.mergeOverlappingRanges(),T.ranges[0]&&T.fromOrientedRange(T.ranges[0]);var R=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),R&&R.from==R.to&&this.renderer.animateScrolling(R.from),m}},this.exitMultiSelectMode=function(){!this.inMultiSelectMode||this.inVirtualSelectionMode||this.multiSelect.toSingleRange()},this.getSelectedText=function(){var D="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var E=this.multiSelect.rangeList.ranges,g=[],S=0;S<E.length;S++)g.push(this.session.getTextRange(E[S]));var $=this.session.getDocument().getNewLineCharacter();D=g.join($),D.length==(g.length-1)*$.length&&(D="")}else this.selection.isEmpty()||(D=this.session.getTextRange(this.getSelectionRange()));return D},this.$checkMultiselectChange=function(D,E){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var g=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&E==this.multiSelect.anchor)return;var S=E==this.multiSelect.anchor?g.cursor==g.start?g.end:g.start:g.cursor;S.row!=E.row||this.session.$clipPositionToDocument(S.row,S.column).column!=E.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(D,E,g){if(E=E||{},E.needle=D||E.needle,E.needle==null){var S=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();E.needle=this.session.getTextRange(S)}this.$search.set(E);var $=this.$search.findAll(this.session);if(!$.length)return 0;var _=this.multiSelect;g||_.toSingleRange($[0]);for(var T=$.length;T--;)_.addRange($[T],!0);return S&&_.rangeList.rangeAtPoint(S.start)&&_.addRange(S,!0),$.length},this.selectMoreLines=function(D,E){var g=this.selection.toOrientedRange(),S=g.cursor==g.end,$=this.session.documentToScreenPosition(g.cursor);this.selection.$desiredColumn&&($.column=this.selection.$desiredColumn);var _=this.session.screenToDocumentPosition($.row+D,$.column);if(g.isEmpty())var I=_;else var T=this.session.documentToScreenPosition(S?g.end:g.start),I=this.session.screenToDocumentPosition(T.row+D,T.column);if(S){var w=c.fromPoints(_,I);w.cursor=w.start}else{var w=c.fromPoints(I,_);w.cursor=w.end}if(w.desiredColumn=$.column,!this.selection.inMultiSelectMode)this.selection.addRange(g);else if(E)var m=g.cursor;this.selection.addRange(w),m&&this.selection.substractPoint(m)},this.transposeSelections=function(D){for(var E=this.session,g=E.multiSelect,S=g.ranges,$=S.length;$--;){var _=S[$];if(_.isEmpty()){var T=E.getWordRange(_.start.row,_.start.column);_.start.row=T.start.row,_.start.column=T.start.column,_.end.row=T.end.row,_.end.column=T.end.column}}g.mergeOverlappingRanges();for(var I=[],$=S.length;$--;){var _=S[$];I.unshift(E.getTextRange(_))}D<0?I.unshift(I.pop()):I.push(I.shift());for(var $=S.length;$--;){var _=S[$],w=_.clone();E.replace(_,I[$]),_.start.row=w.start.row,_.start.column=w.start.column}g.fromOrientedRange(g.ranges[0])},this.selectMore=function(D,E,g){var S=this.session,$=S.multiSelect,_=$.toOrientedRange();if(!(_.isEmpty()&&(_=S.getWordRange(_.start.row,_.start.column),_.cursor=D==-1?_.start:_.end,this.multiSelect.addRange(_),g))){var T=S.getTextRange(_),I=a(S,T,D);I&&(I.cursor=D==-1?I.start:I.end,this.session.unfold(I),this.multiSelect.addRange(I),this.renderer.scrollCursorIntoView(null,.5)),E&&this.multiSelect.substractPoint(_.cursor)}},this.alignCursors=function(){var D=this.session,E=D.multiSelect,g=E.ranges,S=-1,$=g.filter(function(N){if(N.cursor.row==S)return!0;S=N.cursor.row});if(!g.length||$.length==g.length-1){var _=this.selection.getRange(),T=_.start.row,I=_.end.row,w=T==I;if(w){var m=this.session.getLength(),C;do C=this.session.getLine(I);while(/[=:]/.test(C)&&++I<m);do C=this.session.getLine(T);while(/[=:]/.test(C)&&--T>0);T<0&&(T=0),I>=m&&(I=m-1)}var x=this.session.removeFullLines(T,I);x=this.$reAlignText(x,w),this.session.insert({row:T,column:0},x.join(`
`)+`
`),w||(_.start.column=0,_.end.column=x[x.length-1].length),this.selection.setRange(_)}else{$.forEach(function(N){E.substractPoint(N.cursor)});var M=0,F=1/0,R=g.map(function(N){var W=N.cursor,B=D.getLine(W.row),U=B.substr(W.column).search(/\S/g);return U==-1&&(U=0),W.column>M&&(M=W.column),U<F&&(F=U),U});g.forEach(function(N,W){var B=N.cursor,U=M-B.column,P=R[W]-F;U>P?D.insert(B,e.stringRepeat(" ",U-P)):D.remove(new c(B.row,B.column,B.row,B.column-U+P)),N.start.column=N.end.column=M,N.start.row=N.end.row=B.row,N.cursor=N.end}),E.fromOrientedRange(g[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}},this.$reAlignText=function(D,E){var g=!0,S=!0,$,_,T;return D.map(function(x){var M=x.match(/(\s*)(.*?)(\s*)([=:].*)/);return M?$==null?($=M[1].length,_=M[2].length,T=M[3].length,M):($+_+T!=M[1].length+M[2].length+M[3].length&&(S=!1),$!=M[1].length&&(g=!1),$>M[1].length&&($=M[1].length),_<M[2].length&&(_=M[2].length),T>M[3].length&&(T=M[3].length),M):[x]}).map(E?w:g?S?m:w:C);function I(x){return e.stringRepeat(" ",x)}function w(x){return x[2]?I($)+x[2]+I(_-x[2].length+T)+x[4].replace(/^([=:])\s+/,"$1 "):x[0]}function m(x){return x[2]?I($+_-x[2].length)+x[2]+I(T)+x[4].replace(/^([=:])\s+/,"$1 "):x[0]}function C(x){return x[2]?I($)+x[2]+I(T)+x[4].replace(/^([=:])\s+/,"$1 "):x[0]}}}).call(f.prototype);function v(D,E){return D.row==E.row&&D.column==E.column}u.onSessionChange=function(D){var E=D.session;E&&!E.multiSelect&&(E.$selectionMarkers=[],E.selection.$initRangeList(),E.multiSelect=E.selection),this.multiSelect=E&&E.multiSelect;var g=D.oldSession;g&&(g.multiSelect.off("addRange",this.$onAddRange),g.multiSelect.off("removeRange",this.$onRemoveRange),g.multiSelect.off("multiSelect",this.$onMultiSelect),g.multiSelect.off("singleSelect",this.$onSingleSelect),g.multiSelect.lead.off("change",this.$checkMultiselectChange),g.multiSelect.anchor.off("change",this.$checkMultiselectChange)),E&&(E.multiSelect.on("addRange",this.$onAddRange),E.multiSelect.on("removeRange",this.$onRemoveRange),E.multiSelect.on("multiSelect",this.$onMultiSelect),E.multiSelect.on("singleSelect",this.$onSingleSelect),E.multiSelect.lead.on("change",this.$checkMultiselectChange),E.multiSelect.anchor.on("change",this.$checkMultiselectChange)),E&&this.inMultiSelectMode!=E.selection.inMultiSelectMode&&(E.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())};function b(D){D.$multiselectOnSessionChange||(D.$onAddRange=D.$onAddRange.bind(D),D.$onRemoveRange=D.$onRemoveRange.bind(D),D.$onMultiSelect=D.$onMultiSelect.bind(D),D.$onSingleSelect=D.$onSingleSelect.bind(D),D.$multiselectOnSessionChange=u.onSessionChange.bind(D),D.$checkMultiselectChange=D.$checkMultiselectChange.bind(D),D.$multiselectOnSessionChange(D),D.on("changeSession",D.$multiselectOnSessionChange),D.on("mousedown",o),D.commands.addCommands(t.defaultCommands),A(D))}function A(D){if(!D.textInput)return;var E=D.textInput.getElement(),g=!1;d.addListener(E,"keydown",function($){var _=$.keyCode==18&&!($.ctrlKey||$.shiftKey||$.metaKey);D.$blockSelectEnabled&&_?g||(D.renderer.setMouseCursor("crosshair"),g=!0):g&&S()},D),d.addListener(E,"keyup",S,D),d.addListener(E,"blur",S,D);function S($){g&&(D.renderer.setMouseCursor(""),g=!1)}}u.MultiSelect=b,n("./config").defineOptions(f.prototype,"editor",{enableMultiselect:{set:function(D){b(this),D?this.on("mousedown",o):this.off("mousedown",o)},value:!0},enableBlockSelect:{set:function(D){this.$blockSelectEnabled=D},value:!0}})}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(n,u,y){var s=n("../../range").Range,c=u.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(p,o,d){var e=p.getLine(d);return this.foldingStartMarker.test(e)?"start":o=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(e)?"end":""},this.getFoldWidgetRange=function(p,o,d){return null},this.indentationBlock=function(p,o,d){var e=/\S/,t=p.getLine(o),r=t.search(e);if(r!=-1){for(var l=d||t.length,a=p.getLength(),h=o,f=o;++o<a;){var v=p.getLine(o).search(e);if(v!=-1){if(v<=r){var b=p.getTokenAt(o,0);if(!b||b.type!=="string")break}f=o}}if(f>h){var A=p.getLine(f).length;return new s(h,l,f,A)}}},this.openingBracketBlock=function(p,o,d,e,t){var r={row:d,column:e+1},l=p.$findClosingBracket(o,r,t);if(l){var a=p.foldWidgets[l.row];return a==null&&(a=p.getFoldWidget(l.row)),a=="start"&&l.row>r.row&&(l.row--,l.column=p.getLine(l.row).length),s.fromPoints(r,l)}},this.closingBracketBlock=function(p,o,d,e,t){var r={row:d,column:e},l=p.$findOpeningBracket(o,r);if(l)return l.column++,r.column--,s.fromPoints(l,r)}}).call(c.prototype)}),ace.define("ace/ext/error_marker",["require","exports","module","ace/lib/dom","ace/range","ace/config"],function(n,u,y){var s=n("../lib/dom"),c=n("../range").Range,p=n("../config").nls;function o(e,t,r){for(var l=0,a=e.length-1;l<=a;){var h=l+a>>1,f=r(t,e[h]);if(f>0)l=h+1;else if(f<0)a=h-1;else return h}return-(l+1)}function d(e,t,r){var l=e.getAnnotations().sort(c.comparePoints);if(l.length){var a=o(l,{row:t,column:-1},c.comparePoints);a<0&&(a=-a-1),a>=l.length?a=r>0?0:l.length-1:a===0&&r<0&&(a=l.length-1);var h=l[a];if(!(!h||!r)){if(h.row===t){do h=l[a+=r];while(h&&h.row===t);if(!h)return l.slice()}var f=[];t=h.row;do f[r<0?"unshift":"push"](h),h=l[a+=r];while(h&&h.row==t);return f.length&&f}}}u.showErrorMarker=function(e,t){var r=e.session,l=e.getCursorPosition(),a=l.row,h=r.widgetManager.getWidgetsAtRow(a).filter(function($){return $.type=="errorMarker"})[0];h?h.destroy():a-=t;var f=d(r,a,t),v;if(f){var b=f[0];l.column=(b.pos&&typeof b.column!="number"?b.pos.sc:b.column)||0,l.row=b.row,v=e.renderer.$gutterLayer.$annotations[l.row]}else{if(h)return;v={displayText:[p("error-marker.good-state","Looks good!")],className:"ace_ok"}}e.session.unfold(l.row),e.selection.moveToPosition(l);var A={row:l.row,fixedWidth:!0,coverGutter:!0,el:s.createElement("div"),type:"errorMarker"},D=A.el.appendChild(s.createElement("div")),E=A.el.appendChild(s.createElement("div"));E.className="error_widget_arrow "+v.className;var g=e.renderer.$cursorLayer.getPixelPosition(l).left;E.style.left=g+e.renderer.gutterWidth-5+"px",A.el.className="error_widget_wrapper",D.className="error_widget "+v.className,v.displayText.forEach(function($,_){D.appendChild(s.createTextNode($)),_<v.displayText.length-1&&D.appendChild(s.createElement("br"))}),D.appendChild(s.createElement("div"));var S=function($,_,T){if(_===0&&(T==="esc"||T==="return"))return A.destroy(),{command:"null"}};A.destroy=function(){e.$mouseHandler.isMousePressed||(e.keyBinding.removeKeyboardHandler(S),r.widgetManager.removeLineWidget(A),e.off("changeSelection",A.destroy),e.off("changeSession",A.destroy),e.off("mouseup",A.destroy),e.off("change",A.destroy))},e.keyBinding.addKeyboardHandler(S),e.on("changeSelection",A.destroy),e.on("changeSession",A.destroy),e.on("mouseup",A.destroy),e.on("change",A.destroy),e.session.widgetManager.addLineWidget(A),A.el.onmousedown=e.focus.bind(e),e.renderer.scrollCursorIntoView(null,.5,{bottom:A.el.offsetHeight})},s.importCssString(`
    .error_widget_wrapper {
        background: inherit;
        color: inherit;
        border:none
    }
    .error_widget {
        border-top: solid 2px;
        border-bottom: solid 2px;
        margin: 5px 0;
        padding: 10px 40px;
        white-space: pre-wrap;
    }
    .error_widget.ace_error, .error_widget_arrow.ace_error{
        border-color: #ff5a5a
    }
    .error_widget.ace_warning, .error_widget_arrow.ace_warning{
        border-color: #F1D817
    }
    .error_widget.ace_info, .error_widget_arrow.ace_info{
        border-color: #5a5a5a
    }
    .error_widget.ace_ok, .error_widget_arrow.ace_ok{
        border-color: #5aaa5a
    }
    .error_widget_arrow {
        position: absolute;
        border: solid 5px;
        border-top-color: transparent!important;
        border-right-color: transparent!important;
        border-left-color: transparent!important;
        top: -5px;
    }
`,"error_marker.css",!1)}),ace.define("ace/ace",["require","exports","module","ace/lib/dom","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config","ace/loader_build"],function(n,u,y){n("./loader_build")(u);var s=n("./lib/dom"),c=n("./range").Range,p=n("./editor").Editor,o=n("./edit_session").EditSession,d=n("./undomanager").UndoManager,e=n("./virtual_renderer").VirtualRenderer;n("./worker/worker_client"),n("./keyboard/hash_handler"),n("./placeholder"),n("./multi_select"),n("./mode/folding/fold_mode"),n("./theme/textmate"),n("./ext/error_marker"),u.config=n("./config"),u.edit=function(r,l){if(typeof r=="string"){var a=r;if(r=document.getElementById(a),!r)throw new Error("ace.edit can't find div #"+a)}if(r&&r.env&&r.env.editor instanceof p)return r.env.editor;var h="";if(r&&/input|textarea/i.test(r.tagName)){var f=r;h=f.value,r=s.createElement("pre"),f.parentNode.replaceChild(r,f)}else r&&(h=r.textContent,r.innerHTML="");var v=u.createEditSession(h),b=new p(new e(r),v,l),A={document:v,editor:b,onResize:b.resize.bind(b,null)};return f&&(A.textarea=f),b.on("destroy",function(){A.editor.container.env=null}),b.container.env=b.env=A,b},u.createEditSession=function(r,l){var a=new o(r,l);return a.setUndoManager(new d),a},u.Range=c,u.Editor=p,u.EditSession=o,u.UndoManager=d,u.VirtualRenderer=e;var t=u.config.version;u.version=t}),function(){ace.require(["ace/ace"],function(n){n&&(n.config.init(!0),n.define=ace.define);var u=function(){return this}();!u&&typeof window<"u"&&(u=window),!u&&typeof self<"u"&&(u=self),u.ace||(u.ace=n);for(var y in n)n.hasOwnProperty(y)&&(u.ace[y]=n[y]);u.ace.default=u.ace,L&&(L.exports=u.ace)})}()})(Vi);var gn=Vi.exports,mn={exports:{}};mn.exports;(function(L,i){var n=200,u="__lodash_hash_undefined__",y=1,s=2,c=9007199254740991,p="[object Arguments]",o="[object Array]",d="[object AsyncFunction]",e="[object Boolean]",t="[object Date]",r="[object Error]",l="[object Function]",a="[object GeneratorFunction]",h="[object Map]",f="[object Number]",v="[object Null]",b="[object Object]",A="[object Promise]",D="[object Proxy]",E="[object RegExp]",g="[object Set]",S="[object String]",$="[object Symbol]",_="[object Undefined]",T="[object WeakMap]",I="[object ArrayBuffer]",w="[object DataView]",m="[object Float32Array]",C="[object Float64Array]",x="[object Int8Array]",M="[object Int16Array]",F="[object Int32Array]",R="[object Uint8Array]",N="[object Uint8ClampedArray]",W="[object Uint16Array]",B="[object Uint32Array]",U=/[\\^$.*+?()[\]{}|]/g,P=/^\[object .+?Constructor\]$/,z=/^(?:0|[1-9]\d*)$/,K={};K[m]=K[C]=K[x]=K[M]=K[F]=K[R]=K[N]=K[W]=K[B]=!0,K[p]=K[o]=K[I]=K[e]=K[w]=K[t]=K[r]=K[l]=K[h]=K[f]=K[b]=K[E]=K[g]=K[S]=K[T]=!1;var V=typeof He=="object"&&He&&He.Object===Object&&He,Y=typeof self=="object"&&self&&self.Object===Object&&self,ee=V||Y||Function("return this")(),ne=i&&!i.nodeType&&i,te=ne&&!0&&L&&!L.nodeType&&L,se=te&&te.exports===ne,ve=se&&V.process,Me=function(){try{return ve&&ve.binding&&ve.binding("util")}catch{}}(),_e=Me&&Me.isTypedArray;function we(H,J){for(var q=-1,ie=H==null?0:H.length,Ee=0,ce=[];++q<ie;){var Te=H[q];J(Te,q,H)&&(ce[Ee++]=Te)}return ce}function Ne(H,J){for(var q=-1,ie=J.length,Ee=H.length;++q<ie;)H[Ee+q]=J[q];return H}function Xe(H,J){for(var q=-1,ie=H==null?0:H.length;++q<ie;)if(J(H[q],q,H))return!0;return!1}function Ze(H,J){for(var q=-1,ie=Array(H);++q<H;)ie[q]=J(q);return ie}function Rt(H){return function(J){return H(J)}}function Jt(H,J){return H.has(J)}function wn(H,J){return H==null?void 0:H[J]}function Ot(H){var J=-1,q=Array(H.size);return H.forEach(function(ie,Ee){q[++J]=[Ee,ie]}),q}function Tt(H,J){return function(q){return H(J(q))}}function Nt(H){var J=-1,q=Array(H.size);return H.forEach(function(ie){q[++J]=ie}),q}var Cn=Array.prototype,Q=Function.prototype,re=Object.prototype,ae=ee["__core-js_shared__"],pe=Q.toString,he=re.hasOwnProperty,Ce=function(){var H=/[^.]+$/.exec(ae&&ae.keys&&ae.keys.IE_PROTO||"");return H?"Symbol(src)_1."+H:""}(),xe=re.toString,Ae=RegExp("^"+pe.call(he).replace(U,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),be=se?ee.Buffer:void 0,me=ee.Symbol,Fe=ee.Uint8Array,st=re.propertyIsEnumerable,Yt=Cn.splice,gt=me?me.toStringTag:void 0,Zn=Object.getOwnPropertySymbols,nr=be?be.isBuffer:void 0,ir=Tt(Object.keys,Object),En=_t(ee,"DataView"),Bt=_t(ee,"Map"),Dn=_t(ee,"Promise"),Sn=_t(ee,"Set"),An=_t(ee,"WeakMap"),Pt=_t(Object,"create"),rr=yt(En),sr=yt(Bt),or=yt(Dn),ar=yt(Sn),lr=yt(An),qn=me?me.prototype:void 0,xn=qn?qn.valueOf:void 0;function mt(H){var J=-1,q=H==null?0:H.length;for(this.clear();++J<q;){var ie=H[J];this.set(ie[0],ie[1])}}function ur(){this.__data__=Pt?Pt(null):{},this.size=0}function cr(H){var J=this.has(H)&&delete this.__data__[H];return this.size-=J?1:0,J}function hr(H){var J=this.__data__;if(Pt){var q=J[H];return q===u?void 0:q}return he.call(J,H)?J[H]:void 0}function dr(H){var J=this.__data__;return Pt?J[H]!==void 0:he.call(J,H)}function pr(H,J){var q=this.__data__;return this.size+=this.has(H)?0:1,q[H]=Pt&&J===void 0?u:J,this}mt.prototype.clear=ur,mt.prototype.delete=cr,mt.prototype.get=hr,mt.prototype.has=dr,mt.prototype.set=pr;function qe(H){var J=-1,q=H==null?0:H.length;for(this.clear();++J<q;){var ie=H[J];this.set(ie[0],ie[1])}}function fr(){this.__data__=[],this.size=0}function gr(H){var J=this.__data__,q=Xt(J,H);if(q<0)return!1;var ie=J.length-1;return q==ie?J.pop():Yt.call(J,q,1),--this.size,!0}function mr(H){var J=this.__data__,q=Xt(J,H);return q<0?void 0:J[q][1]}function vr(H){return Xt(this.__data__,H)>-1}function yr(H,J){var q=this.__data__,ie=Xt(q,H);return ie<0?(++this.size,q.push([H,J])):q[ie][1]=J,this}qe.prototype.clear=fr,qe.prototype.delete=gr,qe.prototype.get=mr,qe.prototype.has=vr,qe.prototype.set=yr;function vt(H){var J=-1,q=H==null?0:H.length;for(this.clear();++J<q;){var ie=H[J];this.set(ie[0],ie[1])}}function br(){this.size=0,this.__data__={hash:new mt,map:new(Bt||qe),string:new mt}}function wr(H){var J=Zt(this,H).delete(H);return this.size-=J?1:0,J}function Cr(H){return Zt(this,H).get(H)}function Er(H){return Zt(this,H).has(H)}function Dr(H,J){var q=Zt(this,H),ie=q.size;return q.set(H,J),this.size+=q.size==ie?0:1,this}vt.prototype.clear=br,vt.prototype.delete=wr,vt.prototype.get=Cr,vt.prototype.has=Er,vt.prototype.set=Dr;function Qt(H){var J=-1,q=H==null?0:H.length;for(this.__data__=new vt;++J<q;)this.add(H[J])}function Sr(H){return this.__data__.set(H,u),this}function Ar(H){return this.__data__.has(H)}Qt.prototype.add=Qt.prototype.push=Sr,Qt.prototype.has=Ar;function ot(H){var J=this.__data__=new qe(H);this.size=J.size}function xr(){this.__data__=new qe,this.size=0}function $r(H){var J=this.__data__,q=J.delete(H);return this.size=J.size,q}function Tr(H){return this.__data__.get(H)}function _r(H){return this.__data__.has(H)}function kr(H,J){var q=this.__data__;if(q instanceof qe){var ie=q.__data__;if(!Bt||ie.length<n-1)return ie.push([H,J]),this.size=++q.size,this;q=this.__data__=new vt(ie)}return q.set(H,J),this.size=q.size,this}ot.prototype.clear=xr,ot.prototype.delete=$r,ot.prototype.get=Tr,ot.prototype.has=_r,ot.prototype.set=kr;function Mr(H,J){var q=qt(H),ie=!q&&Gr(H),Ee=!q&&!ie&&$n(H),ce=!q&&!ie&&!Ee&&li(H),Te=q||ie||Ee||ce,Le=Te?Ze(H.length,String):[],Re=Le.length;for(var $e in H)he.call(H,$e)&&!(Te&&($e=="length"||Ee&&($e=="offset"||$e=="parent")||ce&&($e=="buffer"||$e=="byteLength"||$e=="byteOffset")||Hr($e,Re)))&&Le.push($e);return Le}function Xt(H,J){for(var q=H.length;q--;)if(ri(H[q][0],J))return q;return-1}function Lr(H,J,q){var ie=J(H);return qt(H)?ie:Ne(ie,q(H))}function Wt(H){return H==null?H===void 0?_:v:gt&&gt in Object(H)?Pr(H):Vr(H)}function ei(H){return Ht(H)&&Wt(H)==p}function ti(H,J,q,ie,Ee){return H===J?!0:H==null||J==null||!Ht(H)&&!Ht(J)?H!==H&&J!==J:Ir(H,J,q,ie,ti,Ee)}function Ir(H,J,q,ie,Ee,ce){var Te=qt(H),Le=qt(J),Re=Te?o:at(H),$e=Le?o:at(J);Re=Re==p?b:Re,$e=$e==p?b:$e;var Pe=Re==b,Ve=$e==b,Oe=Re==$e;if(Oe&&$n(H)){if(!$n(J))return!1;Te=!0,Pe=!1}if(Oe&&!Pe)return ce||(ce=new ot),Te||li(H)?ni(H,J,q,ie,Ee,ce):Nr(H,J,Re,q,ie,Ee,ce);if(!(q&y)){var ze=Pe&&he.call(H,"__wrapped__"),je=Ve&&he.call(J,"__wrapped__");if(ze||je){var lt=ze?H.value():H,et=je?J.value():J;return ce||(ce=new ot),Ee(lt,et,q,ie,ce)}}return Oe?(ce||(ce=new ot),Br(H,J,q,ie,Ee,ce)):!1}function Fr(H){if(!ai(H)||jr(H))return!1;var J=si(H)?Ae:P;return J.test(yt(H))}function Rr(H){return Ht(H)&&oi(H.length)&&!!K[Wt(H)]}function Or(H){if(!Ur(H))return ir(H);var J=[];for(var q in Object(H))he.call(H,q)&&q!="constructor"&&J.push(q);return J}function ni(H,J,q,ie,Ee,ce){var Te=q&y,Le=H.length,Re=J.length;if(Le!=Re&&!(Te&&Re>Le))return!1;var $e=ce.get(H);if($e&&ce.get(J))return $e==J;var Pe=-1,Ve=!0,Oe=q&s?new Qt:void 0;for(ce.set(H,J),ce.set(J,H);++Pe<Le;){var ze=H[Pe],je=J[Pe];if(ie)var lt=Te?ie(je,ze,Pe,J,H,ce):ie(ze,je,Pe,H,J,ce);if(lt!==void 0){if(lt)continue;Ve=!1;break}if(Oe){if(!Xe(J,function(et,bt){if(!Jt(Oe,bt)&&(ze===et||Ee(ze,et,q,ie,ce)))return Oe.push(bt)})){Ve=!1;break}}else if(!(ze===je||Ee(ze,je,q,ie,ce))){Ve=!1;break}}return ce.delete(H),ce.delete(J),Ve}function Nr(H,J,q,ie,Ee,ce,Te){switch(q){case w:if(H.byteLength!=J.byteLength||H.byteOffset!=J.byteOffset)return!1;H=H.buffer,J=J.buffer;case I:return!(H.byteLength!=J.byteLength||!ce(new Fe(H),new Fe(J)));case e:case t:case f:return ri(+H,+J);case r:return H.name==J.name&&H.message==J.message;case E:case S:return H==J+"";case h:var Le=Ot;case g:var Re=ie&y;if(Le||(Le=Nt),H.size!=J.size&&!Re)return!1;var $e=Te.get(H);if($e)return $e==J;ie|=s,Te.set(H,J);var Pe=ni(Le(H),Le(J),ie,Ee,ce,Te);return Te.delete(H),Pe;case $:if(xn)return xn.call(H)==xn.call(J)}return!1}function Br(H,J,q,ie,Ee,ce){var Te=q&y,Le=ii(H),Re=Le.length,$e=ii(J),Pe=$e.length;if(Re!=Pe&&!Te)return!1;for(var Ve=Re;Ve--;){var Oe=Le[Ve];if(!(Te?Oe in J:he.call(J,Oe)))return!1}var ze=ce.get(H);if(ze&&ce.get(J))return ze==J;var je=!0;ce.set(H,J),ce.set(J,H);for(var lt=Te;++Ve<Re;){Oe=Le[Ve];var et=H[Oe],bt=J[Oe];if(ie)var ui=Te?ie(bt,et,Oe,J,H,ce):ie(et,bt,Oe,H,J,ce);if(!(ui===void 0?et===bt||Ee(et,bt,q,ie,ce):ui)){je=!1;break}lt||(lt=Oe=="constructor")}if(je&&!lt){var en=H.constructor,tn=J.constructor;en!=tn&&"constructor"in H&&"constructor"in J&&!(typeof en=="function"&&en instanceof en&&typeof tn=="function"&&tn instanceof tn)&&(je=!1)}return ce.delete(H),ce.delete(J),je}function ii(H){return Lr(H,Yr,Wr)}function Zt(H,J){var q=H.__data__;return zr(J)?q[typeof J=="string"?"string":"hash"]:q.map}function _t(H,J){var q=wn(H,J);return Fr(q)?q:void 0}function Pr(H){var J=he.call(H,gt),q=H[gt];try{H[gt]=void 0;var ie=!0}catch{}var Ee=xe.call(H);return ie&&(J?H[gt]=q:delete H[gt]),Ee}var Wr=Zn?function(H){return H==null?[]:(H=Object(H),we(Zn(H),function(J){return st.call(H,J)}))}:Qr,at=Wt;(En&&at(new En(new ArrayBuffer(1)))!=w||Bt&&at(new Bt)!=h||Dn&&at(Dn.resolve())!=A||Sn&&at(new Sn)!=g||An&&at(new An)!=T)&&(at=function(H){var J=Wt(H),q=J==b?H.constructor:void 0,ie=q?yt(q):"";if(ie)switch(ie){case rr:return w;case sr:return h;case or:return A;case ar:return g;case lr:return T}return J});function Hr(H,J){return J=J??c,!!J&&(typeof H=="number"||z.test(H))&&H>-1&&H%1==0&&H<J}function zr(H){var J=typeof H;return J=="string"||J=="number"||J=="symbol"||J=="boolean"?H!=="__proto__":H===null}function jr(H){return!!Ce&&Ce in H}function Ur(H){var J=H&&H.constructor,q=typeof J=="function"&&J.prototype||re;return H===q}function Vr(H){return xe.call(H)}function yt(H){if(H!=null){try{return pe.call(H)}catch{}try{return H+""}catch{}}return""}function ri(H,J){return H===J||H!==H&&J!==J}var Gr=ei(function(){return arguments}())?ei:function(H){return Ht(H)&&he.call(H,"callee")&&!st.call(H,"callee")},qt=Array.isArray;function Kr(H){return H!=null&&oi(H.length)&&!si(H)}var $n=nr||Xr;function Jr(H,J){return ti(H,J)}function si(H){if(!ai(H))return!1;var J=Wt(H);return J==l||J==a||J==d||J==D}function oi(H){return typeof H=="number"&&H>-1&&H%1==0&&H<=c}function ai(H){var J=typeof H;return H!=null&&(J=="object"||J=="function")}function Ht(H){return H!=null&&typeof H=="object"}var li=_e?Rt(_e):Rr;function Yr(H){return Kr(H)?Mr(H):Or(H)}function Qr(){return[]}function Xr(){return!1}L.exports=Jr})(mn,mn.exports);var Gi=mn.exports,Je={};Object.defineProperty(Je,"__esModule",{value:!0});Je.getAceInstance=Je.debounce=Je.editorEvents=Je.editorOptions=void 0;var go=["minLines","maxLines","readOnly","highlightActiveLine","tabSize","enableBasicAutocompletion","enableLiveAutocompletion","enableSnippets"];Je.editorOptions=go;var mo=["onChange","onFocus","onInput","onBlur","onCopy","onPaste","onSelectionChange","onCursorChange","onScroll","handleOptions","updateRef"];Je.editorEvents=mo;var vo=function(){var L;return typeof window>"u"?(He.window={},L=gn,delete He.window):window.ace?(L=window.ace,L.acequire=window.ace.require||window.ace.acequire):L=gn,L};Je.getAceInstance=vo;var yo=function(L,i){var n=null;return function(){var u=this,y=arguments;clearTimeout(n),n=setTimeout(function(){L.apply(u,y)},i)}};Je.debounce=yo;var bo=St&&St.__extends||function(){var L=function(i,n){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,y){u.__proto__=y}||function(u,y){for(var s in y)Object.prototype.hasOwnProperty.call(y,s)&&(u[s]=y[s])},L(i,n)};return function(i,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");L(i,n);function u(){this.constructor=i}i.prototype=n===null?Object.create(n):(u.prototype=n.prototype,new u)}}(),jn=St&&St.__assign||function(){return jn=Object.assign||function(L){for(var i,n=1,u=arguments.length;n<u;n++){i=arguments[n];for(var y in i)Object.prototype.hasOwnProperty.call(i,y)&&(L[y]=i[y])}return L},jn.apply(this,arguments)};Object.defineProperty(St,"__esModule",{value:!0});var wo=gn,oe=Vn,vi=dt,on=Gi,Lt=Je,yi=(0,Lt.getAceInstance)(),Co=function(L){bo(i,L);function i(n){var u=L.call(this,n)||this;return Lt.editorEvents.forEach(function(y){u[y]=u[y].bind(u)}),u.debounce=Lt.debounce,u}return i.prototype.isInShadow=function(n){for(var u=n&&n.parentNode;u;){if(u.toString()==="[object ShadowRoot]")return!0;u=u.parentNode}return!1},i.prototype.componentDidMount=function(){var n=this,u=this.props,y=u.className,s=u.onBeforeLoad,c=u.onValidate,p=u.mode,o=u.focus,d=u.theme,e=u.fontSize,t=u.lineHeight,r=u.value,l=u.defaultValue,a=u.showGutter,h=u.wrapEnabled,f=u.showPrintMargin,v=u.scrollMargin,b=v===void 0?[0,0,0,0]:v,A=u.keyboardHandler,D=u.onLoad,E=u.commands,g=u.annotations,S=u.markers,$=u.placeholder;this.editor=yi.edit(this.refEditor),s&&s(yi);for(var _=Object.keys(this.props.editorProps),T=0;T<_.length;T++)this.editor[_[T]]=this.props.editorProps[_[T]];this.props.debounceChangePeriod&&(this.onChange=this.debounce(this.onChange,this.props.debounceChangePeriod)),this.editor.renderer.setScrollMargin(b[0],b[1],b[2],b[3]),this.isInShadow(this.refEditor)&&this.editor.renderer.attachToShadowRoot(),this.editor.getSession().setMode(typeof p=="string"?"ace/mode/".concat(p):p),d&&d!==""&&this.editor.setTheme("ace/theme/".concat(d)),this.editor.setFontSize(typeof e=="number"?"".concat(e,"px"):e),t&&(this.editor.container.style.lineHeight=typeof t=="number"?"".concat(t,"px"):"".concat(t),this.editor.renderer.updateFontSize()),this.editor.getSession().setValue(l||r||""),this.props.navigateToFileEnd&&this.editor.navigateFileEnd(),this.editor.renderer.setShowGutter(a),this.editor.getSession().setUseWrapMode(h),this.editor.setShowPrintMargin(f),this.editor.on("focus",this.onFocus),this.editor.on("blur",this.onBlur),this.editor.on("copy",this.onCopy),this.editor.on("paste",this.onPaste),this.editor.on("change",this.onChange),this.editor.on("input",this.onInput),$&&this.updatePlaceholder(),this.editor.getSession().selection.on("changeSelection",this.onSelectionChange),this.editor.getSession().selection.on("changeCursor",this.onCursorChange),c&&this.editor.getSession().on("changeAnnotation",function(){var w=n.editor.getSession().getAnnotations();n.props.onValidate(w)}),this.editor.session.on("changeScrollTop",this.onScroll),this.editor.getSession().setAnnotations(g||[]),S&&S.length>0&&this.handleMarkers(S);var I=this.editor.$options;Lt.editorOptions.forEach(function(w){I.hasOwnProperty(w)?n.editor.setOption(w,n.props[w]):n.props[w]&&console.warn("ReactAce: editor option ".concat(w," was activated but not found. Did you need to import a related tool or did you possibly mispell the option?"))}),this.handleOptions(this.props),Array.isArray(E)&&E.forEach(function(w){typeof w.exec=="string"?n.editor.commands.bindKey(w.bindKey,w.exec):n.editor.commands.addCommand(w)}),A&&this.editor.setKeyboardHandler("ace/keyboard/"+A),y&&(this.refEditor.className+=" "+y),D&&D(this.editor),this.editor.resize(),o&&this.editor.focus()},i.prototype.componentDidUpdate=function(n){for(var u=n,y=this.props,s=0;s<Lt.editorOptions.length;s++){var c=Lt.editorOptions[s];y[c]!==u[c]&&this.editor.setOption(c,y[c])}if(y.className!==u.className){var p=this.refEditor.className,o=p.trim().split(" "),d=u.className.trim().split(" ");d.forEach(function(r){var l=o.indexOf(r);o.splice(l,1)}),this.refEditor.className=" "+y.className+" "+o.join(" ")}var e=this.editor&&y.value!=null&&this.editor.getValue()!==y.value;if(e){this.silent=!0;var t=this.editor.session.selection.toJSON();this.editor.setValue(y.value,y.cursorStart),this.editor.session.selection.fromJSON(t),this.silent=!1}y.placeholder!==u.placeholder&&this.updatePlaceholder(),y.mode!==u.mode&&this.editor.getSession().setMode(typeof y.mode=="string"?"ace/mode/".concat(y.mode):y.mode),y.theme!==u.theme&&this.editor.setTheme("ace/theme/"+y.theme),y.keyboardHandler!==u.keyboardHandler&&(y.keyboardHandler?this.editor.setKeyboardHandler("ace/keyboard/"+y.keyboardHandler):this.editor.setKeyboardHandler(null)),y.fontSize!==u.fontSize&&this.editor.setFontSize(typeof y.fontSize=="number"?"".concat(y.fontSize,"px"):y.fontSize),y.lineHeight!==u.lineHeight&&(this.editor.container.style.lineHeight=typeof y.lineHeight=="number"?"".concat(y.lineHeight,"px"):y.lineHeight,this.editor.renderer.updateFontSize()),y.wrapEnabled!==u.wrapEnabled&&this.editor.getSession().setUseWrapMode(y.wrapEnabled),y.showPrintMargin!==u.showPrintMargin&&this.editor.setShowPrintMargin(y.showPrintMargin),y.showGutter!==u.showGutter&&this.editor.renderer.setShowGutter(y.showGutter),on(y.setOptions,u.setOptions)||this.handleOptions(y),(e||!on(y.annotations,u.annotations))&&this.editor.getSession().setAnnotations(y.annotations||[]),!on(y.markers,u.markers)&&Array.isArray(y.markers)&&this.handleMarkers(y.markers),on(y.scrollMargin,u.scrollMargin)||this.handleScrollMargins(y.scrollMargin),(n.height!==this.props.height||n.width!==this.props.width)&&this.editor.resize(),this.props.focus&&!n.focus&&this.editor.focus()},i.prototype.handleScrollMargins=function(n){n===void 0&&(n=[0,0,0,0]),this.editor.renderer.setScrollMargin(n[0],n[1],n[2],n[3])},i.prototype.componentWillUnmount=function(){this.editor&&(this.editor.destroy(),this.editor=null)},i.prototype.onChange=function(n){if(this.editor&&this.props.onChange&&!this.silent){var u=this.editor.getValue();this.props.onChange(u,n)}},i.prototype.onSelectionChange=function(n){if(this.props.onSelectionChange){var u=this.editor.getSelection();this.props.onSelectionChange(u,n)}},i.prototype.onCursorChange=function(n){if(this.props.onCursorChange){var u=this.editor.getSelection();this.props.onCursorChange(u,n)}},i.prototype.onInput=function(n){this.props.onInput&&this.props.onInput(n),this.props.placeholder&&this.updatePlaceholder()},i.prototype.onFocus=function(n){this.props.onFocus&&this.props.onFocus(n,this.editor)},i.prototype.onBlur=function(n){this.props.onBlur&&this.props.onBlur(n,this.editor)},i.prototype.onCopy=function(n){var u=n.text;this.props.onCopy&&this.props.onCopy(u)},i.prototype.onPaste=function(n){var u=n.text;this.props.onPaste&&this.props.onPaste(u)},i.prototype.onScroll=function(){this.props.onScroll&&this.props.onScroll(this.editor)},i.prototype.handleOptions=function(n){for(var u=Object.keys(n.setOptions),y=0;y<u.length;y++)this.editor.setOption(u[y],n.setOptions[u[y]])},i.prototype.handleMarkers=function(n){var u=this,y=this.editor.getSession().getMarkers(!0);for(var s in y)y.hasOwnProperty(s)&&this.editor.getSession().removeMarker(y[s].id);y=this.editor.getSession().getMarkers(!1);for(var s in y)y.hasOwnProperty(s)&&y[s].clazz!=="ace_active-line"&&y[s].clazz!=="ace_selected-word"&&this.editor.getSession().removeMarker(y[s].id);n.forEach(function(c){var p=c.startRow,o=c.startCol,d=c.endRow,e=c.endCol,t=c.className,r=c.type,l=c.inFront,a=l===void 0?!1:l,h=new wo.Range(p,o,d,e);u.editor.getSession().addMarker(h,t,r,a)})},i.prototype.updatePlaceholder=function(){var n=this.editor,u=this.props.placeholder,y=!n.session.getValue().length,s=n.renderer.placeholderNode;!y&&s?(n.renderer.scroller.removeChild(n.renderer.placeholderNode),n.renderer.placeholderNode=null):y&&!s?(s=n.renderer.placeholderNode=document.createElement("div"),s.textContent=u||"",s.className="ace_comment ace_placeholder",s.style.padding="0 9px",s.style.position="absolute",s.style.zIndex="3",n.renderer.scroller.appendChild(s)):y&&s&&(s.textContent=u)},i.prototype.updateRef=function(n){this.refEditor=n},i.prototype.render=function(){var n=this.props,u=n.name,y=n.width,s=n.height,c=n.style,p=jn({width:y,height:s},c);return vi.createElement("div",{ref:this.updateRef,id:u,style:p})},i.propTypes={mode:oe.oneOfType([oe.string,oe.object]),focus:oe.bool,theme:oe.string,name:oe.string,className:oe.string,height:oe.string,width:oe.string,fontSize:oe.oneOfType([oe.number,oe.string]),lineHeight:oe.oneOfType([oe.number,oe.string]),showGutter:oe.bool,onChange:oe.func,onCopy:oe.func,onPaste:oe.func,onFocus:oe.func,onInput:oe.func,onBlur:oe.func,onScroll:oe.func,value:oe.string,defaultValue:oe.string,onLoad:oe.func,onSelectionChange:oe.func,onCursorChange:oe.func,onBeforeLoad:oe.func,onValidate:oe.func,minLines:oe.number,maxLines:oe.number,readOnly:oe.bool,highlightActiveLine:oe.bool,tabSize:oe.number,showPrintMargin:oe.bool,cursorStart:oe.number,debounceChangePeriod:oe.number,editorProps:oe.object,setOptions:oe.object,style:oe.object,scrollMargin:oe.array,annotations:oe.array,markers:oe.array,keyboardHandler:oe.string,wrapEnabled:oe.bool,enableSnippets:oe.bool,enableBasicAutocompletion:oe.oneOfType([oe.bool,oe.array]),enableLiveAutocompletion:oe.oneOfType([oe.bool,oe.array]),navigateToFileEnd:oe.bool,commands:oe.array,placeholder:oe.string},i.defaultProps={name:"ace-editor",focus:!1,mode:"",theme:"",height:"500px",width:"500px",fontSize:12,enableSnippets:!1,showGutter:!0,onChange:null,onPaste:null,onLoad:null,onScroll:null,minLines:null,maxLines:null,readOnly:!1,highlightActiveLine:!0,showPrintMargin:!0,tabSize:4,cursorStart:1,editorProps:{},style:{},scrollMargin:[0,0,0,0],setOptions:{},wrapEnabled:!1,enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,placeholder:null,navigateToFileEnd:!0},i}(vi.Component);St.default=Co;var Gt={},ft={},Ki={exports:{}};(function(L,i){ace.define("ace/split",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/editor","ace/virtual_renderer","ace/edit_session"],function(n,u,y){var s=n("./lib/oop");n("./lib/lang");var c=n("./lib/event_emitter").EventEmitter,p=n("./editor").Editor,o=n("./virtual_renderer").VirtualRenderer,d=n("./edit_session").EditSession,e;e=function(t,r,l){this.BELOW=1,this.BESIDE=0,this.$container=t,this.$theme=r,this.$splits=0,this.$editorCSS="",this.$editors=[],this.$orientation=this.BESIDE,this.setSplits(l||1),this.$cEditor=this.$editors[0],this.on("focus",function(a){this.$cEditor=a}.bind(this))},function(){s.implement(this,c),this.$createEditor=function(){var t=document.createElement("div");t.className=this.$editorCSS,t.style.cssText="position: absolute; top:0px; bottom:0px",this.$container.appendChild(t);var r=new p(new o(t,this.$theme));return r.on("focus",function(){this._emit("focus",r)}.bind(this)),this.$editors.push(r),r.setFontSize(this.$fontSize),r},this.setSplits=function(t){var r;if(t<1)throw"The number of splits have to be > 0!";if(t!=this.$splits){if(t>this.$splits){for(;this.$splits<this.$editors.length&&this.$splits<t;)r=this.$editors[this.$splits],this.$container.appendChild(r.container),r.setFontSize(this.$fontSize),this.$splits++;for(;this.$splits<t;)this.$createEditor(),this.$splits++}else for(;this.$splits>t;)r=this.$editors[this.$splits-1],this.$container.removeChild(r.container),this.$splits--;this.resize()}},this.getSplits=function(){return this.$splits},this.getEditor=function(t){return this.$editors[t]},this.getCurrentEditor=function(){return this.$cEditor},this.focus=function(){this.$cEditor.focus()},this.blur=function(){this.$cEditor.blur()},this.setTheme=function(t){this.$editors.forEach(function(r){r.setTheme(t)})},this.setKeyboardHandler=function(t){this.$editors.forEach(function(r){r.setKeyboardHandler(t)})},this.forEach=function(t,r){this.$editors.forEach(t,r)},this.$fontSize="",this.setFontSize=function(t){this.$fontSize=t,this.forEach(function(r){r.setFontSize(t)})},this.$cloneSession=function(t){var r=new d(t.getDocument(),t.getMode()),l=t.getUndoManager();return r.setUndoManager(l),r.setTabSize(t.getTabSize()),r.setUseSoftTabs(t.getUseSoftTabs()),r.setOverwrite(t.getOverwrite()),r.setBreakpoints(t.getBreakpoints()),r.setUseWrapMode(t.getUseWrapMode()),r.setUseWorker(t.getUseWorker()),r.setWrapLimitRange(t.$wrapLimitRange.min,t.$wrapLimitRange.max),r.$foldData=t.$cloneFoldData(),r},this.setSession=function(t,r){var l;r==null?l=this.$cEditor:l=this.$editors[r];var a=this.$editors.some(function(h){return h.session===t});return a&&(t=this.$cloneSession(t)),l.setSession(t),t},this.getOrientation=function(){return this.$orientation},this.setOrientation=function(t){this.$orientation!=t&&(this.$orientation=t,this.resize())},this.resize=function(){var t=this.$container.clientWidth,r=this.$container.clientHeight,l;if(this.$orientation==this.BESIDE)for(var a=t/this.$splits,h=0;h<this.$splits;h++)l=this.$editors[h],l.container.style.width=a+"px",l.container.style.top="0px",l.container.style.left=h*a+"px",l.container.style.height=r+"px",l.resize();else for(var f=r/this.$splits,h=0;h<this.$splits;h++)l=this.$editors[h],l.container.style.width=t+"px",l.container.style.top=h*f+"px",l.container.style.left="0px",l.container.style.height=f+"px",l.resize()}}.call(e.prototype),u.Split=e}),ace.define("ace/ext/split",["require","exports","module","ace/split"],function(n,u,y){y.exports=n("../split")}),function(){ace.require(["ace/ext/split"],function(n){L&&(L.exports=n)})}()})(Ki);var Eo=Ki.exports,Do="Expected a function",Ji="__lodash_hash_undefined__",So="[object Function]",Ao="[object GeneratorFunction]",xo="[object Symbol]",$o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,To=/^\w*$/,_o=/^\./,ko=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Mo=/[\\^$.*+?()[\]{}|]/g,Lo=/\\(\\)?/g,Io=/^\[object .+?Constructor\]$/,Fo=typeof He=="object"&&He&&He.Object===Object&&He,Ro=typeof self=="object"&&self&&self.Object===Object&&self,Jn=Fo||Ro||Function("return this")();function Oo(L,i){return L==null?void 0:L[i]}function No(L){var i=!1;if(L!=null&&typeof L.toString!="function")try{i=!!(L+"")}catch{}return i}var Bo=Array.prototype,Po=Function.prototype,Yi=Object.prototype,In=Jn["__core-js_shared__"],bi=function(){var L=/[^.]+$/.exec(In&&In.keys&&In.keys.IE_PROTO||"");return L?"Symbol(src)_1."+L:""}(),Qi=Po.toString,Yn=Yi.hasOwnProperty,Xi=Yi.toString,Wo=RegExp("^"+Qi.call(Yn).replace(Mo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wi=Jn.Symbol,Ho=Bo.splice,zo=Zi(Jn,"Map"),Kt=Zi(Object,"create"),Ci=wi?wi.prototype:void 0,Ei=Ci?Ci.toString:void 0;function At(L){var i=-1,n=L?L.length:0;for(this.clear();++i<n;){var u=L[i];this.set(u[0],u[1])}}function jo(){this.__data__=Kt?Kt(null):{}}function Uo(L){return this.has(L)&&delete this.__data__[L]}function Vo(L){var i=this.__data__;if(Kt){var n=i[L];return n===Ji?void 0:n}return Yn.call(i,L)?i[L]:void 0}function Go(L){var i=this.__data__;return Kt?i[L]!==void 0:Yn.call(i,L)}function Ko(L,i){var n=this.__data__;return n[L]=Kt&&i===void 0?Ji:i,this}At.prototype.clear=jo;At.prototype.delete=Uo;At.prototype.get=Vo;At.prototype.has=Go;At.prototype.set=Ko;function Ft(L){var i=-1,n=L?L.length:0;for(this.clear();++i<n;){var u=L[i];this.set(u[0],u[1])}}function Jo(){this.__data__=[]}function Yo(L){var i=this.__data__,n=yn(i,L);if(n<0)return!1;var u=i.length-1;return n==u?i.pop():Ho.call(i,n,1),!0}function Qo(L){var i=this.__data__,n=yn(i,L);return n<0?void 0:i[n][1]}function Xo(L){return yn(this.__data__,L)>-1}function Zo(L,i){var n=this.__data__,u=yn(n,L);return u<0?n.push([L,i]):n[u][1]=i,this}Ft.prototype.clear=Jo;Ft.prototype.delete=Yo;Ft.prototype.get=Qo;Ft.prototype.has=Xo;Ft.prototype.set=Zo;function xt(L){var i=-1,n=L?L.length:0;for(this.clear();++i<n;){var u=L[i];this.set(u[0],u[1])}}function qo(){this.__data__={hash:new At,map:new(zo||Ft),string:new At}}function ea(L){return bn(this,L).delete(L)}function ta(L){return bn(this,L).get(L)}function na(L){return bn(this,L).has(L)}function ia(L,i){return bn(this,L).set(L,i),this}xt.prototype.clear=qo;xt.prototype.delete=ea;xt.prototype.get=ta;xt.prototype.has=na;xt.prototype.set=ia;function yn(L,i){for(var n=L.length;n--;)if(fa(L[n][0],i))return n;return-1}function ra(L,i){i=la(i,L)?[i]:aa(i);for(var n=0,u=i.length;L!=null&&n<u;)L=L[da(i[n++])];return n&&n==u?L:void 0}function sa(L){if(!er(L)||ca(L))return!1;var i=ga(L)||No(L)?Wo:Io;return i.test(pa(L))}function oa(L){if(typeof L=="string")return L;if(Xn(L))return Ei?Ei.call(L):"";var i=L+"";return i=="0"&&1/L==-1/0?"-0":i}function aa(L){return qi(L)?L:ha(L)}function bn(L,i){var n=L.__data__;return ua(i)?n[typeof i=="string"?"string":"hash"]:n.map}function Zi(L,i){var n=Oo(L,i);return sa(n)?n:void 0}function la(L,i){if(qi(L))return!1;var n=typeof L;return n=="number"||n=="symbol"||n=="boolean"||L==null||Xn(L)?!0:To.test(L)||!$o.test(L)||i!=null&&L in Object(i)}function ua(L){var i=typeof L;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?L!=="__proto__":L===null}function ca(L){return!!bi&&bi in L}var ha=Qn(function(L){L=va(L);var i=[];return _o.test(L)&&i.push(""),L.replace(ko,function(n,u,y,s){i.push(y?s.replace(Lo,"$1"):u||n)}),i});function da(L){if(typeof L=="string"||Xn(L))return L;var i=L+"";return i=="0"&&1/L==-1/0?"-0":i}function pa(L){if(L!=null){try{return Qi.call(L)}catch{}try{return L+""}catch{}}return""}function Qn(L,i){if(typeof L!="function"||i&&typeof i!="function")throw new TypeError(Do);var n=function(){var u=arguments,y=i?i.apply(this,u):u[0],s=n.cache;if(s.has(y))return s.get(y);var c=L.apply(this,u);return n.cache=s.set(y,c),c};return n.cache=new(Qn.Cache||xt),n}Qn.Cache=xt;function fa(L,i){return L===i||L!==L&&i!==i}var qi=Array.isArray;function ga(L){var i=er(L)?Xi.call(L):"";return i==So||i==Ao}function er(L){var i=typeof L;return!!L&&(i=="object"||i=="function")}function ma(L){return!!L&&typeof L=="object"}function Xn(L){return typeof L=="symbol"||ma(L)&&Xi.call(L)==xo}function va(L){return L==null?"":oa(L)}function ya(L,i,n){var u=L==null?void 0:ra(L,i);return u===void 0?n:u}var ba=ya,wa=ft&&ft.__extends||function(){var L=function(i,n){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,y){u.__proto__=y}||function(u,y){for(var s in y)Object.prototype.hasOwnProperty.call(y,s)&&(u[s]=y[s])},L(i,n)};return function(i,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");L(i,n);function u(){this.constructor=i}i.prototype=n===null?Object.create(n):(u.prototype=n.prototype,new u)}}(),Un=ft&&ft.__assign||function(){return Un=Object.assign||function(L){for(var i,n=1,u=arguments.length;n<u;n++){i=arguments[n];for(var y in i)Object.prototype.hasOwnProperty.call(i,y)&&(L[y]=i[y])}return L},Un.apply(this,arguments)};Object.defineProperty(ft,"__esModule",{value:!0});var Dt=Je,Fn=(0,Dt.getAceInstance)(),Ca=gn,Ea=Eo,le=Vn,Di=dt,Rn=Gi,tt=ba,Da=function(L){wa(i,L);function i(n){var u=L.call(this,n)||this;return Dt.editorEvents.forEach(function(y){u[y]=u[y].bind(u)}),u.debounce=Dt.debounce,u}return i.prototype.isInShadow=function(n){for(var u=n&&n.parentNode;u;){if(u.toString()==="[object ShadowRoot]")return!0;u=u.parentNode}return!1},i.prototype.componentDidMount=function(){var n=this,u=this.props,y=u.className,s=u.onBeforeLoad,c=u.mode,p=u.focus,o=u.theme,d=u.fontSize,e=u.value,t=u.defaultValue,r=u.cursorStart,l=u.showGutter,a=u.wrapEnabled,h=u.showPrintMargin,f=u.scrollMargin,v=f===void 0?[0,0,0,0]:f,b=u.keyboardHandler,A=u.onLoad,D=u.commands,E=u.annotations,g=u.markers,S=u.splits;this.editor=Fn.edit(this.refEditor),this.isInShadow(this.refEditor)&&this.editor.renderer.attachToShadowRoot(),this.editor.setTheme("ace/theme/".concat(o)),s&&s(Fn);var $=Object.keys(this.props.editorProps),_=new Ea.Split(this.editor.container,"ace/theme/".concat(o),S);this.editor.env.split=_,this.splitEditor=_.getEditor(0),this.split=_,this.editor.setShowPrintMargin(!1),this.editor.renderer.setShowGutter(!1);var T=this.splitEditor.$options;this.props.debounceChangePeriod&&(this.onChange=this.debounce(this.onChange,this.props.debounceChangePeriod)),_.forEach(function(w,m){for(var C=0;C<$.length;C++)w[$[C]]=n.props.editorProps[$[C]];var x=tt(t,m),M=tt(e,m,"");w.session.setUndoManager(new Fn.UndoManager),w.setTheme("ace/theme/".concat(o)),w.renderer.setScrollMargin(v[0],v[1],v[2],v[3]),w.getSession().setMode("ace/mode/".concat(c)),w.setFontSize(d),w.renderer.setShowGutter(l),w.getSession().setUseWrapMode(a),w.setShowPrintMargin(h),w.on("focus",n.onFocus),w.on("blur",n.onBlur),w.on("input",n.onInput),w.on("copy",n.onCopy),w.on("paste",n.onPaste),w.on("change",n.onChange),w.getSession().selection.on("changeSelection",n.onSelectionChange),w.getSession().selection.on("changeCursor",n.onCursorChange),w.session.on("changeScrollTop",n.onScroll),w.setValue(x===void 0?M:x,r);var F=tt(E,m,[]),R=tt(g,m,[]);w.getSession().setAnnotations(F),R&&R.length>0&&n.handleMarkers(R,w);for(var C=0;C<Dt.editorOptions.length;C++){var N=Dt.editorOptions[C];T.hasOwnProperty(N)?w.setOption(N,n.props[N]):n.props[N]&&console.warn("ReaceAce: editor option ".concat(N," was activated but not found. Did you need to import a related tool or did you possibly mispell the option?"))}n.handleOptions(n.props,w),Array.isArray(D)&&D.forEach(function(W){typeof W.exec=="string"?w.commands.bindKey(W.bindKey,W.exec):w.commands.addCommand(W)}),b&&w.setKeyboardHandler("ace/keyboard/"+b)}),y&&(this.refEditor.className+=" "+y),p&&this.splitEditor.focus();var I=this.editor.env.split;I.setOrientation(this.props.orientation==="below"?I.BELOW:I.BESIDE),I.resize(!0),A&&A(I)},i.prototype.componentDidUpdate=function(n){var u=this,y=n,s=this.props,c=this.editor.env.split;if(s.splits!==y.splits&&c.setSplits(s.splits),s.orientation!==y.orientation&&c.setOrientation(s.orientation==="below"?c.BELOW:c.BESIDE),c.forEach(function(e,t){s.mode!==y.mode&&e.getSession().setMode("ace/mode/"+s.mode),s.keyboardHandler!==y.keyboardHandler&&(s.keyboardHandler?e.setKeyboardHandler("ace/keyboard/"+s.keyboardHandler):e.setKeyboardHandler(null)),s.fontSize!==y.fontSize&&e.setFontSize(s.fontSize),s.wrapEnabled!==y.wrapEnabled&&e.getSession().setUseWrapMode(s.wrapEnabled),s.showPrintMargin!==y.showPrintMargin&&e.setShowPrintMargin(s.showPrintMargin),s.showGutter!==y.showGutter&&e.renderer.setShowGutter(s.showGutter);for(var r=0;r<Dt.editorOptions.length;r++){var l=Dt.editorOptions[r];s[l]!==y[l]&&e.setOption(l,s[l])}Rn(s.setOptions,y.setOptions)||u.handleOptions(s,e);var a=tt(s.value,t,"");if(e.getValue()!==a){u.silent=!0;var h=e.session.selection.toJSON();e.setValue(a,s.cursorStart),e.session.selection.fromJSON(h),u.silent=!1}var f=tt(s.annotations,t,[]),v=tt(y.annotations,t,[]);Rn(f,v)||e.getSession().setAnnotations(f);var b=tt(s.markers,t,[]),A=tt(y.markers,t,[]);!Rn(b,A)&&Array.isArray(b)&&u.handleMarkers(b,e)}),s.className!==y.className){var p=this.refEditor.className,o=p.trim().split(" "),d=y.className.trim().split(" ");d.forEach(function(e){var t=o.indexOf(e);o.splice(t,1)}),this.refEditor.className=" "+s.className+" "+o.join(" ")}s.theme!==y.theme&&c.setTheme("ace/theme/"+s.theme),s.focus&&!y.focus&&this.splitEditor.focus(),(s.height!==this.props.height||s.width!==this.props.width)&&this.editor.resize()},i.prototype.componentWillUnmount=function(){this.editor.destroy(),this.editor=null},i.prototype.onChange=function(n){if(this.props.onChange&&!this.silent){var u=[];this.editor.env.split.forEach(function(y){u.push(y.getValue())}),this.props.onChange(u,n)}},i.prototype.onSelectionChange=function(n){if(this.props.onSelectionChange){var u=[];this.editor.env.split.forEach(function(y){u.push(y.getSelection())}),this.props.onSelectionChange(u,n)}},i.prototype.onCursorChange=function(n){if(this.props.onCursorChange){var u=[];this.editor.env.split.forEach(function(y){u.push(y.getSelection())}),this.props.onCursorChange(u,n)}},i.prototype.onFocus=function(n){this.props.onFocus&&this.props.onFocus(n)},i.prototype.onInput=function(n){this.props.onInput&&this.props.onInput(n)},i.prototype.onBlur=function(n){this.props.onBlur&&this.props.onBlur(n)},i.prototype.onCopy=function(n){this.props.onCopy&&this.props.onCopy(n)},i.prototype.onPaste=function(n){this.props.onPaste&&this.props.onPaste(n)},i.prototype.onScroll=function(){this.props.onScroll&&this.props.onScroll(this.editor)},i.prototype.handleOptions=function(n,u){for(var y=Object.keys(n.setOptions),s=0;s<y.length;s++)u.setOption(y[s],n.setOptions[y[s]])},i.prototype.handleMarkers=function(n,u){var y=u.getSession().getMarkers(!0);for(var s in y)y.hasOwnProperty(s)&&u.getSession().removeMarker(y[s].id);y=u.getSession().getMarkers(!1);for(var s in y)y.hasOwnProperty(s)&&u.getSession().removeMarker(y[s].id);n.forEach(function(c){var p=c.startRow,o=c.startCol,d=c.endRow,e=c.endCol,t=c.className,r=c.type,l=c.inFront,a=l===void 0?!1:l,h=new Ca.Range(p,o,d,e);u.getSession().addMarker(h,t,r,a)})},i.prototype.updateRef=function(n){this.refEditor=n},i.prototype.render=function(){var n=this.props,u=n.name,y=n.width,s=n.height,c=n.style,p=Un({width:y,height:s},c);return Di.createElement("div",{ref:this.updateRef,id:u,style:p})},i.propTypes={className:le.string,debounceChangePeriod:le.number,defaultValue:le.arrayOf(le.string),focus:le.bool,fontSize:le.oneOfType([le.number,le.string]),height:le.string,mode:le.string,name:le.string,onBlur:le.func,onChange:le.func,onCopy:le.func,onFocus:le.func,onInput:le.func,onLoad:le.func,onPaste:le.func,onScroll:le.func,orientation:le.string,showGutter:le.bool,splits:le.number,theme:le.string,value:le.arrayOf(le.string),width:le.string,onSelectionChange:le.func,onCursorChange:le.func,onBeforeLoad:le.func,minLines:le.number,maxLines:le.number,readOnly:le.bool,highlightActiveLine:le.bool,tabSize:le.number,showPrintMargin:le.bool,cursorStart:le.number,editorProps:le.object,setOptions:le.object,style:le.object,scrollMargin:le.array,annotations:le.array,markers:le.array,keyboardHandler:le.string,wrapEnabled:le.bool,enableBasicAutocompletion:le.oneOfType([le.bool,le.array]),enableLiveAutocompletion:le.oneOfType([le.bool,le.array]),commands:le.array},i.defaultProps={name:"ace-editor",focus:!1,orientation:"beside",splits:2,mode:"",theme:"",height:"500px",width:"500px",value:[],fontSize:12,showGutter:!0,onChange:null,onPaste:null,onLoad:null,onScroll:null,minLines:null,maxLines:null,readOnly:!1,highlightActiveLine:!0,showPrintMargin:!0,tabSize:4,cursorStart:1,editorProps:{},style:{},scrollMargin:[0,0,0,0],setOptions:{},wrapEnabled:!1,enableBasicAutocompletion:!1,enableLiveAutocompletion:!1},i}(Di.Component);ft.default=Da;var tr={exports:{}};(function(L){var i=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},n=-1,u=1,y=0;i.Diff=function(s,c){return[s,c]},i.prototype.diff_main=function(s,c,p,o){typeof o>"u"&&(this.Diff_Timeout<=0?o=Number.MAX_VALUE:o=new Date().getTime()+this.Diff_Timeout*1e3);var d=o;if(s==null||c==null)throw new Error("Null input. (diff_main)");if(s==c)return s?[new i.Diff(y,s)]:[];typeof p>"u"&&(p=!0);var e=p,t=this.diff_commonPrefix(s,c),r=s.substring(0,t);s=s.substring(t),c=c.substring(t),t=this.diff_commonSuffix(s,c);var l=s.substring(s.length-t);s=s.substring(0,s.length-t),c=c.substring(0,c.length-t);var a=this.diff_compute_(s,c,e,d);return r&&a.unshift(new i.Diff(y,r)),l&&a.push(new i.Diff(y,l)),this.diff_cleanupMerge(a),a},i.prototype.diff_compute_=function(s,c,p,o){var d;if(!s)return[new i.Diff(u,c)];if(!c)return[new i.Diff(n,s)];var e=s.length>c.length?s:c,t=s.length>c.length?c:s,r=e.indexOf(t);if(r!=-1)return d=[new i.Diff(u,e.substring(0,r)),new i.Diff(y,t),new i.Diff(u,e.substring(r+t.length))],s.length>c.length&&(d[0][0]=d[2][0]=n),d;if(t.length==1)return[new i.Diff(n,s),new i.Diff(u,c)];var l=this.diff_halfMatch_(s,c);if(l){var a=l[0],h=l[1],f=l[2],v=l[3],b=l[4],A=this.diff_main(a,f,p,o),D=this.diff_main(h,v,p,o);return A.concat([new i.Diff(y,b)],D)}return p&&s.length>100&&c.length>100?this.diff_lineMode_(s,c,o):this.diff_bisect_(s,c,o)},i.prototype.diff_lineMode_=function(s,c,p){var o=this.diff_linesToChars_(s,c);s=o.chars1,c=o.chars2;var d=o.lineArray,e=this.diff_main(s,c,!1,p);this.diff_charsToLines_(e,d),this.diff_cleanupSemantic(e),e.push(new i.Diff(y,""));for(var t=0,r=0,l=0,a="",h="";t<e.length;){switch(e[t][0]){case u:l++,h+=e[t][1];break;case n:r++,a+=e[t][1];break;case y:if(r>=1&&l>=1){e.splice(t-r-l,r+l),t=t-r-l;for(var f=this.diff_main(a,h,!1,p),v=f.length-1;v>=0;v--)e.splice(t,0,f[v]);t=t+f.length}l=0,r=0,a="",h="";break}t++}return e.pop(),e},i.prototype.diff_bisect_=function(s,c,p){for(var o=s.length,d=c.length,e=Math.ceil((o+d)/2),t=e,r=2*e,l=new Array(r),a=new Array(r),h=0;h<r;h++)l[h]=-1,a[h]=-1;l[t+1]=0,a[t+1]=0;for(var f=o-d,v=f%2!=0,b=0,A=0,D=0,E=0,g=0;g<e&&!(new Date().getTime()>p);g++){for(var S=-g+b;S<=g-A;S+=2){var $=t+S,_;S==-g||S!=g&&l[$-1]<l[$+1]?_=l[$+1]:_=l[$-1]+1;for(var T=_-S;_<o&&T<d&&s.charAt(_)==c.charAt(T);)_++,T++;if(l[$]=_,_>o)A+=2;else if(T>d)b+=2;else if(v){var I=t+f-S;if(I>=0&&I<r&&a[I]!=-1){var w=o-a[I];if(_>=w)return this.diff_bisectSplit_(s,c,_,T,p)}}}for(var m=-g+D;m<=g-E;m+=2){var I=t+m,w;m==-g||m!=g&&a[I-1]<a[I+1]?w=a[I+1]:w=a[I-1]+1;for(var C=w-m;w<o&&C<d&&s.charAt(o-w-1)==c.charAt(d-C-1);)w++,C++;if(a[I]=w,w>o)E+=2;else if(C>d)D+=2;else if(!v){var $=t+f-m;if($>=0&&$<r&&l[$]!=-1){var _=l[$],T=t+_-$;if(w=o-w,_>=w)return this.diff_bisectSplit_(s,c,_,T,p)}}}}return[new i.Diff(n,s),new i.Diff(u,c)]},i.prototype.diff_bisectSplit_=function(s,c,p,o,d){var e=s.substring(0,p),t=c.substring(0,o),r=s.substring(p),l=c.substring(o),a=this.diff_main(e,t,!1,d),h=this.diff_main(r,l,!1,d);return a.concat(h)},i.prototype.diff_linesToChars_=function(s,c){var p=[],o={};p[0]="";function d(l){for(var a="",h=0,f=-1,v=p.length;f<l.length-1;){f=l.indexOf(`
`,h),f==-1&&(f=l.length-1);var b=l.substring(h,f+1);(o.hasOwnProperty?o.hasOwnProperty(b):o[b]!==void 0)?a+=String.fromCharCode(o[b]):(v==e&&(b=l.substring(h),f=l.length),a+=String.fromCharCode(v),o[b]=v,p[v++]=b),h=f+1}return a}var e=4e4,t=d(s);e=65535;var r=d(c);return{chars1:t,chars2:r,lineArray:p}},i.prototype.diff_charsToLines_=function(s,c){for(var p=0;p<s.length;p++){for(var o=s[p][1],d=[],e=0;e<o.length;e++)d[e]=c[o.charCodeAt(e)];s[p][1]=d.join("")}},i.prototype.diff_commonPrefix=function(s,c){if(!s||!c||s.charAt(0)!=c.charAt(0))return 0;for(var p=0,o=Math.min(s.length,c.length),d=o,e=0;p<d;)s.substring(e,d)==c.substring(e,d)?(p=d,e=p):o=d,d=Math.floor((o-p)/2+p);return d},i.prototype.diff_commonSuffix=function(s,c){if(!s||!c||s.charAt(s.length-1)!=c.charAt(c.length-1))return 0;for(var p=0,o=Math.min(s.length,c.length),d=o,e=0;p<d;)s.substring(s.length-d,s.length-e)==c.substring(c.length-d,c.length-e)?(p=d,e=p):o=d,d=Math.floor((o-p)/2+p);return d},i.prototype.diff_commonOverlap_=function(s,c){var p=s.length,o=c.length;if(p==0||o==0)return 0;p>o?s=s.substring(p-o):p<o&&(c=c.substring(0,p));var d=Math.min(p,o);if(s==c)return d;for(var e=0,t=1;;){var r=s.substring(d-t),l=c.indexOf(r);if(l==-1)return e;t+=l,(l==0||s.substring(d-t)==c.substring(0,t))&&(e=t,t++)}},i.prototype.diff_halfMatch_=function(s,c){if(this.Diff_Timeout<=0)return null;var p=s.length>c.length?s:c,o=s.length>c.length?c:s;if(p.length<4||o.length*2<p.length)return null;var d=this;function e(A,D,E){for(var g=A.substring(E,E+Math.floor(A.length/4)),S=-1,$="",_,T,I,w;(S=D.indexOf(g,S+1))!=-1;){var m=d.diff_commonPrefix(A.substring(E),D.substring(S)),C=d.diff_commonSuffix(A.substring(0,E),D.substring(0,S));$.length<C+m&&($=D.substring(S-C,S)+D.substring(S,S+m),_=A.substring(0,E-C),T=A.substring(E+m),I=D.substring(0,S-C),w=D.substring(S+m))}return $.length*2>=A.length?[_,T,I,w,$]:null}var t=e(p,o,Math.ceil(p.length/4)),r=e(p,o,Math.ceil(p.length/2)),l;if(!t&&!r)return null;r?t?l=t[4].length>r[4].length?t:r:l=r:l=t;var a,h,f,v;s.length>c.length?(a=l[0],h=l[1],f=l[2],v=l[3]):(f=l[0],v=l[1],a=l[2],h=l[3]);var b=l[4];return[a,h,f,v,b]},i.prototype.diff_cleanupSemantic=function(s){for(var c=!1,p=[],o=0,d=null,e=0,t=0,r=0,l=0,a=0;e<s.length;)s[e][0]==y?(p[o++]=e,t=l,r=a,l=0,a=0,d=s[e][1]):(s[e][0]==u?l+=s[e][1].length:a+=s[e][1].length,d&&d.length<=Math.max(t,r)&&d.length<=Math.max(l,a)&&(s.splice(p[o-1],0,new i.Diff(n,d)),s[p[o-1]+1][0]=u,o--,o--,e=o>0?p[o-1]:-1,t=0,r=0,l=0,a=0,d=null,c=!0)),e++;for(c&&this.diff_cleanupMerge(s),this.diff_cleanupSemanticLossless(s),e=1;e<s.length;){if(s[e-1][0]==n&&s[e][0]==u){var h=s[e-1][1],f=s[e][1],v=this.diff_commonOverlap_(h,f),b=this.diff_commonOverlap_(f,h);v>=b?(v>=h.length/2||v>=f.length/2)&&(s.splice(e,0,new i.Diff(y,f.substring(0,v))),s[e-1][1]=h.substring(0,h.length-v),s[e+1][1]=f.substring(v),e++):(b>=h.length/2||b>=f.length/2)&&(s.splice(e,0,new i.Diff(y,h.substring(0,b))),s[e-1][0]=u,s[e-1][1]=f.substring(0,f.length-b),s[e+1][0]=n,s[e+1][1]=h.substring(b),e++),e++}e++}},i.prototype.diff_cleanupSemanticLossless=function(s){function c(b,A){if(!b||!A)return 6;var D=b.charAt(b.length-1),E=A.charAt(0),g=D.match(i.nonAlphaNumericRegex_),S=E.match(i.nonAlphaNumericRegex_),$=g&&D.match(i.whitespaceRegex_),_=S&&E.match(i.whitespaceRegex_),T=$&&D.match(i.linebreakRegex_),I=_&&E.match(i.linebreakRegex_),w=T&&b.match(i.blanklineEndRegex_),m=I&&A.match(i.blanklineStartRegex_);return w||m?5:T||I?4:g&&!$&&_?3:$||_?2:g||S?1:0}for(var p=1;p<s.length-1;){if(s[p-1][0]==y&&s[p+1][0]==y){var o=s[p-1][1],d=s[p][1],e=s[p+1][1],t=this.diff_commonSuffix(o,d);if(t){var r=d.substring(d.length-t);o=o.substring(0,o.length-t),d=r+d.substring(0,d.length-t),e=r+e}for(var l=o,a=d,h=e,f=c(o,d)+c(d,e);d.charAt(0)===e.charAt(0);){o+=d.charAt(0),d=d.substring(1)+e.charAt(0),e=e.substring(1);var v=c(o,d)+c(d,e);v>=f&&(f=v,l=o,a=d,h=e)}s[p-1][1]!=l&&(l?s[p-1][1]=l:(s.splice(p-1,1),p--),s[p][1]=a,h?s[p+1][1]=h:(s.splice(p+1,1),p--))}p++}},i.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,i.whitespaceRegex_=/\s/,i.linebreakRegex_=/[\r\n]/,i.blanklineEndRegex_=/\n\r?\n$/,i.blanklineStartRegex_=/^\r?\n\r?\n/,i.prototype.diff_cleanupEfficiency=function(s){for(var c=!1,p=[],o=0,d=null,e=0,t=!1,r=!1,l=!1,a=!1;e<s.length;)s[e][0]==y?(s[e][1].length<this.Diff_EditCost&&(l||a)?(p[o++]=e,t=l,r=a,d=s[e][1]):(o=0,d=null),l=a=!1):(s[e][0]==n?a=!0:l=!0,d&&(t&&r&&l&&a||d.length<this.Diff_EditCost/2&&t+r+l+a==3)&&(s.splice(p[o-1],0,new i.Diff(n,d)),s[p[o-1]+1][0]=u,o--,d=null,t&&r?(l=a=!0,o=0):(o--,e=o>0?p[o-1]:-1,l=a=!1),c=!0)),e++;c&&this.diff_cleanupMerge(s)},i.prototype.diff_cleanupMerge=function(s){s.push(new i.Diff(y,""));for(var c=0,p=0,o=0,d="",e="",t;c<s.length;)switch(s[c][0]){case u:o++,e+=s[c][1],c++;break;case n:p++,d+=s[c][1],c++;break;case y:p+o>1?(p!==0&&o!==0&&(t=this.diff_commonPrefix(e,d),t!==0&&(c-p-o>0&&s[c-p-o-1][0]==y?s[c-p-o-1][1]+=e.substring(0,t):(s.splice(0,0,new i.Diff(y,e.substring(0,t))),c++),e=e.substring(t),d=d.substring(t)),t=this.diff_commonSuffix(e,d),t!==0&&(s[c][1]=e.substring(e.length-t)+s[c][1],e=e.substring(0,e.length-t),d=d.substring(0,d.length-t))),c-=p+o,s.splice(c,p+o),d.length&&(s.splice(c,0,new i.Diff(n,d)),c++),e.length&&(s.splice(c,0,new i.Diff(u,e)),c++),c++):c!==0&&s[c-1][0]==y?(s[c-1][1]+=s[c][1],s.splice(c,1)):c++,o=0,p=0,d="",e="";break}s[s.length-1][1]===""&&s.pop();var r=!1;for(c=1;c<s.length-1;)s[c-1][0]==y&&s[c+1][0]==y&&(s[c][1].substring(s[c][1].length-s[c-1][1].length)==s[c-1][1]?(s[c][1]=s[c-1][1]+s[c][1].substring(0,s[c][1].length-s[c-1][1].length),s[c+1][1]=s[c-1][1]+s[c+1][1],s.splice(c-1,1),r=!0):s[c][1].substring(0,s[c+1][1].length)==s[c+1][1]&&(s[c-1][1]+=s[c+1][1],s[c][1]=s[c][1].substring(s[c+1][1].length)+s[c+1][1],s.splice(c+1,1),r=!0)),c++;r&&this.diff_cleanupMerge(s)},i.prototype.diff_xIndex=function(s,c){var p=0,o=0,d=0,e=0,t;for(t=0;t<s.length&&(s[t][0]!==u&&(p+=s[t][1].length),s[t][0]!==n&&(o+=s[t][1].length),!(p>c));t++)d=p,e=o;return s.length!=t&&s[t][0]===n?e:e+(c-d)},i.prototype.diff_prettyHtml=function(s){for(var c=[],p=/&/g,o=/</g,d=/>/g,e=/\n/g,t=0;t<s.length;t++){var r=s[t][0],l=s[t][1],a=l.replace(p,"&amp;").replace(o,"&lt;").replace(d,"&gt;").replace(e,"&para;<br>");switch(r){case u:c[t]='<ins style="background:#e6ffe6;">'+a+"</ins>";break;case n:c[t]='<del style="background:#ffe6e6;">'+a+"</del>";break;case y:c[t]="<span>"+a+"</span>";break}}return c.join("")},i.prototype.diff_text1=function(s){for(var c=[],p=0;p<s.length;p++)s[p][0]!==u&&(c[p]=s[p][1]);return c.join("")},i.prototype.diff_text2=function(s){for(var c=[],p=0;p<s.length;p++)s[p][0]!==n&&(c[p]=s[p][1]);return c.join("")},i.prototype.diff_levenshtein=function(s){for(var c=0,p=0,o=0,d=0;d<s.length;d++){var e=s[d][0],t=s[d][1];switch(e){case u:p+=t.length;break;case n:o+=t.length;break;case y:c+=Math.max(p,o),p=0,o=0;break}}return c+=Math.max(p,o),c},i.prototype.diff_toDelta=function(s){for(var c=[],p=0;p<s.length;p++)switch(s[p][0]){case u:c[p]="+"+encodeURI(s[p][1]);break;case n:c[p]="-"+s[p][1].length;break;case y:c[p]="="+s[p][1].length;break}return c.join("	").replace(/%20/g," ")},i.prototype.diff_fromDelta=function(s,c){for(var p=[],o=0,d=0,e=c.split(/\t/g),t=0;t<e.length;t++){var r=e[t].substring(1);switch(e[t].charAt(0)){case"+":try{p[o++]=new i.Diff(u,decodeURI(r))}catch{throw new Error("Illegal escape in diff_fromDelta: "+r)}break;case"-":case"=":var l=parseInt(r,10);if(isNaN(l)||l<0)throw new Error("Invalid number in diff_fromDelta: "+r);var a=s.substring(d,d+=l);e[t].charAt(0)=="="?p[o++]=new i.Diff(y,a):p[o++]=new i.Diff(n,a);break;default:if(e[t])throw new Error("Invalid diff operation in diff_fromDelta: "+e[t])}}if(d!=s.length)throw new Error("Delta length ("+d+") does not equal source text length ("+s.length+").");return p},i.prototype.match_main=function(s,c,p){if(s==null||c==null||p==null)throw new Error("Null input. (match_main)");return p=Math.max(0,Math.min(p,s.length)),s==c?0:s.length?s.substring(p,p+c.length)==c?p:this.match_bitap_(s,c,p):-1},i.prototype.match_bitap_=function(s,c,p){if(c.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var o=this.match_alphabet_(c),d=this;function e(_,T){var I=_/c.length,w=Math.abs(p-T);return d.Match_Distance?I+w/d.Match_Distance:w?1:I}var t=this.Match_Threshold,r=s.indexOf(c,p);r!=-1&&(t=Math.min(e(0,r),t),r=s.lastIndexOf(c,p+c.length),r!=-1&&(t=Math.min(e(0,r),t)));var l=1<<c.length-1;r=-1;for(var a,h,f=c.length+s.length,v,b=0;b<c.length;b++){for(a=0,h=f;a<h;)e(b,p+h)<=t?a=h:f=h,h=Math.floor((f-a)/2+a);f=h;var A=Math.max(1,p-h+1),D=Math.min(p+h,s.length)+c.length,E=Array(D+2);E[D+1]=(1<<b)-1;for(var g=D;g>=A;g--){var S=o[s.charAt(g-1)];if(b===0?E[g]=(E[g+1]<<1|1)&S:E[g]=(E[g+1]<<1|1)&S|((v[g+1]|v[g])<<1|1)|v[g+1],E[g]&l){var $=e(b,g-1);if($<=t)if(t=$,r=g-1,r>p)A=Math.max(1,2*p-r);else break}}if(e(b+1,p)>t)break;v=E}return r},i.prototype.match_alphabet_=function(s){for(var c={},p=0;p<s.length;p++)c[s.charAt(p)]=0;for(var p=0;p<s.length;p++)c[s.charAt(p)]|=1<<s.length-p-1;return c},i.prototype.patch_addContext_=function(s,c){if(c.length!=0){if(s.start2===null)throw Error("patch not initialized");for(var p=c.substring(s.start2,s.start2+s.length1),o=0;c.indexOf(p)!=c.lastIndexOf(p)&&p.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)o+=this.Patch_Margin,p=c.substring(s.start2-o,s.start2+s.length1+o);o+=this.Patch_Margin;var d=c.substring(s.start2-o,s.start2);d&&s.diffs.unshift(new i.Diff(y,d));var e=c.substring(s.start2+s.length1,s.start2+s.length1+o);e&&s.diffs.push(new i.Diff(y,e)),s.start1-=d.length,s.start2-=d.length,s.length1+=d.length+e.length,s.length2+=d.length+e.length}},i.prototype.patch_make=function(s,c,p){var o,d;if(typeof s=="string"&&typeof c=="string"&&typeof p>"u")o=s,d=this.diff_main(o,c,!0),d.length>2&&(this.diff_cleanupSemantic(d),this.diff_cleanupEfficiency(d));else if(s&&typeof s=="object"&&typeof c>"u"&&typeof p>"u")d=s,o=this.diff_text1(d);else if(typeof s=="string"&&c&&typeof c=="object"&&typeof p>"u")o=s,d=c;else if(typeof s=="string"&&typeof c=="string"&&p&&typeof p=="object")o=s,d=p;else throw new Error("Unknown call format to patch_make.");if(d.length===0)return[];for(var e=[],t=new i.patch_obj,r=0,l=0,a=0,h=o,f=o,v=0;v<d.length;v++){var b=d[v][0],A=d[v][1];switch(!r&&b!==y&&(t.start1=l,t.start2=a),b){case u:t.diffs[r++]=d[v],t.length2+=A.length,f=f.substring(0,a)+A+f.substring(a);break;case n:t.length1+=A.length,t.diffs[r++]=d[v],f=f.substring(0,a)+f.substring(a+A.length);break;case y:A.length<=2*this.Patch_Margin&&r&&d.length!=v+1?(t.diffs[r++]=d[v],t.length1+=A.length,t.length2+=A.length):A.length>=2*this.Patch_Margin&&r&&(this.patch_addContext_(t,h),e.push(t),t=new i.patch_obj,r=0,h=f,l=a);break}b!==u&&(l+=A.length),b!==n&&(a+=A.length)}return r&&(this.patch_addContext_(t,h),e.push(t)),e},i.prototype.patch_deepCopy=function(s){for(var c=[],p=0;p<s.length;p++){var o=s[p],d=new i.patch_obj;d.diffs=[];for(var e=0;e<o.diffs.length;e++)d.diffs[e]=new i.Diff(o.diffs[e][0],o.diffs[e][1]);d.start1=o.start1,d.start2=o.start2,d.length1=o.length1,d.length2=o.length2,c[p]=d}return c},i.prototype.patch_apply=function(s,c){if(s.length==0)return[c,[]];s=this.patch_deepCopy(s);var p=this.patch_addPadding(s);c=p+c+p,this.patch_splitMax(s);for(var o=0,d=[],e=0;e<s.length;e++){var t=s[e].start2+o,r=this.diff_text1(s[e].diffs),l,a=-1;if(r.length>this.Match_MaxBits?(l=this.match_main(c,r.substring(0,this.Match_MaxBits),t),l!=-1&&(a=this.match_main(c,r.substring(r.length-this.Match_MaxBits),t+r.length-this.Match_MaxBits),(a==-1||l>=a)&&(l=-1))):l=this.match_main(c,r,t),l==-1)d[e]=!1,o-=s[e].length2-s[e].length1;else{d[e]=!0,o=l-t;var h;if(a==-1?h=c.substring(l,l+r.length):h=c.substring(l,a+this.Match_MaxBits),r==h)c=c.substring(0,l)+this.diff_text2(s[e].diffs)+c.substring(l+r.length);else{var f=this.diff_main(r,h,!1);if(r.length>this.Match_MaxBits&&this.diff_levenshtein(f)/r.length>this.Patch_DeleteThreshold)d[e]=!1;else{this.diff_cleanupSemanticLossless(f);for(var v=0,b,A=0;A<s[e].diffs.length;A++){var D=s[e].diffs[A];D[0]!==y&&(b=this.diff_xIndex(f,v)),D[0]===u?c=c.substring(0,l+b)+D[1]+c.substring(l+b):D[0]===n&&(c=c.substring(0,l+b)+c.substring(l+this.diff_xIndex(f,v+D[1].length))),D[0]!==n&&(v+=D[1].length)}}}}}return c=c.substring(p.length,c.length-p.length),[c,d]},i.prototype.patch_addPadding=function(s){for(var c=this.Patch_Margin,p="",o=1;o<=c;o++)p+=String.fromCharCode(o);for(var o=0;o<s.length;o++)s[o].start1+=c,s[o].start2+=c;var d=s[0],e=d.diffs;if(e.length==0||e[0][0]!=y)e.unshift(new i.Diff(y,p)),d.start1-=c,d.start2-=c,d.length1+=c,d.length2+=c;else if(c>e[0][1].length){var t=c-e[0][1].length;e[0][1]=p.substring(e[0][1].length)+e[0][1],d.start1-=t,d.start2-=t,d.length1+=t,d.length2+=t}if(d=s[s.length-1],e=d.diffs,e.length==0||e[e.length-1][0]!=y)e.push(new i.Diff(y,p)),d.length1+=c,d.length2+=c;else if(c>e[e.length-1][1].length){var t=c-e[e.length-1][1].length;e[e.length-1][1]+=p.substring(0,t),d.length1+=t,d.length2+=t}return p},i.prototype.patch_splitMax=function(s){for(var c=this.Match_MaxBits,p=0;p<s.length;p++)if(!(s[p].length1<=c)){var o=s[p];s.splice(p--,1);for(var d=o.start1,e=o.start2,t="";o.diffs.length!==0;){var r=new i.patch_obj,l=!0;for(r.start1=d-t.length,r.start2=e-t.length,t!==""&&(r.length1=r.length2=t.length,r.diffs.push(new i.Diff(y,t)));o.diffs.length!==0&&r.length1<c-this.Patch_Margin;){var a=o.diffs[0][0],h=o.diffs[0][1];a===u?(r.length2+=h.length,e+=h.length,r.diffs.push(o.diffs.shift()),l=!1):a===n&&r.diffs.length==1&&r.diffs[0][0]==y&&h.length>2*c?(r.length1+=h.length,d+=h.length,l=!1,r.diffs.push(new i.Diff(a,h)),o.diffs.shift()):(h=h.substring(0,c-r.length1-this.Patch_Margin),r.length1+=h.length,d+=h.length,a===y?(r.length2+=h.length,e+=h.length):l=!1,r.diffs.push(new i.Diff(a,h)),h==o.diffs[0][1]?o.diffs.shift():o.diffs[0][1]=o.diffs[0][1].substring(h.length))}t=this.diff_text2(r.diffs),t=t.substring(t.length-this.Patch_Margin);var f=this.diff_text1(o.diffs).substring(0,this.Patch_Margin);f!==""&&(r.length1+=f.length,r.length2+=f.length,r.diffs.length!==0&&r.diffs[r.diffs.length-1][0]===y?r.diffs[r.diffs.length-1][1]+=f:r.diffs.push(new i.Diff(y,f))),l||s.splice(++p,0,r)}}},i.prototype.patch_toText=function(s){for(var c=[],p=0;p<s.length;p++)c[p]=s[p];return c.join("")},i.prototype.patch_fromText=function(s){var c=[];if(!s)return c;for(var p=s.split(`
`),o=0,d=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;o<p.length;){var e=p[o].match(d);if(!e)throw new Error("Invalid patch string: "+p[o]);var t=new i.patch_obj;for(c.push(t),t.start1=parseInt(e[1],10),e[2]===""?(t.start1--,t.length1=1):e[2]=="0"?t.length1=0:(t.start1--,t.length1=parseInt(e[2],10)),t.start2=parseInt(e[3],10),e[4]===""?(t.start2--,t.length2=1):e[4]=="0"?t.length2=0:(t.start2--,t.length2=parseInt(e[4],10)),o++;o<p.length;){var r=p[o].charAt(0);try{var l=decodeURI(p[o].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+l)}if(r=="-")t.diffs.push(new i.Diff(n,l));else if(r=="+")t.diffs.push(new i.Diff(u,l));else if(r==" ")t.diffs.push(new i.Diff(y,l));else{if(r=="@")break;if(r!=="")throw new Error('Invalid patch mode "'+r+'" in: '+l)}o++}}return c},i.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},i.patch_obj.prototype.toString=function(){var s,c;this.length1===0?s=this.start1+",0":this.length1==1?s=this.start1+1:s=this.start1+1+","+this.length1,this.length2===0?c=this.start2+",0":this.length2==1?c=this.start2+1:c=this.start2+1+","+this.length2;for(var p=["@@ -"+s+" +"+c+` @@
`],o,d=0;d<this.diffs.length;d++){switch(this.diffs[d][0]){case u:o="+";break;case n:o="-";break;case y:o=" ";break}p[d+1]=o+encodeURI(this.diffs[d][1])+`
`}return p.join("").replace(/%20/g," ")},L.exports=i,L.exports.diff_match_patch=i,L.exports.DIFF_DELETE=n,L.exports.DIFF_INSERT=u,L.exports.DIFF_EQUAL=y})(tr);var Sa=tr.exports,Aa=Gt&&Gt.__extends||function(){var L=function(i,n){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,y){u.__proto__=y}||function(u,y){for(var s in y)Object.prototype.hasOwnProperty.call(y,s)&&(u[s]=y[s])},L(i,n)};return function(i,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");L(i,n);function u(){this.constructor=i}i.prototype=n===null?Object.create(n):(u.prototype=n.prototype,new u)}}();Object.defineProperty(Gt,"__esModule",{value:!0});var ye=Vn,Si=dt,xa=ft,$a=Sa,Ta=function(L){Aa(i,L);function i(n){var u=L.call(this,n)||this;return u.state={value:u.props.value},u.onChange=u.onChange.bind(u),u.diff=u.diff.bind(u),u}return i.prototype.componentDidUpdate=function(){var n=this.props.value;n!==this.state.value&&this.setState({value:n})},i.prototype.onChange=function(n){this.setState({value:n}),this.props.onChange&&this.props.onChange(n)},i.prototype.diff=function(){var n=new $a,u=this.state.value[0],y=this.state.value[1];if(u.length===0&&y.length===0)return[];var s=n.diff_main(u,y);n.diff_cleanupSemantic(s);var c=this.generateDiffedLines(s),p=this.setCodeMarkers(c);return p},i.prototype.generateDiffedLines=function(n){var u={DIFF_EQUAL:0,DIFF_DELETE:-1,DIFF_INSERT:1},y={left:[],right:[]},s={left:1,right:1};return n.forEach(function(c){var p=c[0],o=c[1],d=o.split(`
`).length-1;if(o.length!==0){var e=o[0],t=o[o.length-1],r=0;switch(p){case u.DIFF_EQUAL:s.left+=d,s.right+=d;break;case u.DIFF_DELETE:e===`
`&&(s.left++,d--),r=d,r===0&&y.right.push({startLine:s.right,endLine:s.right}),t===`
`&&(r-=1),y.left.push({startLine:s.left,endLine:s.left+r}),s.left+=d;break;case u.DIFF_INSERT:e===`
`&&(s.right++,d--),r=d,r===0&&y.left.push({startLine:s.left,endLine:s.left}),t===`
`&&(r-=1),y.right.push({startLine:s.right,endLine:s.right+r}),s.right+=d;break;default:throw new Error("Diff type was not defined.")}}}),y},i.prototype.setCodeMarkers=function(n){n===void 0&&(n={left:[],right:[]});for(var u=[],y={left:[],right:[]},s=0;s<n.left.length;s++){var c={startRow:n.left[s].startLine-1,endRow:n.left[s].endLine,type:"text",className:"codeMarker"};y.left.push(c)}for(var s=0;s<n.right.length;s++){var c={startRow:n.right[s].startLine-1,endRow:n.right[s].endLine,type:"text",className:"codeMarker"};y.right.push(c)}return u[0]=y.left,u[1]=y.right,u},i.prototype.render=function(){var n=this.diff();return Si.createElement(xa.default,{name:this.props.name,className:this.props.className,focus:this.props.focus,orientation:this.props.orientation,splits:this.props.splits,mode:this.props.mode,theme:this.props.theme,height:this.props.height,width:this.props.width,fontSize:this.props.fontSize,showGutter:this.props.showGutter,onChange:this.onChange,onPaste:this.props.onPaste,onLoad:this.props.onLoad,onScroll:this.props.onScroll,minLines:this.props.minLines,maxLines:this.props.maxLines,readOnly:this.props.readOnly,highlightActiveLine:this.props.highlightActiveLine,showPrintMargin:this.props.showPrintMargin,tabSize:this.props.tabSize,cursorStart:this.props.cursorStart,editorProps:this.props.editorProps,style:this.props.style,scrollMargin:this.props.scrollMargin,setOptions:this.props.setOptions,wrapEnabled:this.props.wrapEnabled,enableBasicAutocompletion:this.props.enableBasicAutocompletion,enableLiveAutocompletion:this.props.enableLiveAutocompletion,value:this.state.value,markers:n})},i.propTypes={cursorStart:ye.number,editorProps:ye.object,enableBasicAutocompletion:ye.bool,enableLiveAutocompletion:ye.bool,focus:ye.bool,fontSize:ye.number,height:ye.string,highlightActiveLine:ye.bool,maxLines:ye.number,minLines:ye.number,mode:ye.string,name:ye.string,className:ye.string,onLoad:ye.func,onPaste:ye.func,onScroll:ye.func,onChange:ye.func,orientation:ye.string,readOnly:ye.bool,scrollMargin:ye.array,setOptions:ye.object,showGutter:ye.bool,showPrintMargin:ye.bool,splits:ye.number,style:ye.object,tabSize:ye.number,theme:ye.string,value:ye.array,width:ye.string,wrapEnabled:ye.bool},i.defaultProps={cursorStart:1,editorProps:{},enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,focus:!1,fontSize:12,height:"500px",highlightActiveLine:!0,maxLines:null,minLines:null,mode:"",name:"ace-editor",onLoad:null,onScroll:null,onPaste:null,onChange:null,orientation:"beside",readOnly:!1,scrollMargin:[0,0,0,0],setOptions:{},showGutter:!0,showPrintMargin:!0,splits:2,style:{},tabSize:4,theme:"github",value:["",""],width:"500px",wrapEnabled:!0},i}(Si.Component);Gt.default=Ta;Object.defineProperty(It,"__esModule",{value:!0});It.diff=It.split=void 0;var _a=St,ka=Gt;It.diff=ka.default;var Ma=ft;It.split=Ma.default;var La=It.default=_a.default,Ia={exports:{}};(function(L,i){ace.define("ace/mode/json_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(n,u,y){var s=n("../lib/oop"),c=n("./text_highlight_rules").TextHighlightRules,p=function(){this.$rules={start:[{token:"variable",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]\\s*(?=:)'},{token:"string",regex:'"',next:"string"},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:"text",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"comment",regex:"\\/\\/.*$"},{token:"comment.start",regex:"\\/\\*",next:"comment"},{token:"paren.lparen",regex:"[[({]"},{token:"paren.rparen",regex:"[\\])}]"},{token:"punctuation.operator",regex:/[,]/},{token:"text",regex:"\\s+"}],string:[{token:"constant.language.escape",regex:/\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|["\\\/bfnrt])/},{token:"string",regex:'"|$',next:"start"},{defaultToken:"string"}],comment:[{token:"comment.end",regex:"\\*\\/",next:"start"},{defaultToken:"comment"}]}};s.inherits(p,c),u.JsonHighlightRules=p}),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(n,u,y){var s=n("../range").Range,c=function(){};(function(){this.checkOutdent=function(p,o){return/^\s+$/.test(p)?/^\s*\}/.test(o):!1},this.autoOutdent=function(p,o){var d=p.getLine(o),e=d.match(/^(\s*\})/);if(!e)return 0;var t=e[1].length,r=p.findMatchingBracket({row:o,column:t});if(!r||r.row==o)return 0;var l=this.$getIndent(p.getLine(r.row));p.replace(new s(o,0,o,t-1),l)},this.$getIndent=function(p){return p.match(/^\s*/)[0]}}).call(c.prototype),u.MatchingBraceOutdent=c}),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(n,u,y){var s=n("../../lib/oop"),c=n("../../range").Range,p=n("./fold_mode").FoldMode,o=u.FoldMode=function(d){d&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+d.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+d.end)))};s.inherits(o,p),function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(d,e,t){var r=d.getLine(t);if(this.singleLineBlockCommentRe.test(r)&&!this.startRegionRe.test(r)&&!this.tripleStarBlockCommentRe.test(r))return"";var l=this._getFoldWidgetBase(d,e,t);return!l&&this.startRegionRe.test(r)?"start":l},this.getFoldWidgetRange=function(d,e,t,r){var l=d.getLine(t);if(this.startRegionRe.test(l))return this.getCommentRegionBlock(d,l,t);var f=l.match(this.foldingStartMarker);if(f){var a=f.index;if(f[1])return this.openingBracketBlock(d,f[1],t,a);var h=d.getCommentFoldRange(t,a+f[0].length,1);return h&&!h.isMultiLine()&&(r?h=this.getSectionRange(d,t):e!="all"&&(h=null)),h}if(e!=="markbegin"){var f=l.match(this.foldingStopMarker);if(f){var a=f.index+f[0].length;return f[1]?this.closingBracketBlock(d,f[1],t,a):d.getCommentFoldRange(t,a,-1)}}},this.getSectionRange=function(d,e){var t=d.getLine(e),r=t.search(/\S/),l=e,a=t.length;e+=1;for(var h=e,f=d.getLength();++e<f;){t=d.getLine(e);var v=t.search(/\S/);if(v!==-1){if(r>v)break;var b=this.getFoldWidgetRange(d,"all",e);if(b){if(b.start.row<=l)break;if(b.isMultiLine())e=b.end.row;else if(r==v)break}h=e}}return new c(l,a,h,d.getLine(h).length)},this.getCommentRegionBlock=function(d,e,t){for(var r=e.search(/\s*$/),l=d.getLength(),a=t,h=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,f=1;++t<l;){e=d.getLine(t);var v=h.exec(e);if(v&&(v[1]?f--:f++,!f))break}var b=t;if(b>a)return new c(a,r,b,e.length)}}.call(o.prototype)}),ace.define("ace/mode/json",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/json_highlight_rules","ace/mode/matching_brace_outdent","ace/mode/folding/cstyle","ace/worker/worker_client"],function(n,u,y){var s=n("../lib/oop"),c=n("./text").Mode,p=n("./json_highlight_rules").JsonHighlightRules,o=n("./matching_brace_outdent").MatchingBraceOutdent,d=n("./folding/cstyle").FoldMode,e=n("../worker/worker_client").WorkerClient,t=function(){this.HighlightRules=p,this.$outdent=new o,this.$behaviour=this.$defaultBehaviour,this.foldingRules=new d};s.inherits(t,c),function(){this.lineCommentStart="//",this.blockComment={start:"/*",end:"*/"},this.getNextLineIndent=function(r,l,a){var h=this.$getIndent(l);if(r=="start"){var f=l.match(/^.*[\{\(\[]\s*$/);f&&(h+=a)}return h},this.checkOutdent=function(r,l,a){return this.$outdent.checkOutdent(l,a)},this.autoOutdent=function(r,l,a){this.$outdent.autoOutdent(l,a)},this.createWorker=function(r){var l=new e(["ace"],"ace/mode/json_worker","JsonWorker");return l.attachToDocument(r.getDocument()),l.on("annotate",function(a){r.setAnnotations(a.data)}),l.on("terminate",function(){r.clearAnnotations()}),l},this.$id="ace/mode/json"}.call(t.prototype),u.Mode=t}),function(){ace.require(["ace/mode/json"],function(n){L&&(L.exports=n)})}()})(Ia);var Fa={exports:{}};(function(L,i){ace.define("ace/mode/json_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(n,u,y){var s=n("../lib/oop"),c=n("./text_highlight_rules").TextHighlightRules,p=function(){this.$rules={start:[{token:"variable",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]\\s*(?=:)'},{token:"string",regex:'"',next:"string"},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:"text",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"comment",regex:"\\/\\/.*$"},{token:"comment.start",regex:"\\/\\*",next:"comment"},{token:"paren.lparen",regex:"[[({]"},{token:"paren.rparen",regex:"[\\])}]"},{token:"punctuation.operator",regex:/[,]/},{token:"text",regex:"\\s+"}],string:[{token:"constant.language.escape",regex:/\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|["\\\/bfnrt])/},{token:"string",regex:'"|$',next:"start"},{defaultToken:"string"}],comment:[{token:"comment.end",regex:"\\*\\/",next:"start"},{defaultToken:"comment"}]}};s.inherits(p,c),u.JsonHighlightRules=p}),ace.define("ace/mode/json5_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/json_highlight_rules"],function(n,u,y){var s=n("../lib/oop"),c=n("./json_highlight_rules").JsonHighlightRules,p=function(){c.call(this);var o=[{token:"variable",regex:/[a-zA-Z$_\u00a1-\uffff][\w$\u00a1-\uffff]*\s*(?=:)/},{token:"variable",regex:/['](?:(?:\\.)|(?:[^'\\]))*?[']\s*(?=:)/},{token:"constant.language.boolean",regex:/(?:null)\b/},{token:"string",regex:/'/,next:[{token:"constant.language.escape",regex:/\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|["\/bfnrt]|$)/,consumeLineEnd:!0},{token:"string",regex:/'|$/,next:"start"},{defaultToken:"string"}]},{token:"string",regex:/"(?![^"]*":)/,next:[{token:"constant.language.escape",regex:/\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|["\/bfnrt]|$)/,consumeLineEnd:!0},{token:"string",regex:/"|$/,next:"start"},{defaultToken:"string"}]},{token:"constant.numeric",regex:/[+-]?(?:Infinity|NaN)\b/}];for(var d in this.$rules)this.$rules[d].unshift.apply(this.$rules[d],o);this.normalizeRules()};s.inherits(p,c),u.Json5HighlightRules=p}),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(n,u,y){var s=n("../range").Range,c=function(){};(function(){this.checkOutdent=function(p,o){return/^\s+$/.test(p)?/^\s*\}/.test(o):!1},this.autoOutdent=function(p,o){var d=p.getLine(o),e=d.match(/^(\s*\})/);if(!e)return 0;var t=e[1].length,r=p.findMatchingBracket({row:o,column:t});if(!r||r.row==o)return 0;var l=this.$getIndent(p.getLine(r.row));p.replace(new s(o,0,o,t-1),l)},this.$getIndent=function(p){return p.match(/^\s*/)[0]}}).call(c.prototype),u.MatchingBraceOutdent=c}),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(n,u,y){var s=n("../../lib/oop"),c=n("../../range").Range,p=n("./fold_mode").FoldMode,o=u.FoldMode=function(d){d&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+d.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+d.end)))};s.inherits(o,p),function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(d,e,t){var r=d.getLine(t);if(this.singleLineBlockCommentRe.test(r)&&!this.startRegionRe.test(r)&&!this.tripleStarBlockCommentRe.test(r))return"";var l=this._getFoldWidgetBase(d,e,t);return!l&&this.startRegionRe.test(r)?"start":l},this.getFoldWidgetRange=function(d,e,t,r){var l=d.getLine(t);if(this.startRegionRe.test(l))return this.getCommentRegionBlock(d,l,t);var f=l.match(this.foldingStartMarker);if(f){var a=f.index;if(f[1])return this.openingBracketBlock(d,f[1],t,a);var h=d.getCommentFoldRange(t,a+f[0].length,1);return h&&!h.isMultiLine()&&(r?h=this.getSectionRange(d,t):e!="all"&&(h=null)),h}if(e!=="markbegin"){var f=l.match(this.foldingStopMarker);if(f){var a=f.index+f[0].length;return f[1]?this.closingBracketBlock(d,f[1],t,a):d.getCommentFoldRange(t,a,-1)}}},this.getSectionRange=function(d,e){var t=d.getLine(e),r=t.search(/\S/),l=e,a=t.length;e+=1;for(var h=e,f=d.getLength();++e<f;){t=d.getLine(e);var v=t.search(/\S/);if(v!==-1){if(r>v)break;var b=this.getFoldWidgetRange(d,"all",e);if(b){if(b.start.row<=l)break;if(b.isMultiLine())e=b.end.row;else if(r==v)break}h=e}}return new c(l,a,h,d.getLine(h).length)},this.getCommentRegionBlock=function(d,e,t){for(var r=e.search(/\s*$/),l=d.getLength(),a=t,h=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,f=1;++t<l;){e=d.getLine(t);var v=h.exec(e);if(v&&(v[1]?f--:f++,!f))break}var b=t;if(b>a)return new c(a,r,b,e.length)}}.call(o.prototype)}),ace.define("ace/mode/json5",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/json5_highlight_rules","ace/mode/matching_brace_outdent","ace/mode/folding/cstyle"],function(n,u,y){var s=n("../lib/oop"),c=n("./text").Mode,p=n("./json5_highlight_rules").Json5HighlightRules,o=n("./matching_brace_outdent").MatchingBraceOutdent,d=n("./folding/cstyle").FoldMode,e=function(){this.HighlightRules=p,this.$outdent=new o,this.$behaviour=this.$defaultBehaviour,this.foldingRules=new d};s.inherits(e,c),function(){this.lineCommentStart="//",this.blockComment={start:"/*",end:"*/"},this.checkOutdent=function(t,r,l){return this.$outdent.checkOutdent(r,l)},this.autoOutdent=function(t,r,l){this.$outdent.autoOutdent(r,l)},this.$id="ace/mode/json5"}.call(e.prototype),u.Mode=e}),function(){ace.require(["ace/mode/json5"],function(n){L&&(L.exports=n)})}()})(Fa);var Ra={};(function(L){function i(y,s){for(var c=y,p="";c;){var o=s[c];if(typeof o=="string")return o+p;if(o)return o.location.replace(/\/*$/,"/")+(p||o.main||o.name);if(o===!1)return"";var d=c.lastIndexOf("/");if(d===-1)break;p=c.substr(d)+p,c=c.slice(0,d)}return y}if(!(typeof L.window<"u"&&L.document)&&!(L.require&&L.define)){L.console||(L.console=function(){var y=Array.prototype.slice.call(arguments,0);postMessage({type:"log",data:y})},L.console.error=L.console.warn=L.console.log=L.console.trace=L.console),L.window=L,L.ace=L,L.onerror=function(y,s,c,p,o){postMessage({type:"error",data:{message:y,data:o&&o.data,file:s,line:c,col:p,stack:o&&o.stack}})},L.normalizeModule=function(y,s){if(s.indexOf("!")!==-1){var c=s.split("!");return L.normalizeModule(y,c[0])+"!"+L.normalizeModule(y,c[1])}if(s.charAt(0)=="."){var p=y.split("/").slice(0,-1).join("/");for(s=(p?p+"/":"")+s;s.indexOf(".")!==-1&&o!=s;){var o=s;s=s.replace(/^\.\//,"").replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return s},L.require=function(y,s){if(s||(s=y,y=null),!s.charAt)throw new Error("worker.js require() accepts only (parentId, id) as arguments");s=L.normalizeModule(y,s);var c=L.require.modules[s];if(c)return c.initialized||(c.initialized=!0,c.exports=c.factory().exports),c.exports;if(!L.require.tlns)return console.log("unable to load "+s);var p=i(s,L.require.tlns);return p.slice(-3)!=".js"&&(p+=".js"),L.require.id=s,L.require.modules[s]={},importScripts(p),L.require(y,s)},L.require.modules={},L.require.tlns={},L.define=function(y,s,c){if(arguments.length==2?(c=s,typeof y!="string"&&(s=y,y=L.require.id)):arguments.length==1&&(c=y,s=[],y=L.require.id),typeof c!="function"){L.require.modules[y]={exports:c,initialized:!0};return}s.length||(s=["require","exports","module"]);var p=function(o){return L.require(y,o)};L.require.modules[y]={exports:{},factory:function(){var o=this,d=c.apply(this,s.slice(0,c.length).map(function(e){switch(e){case"require":return p;case"exports":return o.exports;case"module":return o;default:return p(e)}}));return d&&(o.exports=d),o}}},L.define.amd={},L.require.tlns={},L.initBaseUrls=function(y){for(var s in y)this.require.tlns[s]=y[s]},L.initSender=function(){var y=L.require("ace/lib/event_emitter").EventEmitter,s=L.require("ace/lib/oop"),c=function(){};return function(){s.implement(this,y),this.callback=function(p,o){postMessage({type:"call",id:o,data:p})},this.emit=function(p,o){postMessage({type:"event",name:p,data:o})}}.call(c.prototype),new c};var n=L.main=null,u=L.sender=null;L.onmessage=function(y){var s=y.data;if(s.event&&u)u._signal(s.event,s.data);else if(s.command)if(n[s.command])n[s.command].apply(n,s.args);else{if(!L[s.command])throw new Error("Unknown command:"+s.command);L[s.command].apply(L,s.args)}else if(s.init){L.initBaseUrls(s.tlns),u=L.sender=L.initSender();var c=this.require(s.module)[s.classname];n=L.main=new c(u)}}}})(Ra),ace.define("ace/lib/oop",[],function(L,i,n){i.inherits=function(u,y){u.super_=y,u.prototype=Object.create(y.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}})},i.mixin=function(u,y){for(var s in y)u[s]=y[s];return u},i.implement=function(u,y){i.mixin(u,y)}}),ace.define("ace/apply_delta",[],function(L,i,n){i.applyDelta=function(u,y,s){var c=y.start.row,p=y.start.column,o=u[c]||"";switch(y.action){case"insert":var d=y.lines;if(d.length===1)u[c]=o.substring(0,p)+y.lines[0]+o.substring(p);else{var e=[c,1].concat(y.lines);u.splice.apply(u,e),u[c]=o.substring(0,p)+u[c],u[c+y.lines.length-1]+=o.substring(p)}break;case"remove":var t=y.end.column,r=y.end.row;c===r?u[c]=o.substring(0,p)+o.substring(t):u.splice(c,r-c+1,o.substring(0,p)+u[r].substring(t))}}}),ace.define("ace/lib/event_emitter",[],function(L,i,n){var u={},y=function(){this.propagationStopped=!0},s=function(){this.defaultPrevented=!0};u._emit=u._dispatchEvent=function(c,p){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var o=this._eventRegistry[c]||[],d=this._defaultHandlers[c];if(!(!o.length&&!d)){(typeof p!="object"||!p)&&(p={}),p.type||(p.type=c),p.stopPropagation||(p.stopPropagation=y),p.preventDefault||(p.preventDefault=s),o=o.slice();for(var e=0;e<o.length&&(o[e](p,this),!p.propagationStopped);e++);if(d&&!p.defaultPrevented)return d(p,this)}},u._signal=function(c,p){var o=(this._eventRegistry||{})[c];if(o){o=o.slice();for(var d=0;d<o.length;d++)o[d](p,this)}},u.once=function(c,p){var o=this;if(this.on(c,function d(){o.off(c,d),p.apply(null,arguments)}),!p)return new Promise(function(d){p=d})},u.setDefaultHandler=function(c,p){var o=this._defaultHandlers;if(o||(o=this._defaultHandlers={_disabled_:{}}),o[c]){var d=o[c],e=o._disabled_[c];e||(o._disabled_[c]=e=[]),e.push(d);var t=e.indexOf(p);t!=-1&&e.splice(t,1)}o[c]=p},u.removeDefaultHandler=function(c,p){var o=this._defaultHandlers;if(o){var d=o._disabled_[c];if(o[c]==p)d&&this.setDefaultHandler(c,d.pop());else if(d){var e=d.indexOf(p);e!=-1&&d.splice(e,1)}}},u.on=u.addEventListener=function(c,p,o){this._eventRegistry=this._eventRegistry||{};var d=this._eventRegistry[c];return d||(d=this._eventRegistry[c]=[]),d.indexOf(p)==-1&&d[o?"unshift":"push"](p),p},u.off=u.removeListener=u.removeEventListener=function(c,p){this._eventRegistry=this._eventRegistry||{};var o=this._eventRegistry[c];if(o){var d=o.indexOf(p);d!==-1&&o.splice(d,1)}},u.removeAllListeners=function(c){c||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[c]=void 0),this._defaultHandlers&&(this._defaultHandlers[c]=void 0)},i.EventEmitter=u}),ace.define("ace/range",[],function(L,i,n){var u=function(){function y(s,c,p,o){this.start={row:s,column:c},this.end={row:p,column:o}}return y.prototype.isEqual=function(s){return this.start.row===s.start.row&&this.end.row===s.end.row&&this.start.column===s.start.column&&this.end.column===s.end.column},y.prototype.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},y.prototype.contains=function(s,c){return this.compare(s,c)==0},y.prototype.compareRange=function(s){var c,p=s.end,o=s.start;return c=this.compare(p.row,p.column),c==1?(c=this.compare(o.row,o.column),c==1?2:c==0?1:0):c==-1?-2:(c=this.compare(o.row,o.column),c==-1?-1:c==1?42:0)},y.prototype.comparePoint=function(s){return this.compare(s.row,s.column)},y.prototype.containsRange=function(s){return this.comparePoint(s.start)==0&&this.comparePoint(s.end)==0},y.prototype.intersects=function(s){var c=this.compareRange(s);return c==-1||c==0||c==1},y.prototype.isEnd=function(s,c){return this.end.row==s&&this.end.column==c},y.prototype.isStart=function(s,c){return this.start.row==s&&this.start.column==c},y.prototype.setStart=function(s,c){typeof s=="object"?(this.start.column=s.column,this.start.row=s.row):(this.start.row=s,this.start.column=c)},y.prototype.setEnd=function(s,c){typeof s=="object"?(this.end.column=s.column,this.end.row=s.row):(this.end.row=s,this.end.column=c)},y.prototype.inside=function(s,c){return this.compare(s,c)==0?!(this.isEnd(s,c)||this.isStart(s,c)):!1},y.prototype.insideStart=function(s,c){return this.compare(s,c)==0?!this.isEnd(s,c):!1},y.prototype.insideEnd=function(s,c){return this.compare(s,c)==0?!this.isStart(s,c):!1},y.prototype.compare=function(s,c){return!this.isMultiLine()&&s===this.start.row?c<this.start.column?-1:c>this.end.column?1:0:s<this.start.row?-1:s>this.end.row?1:this.start.row===s?c>=this.start.column?0:-1:this.end.row===s?c<=this.end.column?0:1:0},y.prototype.compareStart=function(s,c){return this.start.row==s&&this.start.column==c?-1:this.compare(s,c)},y.prototype.compareEnd=function(s,c){return this.end.row==s&&this.end.column==c?1:this.compare(s,c)},y.prototype.compareInside=function(s,c){return this.end.row==s&&this.end.column==c?1:this.start.row==s&&this.start.column==c?-1:this.compare(s,c)},y.prototype.clipRows=function(s,c){if(this.end.row>c)var p={row:c+1,column:0};else if(this.end.row<s)var p={row:s,column:0};if(this.start.row>c)var o={row:c+1,column:0};else if(this.start.row<s)var o={row:s,column:0};return y.fromPoints(o||this.start,p||this.end)},y.prototype.extend=function(s,c){var p=this.compare(s,c);if(p==0)return this;if(p==-1)var o={row:s,column:c};else var d={row:s,column:c};return y.fromPoints(o||this.start,d||this.end)},y.prototype.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},y.prototype.isMultiLine=function(){return this.start.row!==this.end.row},y.prototype.clone=function(){return y.fromPoints(this.start,this.end)},y.prototype.collapseRows=function(){return this.end.column==0?new y(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new y(this.start.row,0,this.end.row,0)},y.prototype.toScreenRange=function(s){var c=s.documentToScreenPosition(this.start),p=s.documentToScreenPosition(this.end);return new y(c.row,c.column,p.row,p.column)},y.prototype.moveBy=function(s,c){this.start.row+=s,this.start.column+=c,this.end.row+=s,this.end.column+=c},y}();u.fromPoints=function(y,s){return new u(y.row,y.column,s.row,s.column)},u.comparePoints=function(y,s){return y.row-s.row||y.column-s.column},i.Range=u}),ace.define("ace/anchor",[],function(L,i,n){function u(o,d,e){var t=e?o.column<=d.column:o.column<d.column;return o.row<d.row||o.row==d.row&&t}function y(o,d,e){var t=o.action=="insert",r=(t?1:-1)*(o.end.row-o.start.row),l=(t?1:-1)*(o.end.column-o.start.column),a=o.start,h=t?a:o.end;return u(d,a,e)?{row:d.row,column:d.column}:u(h,d,!e)?{row:d.row+r,column:d.column+(d.row==h.row?l:0)}:{row:a.row,column:a.column}}var s=L("./lib/oop"),c=L("./lib/event_emitter").EventEmitter,p=function(){function o(d,e,t){this.$onChange=this.onChange.bind(this),this.attach(d),typeof e!="number"?this.setPosition(e.row,e.column):this.setPosition(e,t)}return o.prototype.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},o.prototype.getDocument=function(){return this.document},o.prototype.onChange=function(d){if(!(d.start.row==d.end.row&&d.start.row!=this.row)&&!(d.start.row>this.row)){var e=y(d,{row:this.row,column:this.column},this.$insertRight);this.setPosition(e.row,e.column,!0)}},o.prototype.setPosition=function(d,e,t){var r;if(t?r={row:d,column:e}:r=this.$clipPositionToDocument(d,e),!(this.row==r.row&&this.column==r.column)){var l={row:this.row,column:this.column};this.row=r.row,this.column=r.column,this._signal("change",{old:l,value:r})}},o.prototype.detach=function(){this.document.off("change",this.$onChange)},o.prototype.attach=function(d){this.document=d||this.document,this.document.on("change",this.$onChange)},o.prototype.$clipPositionToDocument=function(d,e){var t={};return d>=this.document.getLength()?(t.row=Math.max(0,this.document.getLength()-1),t.column=this.document.getLine(t.row).length):d<0?(t.row=0,t.column=0):(t.row=d,t.column=Math.min(this.document.getLine(t.row).length,Math.max(0,e))),e<0&&(t.column=0),t},o}();p.prototype.$insertRight=!1,s.implement(p.prototype,c),i.Anchor=p}),ace.define("ace/document",[],function(L,i,n){var u=L("./lib/oop"),y=L("./apply_delta").applyDelta,s=L("./lib/event_emitter").EventEmitter,c=L("./range").Range,p=L("./anchor").Anchor,o=function(){function d(e){this.$lines=[""],e.length===0?this.$lines=[""]:Array.isArray(e)?this.insertMergedLines({row:0,column:0},e):this.insert({row:0,column:0},e)}return d.prototype.setValue=function(e){var t=this.getLength()-1;this.remove(new c(0,0,t,this.getLine(t).length)),this.insert({row:0,column:0},e||"")},d.prototype.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},d.prototype.createAnchor=function(e,t){return new p(this,e,t)},d.prototype.$detectNewLine=function(e){var t=e.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=t?t[1]:`
`,this._signal("changeNewLineMode")},d.prototype.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return`\r
`;case"unix":return`
`;default:return this.$autoNewLine||`
`}},d.prototype.setNewLineMode=function(e){this.$newLineMode!==e&&(this.$newLineMode=e,this._signal("changeNewLineMode"))},d.prototype.getNewLineMode=function(){return this.$newLineMode},d.prototype.isNewLine=function(e){return e==`\r
`||e=="\r"||e==`
`},d.prototype.getLine=function(e){return this.$lines[e]||""},d.prototype.getLines=function(e,t){return this.$lines.slice(e,t+1)},d.prototype.getAllLines=function(){return this.getLines(0,this.getLength())},d.prototype.getLength=function(){return this.$lines.length},d.prototype.getTextRange=function(e){return this.getLinesForRange(e).join(this.getNewLineCharacter())},d.prototype.getLinesForRange=function(e){var t;if(e.start.row===e.end.row)t=[this.getLine(e.start.row).substring(e.start.column,e.end.column)];else{t=this.getLines(e.start.row,e.end.row),t[0]=(t[0]||"").substring(e.start.column);var r=t.length-1;e.end.row-e.start.row==r&&(t[r]=t[r].substring(0,e.end.column))}return t},d.prototype.insertLines=function(e,t){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(e,t)},d.prototype.removeLines=function(e,t){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(e,t)},d.prototype.insertNewLine=function(e){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(e,["",""])},d.prototype.insert=function(e,t){return this.getLength()<=1&&this.$detectNewLine(t),this.insertMergedLines(e,this.$split(t))},d.prototype.insertInLine=function(e,t){var r=this.clippedPos(e.row,e.column),l=this.pos(e.row,e.column+t.length);return this.applyDelta({start:r,end:l,action:"insert",lines:[t]},!0),this.clonePos(l)},d.prototype.clippedPos=function(e,t){var r=this.getLength();e===void 0?e=r:e<0?e=0:e>=r&&(e=r-1,t=void 0);var l=this.getLine(e);return t==null&&(t=l.length),t=Math.min(Math.max(t,0),l.length),{row:e,column:t}},d.prototype.clonePos=function(e){return{row:e.row,column:e.column}},d.prototype.pos=function(e,t){return{row:e,column:t}},d.prototype.$clipPosition=function(e){var t=this.getLength();return e.row>=t?(e.row=Math.max(0,t-1),e.column=this.getLine(t-1).length):(e.row=Math.max(0,e.row),e.column=Math.min(Math.max(e.column,0),this.getLine(e.row).length)),e},d.prototype.insertFullLines=function(e,t){e=Math.min(Math.max(e,0),this.getLength());var r=0;e<this.getLength()?(t=t.concat([""]),r=0):(t=[""].concat(t),e--,r=this.$lines[e].length),this.insertMergedLines({row:e,column:r},t)},d.prototype.insertMergedLines=function(e,t){var r=this.clippedPos(e.row,e.column),l={row:r.row+t.length-1,column:(t.length==1?r.column:0)+t[t.length-1].length};return this.applyDelta({start:r,end:l,action:"insert",lines:t}),this.clonePos(l)},d.prototype.remove=function(e){var t=this.clippedPos(e.start.row,e.start.column),r=this.clippedPos(e.end.row,e.end.column);return this.applyDelta({start:t,end:r,action:"remove",lines:this.getLinesForRange({start:t,end:r})}),this.clonePos(t)},d.prototype.removeInLine=function(e,t,r){var l=this.clippedPos(e,t),a=this.clippedPos(e,r);return this.applyDelta({start:l,end:a,action:"remove",lines:this.getLinesForRange({start:l,end:a})},!0),this.clonePos(l)},d.prototype.removeFullLines=function(e,t){e=Math.min(Math.max(0,e),this.getLength()-1),t=Math.min(Math.max(0,t),this.getLength()-1);var r=t==this.getLength()-1&&e>0,l=t<this.getLength()-1,a=r?e-1:e,h=r?this.getLine(a).length:0,f=l?t+1:t,v=l?0:this.getLine(f).length,b=new c(a,h,f,v),A=this.$lines.slice(e,t+1);return this.applyDelta({start:b.start,end:b.end,action:"remove",lines:this.getLinesForRange(b)}),A},d.prototype.removeNewLine=function(e){e<this.getLength()-1&&e>=0&&this.applyDelta({start:this.pos(e,this.getLine(e).length),end:this.pos(e+1,0),action:"remove",lines:["",""]})},d.prototype.replace=function(e,t){if(e instanceof c||(e=c.fromPoints(e.start,e.end)),t.length===0&&e.isEmpty())return e.start;if(t==this.getTextRange(e))return e.end;this.remove(e);var r;return t?r=this.insert(e.start,t):r=e.start,r},d.prototype.applyDeltas=function(e){for(var t=0;t<e.length;t++)this.applyDelta(e[t])},d.prototype.revertDeltas=function(e){for(var t=e.length-1;t>=0;t--)this.revertDelta(e[t])},d.prototype.applyDelta=function(e,t){var r=e.action=="insert";(r?e.lines.length<=1&&!e.lines[0]:!c.comparePoints(e.start,e.end))||(r&&e.lines.length>2e4?this.$splitAndapplyLargeDelta(e,2e4):(y(this.$lines,e,t),this._signal("change",e)))},d.prototype.$safeApplyDelta=function(e){var t=this.$lines.length;(e.action=="remove"&&e.start.row<t&&e.end.row<t||e.action=="insert"&&e.start.row<=t)&&this.applyDelta(e)},d.prototype.$splitAndapplyLargeDelta=function(e,t){for(var r=e.lines,l=r.length-t+1,a=e.start.row,h=e.start.column,f=0,v=0;f<l;f=v){v+=t-1;var b=r.slice(f,v);b.push(""),this.applyDelta({start:this.pos(a+f,h),end:this.pos(a+v,h=0),action:e.action,lines:b},!0)}e.lines=r.slice(f),e.start.row=a+f,e.start.column=h,this.applyDelta(e,!0)},d.prototype.revertDelta=function(e){this.$safeApplyDelta({start:this.clonePos(e.start),end:this.clonePos(e.end),action:e.action=="insert"?"remove":"insert",lines:e.lines.slice()})},d.prototype.indexToPosition=function(e,t){for(var r=this.$lines||this.getAllLines(),l=this.getNewLineCharacter().length,a=t||0,h=r.length;a<h;a++)if(e-=r[a].length+l,e<0)return{row:a,column:e+r[a].length+l};return{row:h-1,column:e+r[h-1].length+l}},d.prototype.positionToIndex=function(e,t){for(var r=this.$lines||this.getAllLines(),l=this.getNewLineCharacter().length,a=0,h=Math.min(e.row,r.length),f=t||0;f<h;++f)a+=r[f].length+l;return a+e.column},d.prototype.$split=function(e){return e.split(/\r\n|\r|\n/)},d}();o.prototype.$autoNewLine="",o.prototype.$newLineMode="auto",u.implement(o.prototype,s),i.Document=o}),ace.define("ace/lib/deep_copy",[],function(L,i,n){i.deepCopy=function u(y){if(typeof y!="object"||!y)return y;var s;if(Array.isArray(y)){s=[];for(var c=0;c<y.length;c++)s[c]=u(y[c]);return s}if(Object.prototype.toString.call(y)!=="[object Object]")return y;s={};for(var c in y)s[c]=u(y[c]);return s}}),ace.define("ace/lib/lang",[],function(L,i,n){i.last=function(s){return s[s.length-1]},i.stringReverse=function(s){return s.split("").reverse().join("")},i.stringRepeat=function(s,c){for(var p="";c>0;)c&1&&(p+=s),(c>>=1)&&(s+=s);return p};var u=/^\s\s*/,y=/\s\s*$/;i.stringTrimLeft=function(s){return s.replace(u,"")},i.stringTrimRight=function(s){return s.replace(y,"")},i.copyObject=function(s){var c={};for(var p in s)c[p]=s[p];return c},i.copyArray=function(s){for(var c=[],p=0,o=s.length;p<o;p++)s[p]&&typeof s[p]=="object"?c[p]=this.copyObject(s[p]):c[p]=s[p];return c},i.deepCopy=L("./deep_copy").deepCopy,i.arrayToMap=function(s){for(var c={},p=0;p<s.length;p++)c[s[p]]=1;return c},i.createMap=function(s){var c=Object.create(null);for(var p in s)c[p]=s[p];return c},i.arrayRemove=function(s,c){for(var p=0;p<=s.length;p++)c===s[p]&&s.splice(p,1)},i.escapeRegExp=function(s){return s.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},i.escapeHTML=function(s){return(""+s).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},i.getMatchOffsets=function(s,c){var p=[];return s.replace(c,function(o){p.push({offset:arguments[arguments.length-2],length:o.length})}),p},i.deferredCall=function(s){var c=null,p=function(){c=null,s()},o=function(d){return o.cancel(),c=setTimeout(p,d||0),o};return o.schedule=o,o.call=function(){return this.cancel(),s(),o},o.cancel=function(){return clearTimeout(c),c=null,o},o.isPending=function(){return c},o},i.delayedCall=function(s,c){var p=null,o=function(){p=null,s()},d=function(e){p==null&&(p=setTimeout(o,e||c))};return d.delay=function(e){p&&clearTimeout(p),p=setTimeout(o,e||c)},d.schedule=d,d.call=function(){this.cancel(),s()},d.cancel=function(){p&&clearTimeout(p),p=null},d.isPending=function(){return p},d},i.supportsLookbehind=function(){try{new RegExp("(?<=.)")}catch{return!1}return!0},i.skipEmptyMatch=function(s,c,p){return p&&s.codePointAt(c)>65535?2:1}}),ace.define("ace/worker/mirror",[],function(L,i,n){var u=L("../document").Document,y=L("../lib/lang"),s=i.Mirror=function(c){this.sender=c;var p=this.doc=new u(""),o=this.deferredUpdate=y.delayedCall(this.onUpdate.bind(this)),d=this;c.on("change",function(e){var t=e.data;if(t[0].start)p.applyDeltas(t);else for(var r=0;r<t.length;r+=2){var l,a;if(Array.isArray(t[r+1])?l={action:"insert",start:t[r],lines:t[r+1]}:l={action:"remove",start:t[r],end:t[r+1]},(l.action=="insert"?l.start:l.end).row>=p.$lines.length)throw a=new Error("Invalid delta"),a.data={path:d.$path,linesLength:p.$lines.length,start:l.start,end:l.end},a;p.applyDelta(l,!0)}if(d.$timeout)return o.schedule(d.$timeout);d.onUpdate()})};(function(){this.$timeout=500,this.setTimeout=function(c){this.$timeout=c},this.setValue=function(c){this.doc.setValue(c),this.deferredUpdate.schedule(this.$timeout)},this.getValue=function(c){this.sender.callback(this.doc.getValue(),c)},this.onUpdate=function(){},this.isPending=function(){return this.deferredUpdate.isPending()}}).call(s.prototype)}),ace.define("ace/mode/json/json_parse",[],function(L,i,n){var u,y,s={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},c,p=function(f){throw{name:"SyntaxError",message:f,at:u,text:c}},o=function(f){return f&&f!==y&&p("Expected '"+f+"' instead of '"+y+"'"),y=c.charAt(u),u+=1,y},d=function(){var f,v="";for(y==="-"&&(v="-",o("-"));y>="0"&&y<="9";)v+=y,o();if(y===".")for(v+=".";o()&&y>="0"&&y<="9";)v+=y;if(y==="e"||y==="E")for(v+=y,o(),(y==="-"||y==="+")&&(v+=y,o());y>="0"&&y<="9";)v+=y,o();if(f=+v,!isNaN(f))return f;p("Bad number")},e=function(){var f,v,b="",A;if(y==='"')for(;o();){if(y==='"')return o(),b;if(y==="\\")if(o(),y==="u"){for(A=0,v=0;v<4&&(f=parseInt(o(),16),!!isFinite(f));v+=1)A=A*16+f;b+=String.fromCharCode(A)}else{if(typeof s[y]!="string")break;b+=s[y]}else{if(y==`
`||y=="\r")break;b+=y}}p("Bad string")},t=function(){for(;y&&y<=" ";)o()},r=function(){switch(y){case"t":return o("t"),o("r"),o("u"),o("e"),!0;case"f":return o("f"),o("a"),o("l"),o("s"),o("e"),!1;case"n":return o("n"),o("u"),o("l"),o("l"),null}p("Unexpected '"+y+"'")},l,a=function(){var f=[];if(y==="["){if(o("["),t(),y==="]")return o("]"),f;for(;y;){if(f.push(l()),t(),y==="]")return o("]"),f;o(","),t()}}p("Bad array")},h=function(){var f,v={};if(y==="{"){if(o("{"),t(),y==="}")return o("}"),v;for(;y;){if(f=e(),t(),o(":"),Object.hasOwnProperty.call(v,f)&&p('Duplicate key "'+f+'"'),v[f]=l(),t(),y==="}")return o("}"),v;o(","),t()}}p("Bad object")};return l=function(){switch(t(),y){case"{":return h();case"[":return a();case'"':return e();case"-":return d();default:return y>="0"&&y<="9"?d():r()}},function(f,v){var b;return c=f,u=0,y=" ",b=l(),t(),y&&p("Syntax error"),typeof v=="function"?function A(D,E){var g,S,$=D[E];if($&&typeof $=="object")for(g in $)Object.hasOwnProperty.call($,g)&&(S=A($,g),S!==void 0?$[g]=S:delete $[g]);return v.call(D,E,$)}({"":b},""):b}}),ace.define("ace/mode/json_worker",[],function(L,i,n){var u=L("../lib/oop"),y=L("../worker/mirror").Mirror,s=L("./json/json_parse"),c=i.JsonWorker=function(p){y.call(this,p),this.setTimeout(200)};u.inherits(c,y),function(){this.onUpdate=function(){var p=this.doc.getValue(),o=[];try{p&&s(p)}catch(e){var d=this.doc.indexToPosition(e.at-1);o.push({row:d.row,column:d.column,text:e.message,type:"error"})}this.sender.emit("annotate",o)}}.call(c.prototype)});var Oa={exports:{}};(function(L,i){ace.define("ace/theme/clouds_midnight-css",["require","exports","module"],function(n,u,y){y.exports=`.ace-clouds-midnight .ace_gutter {
  background: #232323;
  color: #929292
}

.ace-clouds-midnight .ace_print-margin {
  width: 1px;
  background: #232323
}

.ace-clouds-midnight {
  background-color: #191919;
  color: #929292
}

.ace-clouds-midnight .ace_cursor {
  color: #7DA5DC
}

.ace-clouds-midnight .ace_marker-layer .ace_selection {
  background: #000000
}

.ace-clouds-midnight.ace_multiselect .ace_selection.ace_start {
  box-shadow: 0 0 3px 0px #191919;
}

.ace-clouds-midnight .ace_marker-layer .ace_step {
  background: rgb(102, 82, 0)
}

.ace-clouds-midnight .ace_marker-layer .ace_bracket {
  margin: -1px 0 0 -1px;
  border: 1px solid #BFBFBF
}

.ace-clouds-midnight .ace_marker-layer .ace_active-line {
  background: rgba(215, 215, 215, 0.031)
}

.ace-clouds-midnight .ace_gutter-active-line {
  background-color: rgba(215, 215, 215, 0.031)
}

.ace-clouds-midnight .ace_marker-layer .ace_selected-word {
  border: 1px solid #000000
}

.ace-clouds-midnight .ace_invisible {
  color: #666
}

.ace-clouds-midnight .ace_keyword,
.ace-clouds-midnight .ace_meta,
.ace-clouds-midnight .ace_support.ace_constant.ace_property-value {
  color: #927C5D
}

.ace-clouds-midnight .ace_keyword.ace_operator {
  color: #4B4B4B
}

.ace-clouds-midnight .ace_keyword.ace_other.ace_unit {
  color: #366F1A
}

.ace-clouds-midnight .ace_constant.ace_language {
  color: #39946A
}

.ace-clouds-midnight .ace_constant.ace_numeric {
  color: #46A609
}

.ace-clouds-midnight .ace_constant.ace_character.ace_entity {
  color: #A165AC
}

.ace-clouds-midnight .ace_invalid {
  color: #FFFFFF;
  background-color: #E92E2E
}

.ace-clouds-midnight .ace_fold {
  background-color: #927C5D;
  border-color: #929292
}

.ace-clouds-midnight .ace_storage,
.ace-clouds-midnight .ace_support.ace_class,
.ace-clouds-midnight .ace_support.ace_function,
.ace-clouds-midnight .ace_support.ace_other,
.ace-clouds-midnight .ace_support.ace_type {
  color: #E92E2E
}

.ace-clouds-midnight .ace_string {
  color: #5D90CD
}

.ace-clouds-midnight .ace_comment {
  color: #3C403B
}

.ace-clouds-midnight .ace_entity.ace_name.ace_tag,
.ace-clouds-midnight .ace_entity.ace_other.ace_attribute-name {
  color: #606060
}

.ace-clouds-midnight .ace_indent-guide {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNgYGBgYHB3d/8PAAOIAdULw8qMAAAAAElFTkSuQmCC) right repeat-y
}

.ace-clouds-midnight .ace_indent-guide-active {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQIW2PQ1dX9zzBz5sz/ABCcBFFentLlAAAAAElFTkSuQmCC) right repeat-y;
}
`}),ace.define("ace/theme/clouds_midnight",["require","exports","module","ace/theme/clouds_midnight-css","ace/lib/dom"],function(n,u,y){u.isDark=!0,u.cssClass="ace-clouds-midnight",u.cssText=n("./clouds_midnight-css");var s=n("../lib/dom");s.importCssString(u.cssText,u.cssClass,!1)}),function(){ace.require(["ace/theme/clouds_midnight"],function(n){L&&(L.exports=n)})}()})(Oa);var Na={exports:{}};(function(L,i){ace.define("ace/theme/chrome-css",["require","exports","module"],function(n,u,y){y.exports=`.ace-chrome .ace_gutter {
  background: #ebebeb;
  color: #333;
  overflow : hidden;
}

.ace-chrome .ace_print-margin {
  width: 1px;
  background: #e8e8e8;
}

.ace-chrome {
  background-color: #FFFFFF;
  color: black;
}

.ace-chrome .ace_cursor {
  color: black;
}

.ace-chrome .ace_invisible {
  color: rgb(191, 191, 191);
}

.ace-chrome .ace_constant.ace_buildin {
  color: rgb(88, 72, 246);
}

.ace-chrome .ace_constant.ace_language {
  color: rgb(88, 92, 246);
}

.ace-chrome .ace_constant.ace_library {
  color: rgb(6, 150, 14);
}

.ace-chrome .ace_invalid {
  background-color: rgb(153, 0, 0);
  color: white;
}

.ace-chrome .ace_fold {
}

.ace-chrome .ace_support.ace_function {
  color: rgb(60, 76, 114);
}

.ace-chrome .ace_support.ace_constant {
  color: rgb(6, 150, 14);
}

.ace-chrome .ace_support.ace_type,
.ace-chrome .ace_support.ace_class
.ace-chrome .ace_support.ace_other {
  color: rgb(109, 121, 222);
}

.ace-chrome .ace_variable.ace_parameter {
  font-style:italic;
  color:#FD971F;
}
.ace-chrome .ace_keyword.ace_operator {
  color: rgb(104, 118, 135);
}

.ace-chrome .ace_comment {
  color: #236e24;
}

.ace-chrome .ace_comment.ace_doc {
  color: #236e24;
}

.ace-chrome .ace_comment.ace_doc.ace_tag {
  color: #236e24;
}

.ace-chrome .ace_constant.ace_numeric {
  color: rgb(0, 0, 205);
}

.ace-chrome .ace_variable {
  color: rgb(49, 132, 149);
}

.ace-chrome .ace_xml-pe {
  color: rgb(104, 104, 91);
}

.ace-chrome .ace_entity.ace_name.ace_function {
  color: #0000A2;
}


.ace-chrome .ace_heading {
  color: rgb(12, 7, 255);
}

.ace-chrome .ace_list {
  color:rgb(185, 6, 144);
}

.ace-chrome .ace_marker-layer .ace_selection {
  background: rgb(181, 213, 255);
}

.ace-chrome .ace_marker-layer .ace_step {
  background: rgb(252, 255, 0);
}

.ace-chrome .ace_marker-layer .ace_stack {
  background: rgb(164, 229, 101);
}

.ace-chrome .ace_marker-layer .ace_bracket {
  margin: -1px 0 0 -1px;
  border: 1px solid rgb(192, 192, 192);
}

.ace-chrome .ace_marker-layer .ace_active-line {
  background: rgba(0, 0, 0, 0.07);
}

.ace-chrome .ace_gutter-active-line {
    background-color : #dcdcdc;
}

.ace-chrome .ace_marker-layer .ace_selected-word {
  background: rgb(250, 250, 255);
  border: 1px solid rgb(200, 200, 250);
}

.ace-chrome .ace_storage,
.ace-chrome .ace_keyword,
.ace-chrome .ace_meta.ace_tag {
  color: rgb(147, 15, 128);
}

.ace-chrome .ace_string.ace_regex {
  color: rgb(255, 0, 0)
}

.ace-chrome .ace_string {
  color: #1A1AA6;
}

.ace-chrome .ace_entity.ace_other.ace_attribute-name {
  color: #994409;
}

.ace-chrome .ace_indent-guide {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;
}
  
.ace-chrome .ace_indent-guide-active {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC") right repeat-y;
}
`}),ace.define("ace/theme/chrome",["require","exports","module","ace/theme/chrome-css","ace/lib/dom"],function(n,u,y){u.isDark=!1,u.cssClass="ace-chrome",u.cssText=n("./chrome-css");var s=n("../lib/dom");s.importCssString(u.cssText,u.cssClass,!1)}),function(){ace.require(["ace/theme/chrome"],function(n){L&&(L.exports=n)})}()})(Na);var Ba={exports:{}};(function(L,i){ace.define("ace/snippets",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter","ace/lib/lang","ace/range","ace/range_list","ace/keyboard/hash_handler","ace/tokenizer","ace/clipboard","ace/editor"],function(n,u,y){function s(g){var S=new Date().toLocaleString("en-us",g);return S.length==1?"0"+S:S}var c=n("./lib/dom"),p=n("./lib/oop"),o=n("./lib/event_emitter").EventEmitter,d=n("./lib/lang"),e=n("./range").Range,t=n("./range_list").RangeList,r=n("./keyboard/hash_handler").HashHandler,l=n("./tokenizer").Tokenizer,a=n("./clipboard"),h={CURRENT_WORD:function(g){return g.session.getTextRange(g.session.getWordRange())},SELECTION:function(g,S,$){var _=g.session.getTextRange();return $?_.replace(/\n\r?([ \t]*\S)/g,`
`+$+"$1"):_},CURRENT_LINE:function(g){return g.session.getLine(g.getCursorPosition().row)},PREV_LINE:function(g){return g.session.getLine(g.getCursorPosition().row-1)},LINE_INDEX:function(g){return g.getCursorPosition().row},LINE_NUMBER:function(g){return g.getCursorPosition().row+1},SOFT_TABS:function(g){return g.session.getUseSoftTabs()?"YES":"NO"},TAB_SIZE:function(g){return g.session.getTabSize()},CLIPBOARD:function(g){return a.getText&&a.getText()},FILENAME:function(g){return/[^/\\]*$/.exec(this.FILEPATH(g))[0]},FILENAME_BASE:function(g){return/[^/\\]*$/.exec(this.FILEPATH(g))[0].replace(/\.[^.]*$/,"")},DIRECTORY:function(g){return this.FILEPATH(g).replace(/[^/\\]*$/,"")},FILEPATH:function(g){return"/not implemented.txt"},WORKSPACE_NAME:function(){return"Unknown"},FULLNAME:function(){return"Unknown"},BLOCK_COMMENT_START:function(g){var S=g.session.$mode||{};return S.blockComment&&S.blockComment.start||""},BLOCK_COMMENT_END:function(g){var S=g.session.$mode||{};return S.blockComment&&S.blockComment.end||""},LINE_COMMENT:function(g){var S=g.session.$mode||{};return S.lineCommentStart||""},CURRENT_YEAR:s.bind(null,{year:"numeric"}),CURRENT_YEAR_SHORT:s.bind(null,{year:"2-digit"}),CURRENT_MONTH:s.bind(null,{month:"numeric"}),CURRENT_MONTH_NAME:s.bind(null,{month:"long"}),CURRENT_MONTH_NAME_SHORT:s.bind(null,{month:"short"}),CURRENT_DATE:s.bind(null,{day:"2-digit"}),CURRENT_DAY_NAME:s.bind(null,{weekday:"long"}),CURRENT_DAY_NAME_SHORT:s.bind(null,{weekday:"short"}),CURRENT_HOUR:s.bind(null,{hour:"2-digit",hour12:!1}),CURRENT_MINUTE:s.bind(null,{minute:"2-digit"}),CURRENT_SECOND:s.bind(null,{second:"2-digit"})};h.SELECTED_TEXT=h.SELECTION;var f=function(){function g(){this.snippetMap={},this.snippetNameMap={},this.variables=h}return g.prototype.getTokenizer=function(){return g.$tokenizer||this.createTokenizer()},g.prototype.createTokenizer=function(){function S(T){return T=T.substr(1),/^\d+$/.test(T)?[{tabstopId:parseInt(T,10)}]:[{text:T}]}function $(T){return"(?:[^\\\\"+T+"]|\\\\.)"}var _={regex:"/("+$("/")+"+)/",onMatch:function(T,I,w){var m=w[0];return m.fmtString=!0,m.guard=T.slice(1,-1),m.flag="",""},next:"formatString"};return g.$tokenizer=new l({start:[{regex:/\\./,onMatch:function(T,I,w){var m=T[1];return(m=="}"&&w.length||"`$\\".indexOf(m)!=-1)&&(T=m),[T]}},{regex:/}/,onMatch:function(T,I,w){return[w.length?w.shift():T]}},{regex:/\$(?:\d+|\w+)/,onMatch:S},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function(T,I,w){var m=S(T.substr(1));return w.unshift(m[0]),m},next:"snippetVar"},{regex:/\n/,token:"newline",merge:!1}],snippetVar:[{regex:"\\|"+$("\\|")+"*\\|",onMatch:function(T,I,w){var m=T.slice(1,-1).replace(/\\[,|\\]|,/g,function(C){return C.length==2?C[1]:"\0"}).split("\0").map(function(C){return{value:C}});return w[0].choices=m,[m[0]]},next:"start"},_,{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:/:/,onMatch:function(T,I,w){return w.length&&w[0].expectElse?(w[0].expectElse=!1,w[0].ifEnd={elseEnd:w[0]},[w[0].ifEnd]):":"}},{regex:/\\./,onMatch:function(T,I,w){var m=T[1];return m=="}"&&w.length||"`$\\".indexOf(m)!=-1?T=m:m=="n"?T=`
`:m=="t"?T="	":"ulULE".indexOf(m)!=-1&&(T={changeCase:m,local:m>"a"}),[T]}},{regex:"/\\w*}",onMatch:function(T,I,w){var m=w.shift();return m&&(m.flag=T.slice(1,-1)),this.next=m&&m.tabstopId?"start":"",[m||T]},next:"start"},{regex:/\$(?:\d+|\w+)/,onMatch:function(T,I,w){return[{text:T.slice(1)}]}},{regex:/\${\w+/,onMatch:function(T,I,w){var m={text:T.slice(2)};return w.unshift(m),[m]},next:"formatStringVar"},{regex:/\n/,token:"newline",merge:!1},{regex:/}/,onMatch:function(T,I,w){var m=w.shift();return this.next=m&&m.tabstopId?"start":"",[m||T]},next:"start"}],formatStringVar:[{regex:/:\/\w+}/,onMatch:function(T,I,w){var m=w[0];return m.formatFunction=T.slice(2,-1),[w.shift()]},next:"formatString"},_,{regex:/:[\?\-+]?/,onMatch:function(T,I,w){T[1]=="+"&&(w[0].ifEnd=w[0]),T[1]=="?"&&(w[0].expectElse=!0)},next:"formatString"},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"formatString"}]}),g.$tokenizer},g.prototype.tokenizeTmSnippet=function(S,$){return this.getTokenizer().getLineTokens(S,$).tokens.map(function(_){return _.value||_})},g.prototype.getVariableValue=function(S,$,_){if(/^\d+$/.test($))return(this.variables.__||{})[$]||"";if(/^[A-Z]\d+$/.test($))return(this.variables[$[0]+"__"]||{})[$.substr(1)]||"";if($=$.replace(/^TM_/,""),!this.variables.hasOwnProperty($))return"";var T=this.variables[$];return typeof T=="function"&&(T=this.variables[$](S,$,_)),T??""},g.prototype.tmStrFormat=function(S,$,_){if(!$.fmt)return S;var T=$.flag||"",I=$.guard;I=new RegExp(I,T.replace(/[^gim]/g,""));var w=typeof $.fmt=="string"?this.tokenizeTmSnippet($.fmt,"formatString"):$.fmt,m=this,C=S.replace(I,function(){var x=m.variables.__;m.variables.__=[].slice.call(arguments);for(var M=m.resolveVariables(w,_),F="E",R=0;R<M.length;R++){var N=M[R];if(typeof N=="object")if(M[R]="",N.changeCase&&N.local){var W=M[R+1];W&&typeof W=="string"&&(N.changeCase=="u"?M[R]=W[0].toUpperCase():M[R]=W[0].toLowerCase(),M[R+1]=W.substr(1))}else N.changeCase&&(F=N.changeCase);else F=="U"?M[R]=N.toUpperCase():F=="L"&&(M[R]=N.toLowerCase())}return m.variables.__=x,M.join("")});return C},g.prototype.tmFormatFunction=function(S,$,_){return $.formatFunction=="upcase"?S.toUpperCase():$.formatFunction=="downcase"?S.toLowerCase():S},g.prototype.resolveVariables=function(S,$){function _(F){var R=S.indexOf(F,m+1);R!=-1&&(m=R)}for(var T=[],I="",w=!0,m=0;m<S.length;m++){var C=S[m];if(typeof C=="string"){T.push(C),C==`
`?(w=!0,I=""):w&&(I=/^\t*/.exec(C)[0],w=/\S/.test(C));continue}if(C){if(w=!1,C.fmtString){var x=S.indexOf(C,m+1);x==-1&&(x=S.length),C.fmt=S.slice(m+1,x),m=x}if(C.text){var M=this.getVariableValue($,C.text,I)+"";C.fmtString&&(M=this.tmStrFormat(M,C,$)),C.formatFunction&&(M=this.tmFormatFunction(M,C,$)),M&&!C.ifEnd?(T.push(M),_(C)):!M&&C.ifEnd&&_(C.ifEnd)}else C.elseEnd?_(C.elseEnd):(C.tabstopId!=null||C.changeCase!=null)&&T.push(C)}}return T},g.prototype.getDisplayTextForSnippet=function(S,$){var _=v.call(this,S,$);return _.text},g.prototype.insertSnippetForSelection=function(S,$,_){_===void 0&&(_={});var T=v.call(this,S,$,_),I=S.getSelectionRange(),w=S.session.replace(I,T.text),m=new b(S),C=S.inVirtualSelectionMode&&S.selection.index;m.addTabstops(T.tabstops,I.start,w,C)},g.prototype.insertSnippet=function(S,$,_){_===void 0&&(_={});var T=this;if(S.inVirtualSelectionMode)return T.insertSnippetForSelection(S,$,_);S.forEachSelection(function(){T.insertSnippetForSelection(S,$,_)},null,{keepOrder:!0}),S.tabstopManager&&S.tabstopManager.tabNext()},g.prototype.$getScope=function(S){var $=S.session.$mode.$id||"";if($=$.split("/").pop(),$==="html"||$==="php"){$==="php"&&!S.session.$mode.inlinePhp&&($="html");var _=S.getCursorPosition(),T=S.session.getState(_.row);typeof T=="object"&&(T=T[0]),T.substring&&(T.substring(0,3)=="js-"?$="javascript":T.substring(0,4)=="css-"?$="css":T.substring(0,4)=="php-"&&($="php"))}return $},g.prototype.getActiveScopes=function(S){var $=this.$getScope(S),_=[$],T=this.snippetMap;return T[$]&&T[$].includeScopes&&_.push.apply(_,T[$].includeScopes),_.push("_"),_},g.prototype.expandWithTab=function(S,$){var _=this,T=S.forEachSelection(function(){return _.expandSnippetForSelection(S,$)},null,{keepOrder:!0});return T&&S.tabstopManager&&S.tabstopManager.tabNext(),T},g.prototype.expandSnippetForSelection=function(S,$){var _=S.getCursorPosition(),T=S.session.getLine(_.row),I=T.substring(0,_.column),w=T.substr(_.column),m=this.snippetMap,C;return this.getActiveScopes(S).some(function(x){var M=m[x];return M&&(C=this.findMatchingSnippet(M,I,w)),!!C},this),C?($&&$.dryRun||(S.session.doc.removeInLine(_.row,_.column-C.replaceBefore.length,_.column+C.replaceAfter.length),this.variables.M__=C.matchBefore,this.variables.T__=C.matchAfter,this.insertSnippetForSelection(S,C.content),this.variables.M__=this.variables.T__=null),!0):!1},g.prototype.findMatchingSnippet=function(S,$,_){for(var T=S.length;T--;){var I=S[T];if(!(I.startRe&&!I.startRe.test($))&&!(I.endRe&&!I.endRe.test(_))&&!(!I.startRe&&!I.endRe))return I.matchBefore=I.startRe?I.startRe.exec($):[""],I.matchAfter=I.endRe?I.endRe.exec(_):[""],I.replaceBefore=I.triggerRe?I.triggerRe.exec($)[0]:"",I.replaceAfter=I.endTriggerRe?I.endTriggerRe.exec(_)[0]:"",I}},g.prototype.register=function(S,$){function _(x){return x&&!/^\^?\(.*\)\$?$|^\\b$/.test(x)&&(x="(?:"+x+")"),x||""}function T(x,M,F){return x=_(x),M=_(M),x=M+x,x&&x[x.length-1]!="$"&&(x+="$"),new RegExp(x)}function I(x){x.scope||(x.scope=$||"_"),$=x.scope,w[$]||(w[$]=[],m[$]={});var M=m[$];if(x.name){var F=M[x.name];F&&C.unregister(F),M[x.name]=x}w[$].push(x),x.prefix&&(x.tabTrigger=x.prefix),!x.content&&x.body&&(x.content=Array.isArray(x.body)?x.body.join(`
`):x.body),x.tabTrigger&&!x.trigger&&(!x.guard&&/^\w/.test(x.tabTrigger)&&(x.guard="\\b"),x.trigger=d.escapeRegExp(x.tabTrigger)),!(!x.trigger&&!x.guard&&!x.endTrigger&&!x.endGuard)&&(x.startRe=T(x.trigger,x.guard),x.triggerRe=new RegExp(x.trigger),x.endRe=T(x.endTrigger,x.endGuard),x.endTriggerRe=new RegExp(x.endTrigger))}var w=this.snippetMap,m=this.snippetNameMap,C=this;S||(S=[]),Array.isArray(S)?S.forEach(I):Object.keys(S).forEach(function(x){I(S[x])}),this._signal("registerSnippets",{scope:$})},g.prototype.unregister=function(S,$){function _(w){var m=I[w.scope||$];if(m&&m[w.name]){delete m[w.name];var C=T[w.scope||$],x=C&&C.indexOf(w);x>=0&&C.splice(x,1)}}var T=this.snippetMap,I=this.snippetNameMap;S.content?_(S):Array.isArray(S)&&S.forEach(_)},g.prototype.parseSnippetFile=function(S){S=S.replace(/\r/g,"");for(var $=[],_={},T=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm,I;I=T.exec(S);){if(I[1])try{_=JSON.parse(I[1]),$.push(_)}catch{}if(I[4])_.content=I[4].replace(/^\t/gm,""),$.push(_),_={};else{var w=I[2],m=I[3];if(w=="regex"){var C=/\/((?:[^\/\\]|\\.)*)|$/g;_.guard=C.exec(m)[1],_.trigger=C.exec(m)[1],_.endTrigger=C.exec(m)[1],_.endGuard=C.exec(m)[1]}else w=="snippet"?(_.tabTrigger=m.match(/^\S*/)[0],_.name||(_.name=m)):w&&(_[w]=m)}}return $},g.prototype.getSnippetByName=function(S,$){var _=this.snippetNameMap,T;return this.getActiveScopes($).some(function(I){var w=_[I];return w&&(T=w[S]),!!T},this),T},g}();p.implement(f.prototype,o);var v=function(g,S,$){function _(V){for(var Y=[],ee=0;ee<V.length;ee++){var ne=V[ee];if(typeof ne=="object"){if(M[ne.tabstopId])continue;var te=V.lastIndexOf(ne,ee-1);ne=Y[te]||{tabstopId:ne.tabstopId}}Y[ee]=ne}return Y}$===void 0&&($={});var T=g.getCursorPosition(),I=g.session.getLine(T.row),w=g.session.getTabString(),m=I.match(/^\s*/)[0];T.column<m.length&&(m=m.slice(0,T.column)),S=S.replace(/\r/g,"");var C=this.tokenizeTmSnippet(S);C=this.resolveVariables(C,g),C=C.map(function(V){return V==`
`&&!$.excludeExtraIndent?V+m:typeof V=="string"?V.replace(/\t/g,w):V});var x=[];C.forEach(function(V,Y){if(typeof V=="object"){var ee=V.tabstopId,ne=x[ee];if(ne||(ne=x[ee]=[],ne.index=ee,ne.value="",ne.parents={}),ne.indexOf(V)===-1){V.choices&&!ne.choices&&(ne.choices=V.choices),ne.push(V);var te=C.indexOf(V,Y+1);if(te!==-1){var se=C.slice(Y+1,te),ve=se.some(function(Me){return typeof Me=="object"});ve&&!ne.value?ne.value=se:se.length&&(!ne.value||typeof ne.value!="string")&&(ne.value=se.join(""))}}}}),x.forEach(function(V){V.length=0});for(var M={},F=0;F<C.length;F++){var R=C[F];if(typeof R=="object"){var N=R.tabstopId,W=x[N],B=C.indexOf(R,F+1);if(M[N]){M[N]===R&&(delete M[N],Object.keys(M).forEach(function(V){W.parents[V]=!0}));continue}M[N]=R;var U=W.value;typeof U!="string"?U=_(U):R.fmt&&(U=this.tmStrFormat(U,R,g)),C.splice.apply(C,[F+1,Math.max(0,B-F)].concat(U,R)),W.indexOf(R)===-1&&W.push(R)}}var P=0,z=0,K="";return C.forEach(function(V){if(typeof V=="string"){var Y=V.split(`
`);Y.length>1?(z=Y[Y.length-1].length,P+=Y.length-1):z+=V.length,K+=V}else V&&(V.start?V.end={row:P,column:z}:V.start={row:P,column:z})}),{text:K,tabstops:x,tokens:C}},b=function(){function g(S){if(this.index=0,this.ranges=[],this.tabstops=[],S.tabstopManager)return S.tabstopManager;S.tabstopManager=this,this.$onChange=this.onChange.bind(this),this.$onChangeSelection=d.delayedCall(this.onChangeSelection.bind(this)).schedule,this.$onChangeSession=this.onChangeSession.bind(this),this.$onAfterExec=this.onAfterExec.bind(this),this.attach(S)}return g.prototype.attach=function(S){this.$openTabstops=null,this.selectedTabstop=null,this.editor=S,this.session=S.session,this.editor.on("change",this.$onChange),this.editor.on("changeSelection",this.$onChangeSelection),this.editor.on("changeSession",this.$onChangeSession),this.editor.commands.on("afterExec",this.$onAfterExec),this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)},g.prototype.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this),this.ranges.length=0,this.tabstops.length=0,this.selectedTabstop=null,this.editor.off("change",this.$onChange),this.editor.off("changeSelection",this.$onChangeSelection),this.editor.off("changeSession",this.$onChangeSession),this.editor.commands.off("afterExec",this.$onAfterExec),this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.tabstopManager=null,this.session=null,this.editor=null},g.prototype.onChange=function(S){for(var $=S.action[0]=="r",_=this.selectedTabstop||{},T=_.parents||{},I=this.tabstops.slice(),w=0;w<I.length;w++){var m=I[w],C=m==_||T[m.index];if(m.rangeList.$bias=C?0:1,S.action=="remove"&&m!==_){var x=m.parents&&m.parents[_.index],M=m.rangeList.pointIndex(S.start,x);M=M<0?-M-1:M+1;var F=m.rangeList.pointIndex(S.end,x);F=F<0?-F-1:F-1;for(var R=m.rangeList.ranges.slice(M,F),N=0;N<R.length;N++)this.removeRange(R[N])}m.rangeList.$onChange(S)}var W=this.session;!this.$inChange&&$&&W.getLength()==1&&!W.getValue()&&this.detach()},g.prototype.updateLinkedFields=function(){var S=this.selectedTabstop;if(!(!S||!S.hasLinkedRanges||!S.firstNonLinked)){this.$inChange=!0;for(var $=this.session,_=$.getTextRange(S.firstNonLinked),T=0;T<S.length;T++){var I=S[T];if(I.linked){var w=I.original,m=u.snippetManager.tmStrFormat(_,w,this.editor);$.replace(I,m)}}this.$inChange=!1}},g.prototype.onAfterExec=function(S){S.command&&!S.command.readOnly&&this.updateLinkedFields()},g.prototype.onChangeSelection=function(){if(this.editor){for(var S=this.editor.selection.lead,$=this.editor.selection.anchor,_=this.editor.selection.isEmpty(),T=0;T<this.ranges.length;T++)if(!this.ranges[T].linked){var I=this.ranges[T].contains(S.row,S.column),w=_||this.ranges[T].contains($.row,$.column);if(I&&w)return}this.detach()}},g.prototype.onChangeSession=function(){this.detach()},g.prototype.tabNext=function(S){var $=this.tabstops.length,_=this.index+(S||1);_=Math.min(Math.max(_,1),$),_==$&&(_=0),this.selectTabstop(_),this.updateTabstopMarkers(),_===0&&this.detach()},g.prototype.selectTabstop=function(S){this.$openTabstops=null;var $=this.tabstops[this.index];if($&&this.addTabstopMarkers($),this.index=S,$=this.tabstops[this.index],!(!$||!$.length)){this.selectedTabstop=$;var _=$.firstNonLinked||$;if($.choices&&(_.cursor=_.start),this.editor.inVirtualSelectionMode)this.editor.selection.fromOrientedRange(_);else{var T=this.editor.multiSelect;T.toSingleRange(_);for(var I=0;I<$.length;I++)$.hasLinkedRanges&&$[I].linked||T.addRange($[I].clone(),!0)}this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler),this.selectedTabstop&&this.selectedTabstop.choices&&this.editor.execCommand("startAutocomplete",{matches:this.selectedTabstop.choices})}},g.prototype.addTabstops=function(S,$,_){var T=this.useLink||!this.editor.getOption("enableMultiselect");if(this.$openTabstops||(this.$openTabstops=[]),!S[0]){var I=e.fromPoints(_,_);D(I.start,$),D(I.end,$),S[0]=[I],S[0].index=0}var w=this.index,m=[w+1,0],C=this.ranges,x=this.snippetId=(this.snippetId||0)+1;S.forEach(function(M,F){var R=this.$openTabstops[F]||M;R.snippetId=x;for(var N=0;N<M.length;N++){var W=M[N],B=e.fromPoints(W.start,W.end||W.start);A(B.start,$),A(B.end,$),B.original=W,B.tabstop=R,C.push(B),R!=M?R.unshift(B):R[N]=B,W.fmtString||R.firstNonLinked&&T?(B.linked=!0,R.hasLinkedRanges=!0):R.firstNonLinked||(R.firstNonLinked=B)}R.firstNonLinked||(R.hasLinkedRanges=!1),R===M&&(m.push(R),this.$openTabstops[F]=R),this.addTabstopMarkers(R),R.rangeList=R.rangeList||new t,R.rangeList.$bias=0,R.rangeList.addList(R)},this),m.length>2&&(this.tabstops.length&&m.push(m.splice(2,1)[0]),this.tabstops.splice.apply(this.tabstops,m))},g.prototype.addTabstopMarkers=function(S){var $=this.session;S.forEach(function(_){_.markerId||(_.markerId=$.addMarker(_,"ace_snippet-marker","text"))})},g.prototype.removeTabstopMarkers=function(S){var $=this.session;S.forEach(function(_){$.removeMarker(_.markerId),_.markerId=null})},g.prototype.updateTabstopMarkers=function(){if(this.selectedTabstop){var S=this.selectedTabstop.snippetId;this.selectedTabstop.index===0&&S--,this.tabstops.forEach(function($){$.snippetId===S?this.addTabstopMarkers($):this.removeTabstopMarkers($)},this)}},g.prototype.removeRange=function(S){var $=S.tabstop.indexOf(S);$!=-1&&S.tabstop.splice($,1),$=this.ranges.indexOf(S),$!=-1&&this.ranges.splice($,1),$=S.tabstop.rangeList.ranges.indexOf(S),$!=-1&&S.tabstop.splice($,1),this.session.removeMarker(S.markerId),S.tabstop.length||($=this.tabstops.indexOf(S.tabstop),$!=-1&&this.tabstops.splice($,1),this.tabstops.length||this.detach())},g}();b.prototype.keyboardHandler=new r,b.prototype.keyboardHandler.bindKeys({Tab:function(g){u.snippetManager&&u.snippetManager.expandWithTab(g)||(g.tabstopManager.tabNext(1),g.renderer.scrollCursorIntoView())},"Shift-Tab":function(g){g.tabstopManager.tabNext(-1),g.renderer.scrollCursorIntoView()},Esc:function(g){g.tabstopManager.detach()}});var A=function(g,S){g.row==0&&(g.column+=S.column),g.row+=S.row},D=function(g,S){g.row==S.row&&(g.column-=S.column),g.row-=S.row};c.importCssString(`
.ace_snippet-marker {
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    background: rgba(194, 193, 208, 0.09);
    border: 1px dotted rgba(211, 208, 235, 0.62);
    position: absolute;
}`,"snippets.css",!1),u.snippetManager=new f;var E=n("./editor").Editor;(function(){this.insertSnippet=function(g,S){return u.snippetManager.insertSnippet(this,g,S)},this.expandSnippet=function(g){return u.snippetManager.expandWithTab(this,g)}}).call(E.prototype)}),ace.define("ace/autocomplete/popup",["require","exports","module","ace/virtual_renderer","ace/editor","ace/range","ace/lib/event","ace/lib/lang","ace/lib/dom","ace/config","ace/lib/useragent"],function(n,u,y){var s=n("../virtual_renderer").VirtualRenderer,c=n("../editor").Editor,p=n("../range").Range,o=n("../lib/event"),d=n("../lib/lang"),e=n("../lib/dom"),t=n("../config").nls,r=n("./../lib/useragent"),l=function(A){return"suggest-aria-id:".concat(A)},a=r.isSafari?"menu":"listbox",h=r.isSafari?"menuitem":"option",f=r.isSafari?"aria-current":"aria-selected",v=function(A){var D=new s(A);D.$maxLines=4;var E=new c(D);return E.setHighlightActiveLine(!1),E.setShowPrintMargin(!1),E.renderer.setShowGutter(!1),E.renderer.setHighlightGutterLine(!1),E.$mouseHandler.$focusTimeout=0,E.$highlightTagPending=!0,E},b=function(){function A(D){var E=e.createElement("div"),g=v(E);D&&D.appendChild(E),E.style.display="none",g.renderer.content.style.cursor="default",g.renderer.setStyle("ace_autocomplete"),g.renderer.$textLayer.element.setAttribute("role",a),g.renderer.$textLayer.element.setAttribute("aria-roledescription",t("autocomplete.popup.aria-roledescription","Autocomplete suggestions")),g.renderer.$textLayer.element.setAttribute("aria-label",t("autocomplete.popup.aria-label","Autocomplete suggestions")),g.renderer.textarea.setAttribute("aria-hidden","true"),g.setOption("displayIndentGuides",!1),g.setOption("dragDelay",150);var S=function(){};g.focus=S,g.$isFocused=!0,g.renderer.$cursorLayer.restartTimer=S,g.renderer.$cursorLayer.element.style.opacity="0",g.renderer.$maxLines=8,g.renderer.$keepTextAreaAtCursor=!1,g.setHighlightActiveLine(!1),g.session.highlight(""),g.session.$searchHighlight.clazz="ace_highlight-marker",g.on("mousedown",function(C){var x=C.getDocumentPosition();g.selection.moveToPosition(x),T.start.row=T.end.row=x.row,C.stop()});var $,_=new p(-1,0,-1,1/0),T=new p(-1,0,-1,1/0);T.id=g.session.addMarker(T,"ace_active-line","fullLine"),g.setSelectOnHover=function(C){C?_.id&&(g.session.removeMarker(_.id),_.id=null):_.id=g.session.addMarker(_,"ace_line-hover","fullLine")},g.setSelectOnHover(!1),g.on("mousemove",function(C){if(!$){$=C;return}if(!($.x==C.x&&$.y==C.y)){$=C,$.scrollTop=g.renderer.scrollTop,g.isMouseOver=!0;var x=$.getDocumentPosition().row;_.start.row!=x&&(_.id||g.setRow(x),w(x))}}),g.renderer.on("beforeRender",function(){if($&&_.start.row!=-1){$.$pos=null;var C=$.getDocumentPosition().row;_.id||g.setRow(C),w(C,!0)}}),g.renderer.on("afterRender",function(){for(var C=g.renderer.$textLayer,x=C.config.firstRow,M=C.config.lastRow;x<=M;x++){var F=C.element.childNodes[x-C.config.firstRow];F.setAttribute("role",h),F.setAttribute("aria-roledescription",t("autocomplete.popup.item.aria-roledescription","item")),F.setAttribute("aria-setsize",g.data.length),F.setAttribute("aria-describedby","doc-tooltip"),F.setAttribute("aria-posinset",x+1);var R=g.getData(x);if(R){var N="".concat(R.caption||R.value).concat(R.meta?", ".concat(R.meta):"");F.setAttribute("aria-label",N)}var W=F.querySelectorAll(".ace_completion-highlight");W.forEach(function(B){B.setAttribute("role","mark")})}}),g.renderer.on("afterRender",function(){var C=g.getRow(),x=g.renderer.$textLayer,M=x.element.childNodes[C-x.config.firstRow],F=document.activeElement;if(M!==g.selectedNode&&g.selectedNode&&(e.removeCssClass(g.selectedNode,"ace_selected"),g.selectedNode.removeAttribute(f),g.selectedNode.removeAttribute("id")),F.removeAttribute("aria-activedescendant"),g.selectedNode=M,M){var R=l(C);e.addCssClass(M,"ace_selected"),M.id=R,x.element.setAttribute("aria-activedescendant",R),F.setAttribute("aria-activedescendant",R),M.setAttribute(f,"true")}});var I=function(){w(-1)},w=function(C,x){C!==_.start.row&&(_.start.row=_.end.row=C,x||g.session._emit("changeBackMarker"),g._emit("changeHoverMarker"))};g.getHoveredRow=function(){return _.start.row},o.addListener(g.container,"mouseout",function(){g.isMouseOver=!1,I()}),g.on("hide",I),g.on("changeSelection",I),g.session.doc.getLength=function(){return g.data.length},g.session.doc.getLine=function(C){var x=g.data[C];return typeof x=="string"?x:x&&x.value||""};var m=g.session.bgTokenizer;return m.$tokenizeRow=function(C){function x(V,Y){V&&F.push({type:(M.className||"")+(Y||""),value:V})}var M=g.data[C],F=[];if(!M)return F;typeof M=="string"&&(M={value:M});for(var R=M.caption||M.value||M.name,N=R.toLowerCase(),W=(g.filterText||"").toLowerCase(),B=0,U=0,P=0;P<=W.length;P++)if(P!=U&&(M.matchMask&1<<P||P==W.length)){var z=W.slice(U,P);U=P;var K=N.indexOf(z,B);if(K==-1)continue;x(R.slice(B,K),""),B=K+z.length,x(R.slice(K,B),"completion-highlight")}return x(R.slice(B,R.length),""),F.push({type:"completion-spacer",value:" "}),M.meta&&F.push({type:"completion-meta",value:M.meta}),M.message&&F.push({type:"completion-message",value:M.message}),F},m.$updateOnChange=S,m.start=S,g.session.$computeWidth=function(){return this.screenWidth=0},g.isOpen=!1,g.isTopdown=!1,g.autoSelect=!0,g.filterText="",g.isMouseOver=!1,g.data=[],g.setData=function(C,x){g.filterText=x||"",g.setValue(d.stringRepeat(`
`,C.length),-1),g.data=C||[],g.setRow(0)},g.getData=function(C){return g.data[C]},g.getRow=function(){return T.start.row},g.setRow=function(C){C=Math.max(this.autoSelect?0:-1,Math.min(this.data.length-1,C)),T.start.row!=C&&(g.selection.clearSelection(),T.start.row=T.end.row=C||0,g.session._emit("changeBackMarker"),g.moveCursorTo(C||0,0),g.isOpen&&g._signal("select"))},g.on("changeSelection",function(){g.isOpen&&g.setRow(g.selection.lead.row),g.renderer.scrollCursorIntoView()}),g.hide=function(){this.container.style.display="none",g.anchorPos=null,g.anchor=null,g.isOpen&&(g.isOpen=!1,this._signal("hide"))},g.tryShow=function(C,x,M,F){if(!F&&g.isOpen&&g.anchorPos&&g.anchor&&g.anchorPos.top===C.top&&g.anchorPos.left===C.left&&g.anchor===M)return!0;var R=this.container,N=window.innerHeight,W=window.innerWidth,B=this.renderer,U=B.$maxLines*x*1.4,P={top:0,bottom:0},z=N-C.top-3*this.$borderSize-x,K=C.top-3*this.$borderSize;M||(K<=z||z>=U?M="bottom":M="top"),M==="top"?(P.bottom=C.top-this.$borderSize,P.top=P.bottom-U):M==="bottom"&&(P.top=C.top+x+this.$borderSize,P.bottom=P.top+U);var V=P.top>=0&&P.bottom<=N;if(!F&&!V)return!1;V?B.$maxPixelHeight=null:M==="top"?B.$maxPixelHeight=K:B.$maxPixelHeight=z,M==="top"?(R.style.top="",R.style.bottom=N-P.bottom+"px",g.isTopdown=!1):(R.style.top=P.top+"px",R.style.bottom="",g.isTopdown=!0),R.style.display="";var Y=C.left;return Y+R.offsetWidth>W&&(Y=W-R.offsetWidth),R.style.left=Y+"px",R.style.right="",g.isOpen||(g.isOpen=!0,this._signal("show"),$=null),g.anchorPos=C,g.anchor=M,!0},g.show=function(C,x,M){this.tryShow(C,x,M?"bottom":void 0,!0)},g.goTo=function(C){var x=this.getRow(),M=this.session.getLength()-1;switch(C){case"up":x=x<=0?M:x-1;break;case"down":x=x>=M?-1:x+1;break;case"start":x=0;break;case"end":x=M}this.setRow(x)},g.getTextLeftOffset=function(){return this.$borderSize+this.renderer.$padding+this.$imageSize},g.$imageSize=0,g.$borderSize=1,g}return A}();e.importCssString(`
.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {
    background-color: #CAD6FA;
    z-index: 1;
}
.ace_dark.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {
    background-color: #3a674e;
}
.ace_editor.ace_autocomplete .ace_line-hover {
    border: 1px solid #abbffe;
    margin-top: -1px;
    background: rgba(233,233,253,0.4);
    position: absolute;
    z-index: 2;
}
.ace_dark.ace_editor.ace_autocomplete .ace_line-hover {
    border: 1px solid rgba(109, 150, 13, 0.8);
    background: rgba(58, 103, 78, 0.62);
}
.ace_completion-meta {
    opacity: 0.5;
    margin-left: 0.9em;
}
.ace_completion-message {
    margin-left: 0.9em;
    color: blue;
}
.ace_editor.ace_autocomplete .ace_completion-highlight{
    color: #2d69c7;
}
.ace_dark.ace_editor.ace_autocomplete .ace_completion-highlight{
    color: #93ca12;
}
.ace_editor.ace_autocomplete {
    width: 300px;
    z-index: 200000;
    border: 1px lightgray solid;
    position: fixed;
    box-shadow: 2px 3px 5px rgba(0,0,0,.2);
    line-height: 1.4;
    background: #fefefe;
    color: #111;
}
.ace_dark.ace_editor.ace_autocomplete {
    border: 1px #484747 solid;
    box-shadow: 2px 3px 5px rgba(0, 0, 0, 0.51);
    line-height: 1.4;
    background: #25282c;
    color: #c1c1c1;
}
.ace_autocomplete .ace_text-layer  {
    width: calc(100% - 8px);
}
.ace_autocomplete .ace_line {
    display: flex;
    align-items: center;
}
.ace_autocomplete .ace_line > * {
    min-width: 0;
    flex: 0 0 auto;
}
.ace_autocomplete .ace_line .ace_ {
    flex: 0 1 auto;
    overflow: hidden;
    text-overflow: ellipsis;
}
.ace_autocomplete .ace_completion-spacer {
    flex: 1;
}
.ace_autocomplete.ace_loading:after  {
    content: "";
    position: absolute;
    top: 0px;
    height: 2px;
    width: 8%;
    background: blue;
    z-index: 100;
    animation: ace_progress 3s infinite linear;
    animation-delay: 300ms;
    transform: translateX(-100%) scaleX(1);
}
@keyframes ace_progress {
    0% { transform: translateX(-100%) scaleX(1) }
    50% { transform: translateX(625%) scaleX(2) } 
    100% { transform: translateX(1500%) scaleX(3) } 
}
@media (prefers-reduced-motion) {
    .ace_autocomplete.ace_loading:after {
        transform: translateX(625%) scaleX(2);
        animation: none;
     }
}
`,"autocompletion.css",!1),u.AcePopup=b,u.$singleLineEditor=v,u.getAriaId=l}),ace.define("ace/autocomplete/inline_screenreader",["require","exports","module"],function(n,u,y){var s=function(){function c(p){this.editor=p,this.screenReaderDiv=document.createElement("div"),this.screenReaderDiv.classList.add("ace_screenreader-only"),this.editor.container.appendChild(this.screenReaderDiv)}return c.prototype.setScreenReaderContent=function(p){for(!this.popup&&this.editor.completer&&this.editor.completer.popup&&(this.popup=this.editor.completer.popup,this.popup.renderer.on("afterRender",function(){var d=this.popup.getRow(),e=this.popup.renderer.$textLayer,t=e.element.childNodes[d-e.config.firstRow];if(t){for(var r="doc-tooltip ",l=0;l<this._lines.length;l++)r+="ace-inline-screenreader-line-".concat(l," ");t.setAttribute("aria-describedby",r)}}.bind(this)));this.screenReaderDiv.firstChild;)this.screenReaderDiv.removeChild(this.screenReaderDiv.firstChild);this._lines=p.split(/\r\n|\r|\n/);var o=this.createCodeBlock();this.screenReaderDiv.appendChild(o)},c.prototype.destroy=function(){this.screenReaderDiv.remove()},c.prototype.createCodeBlock=function(){var p=document.createElement("pre");p.setAttribute("id","ace-inline-screenreader");for(var o=0;o<this._lines.length;o++){var d=document.createElement("code");d.setAttribute("id","ace-inline-screenreader-line-".concat(o));var e=document.createTextNode(this._lines[o]);d.appendChild(e),p.appendChild(d)}return p},c}();u.AceInlineScreenReader=s}),ace.define("ace/autocomplete/inline",["require","exports","module","ace/snippets","ace/autocomplete/inline_screenreader"],function(n,u,y){var s=n("../snippets").snippetManager,c=n("./inline_screenreader").AceInlineScreenReader,p=function(){function o(){this.editor=null}return o.prototype.show=function(d,e,t){if(t=t||"",d&&this.editor&&this.editor!==d&&(this.hide(),this.editor=null,this.inlineScreenReader=null),!d||!e)return!1;this.inlineScreenReader||(this.inlineScreenReader=new c(d));var r=e.snippet?s.getDisplayTextForSnippet(d,e.snippet):e.value;return e.hideInlinePreview||!r||!r.startsWith(t)?!1:(this.editor=d,this.inlineScreenReader.setScreenReaderContent(r),r=r.slice(t.length),r===""?d.removeGhostText():d.setGhostText(r),!0)},o.prototype.isOpen=function(){return this.editor?!!this.editor.renderer.$ghostText:!1},o.prototype.hide=function(){return this.editor?(this.editor.removeGhostText(),!0):!1},o.prototype.destroy=function(){this.hide(),this.editor=null,this.inlineScreenReader&&(this.inlineScreenReader.destroy(),this.inlineScreenReader=null)},o}();u.AceInline=p}),ace.define("ace/autocomplete/util",["require","exports","module"],function(n,u,y){u.parForEach=function(c,p,o){var d=0,e=c.length;e===0&&o();for(var t=0;t<e;t++)p(c[t],function(r,l){d++,d===e&&o(r,l)})};var s=/[a-zA-Z_0-9\$\-\u00A2-\u2000\u2070-\uFFFF]/;u.retrievePrecedingIdentifier=function(c,p,o){o=o||s;for(var d=[],e=p-1;e>=0&&o.test(c[e]);e--)d.push(c[e]);return d.reverse().join("")},u.retrieveFollowingIdentifier=function(c,p,o){o=o||s;for(var d=[],e=p;e<c.length&&o.test(c[e]);e++)d.push(c[e]);return d},u.getCompletionPrefix=function(c){var p=c.getCursorPosition(),o=c.session.getLine(p.row),d;return c.completers.forEach(function(e){e.identifierRegexps&&e.identifierRegexps.forEach(function(t){!d&&t&&(d=this.retrievePrecedingIdentifier(o,p.column,t))}.bind(this))}.bind(this)),d||this.retrievePrecedingIdentifier(o,p.column)},u.triggerAutocomplete=function(c,o){var o=o??c.session.getPrecedingCharacter();return c.completers.some(function(d){if(d.triggerCharacters&&Array.isArray(d.triggerCharacters))return d.triggerCharacters.includes(o)})}}),ace.define("ace/autocomplete",["require","exports","module","ace/keyboard/hash_handler","ace/autocomplete/popup","ace/autocomplete/inline","ace/autocomplete/popup","ace/autocomplete/util","ace/lib/lang","ace/lib/dom","ace/snippets","ace/config","ace/lib/event","ace/lib/scroll"],function(n,u,y){var s=n("./keyboard/hash_handler").HashHandler,c=n("./autocomplete/popup").AcePopup,p=n("./autocomplete/inline").AceInline,o=n("./autocomplete/popup").getAriaId,d=n("./autocomplete/util"),e=n("./lib/lang"),t=n("./lib/dom"),r=n("./snippets").snippetManager,l=n("./config"),a=n("./lib/event"),h=n("./lib/scroll").preventParentScroll,f=function(D,E){E.completer&&E.completer.destroy()},v=function(){function D(){this.autoInsert=!1,this.autoSelect=!0,this.autoShown=!1,this.exactMatch=!1,this.inlineEnabled=!1,this.keyboardHandler=new s,this.keyboardHandler.bindKeys(this.commands),this.parentNode=null,this.setSelectOnHover=!1,this.hasSeen=new Set,this.showLoadingState=!1,this.stickySelectionDelay=500,this.blurListener=this.blurListener.bind(this),this.changeListener=this.changeListener.bind(this),this.mousedownListener=this.mousedownListener.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this),this.onLayoutChange=this.onLayoutChange.bind(this),this.changeTimer=e.delayedCall(function(){this.updateCompletions(!0)}.bind(this)),this.tooltipTimer=e.delayedCall(this.updateDocTooltip.bind(this),50),this.popupTimer=e.delayedCall(this.$updatePopupPosition.bind(this),50),this.stickySelectionTimer=e.delayedCall(function(){this.stickySelection=!0}.bind(this),this.stickySelectionDelay),this.$firstOpenTimer=e.delayedCall(function(){var E=this.completionProvider&&this.completionProvider.initialPosition;this.autoShown||this.popup&&this.popup.isOpen||!E||this.editor.completers.length===0||(this.completions=new A(D.completionsForLoading),this.openPopup(this.editor,E.prefix,!1),this.popup.renderer.setStyle("ace_loading",!0))}.bind(this),this.stickySelectionDelay)}return Object.defineProperty(D,"completionsForLoading",{get:function(){return[{caption:l.nls("autocomplete.loading","Loading..."),value:""}]},enumerable:!1,configurable:!0}),D.prototype.$init=function(){return this.popup=new c(this.parentNode||document.body||document.documentElement),this.popup.on("click",function(E){this.insertMatch(),E.stop()}.bind(this)),this.popup.focus=this.editor.focus.bind(this.editor),this.popup.on("show",this.$onPopupShow.bind(this)),this.popup.on("hide",this.$onHidePopup.bind(this)),this.popup.on("select",this.$onPopupChange.bind(this)),a.addListener(this.popup.container,"mouseout",this.mouseOutListener.bind(this)),this.popup.on("changeHoverMarker",this.tooltipTimer.bind(null,null)),this.popup.renderer.on("afterRender",this.$onPopupRender.bind(this)),this.popup},D.prototype.$initInline=function(){if(!(!this.inlineEnabled||this.inlineRenderer))return this.inlineRenderer=new p,this.inlineRenderer},D.prototype.getPopup=function(){return this.popup||this.$init()},D.prototype.$onHidePopup=function(){this.inlineRenderer&&this.inlineRenderer.hide(),this.hideDocTooltip(),this.stickySelectionTimer.cancel(),this.popupTimer.cancel(),this.stickySelection=!1},D.prototype.$seen=function(E){!this.hasSeen.has(E)&&E&&E.completer&&E.completer.onSeen&&typeof E.completer.onSeen=="function"&&(E.completer.onSeen(this.editor,E),this.hasSeen.add(E))},D.prototype.$onPopupChange=function(E){if(this.inlineRenderer&&this.inlineEnabled){var g=E?null:this.popup.getData(this.popup.getRow());if(this.$updateGhostText(g),this.popup.isMouseOver&&this.setSelectOnHover){this.tooltipTimer.call(null,null);return}this.popupTimer.schedule(),this.tooltipTimer.schedule()}else this.popupTimer.call(null,null),this.tooltipTimer.call(null,null)},D.prototype.$updateGhostText=function(E){var g=this.base.row,S=this.base.column,$=this.editor.getCursorPosition().column,_=this.editor.session.getLine(g).slice(S,$);this.inlineRenderer.show(this.editor,E,_)?this.$seen(E):this.inlineRenderer.hide()},D.prototype.$onPopupRender=function(){var E=this.inlineRenderer&&this.inlineEnabled;if(this.completions&&this.completions.filtered&&this.completions.filtered.length>0)for(var g=this.popup.getFirstVisibleRow();g<=this.popup.getLastVisibleRow();g++){var S=this.popup.getData(g);S&&(!E||S.hideInlinePreview)&&this.$seen(S)}},D.prototype.$onPopupShow=function(E){this.$onPopupChange(E),this.stickySelection=!1,this.stickySelectionDelay>=0&&this.stickySelectionTimer.schedule(this.stickySelectionDelay)},D.prototype.observeLayoutChanges=function(){if(!(this.$elements||!this.editor)){window.addEventListener("resize",this.onLayoutChange,{passive:!0}),window.addEventListener("wheel",this.mousewheelListener);for(var E=this.editor.container.parentNode,g=[];E;)g.push(E),E.addEventListener("scroll",this.onLayoutChange,{passive:!0}),E=E.parentNode;this.$elements=g}},D.prototype.unObserveLayoutChanges=function(){var E=this;window.removeEventListener("resize",this.onLayoutChange,{passive:!0}),window.removeEventListener("wheel",this.mousewheelListener),this.$elements&&this.$elements.forEach(function(g){g.removeEventListener("scroll",E.onLayoutChange,{passive:!0})}),this.$elements=null},D.prototype.onLayoutChange=function(){if(!this.popup.isOpen)return this.unObserveLayoutChanges();this.$updatePopupPosition(),this.updateDocTooltip()},D.prototype.$updatePopupPosition=function(){var E=this.editor,g=E.renderer,S=g.layerConfig.lineHeight,$=g.$cursorLayer.getPixelPosition(this.base,!0);$.left-=this.popup.getTextLeftOffset();var _=E.container.getBoundingClientRect();$.top+=_.top-g.layerConfig.offset,$.left+=_.left-E.renderer.scrollLeft,$.left+=g.gutterWidth;var T={top:$.top,left:$.left};g.$ghostText&&g.$ghostTextWidget&&this.base.row===g.$ghostText.position.row&&(T.top+=g.$ghostTextWidget.el.offsetHeight);var I=E.container.getBoundingClientRect().bottom-S,w=I<T.top?{top:I,left:T.left}:T;this.popup.tryShow(w,S,"bottom")||this.popup.tryShow($,S,"top")||this.popup.show($,S)},D.prototype.openPopup=function(E,g,S){this.$firstOpenTimer.cancel(),this.popup||this.$init(),this.inlineEnabled&&!this.inlineRenderer&&this.$initInline(),this.popup.autoSelect=this.autoSelect,this.popup.setSelectOnHover(this.setSelectOnHover);var $=this.popup.getRow(),_=this.popup.data[$];this.popup.setData(this.completions.filtered,this.completions.filterText),this.editor.textInput.setAriaOptions&&this.editor.textInput.setAriaOptions({activeDescendant:o(this.popup.getRow()),inline:this.inlineEnabled}),E.keyBinding.addKeyboardHandler(this.keyboardHandler);var T;this.stickySelection&&(T=this.popup.data.indexOf(_)),(!T||T===-1)&&(T=0),this.popup.setRow(this.autoSelect?T:-1),T===$&&_!==this.completions.filtered[T]&&this.$onPopupChange();var I=this.inlineRenderer&&this.inlineEnabled;if(T===$&&I){var w=this.popup.getData(this.popup.getRow());this.$updateGhostText(w)}S||(this.popup.setTheme(E.getTheme()),this.popup.setFontSize(E.getFontSize()),this.$updatePopupPosition(),this.tooltipNode&&this.updateDocTooltip()),this.changeTimer.cancel(),this.observeLayoutChanges()},D.prototype.detach=function(){this.editor&&(this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.off("changeSelection",this.changeListener),this.editor.off("blur",this.blurListener),this.editor.off("mousedown",this.mousedownListener),this.editor.off("mousewheel",this.mousewheelListener)),this.$firstOpenTimer.cancel(),this.changeTimer.cancel(),this.hideDocTooltip(),this.completionProvider&&this.completionProvider.detach(),this.popup&&this.popup.isOpen&&this.popup.hide(),this.popup&&this.popup.renderer&&this.popup.renderer.off("afterRender",this.$onPopupRender),this.base&&this.base.detach(),this.activated=!1,this.completionProvider=this.completions=this.base=null,this.unObserveLayoutChanges()},D.prototype.changeListener=function(E){var g=this.editor.selection.lead;(g.row!=this.base.row||g.column<this.base.column)&&this.detach(),this.activated?this.changeTimer.schedule():this.detach()},D.prototype.blurListener=function(E){var g=document.activeElement,S=this.editor.textInput.getElement(),$=E.relatedTarget&&this.tooltipNode&&this.tooltipNode.contains(E.relatedTarget),_=this.popup&&this.popup.container;g!=S&&g.parentNode!=_&&!$&&g!=this.tooltipNode&&E.relatedTarget!=S&&this.detach()},D.prototype.mousedownListener=function(E){this.detach()},D.prototype.mousewheelListener=function(E){this.popup&&!this.popup.isMouseOver&&this.detach()},D.prototype.mouseOutListener=function(E){this.popup.isOpen&&this.$updatePopupPosition()},D.prototype.goTo=function(E){this.popup.goTo(E)},D.prototype.insertMatch=function(E,g){if(E||(E=this.popup.getData(this.popup.getRow())),!E)return!1;if(E.value==="")return this.detach();var S=this.completions,$=this.getCompletionProvider().insertMatch(this.editor,E,S.filterText,g);return this.completions==S&&this.detach(),$},D.prototype.showPopup=function(E,g){this.editor&&this.detach(),this.activated=!0,this.editor=E,E.completer!=this&&(E.completer&&E.completer.detach(),E.completer=this),E.on("changeSelection",this.changeListener),E.on("blur",this.blurListener),E.on("mousedown",this.mousedownListener),E.on("mousewheel",this.mousewheelListener),this.updateCompletions(!1,g)},D.prototype.getCompletionProvider=function(E){return this.completionProvider||(this.completionProvider=new b(E)),this.completionProvider},D.prototype.gatherCompletions=function(E,g){return this.getCompletionProvider().gatherCompletions(E,g)},D.prototype.updateCompletions=function(E,g){if(E&&this.base&&this.completions){var $=this.editor.getCursorPosition(),_=this.editor.session.getTextRange({start:this.base,end:$});if(_==this.completions.filterText)return;if(this.completions.setFilter(_),!this.completions.filtered.length)return this.detach();if(this.completions.filtered.length==1&&this.completions.filtered[0].value==_&&!this.completions.filtered[0].snippet)return this.detach();this.openPopup(this.editor,_,E);return}if(g&&g.matches){var $=this.editor.getSelectionRange().start;return this.base=this.editor.session.doc.createAnchor($.row,$.column),this.base.$insertRight=!0,this.completions=new A(g.matches),this.getCompletionProvider().completions=this.completions,this.openPopup(this.editor,"",E)}var S=this.editor.getSession(),$=this.editor.getCursorPosition(),_=d.getCompletionPrefix(this.editor);this.base=S.doc.createAnchor($.row,$.column-_.length),this.base.$insertRight=!0;var T={exactMatch:this.exactMatch,ignoreCaption:this.ignoreCaption};this.getCompletionProvider({prefix:_,pos:$}).provideCompletions(this.editor,T,function(I,w,m){var C=w.filtered,x=d.getCompletionPrefix(this.editor);if(this.$firstOpenTimer.cancel(),m){if(!C.length){var M=!this.autoShown&&this.emptyMessage;if(typeof M=="function"&&(M=this.emptyMessage(x)),M){var F=[{caption:M,value:""}];this.completions=new A(F),this.openPopup(this.editor,x,E),this.popup.renderer.setStyle("ace_loading",!1),this.popup.renderer.setStyle("ace_empty-message",!0);return}return this.detach()}if(C.length==1&&C[0].value==x&&!C[0].snippet)return this.detach();if(this.autoInsert&&!this.autoShown&&C.length==1)return this.insertMatch(C[0])}this.completions=!m&&this.showLoadingState?new A(D.completionsForLoading.concat(C),w.filterText):w,this.openPopup(this.editor,x,E),this.popup.renderer.setStyle("ace_empty-message",!1),this.popup.renderer.setStyle("ace_loading",!m)}.bind(this)),this.showLoadingState&&!this.autoShown&&(!this.popup||!this.popup.isOpen)&&this.$firstOpenTimer.delay(this.stickySelectionDelay/2)},D.prototype.cancelContextMenu=function(){this.editor.$mouseHandler.cancelContextMenu()},D.prototype.updateDocTooltip=function(){var E=this.popup,g=this.completions.filtered,S=g&&(g[E.getHoveredRow()]||g[E.getRow()]),$=null;if(!S||!this.editor||!this.popup.isOpen)return this.hideDocTooltip();for(var _=this.editor.completers.length,T=0;T<_;T++){var I=this.editor.completers[T];if(I.getDocTooltip&&S.completerId===I.id){$=I.getDocTooltip(S);break}}if(!$&&typeof S!="string"&&($=S),typeof $=="string"&&($={docText:$}),!$||!$.docHTML&&!$.docText)return this.hideDocTooltip();this.showDocTooltip($)},D.prototype.showDocTooltip=function(E){this.tooltipNode||(this.tooltipNode=t.createElement("div"),this.tooltipNode.style.margin="0",this.tooltipNode.style.pointerEvents="auto",this.tooltipNode.style.overscrollBehavior="contain",this.tooltipNode.tabIndex=-1,this.tooltipNode.onblur=this.blurListener.bind(this),this.tooltipNode.onclick=this.onTooltipClick.bind(this),this.tooltipNode.id="doc-tooltip",this.tooltipNode.setAttribute("role","tooltip"),this.tooltipNode.addEventListener("wheel",h));var g=this.editor.renderer.theme;this.tooltipNode.className="ace_tooltip ace_doc-tooltip "+(g.isDark?"ace_dark ":"")+(g.cssClass||"");var S=this.tooltipNode;E.docHTML?S.innerHTML=E.docHTML:E.docText&&(S.textContent=E.docText),S.parentNode||this.popup.container.appendChild(this.tooltipNode);var $=this.popup,_=$.container.getBoundingClientRect();S.style.top=$.container.style.top,S.style.bottom=$.container.style.bottom,S.style.display="block",window.innerWidth-_.right<320?_.left<320?$.isTopdown?(S.style.top=_.bottom+"px",S.style.left=_.left+"px",S.style.right="",S.style.bottom=""):(S.style.top=$.container.offsetTop-S.offsetHeight+"px",S.style.left=_.left+"px",S.style.right="",S.style.bottom=""):(S.style.right=window.innerWidth-_.left+"px",S.style.left=""):(S.style.left=_.right+1+"px",S.style.right="")},D.prototype.hideDocTooltip=function(){if(this.tooltipTimer.cancel(),!!this.tooltipNode){var E=this.tooltipNode;!this.editor.isFocused()&&document.activeElement==E&&this.editor.focus(),this.tooltipNode=null,E.parentNode&&E.parentNode.removeChild(E)}},D.prototype.onTooltipClick=function(E){for(var g=E.target;g&&g!=this.tooltipNode;){if(g.nodeName=="A"&&g.href){g.rel="noreferrer",g.target="_blank";break}g=g.parentNode}},D.prototype.destroy=function(){if(this.detach(),this.popup){this.popup.destroy();var E=this.popup.container;E&&E.parentNode&&E.parentNode.removeChild(E)}this.editor&&this.editor.completer==this&&(this.editor.off("destroy",f),this.editor.completer=null),this.inlineRenderer=this.popup=this.editor=null},D.for=function(E){return E.completer instanceof D||(E.completer&&(E.completer.destroy(),E.completer=null),l.get("sharedPopups")?(D.$sharedInstance||(D.$sharedInstance=new D),E.completer=D.$sharedInstance):(E.completer=new D,E.once("destroy",f))),E.completer},D}();v.prototype.commands={Up:function(D){D.completer.goTo("up")},Down:function(D){D.completer.goTo("down")},"Ctrl-Up|Ctrl-Home":function(D){D.completer.goTo("start")},"Ctrl-Down|Ctrl-End":function(D){D.completer.goTo("end")},Esc:function(D){D.completer.detach()},Return:function(D){return D.completer.insertMatch()},"Shift-Return":function(D){D.completer.insertMatch(null,{deleteSuffix:!0})},Tab:function(D){var E=D.completer.insertMatch();if(E||D.tabstopManager)return E;D.completer.goTo("down")},Backspace:function(D){D.execCommand("backspace");var E=d.getCompletionPrefix(D);!E&&D.completer&&D.completer.detach()},PageUp:function(D){D.completer.popup.gotoPageUp()},PageDown:function(D){D.completer.popup.gotoPageDown()}},v.startCommand={name:"startAutocomplete",exec:function(D,E){var g=v.for(D);g.autoInsert=!1,g.autoSelect=!0,g.autoShown=!1,g.showPopup(D,E),g.cancelContextMenu()},bindKey:"Ctrl-Space|Ctrl-Shift-Space|Alt-Space"};var b=function(){function D(E){this.initialPosition=E,this.active=!0}return D.prototype.insertByIndex=function(E,g,S){return!this.completions||!this.completions.filtered?!1:this.insertMatch(E,this.completions.filtered[g],S)},D.prototype.insertMatch=function(E,g,S){if(!g)return!1;if(E.startOperation({command:{name:"insertMatch"}}),g.completer&&g.completer.insertMatch)g.completer.insertMatch(E,g);else{if(!this.completions)return!1;var $=this.completions.filterText.length,_=0;if(g.range&&g.range.start.row===g.range.end.row&&($-=this.initialPosition.prefix.length,$+=this.initialPosition.pos.column-g.range.start.column,_+=g.range.end.column-this.initialPosition.pos.column),$||_){var T;E.selection.getAllRanges?T=E.selection.getAllRanges():T=[E.getSelectionRange()];for(var I=0,w;w=T[I];I++)w.start.column-=$,w.end.column+=_,E.session.remove(w)}g.snippet?r.insertSnippet(E,g.snippet):this.$insertString(E,g),g.completer&&g.completer.onInsert&&typeof g.completer.onInsert=="function"&&g.completer.onInsert(E,g),g.command&&g.command==="startAutocomplete"&&E.execCommand(g.command)}return E.endOperation(),!0},D.prototype.$insertString=function(E,g){var S=g.value||g;E.execCommand("insertstring",S)},D.prototype.gatherCompletions=function(E,g){var S=E.getSession(),$=E.getCursorPosition(),_=d.getCompletionPrefix(E),T=[];this.completers=E.completers;var I=E.completers.length;return E.completers.forEach(function(w,m){w.getCompletions(E,S,$,_,function(C,x){w.hideInlinePreview&&(x=x.map(function(M){return Object.assign(M,{hideInlinePreview:w.hideInlinePreview})})),!C&&x&&(T=T.concat(x)),g(null,{prefix:d.getCompletionPrefix(E),matches:T,finished:--I===0})})}),!0},D.prototype.provideCompletions=function(E,g,S){var $=function(w){var m=w.prefix,C=w.matches;this.completions=new A(C),g.exactMatch&&(this.completions.exactMatch=!0),g.ignoreCaption&&(this.completions.ignoreCaption=!0),this.completions.setFilter(m),(w.finished||this.completions.filtered.length)&&S(null,this.completions,w.finished)}.bind(this),_=!0,T=null;if(this.gatherCompletions(E,function(w,m){if(this.active){w&&(S(w,[],!0),this.detach());var C=m.prefix;if(C.indexOf(m.prefix)===0){if(_){T=m;return}$(m)}}}.bind(this)),_=!1,T){var I=T;T=null,$(I)}},D.prototype.detach=function(){this.active=!1,this.completers&&this.completers.forEach(function(E){typeof E.cancel=="function"&&E.cancel()})},D}(),A=function(){function D(E,g){this.all=E,this.filtered=E,this.filterText=g||"",this.exactMatch=!1,this.ignoreCaption=!1}return D.prototype.setFilter=function(E){if(E.length>this.filterText&&E.lastIndexOf(this.filterText,0)===0)var g=this.filtered;else var g=this.all;this.filterText=E,g=this.filterCompletions(g,this.filterText),g=g.sort(function($,_){return _.exactMatch-$.exactMatch||_.$score-$.$score||($.caption||$.value).localeCompare(_.caption||_.value)});var S=null;g=g.filter(function($){var _=$.snippet||$.caption||$.value;return _===S?!1:(S=_,!0)}),this.filtered=g},D.prototype.filterCompletions=function(E,g){var S=[],$=g.toUpperCase(),_=g.toLowerCase();e:for(var T=0,I;I=E[T];T++){if(I.skipFilter){I.$score=I.score,S.push(I);continue}var w=!this.ignoreCaption&&I.caption||I.value||I.snippet;if(w){var m=-1,C=0,x=0,M,F;if(this.exactMatch){if(g!==w.substr(0,g.length))continue e}else{var R=w.toLowerCase().indexOf(_);if(R>-1)x=R;else for(var N=0;N<g.length;N++){var W=w.indexOf(_[N],m+1),B=w.indexOf($[N],m+1);if(M=W>=0&&(B<0||W<B)?W:B,M<0)continue e;F=M-m-1,F>0&&(m===-1&&(x+=10),x+=F,C|=1<<N),m=M}}I.matchMask=C,I.exactMatch=x?0:1,I.$score=(I.score||0)-x,S.push(I)}}return S},D}();u.Autocomplete=v,u.CompletionProvider=b,u.FilteredList=A}),ace.define("ace/autocomplete/text_completer",["require","exports","module","ace/range"],function(n,u,y){function s(d,e){var t=d.getTextRange(p.fromPoints({row:0,column:0},e));return t.split(o).length-1}function c(d,e){var t=s(d,e),r=d.getValue().split(o),l=Object.create(null),a=r[t];return r.forEach(function(h,f){if(!(!h||h===a)){var v=Math.abs(t-f),b=r.length-v;l[h]?l[h]=Math.max(b,l[h]):l[h]=b}}),l}var p=n("../range").Range,o=/[^a-zA-Z_0-9\$\-\u00C0-\u1FFF\u2C00-\uD7FF\w]+/;u.getCompletions=function(d,e,t,r,l){var a=c(e,t),h=Object.keys(a);l(null,h.map(function(f){return{caption:f,value:f,score:a[f],meta:"local"}}))}}),ace.define("ace/ext/language_tools",["require","exports","module","ace/snippets","ace/autocomplete","ace/config","ace/lib/lang","ace/autocomplete/util","ace/autocomplete/text_completer","ace/editor","ace/config"],function(n,u,y){var s=n("../snippets").snippetManager,c=n("../autocomplete").Autocomplete,p=n("../config"),o=n("../lib/lang"),d=n("../autocomplete/util"),e=n("../autocomplete/text_completer"),t={getCompletions:function($,_,T,I,w){if(_.$mode.completer)return _.$mode.completer.getCompletions($,_,T,I,w);var m=$.session.getState(T.row),C=_.$mode.getCompletions(m,_,T,I);C=C.map(function(x){return x.completerId=t.id,x}),w(null,C)},id:"keywordCompleter"},r=function($){var _={};return $.replace(/\${(\d+)(:(.*?))?}/g,function(T,I,w,m){return _[I]=m||""}).replace(/\$(\d+?)/g,function(T,I){return _[I]})},l={getCompletions:function($,_,T,I,w){var m=[],C=_.getTokenAt(T.row,T.column);C&&C.type.match(/(tag-name|tag-open|tag-whitespace|attribute-name|attribute-value)\.xml$/)?m.push("html-tag"):m=s.getActiveScopes($);var x=s.snippetMap,M=[];m.forEach(function(F){for(var R=x[F]||[],N=R.length;N--;){var W=R[N],B=W.name||W.tabTrigger;B&&M.push({caption:B,snippet:W.content,meta:W.tabTrigger&&!W.name?W.tabTrigger+"⇥ ":"snippet",completerId:l.id})}},this),w(null,M)},getDocTooltip:function($){$.snippet&&!$.docHTML&&($.docHTML=["<b>",o.escapeHTML($.caption),"</b>","<hr></hr>",o.escapeHTML(r($.snippet))].join(""))},id:"snippetCompleter"},a=[l,e,t];u.setCompleters=function($){a.length=0,$&&a.push.apply(a,$)},u.addCompleter=function($){a.push($)},u.textCompleter=e,u.keyWordCompleter=t,u.snippetCompleter=l;var h={name:"expandSnippet",exec:function($){return s.expandWithTab($)},bindKey:"Tab"},f=function($,_){v(_.session.$mode)},v=function($){typeof $=="string"&&($=p.$modes[$]),$&&(s.files||(s.files={}),b($.$id,$.snippetFileId),$.modes&&$.modes.forEach(v))},b=function($,_){!_||!$||s.files[$]||(s.files[$]={},p.loadModule(_,function(T){T&&(s.files[$]=T,!T.snippets&&T.snippetText&&(T.snippets=s.parseSnippetFile(T.snippetText)),s.register(T.snippets||[],T.scope),T.includeScopes&&(s.snippetMap[T.scope].includeScopes=T.includeScopes,T.includeScopes.forEach(function(I){v("ace/mode/"+I)})))}))},A=function($){var _=$.editor,T=_.completer&&_.completer.activated;if($.command.name==="backspace")T&&!d.getCompletionPrefix(_)&&_.completer.detach();else if($.command.name==="insertstring"&&!T){D=$;var I=$.editor.$liveAutocompletionDelay;I?E.delay(I):g($)}},D,E=o.delayedCall(function(){g(D)},0),g=function($){var _=$.editor,T=d.getCompletionPrefix(_),I=$.args,w=d.triggerAutocomplete(_,I);if(T&&T.length>=_.$liveAutocompletionThreshold||w){var m=c.for(_);m.autoShown=!0,m.showPopup(_)}},S=n("../editor").Editor;n("../config").defineOptions(S.prototype,"editor",{enableBasicAutocompletion:{set:function($){$?(this.completers||(this.completers=Array.isArray($)?$:a),this.commands.addCommand(c.startCommand)):this.commands.removeCommand(c.startCommand)},value:!1},enableLiveAutocompletion:{set:function($){$?(this.completers||(this.completers=Array.isArray($)?$:a),this.commands.on("afterExec",A)):this.commands.off("afterExec",A)},value:!1},liveAutocompletionDelay:{initialValue:0},liveAutocompletionThreshold:{initialValue:0},enableSnippets:{set:function($){$?(this.commands.addCommand(h),this.on("changeMode",f),f(null,this)):(this.commands.removeCommand(h),this.off("changeMode",f))},value:!1}})}),function(){ace.require(["ace/ext/language_tools"],function(n){L&&(L.exports=n)})}()})(Ba);const Ai={jsonError:{border:"1px solid red",minHeight:200},jsonNoError:{border:"1px solid #00000000",minHeight:200}};function Pa(L){return k.createElement(La,{style:L.error===!0?Ai.jsonError:L.error===!1?Ai.jsonNoError:void 0,mode:L.mode||"json",width:"100%",height:"100%",showPrintMargin:L.editValueMode,showGutter:L.editValueMode,highlightActiveLine:L.editValueMode,defaultValue:L.defaultValue,theme:L.themeType==="dark"?"clouds_midnight":"chrome",value:L.value,readOnly:!L.onChange,onChange:i=>L.onChange(i),name:L.name||"UNIQUE_ID_OF_DIV1",fontSize:L.fontSize||14,setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:L.editValueMode,tabSize:L.editValueMode?2:void 0},editorProps:{$blockScrolling:!0}})}const On={flex:{display:"flex"},button:{height:48,minWidth:48},wrapper:{width:"calc(100vw - 40px)",height:"calc(100vh - 188px)"}};class Wa extends G{componentDidMount(){super.componentDidMount();const{data:i,attr:n}=this.props,u=G.getValue(i,n)||"{}";this.setState({value:u,initialized:!0,jsonError:this.validateJson(u)})}validateJson(i){let n=!1;if(this.props.schema.validateJson!==!1&&(i||!this.props.schema.allowEmpty))try{this.props.schema.json5?ji.parse(i):JSON.parse(i)}catch(u){console.log("Error in JSON",u),n=!0}return n}renderItem(i,n){if(!this.state.initialized)return null;const{schema:u,data:y,attr:s}=this.props,{value:c,showSelectId:p}=this.state;return k.createElement(O.FormControl,{fullWidth:!0,variant:"standard"},k.createElement("div",{style:On.flex},k.createElement(O.Button,{color:"grey",disabled:n,style:On.button,size:"small",variant:"outlined",onClick:()=>this.setState({showSelectId:!0})},j.I18n.t("ra_JSON editor"))),p?k.createElement(fo,{title:this.getText(u.label),overflowHidden:!0,applyDisabled:this.state.jsonError&&this.props.schema.doNotApplyWithError,onClose:()=>this.setState({showSelectId:!1,value:G.getValue(y,s)||{}}),onApply:()=>this.setState({showSelectId:!1},()=>this.onChange(s,c))},k.createElement("div",{style:{...On.wrapper,border:this.state.jsonError?"2px solid red":"2px solid transparent"}},k.createElement(Pa,{mode:this.props.schema.json5?"json5":"json",value:typeof c=="object"?JSON.stringify(c):c,onChange:o=>this.setState({value:o,jsonError:this.validateJson(o)}),name:"ConfigJsonEditor",themeType:this.props.oContext.themeType}))):null,u.help||this.state.jsonError?k.createElement(O.FormHelperText,null,this.state.jsonError?j.I18n.t("ra_Invalid JSON"):this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null)}}const Ha=[{value:"en",label:"English"},{value:"de",label:"Deutsch"},{value:"ru",label:"русский"},{value:"pt",label:"Portugues"},{value:"nl",label:"Nederlands"},{value:"fr",label:"français"},{value:"it",label:"Italiano"},{value:"es",label:"Espanol"},{value:"pl",label:"Polski"},{value:"uk",label:"Український"},{value:"zh-cn",label:"简体中文"}];class za extends G{componentDidMount(){super.componentDidMount();const i=G.getValue(this.props.data,this.props.attr),n=[...Ha];this.props.schema.system?n.unshift({value:"",label:j.I18n.t("ra_System language")}):n.unshift({value:"",label:j.I18n.t("ra_none")}),this.setState({value:this.props.schema.system?i||"":i||j.I18n.getLanguage(),selectOptions:n})}renderItem(i,n){var y,s;if(!this.state.selectOptions)return null;const u=(y=this.state.selectOptions)==null?void 0:y.find(c=>c.value===this.state.value||!c.value&&!this.state.value);return k.createElement(O.FormControl,{fullWidth:!0,variant:"standard"},this.props.schema.label?k.createElement(O.InputLabel,null,this.getText(this.props.schema.label)):null,k.createElement(O.Select,{variant:"standard",error:!!i,disabled:n,value:this.state.value||"_",renderValue:()=>this.getText(u==null?void 0:u.label,this.props.schema.noTranslation),onChange:c=>{let{value:p}=c.target;p==="_"&&(p=""),this.setState({value:p},()=>{const o=this.onChange(this.props.attr,p);if(o instanceof Promise&&o.catch(d=>console.error(d)),this.props.schema.changeGuiLanguage)if(p){if(p===j.I18n.getLanguage())return;j.I18n.setLanguage(p),this.props.oContext.changeLanguage&&this.props.oContext.changeLanguage()}else this.props.oContext.socket.getSystemConfig().then(d=>{d.common.language!==j.I18n.getLanguage()&&d.common.language&&(j.I18n.setLanguage(d.common.language),this.props.oContext.changeLanguage&&this.props.oContext.changeLanguage())}).catch(d=>console.error(`Cannot read system config: ${d}`))})}},(s=this.state.selectOptions)==null?void 0:s.map(c=>k.createElement(O.MenuItem,{key:c.value,value:c.value},c.label))),this.props.schema.help?k.createElement(O.FormHelperText,null,this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null)}}class ja extends G{scrollRef;constructor(i){super(i),this.scrollRef=k.createRef()}scrolledDown(){return this.scrollRef.current?this.scrollRef.current.offsetHeight+this.scrollRef.current.scrollTop>=this.scrollRef.current.scrollHeight:!1}componentDidMount(){super.componentDidMount(),G.getValue(this.props.data,this.props.attr)||(this.props.schema.licenseUrl?(this.setState({showLicenseDialog:!0,loading:!0,scrolledDown:!1}),fetch(this.props.schema.licenseUrl).then(i=>i.text()).then(i=>this.setState({license:i,loading:!1})).catch(i=>this.setState({license:i.toString(),loading:!1,error:!0,scrolledDown:!1}))):this.setState({showLicenseDialog:!0,scrolledDown:!1}),setTimeout(()=>{this.scrollRef.current&&(this.scrolledDown()?this.setState({scrolledDown:!0}):this.scrollRef.current.addEventListener("scroll",()=>{!this.state.scrolledDown&&this.scrolledDown()&&this.setState({scrolledDown:!0})}))},1e3))}renderItem(i,n){return this.state.showLicenseDialog?k.createElement(O.Dialog,{maxWidth:"lg",open:!0,onClose:(u,y)=>{y!=="escapeKeyDown"&&y!=="backdropClick"&&this.setState({showLicenseDialog:!1})}},k.createElement(O.DialogTitle,null,this.props.schema.title?j.I18n.t(this.props.schema.title):j.I18n.t("ra_License agreement")),k.createElement(O.DialogContent,null,this.props.schema.licenseUrl?k.createElement(k.Fragment,null,this.state.loading?k.createElement(O.LinearProgress,null):null,k.createElement("pre",{ref:this.scrollRef,style:{width:"100%",height:"100%",overflowY:"auto",fontSize:14}},this.state.license)):null,!this.props.schema.licenseUrl&&this.props.schema.texts?k.createElement("div",{ref:this.scrollRef,style:{width:"100%",height:"100%",overflowY:"auto",fontSize:14}},this.props.schema.texts.map((u,y)=>this.props.schema.noTranslation?k.createElement("p",{key:y},u):k.createElement("p",{key:y},j.I18n.t(u)))):null),k.createElement(O.DialogActions,null,this.props.schema.checkBox?k.createElement(O.FormControlLabel,{control:k.createElement(O.Checkbox,{disabled:n,checked:!!this.state.licenseChecked,onClick:()=>this.setState({licenseChecked:!this.state.licenseChecked})}),label:j.I18n.t(this.props.schema.checkBox)}):null,k.createElement(O.Button,{disabled:n||this.state.loading||this.state.error||this.props.schema.checkBox&&!this.state.licenseChecked||!this.state.scrolledDown,onClick:()=>{this.setState({showLicenseDialog:!1});const u=this.onChange(this.props.attr,!0);u instanceof Promise&&u.catch(y=>console.error(`Cannot set value: ${y}`))},color:"primary",variant:"contained",startIcon:k.createElement(X.Check,null)},this.props.schema.agreeText?j.I18n.t(this.props.schema.agreeText):j.I18n.t("ra_Accept license")),k.createElement(O.Button,{onClick:()=>{this.setState({showLicenseDialog:!1}),setTimeout(()=>this.setState({showLicenseDialog:!0}),2e3)},color:"grey",variant:"contained",startIcon:k.createElement(X.Close,null)},j.I18n.t("ra_Close")))):null}}const xi={indeterminate:{opacity:.5},control:{flexDirection:"row",width:"100%"}};class Ua extends G{updateTimeout;componentDidMount(){super.componentDidMount();let i=G.getValue(this.props.data,this.props.attr);if(i==null&&(i=""),Array.isArray(i)&&this.props.oContext.multiEdit){i=G.DIFFERENT_VALUE,this.setState({_value:i,oldValue:i});return}this.setState({_value:i.toString(),oldValue:i.toString()})}static getDerivedStateFromProps(i,n){if(i.schema.min!==void 0&&i.schema.min<0||i.schema.max!==void 0&&i.schema.max<0)return null;const u=G.getValue(i.data,i.attr);return i.oContext.multiEdit&&n._value===G.DIFFERENT_VALUE?{_value:G.DIFFERENT_VALUE}:u==null||n.oldValue===null||n.oldValue===void 0||u.toString()!==parseFloat(n._value).toString()&&u.toString()!==n.oldValue.toString()?{_value:u}:null}checkValue(i){if(i==null)return null;i=i.toString().trim();const n=i===""?0:parseFloat(i);return i!==""&&Number.isNaN(n)?"ra_Not a number":i!==""&&window.isFinite(n)?this.props.schema.min!==void 0&&n<this.props.schema.min?"ra_Too small":this.props.schema.max!==void 0&&n>this.props.schema.max?"ra_Too big":i===""||i==="-"||Number.isNaN(n)?"ra_Not a number":null:"ra_Not a number"}renderItem(i,n){const u=Array.isArray(this.state._value)||this.state._value===G.DIFFERENT_VALUE;if(this.state.oldValue!==null&&this.state.oldValue!==void 0?(this.updateTimeout&&clearTimeout(this.updateTimeout),this.updateTimeout=setTimeout(()=>{this.updateTimeout=void 0,this.setState({oldValue:null})},30)):this.updateTimeout&&(clearTimeout(this.updateTimeout),this.updateTimeout=void 0),u){const y=G.getValue(this.props.data,this.props.attr),s=(y==null?void 0:y.filter(c=>c||c===0).map(c=>({label:c.toString(),value:c})))||[];return s.unshift({label:j.I18n.t(G.DIFFERENT_LABEL),value:G.DIFFERENT_VALUE}),k.createElement(O.Autocomplete,{style:xi.indeterminate,fullWidth:!0,freeSolo:!0,value:s[0],getOptionSelected:(c,p)=>c.label===p.label,onChange:(c,p)=>{const o=this.onChange(this.props.attr,p==null?void 0:p.value,()=>{this.setState({_value:p==null?void 0:p.value,oldValue:this.state._value})});o instanceof Promise&&o.catch(d=>console.error(d))},options:s,getOptionLabel:c=>c.label,renderInput:c=>k.createElement(O.TextField,{...c,label:this.getText(this.props.schema.label),variant:"standard",slotProps:{htmlInput:{...c.inputProps,readOnly:this.props.schema.readOnly||!1},input:{endAdornment:this.props.schema.unit?this.getText(this.props.schema.unit,this.props.schema.noTranslation):void 0}},error:!!i,placeholder:this.getText(this.props.schema.placeholder),helperText:this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation),disabled:!!n})})}return!i&&this.state._value!==null&&this.state._value!==void 0&&this.state._value&&(i=this.checkValue(this.state._value),i&&(i=j.I18n.t(i))),k.createElement(O.FormControl,{variant:"standard",style:xi.control},k.createElement(O.TextField,{variant:"standard",type:"number",fullWidth:!0,slotProps:{htmlInput:{min:this.props.schema.min,max:this.props.schema.max,step:this.props.schema.step,readOnly:this.props.schema.readOnly||!1},input:{endAdornment:this.props.schema.unit?this.getText(this.props.schema.unit,this.props.schema.noTranslation):void 0}},value:this.state._value===null||this.state._value===void 0?"":this.state._value,error:!!i,disabled:!!n,onChange:y=>{const s=y.target.value,c=this.checkValue(s);c?this.onError(this.props.attr,j.I18n.t(c)):this.onError(this.props.attr),this.setState({_value:s,oldValue:this.state._value},()=>this.onChange(this.props.attr,parseFloat(s)))},placeholder:this.getText(this.props.schema.placeholder),label:this.getText(this.props.schema.label),helperText:i&&typeof i=="string"?i:this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)}))}}const $i={flex:{display:"flex"},button:{height:48,marginLeft:4,minWidth:48}};class Va extends G{componentDidMount(){super.componentDidMount();const{data:i,attr:n}=this.props,u=G.getValue(i,n)||"";this.setState({value:u,initialized:!0})}renderItem(i,n){if(!this.state.initialized)return null;const u=this.props.oContext.socket,{schema:y,attr:s}=this.props,{value:c,showSelectId:p}=this.state;return k.createElement(O.FormControl,{fullWidth:!0,variant:"standard"},y.label?k.createElement(O.InputLabel,{shrink:!0},this.getText(y.label)):null,k.createElement("div",{style:$i.flex},k.createElement(O.TextField,{variant:"standard",fullWidth:!0,value:c,error:!!i,disabled:n,placeholder:this.getText(y.placeholder),label:this.getText(y.label),helperText:this.renderHelp(y.help,y.helpLink,y.noTranslation),onChange:o=>{const d=o.target.value;this.setState({value:d},()=>this.onChange(s,d))}}),k.createElement(O.Button,{color:"grey",disabled:n,style:$i.button,size:"small",variant:"outlined",onClick:()=>this.setState({showSelectId:!0})},"...")),p?k.createElement(j.DialogSelectID,{imagePrefix:this.props.oContext.imagePrefix===void 0?"../..":this.props.oContext.imagePrefix,dialogName:`admin.${this.props.oContext.adapterName}`,filterFunc:y.filterFunc,themeType:this.props.oContext.themeType,theme:this.props.oContext.theme,types:y.types?Array.isArray(y.types)?y.types:[y.types]:void 0,customFilter:y.customFilter,filters:y.filters,socket:u,selected:c,root:y.root,onClose:()=>this.setState({showSelectId:!1}),onOk:o=>this.setState({showSelectId:!1,value:o},()=>this.onChange(s,o))}):null)}}const Nn={fullWidth:{width:"100%",display:"inline-block"},halfWidth1:{width:"calc(50% - 5px)",display:"inline-block",marginRight:8},halfWidth2:{width:"calc(50% - 5px)",display:"inline-block"}},an="____ppp____";class Ga extends G{componentDidMount(){super.componentDidMount();const i=G.getValue(this.props.data,this.props.attr);this.setState({_repeat:i?an:"",_visible:!1,value:i?an:"",_notEqual:!1})}onChangePassword(i,n){i===void 0&&(i=this.state.value),n===void 0&&(n=this.state._repeat);const u=!!this.props.schema.repeat&&n!==i;this.setState({value:i,_repeat:n,_notEqual:u},()=>{if(u)this.onError(this.props.attr,j.I18n.t("ra_Passwords are not equal!"));else{this.onError(this.props.attr);const y=this.onChange(this.props.attr,i);y instanceof Promise&&y.catch(s=>this.onError(this.props.attr,s))}})}renderItem(i,n){if(this.state._notEqual===void 0)return null;const u=k.createElement(O.TextField,{variant:"standard",fullWidth:!0,type:this.state._visible&&this.state.value!==an?"text":"password",value:this.state.value,error:!!i||this.state._notEqual,disabled:!!n,onChange:y=>this.onChangePassword(y.target.value),label:this.getText(this.props.schema.label),slotProps:{input:{autoComplete:"new-password",endAdornment:this.state.value&&this.state.value!==an&&this.props.schema.visible&&!n&&!this.props.schema.readOnly?k.createElement(O.InputAdornment,{position:"end"},k.createElement(O.IconButton,{size:"large",tabIndex:-1,onClick:y=>{y.preventDefault(),y.stopPropagation(),this.setState({_visible:!this.state._visible})},edge:"end"},this.state._visible?k.createElement(X.VisibilityOff,null):k.createElement(X.Visibility,null))):void 0},htmlInput:{autoComplete:"new-password",form:{autoComplete:"off"},maxLength:this.props.schema.maxLength||this.props.schema.max||void 0,readOnly:this.props.schema.readOnly||!1}},helperText:this.state._notEqual?j.I18n.t("ra_Passwords are not equal!"):this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)});if(this.props.schema.repeat&&!this.props.schema.readOnly){const y=this.state._visible?null:k.createElement(O.TextField,{variant:"standard",fullWidth:!0,type:"password",value:this.state._repeat,error:!!i||this.state._notEqual,disabled:!!n,onChange:s=>this.onChangePassword(void 0,s.target.value),label:`${this.getText(this.props.schema.label)} (${j.I18n.t("ra_repeat")})`,slotProps:{input:{autoComplete:"new-password"},htmlInput:{autoComplete:"new-password",form:{autoComplete:"off"},maxLength:this.props.schema.maxLength||this.props.schema.max||void 0}},helperText:this.state._notEqual?j.I18n.t("ra_Passwords are not equal!"):this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)});return k.createElement("div",{style:Nn.fullWidth},k.createElement("div",{style:Nn.halfWidth1},u),k.createElement("div",{style:Nn.halfWidth2},y))}return u}}class Ka extends G{renderItem(i,n){return k.createElement(O.TextField,{variant:"standard",fullWidth:!0,disabled:!!n,slotProps:{input:{endAdornment:this.props.schema.copyToClipboard?k.createElement(O.IconButton,{size:"small",onClick:()=>{j.Utils.copyToClipboard(this.getPattern(this.props.schema.pattern,null,this.props.schema.noTranslation)),window.alert(j.I18n.t("ra_Copied"))}},k.createElement(j.IconCopy,null)):void 0}},value:this.getPattern(this.props.schema.pattern,null,!0),label:this.getText(this.props.schema.label),helperText:this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)})}}const Ja={warning:{"& .Mui-error":{color:"orange"}}};class Ya extends G{updateTimeout;async componentDidMount(){super.componentDidMount();let i=G.getValue(this.props.data,this.props.attr);i==null&&(i=""),this.setState({_value:i.toString(),oldValue:i.toString()});const n=await this.props.oContext.socket.getAdapterInstances(),u=`system.adapter.${this.props.oContext.adapterName}.${this.props.oContext.instance}`,y=await this.props.oContext.socket.getObject(u),s=y==null?void 0:y.common.host,c=[];n.forEach(p=>{var d,e,t,r;if(!p||p._id===u||p.common.host!==s||!((d=p.native)!=null&&d.bind))return;if(p!=null&&p.native&&p.native.secure&&p.native.leEnabled&&p.native.leUpdate){const l=parseInt(p.native.leCheckPort||p.native.lePort,10);l&&c.push({name:`${p._id.replace("system.adapter.","")} (LE)`,port:l,v6bind:p.native.bind.includes(":")?p.native.bind:p.native.v6bind,bind:p.native.bind,enabled:!!((e=p.common)!=null&&e.enabled)})}const o=parseInt((t=p==null?void 0:p.native)==null?void 0:t.port,10);o&&c.push({name:p._id.replace("system.adapter.",""),bind:p.native.bind,v6bind:p.native.bind.includes(":")?p.native.bind:p.native.v6bind,port:o,enabled:!!((r=p.common)!=null&&r.enabled)})}),this.setState({ports:c})}static getDerivedStateFromProps(i,n){const u=G.getValue(i.data,i.attr);return u==null||n.oldValue===null||n.oldValue===void 0||u.toString()!==parseInt(n._value,10).toString()&&u.toString()!==n.oldValue.toString()?{_value:u}:null}checkValue(i){if(i==null)return null;const n=this.props.schema.min===void 0?20:this.props.schema.min,u=this.props.schema.max||65535;i=i.toString().trim();const y=i===""?0:parseInt(i,10);return i!==""&&Number.isNaN(y)?"ra_Not a number":i!==""&&window.isFinite(Number(i))?y<n?"ra_Too small":y>u?"ra_Too big":i===""||i==="-"||Number.isNaN(y)?"ra_Not a number":null:"ra_Not a number"}renderItem(i,n){this.state.oldValue!==null&&this.state.oldValue!==void 0?(this.updateTimeout&&clearTimeout(this.updateTimeout),this.updateTimeout=setTimeout(()=>{this.updateTimeout=void 0,this.setState({oldValue:null})},30)):this.updateTimeout&&(clearTimeout(this.updateTimeout),this.updateTimeout=void 0);const u=this.props.schema.min===void 0?20:this.props.schema.min,y=this.props.schema.max||65535;let s;if(this.state.ports){const c=parseInt(this.state._value,10);if(c){const p=this.state.ports.filter(d=>!this.props.data.bind||this.props.data.bind===d.bind||this.props.data.bind==="0.0.0.0"||d.bind==="0.0.0.0");let o=p.findIndex(d=>d.port===c&&d.enabled);o!==-1?i=j.I18n.t("ra_Port is already used by %s",this.state.ports[o].name):(o=p.findIndex(d=>d.port===c&&!d.enabled),o!==-1&&(s=!0,i=j.I18n.t("ra_Port could be used by %s",this.state.ports[o].name)))}}return!i&&this.state._value!==null&&this.state._value!==void 0&&(i=this.checkValue(this.state._value),typeof i=="string"&&(i=j.I18n.t(i))),k.createElement(O.TextField,{variant:"standard",type:"number",fullWidth:!0,slotProps:{htmlInput:{min:u,max:y,readOnly:this.props.schema.readOnly||!1}},value:this.state._value===null||this.state._value===void 0?"":this.state._value,error:!!i,disabled:!!n,sx:s?Ja.warning:void 0,onChange:c=>{const p=Number(c.target.value.toString().replace(/[^0-9]/g,"")).toString(),o=this.checkValue(p);o?this.onError(this.props.attr,j.I18n.t(o)):this.onError(this.props.attr),this.setState({_value:p,oldValue:this.state._value},()=>{if(p.trim()===parseInt(p,10).toString()){const d=this.onChange(this.props.attr,parseInt(p,10)||0);d instanceof Promise&&d.catch(e=>{console.error(`Cannot set value for ${this.props.attr}: ${e}`)})}})},placeholder:this.getText(this.props.schema.placeholder),label:this.getText(this.props.schema.label),helperText:i&&typeof i=="string"?i:this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)})}}class Qa extends G{componentDidMount(){super.componentDidMount();const i=G.getValue(this.props.data,this.props.attr);this.props.oContext.socket.getEnums("rooms").then(n=>{const u=Object.keys(n).map(y=>({value:this.props.schema.short?y.replace("enum.rooms.",""):y,label:this.getText(n[y].common.name),obj:n[y]}));this.props.schema.allowDeactivate!==!1&&u.unshift({label:j.I18n.t(G.NONE_LABEL),value:G.NONE_VALUE}),this.setState({value:i,selectOptions:u})}).catch(n=>console.error(`Cannot get enums: ${n}`))}renderItem(i,n){if(!this.state.selectOptions)return null;const u=this.state.selectOptions.find(y=>y.value===this.state.value);return k.createElement(O.FormControl,{variant:"standard",fullWidth:!0},this.props.schema.label?k.createElement(O.InputLabel,null,this.getText(this.props.schema.label)):null,k.createElement(O.Select,{variant:"standard",error:!!i,disabled:!!n,value:this.state.value||"_",renderValue:()=>u?u.obj?k.createElement(j.TextWithIcon,{value:u.obj,themeType:this.props.oContext.themeType,lang:j.I18n.getLanguage()}):u.label:"",onChange:y=>{this.setState({value:y.target.value==="_"?"":y.target.value},()=>this.onChange(this.props.attr,this.state.value))}},this.state.selectOptions.map(y=>k.createElement(O.MenuItem,{key:y.value,value:y.value,style:y.value===G.DIFFERENT_VALUE?{opacity:.5}:{}},y.obj?k.createElement(j.TextWithIcon,{value:y.obj,themeType:this.props.oContext.themeType,lang:j.I18n.getLanguage()}):y.label))),this.props.schema.help?k.createElement(O.FormHelperText,null,this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null)}}const Xa={noMargin:{"&>div":{marginTop:0}}};class Za extends G{initialValue="";componentDidMount(){super.componentDidMount();const i=G.getValue(this.props.data,this.props.attr),n=[];(this.props.schema.options||[]).forEach(u=>{const y=u;Array.isArray(y.items)?(n.push({label:this.getText(u.label),value:u.value,group:!0}),y.items.forEach(s=>n.push({label:this.getText(s.label),value:s.value,hidden:s.hidden}))):n.push({label:this.getText(u.label),value:u.value,hidden:u.hidden})}),Array.isArray(i)?(this.initialValue=[...i],n.unshift({label:j.I18n.t(G.DIFFERENT_LABEL),value:G.DIFFERENT_VALUE}),this.setState({value:G.DIFFERENT_VALUE,selectOptions:n})):this.setState({value:i,selectOptions:n})}renderItem(i,n){if(!this.state.selectOptions)return null;const u=(this.state.selectOptions||[]).filter(s=>s.hidden?this.props.custom?!this.executeCustom(s.hidden,this.props.data,this.props.customObj,this.props.oContext.instanceObj,this.props.arrayIndex,this.props.globalData):!this.execute(s.hidden,this.props.schema.default,this.props.data,this.props.arrayIndex,this.props.globalData):!0),y=u.find(s=>s.value==this.state.value);return k.createElement(O.FormControl,{variant:"standard",fullWidth:!0,sx:this.props.table!==void 0&&Xa.noMargin,id:`jsonSelect_${this.props.attr}_${this.props.index||this.props.index===0?this.props.index:""}`},this.props.schema.label?k.createElement(O.InputLabel,null,this.getText(this.props.schema.label)):null,k.createElement(O.Select,{variant:"standard",error:!!i,disabled:!!n,value:this.state.value||"_",renderValue:()=>this.getText(y==null?void 0:y.label,this.props.schema.noTranslation),onChange:s=>{this.setState({value:s.target.value==="_"?"":s.target.value},()=>{let c;this.state.value===G.DIFFERENT_VALUE?c=this.onChange(this.props.attr,this.initialValue):c=this.onChange(this.props.attr,this.state.value),c instanceof Promise&&c.catch(p=>console.error(p))})}},u.map((s,c)=>s.group?k.createElement(O.ListSubheader,{key:c},this.getText(s.label,this.props.schema.noTranslation)):k.createElement(O.MenuItem,{key:c,value:s.value,style:s.value===G.DIFFERENT_VALUE?{opacity:.5}:{}},this.getText(s.label,this.props.schema.noTranslation)))),this.props.schema.help?k.createElement(O.FormHelperText,null,this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null)}}const qa={menuPaper:{maxHeight:800}};class el extends G{initialized=!1;localContext;askInstance(){if(this.props.alive){let i=this.props.schema.data;if(i===void 0&&this.props.schema.jsonData){const n=this.getPattern(this.props.schema.jsonData,null,!0);try{i=JSON.parse(n)}catch{console.error(`Cannot parse json data: ${n}`)}}i===void 0&&(i=null),this.setState({running:!0},()=>{this.props.oContext.socket.sendTo(`${this.props.oContext.adapterName}.${this.props.oContext.instance}`,this.props.schema.command||"send",i).then(n=>this.setState({list:n,running:!1})).catch(n=>{console.error(`Cannot send command: ${n}`)})})}else{const i=G.getValue(this.props.data,this.props.attr);this.setState({value:i,running:!1})}}getContext(){const i={};return Array.isArray(this.props.schema.alsoDependsOn)&&this.props.schema.alsoDependsOn.forEach(n=>i[n]=G.getValue(this.props.data,n)),JSON.stringify(i)}_getValue(){let i=this.state.value===null||this.state.value===void 0?G.getValue(this.props.data,this.props.attr):this.state.value;return this.props.schema.multiple&&(typeof i=="string"?i=[i]:i==null&&(i=[])),i}renderItem(i,n){var c;if(this.props.alive){const p=this.getContext();(p!==this.localContext||!this.initialized)&&(this.localContext=p,setTimeout(()=>this.askInstance(),this.initialized?300:50),this.initialized=!0)}const u=this._getValue();if(!this.props.alive||!this.state.running&&!((c=this.state.list)!=null&&c.length))return this.props.schema.multiple||this.props.schema.manual===!1?j.I18n.t("ra_Cannot retrieve options, as instance is offline"):k.createElement(O.TextField,{variant:"standard",fullWidth:!0,value:u,error:!!i,disabled:!!n,onChange:p=>{const o=p.target.value;this.setState({value:o},()=>this.onChange(this.props.attr,(o||"").trim()))},placeholder:this.getText(this.props.schema.placeholder),label:this.getText(this.props.schema.label),helperText:this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation),slotProps:{input:{endAdornment:this.state.value&&!this.props.schema.noClearButton?k.createElement(O.InputAdornment,{position:"end"},k.createElement(O.IconButton,{size:"small",onClick:()=>this.setState({value:""},()=>this.onChange(this.props.attr,""))},k.createElement(X.Close,null))):null}}});if(this.state.running)return k.createElement(O.CircularProgress,{size:"24"});const y=this.state.list.filter(p=>p.hidden?this.props.custom?!this.executeCustom(p.hidden,this.props.data,this.props.customObj,this.props.oContext.instanceObj,this.props.arrayIndex,this.props.globalData):!this.execute(p.hidden,this.props.schema.default,this.props.data,this.props.arrayIndex,this.props.globalData):!0),s=y.find(p=>p.value===u);return k.createElement(O.FormControl,{variant:"standard",fullWidth:!0},this.props.schema.label?k.createElement(O.InputLabel,null,this.getText(this.props.schema.label)):null,k.createElement(O.Select,{variant:"standard",error:!!i,multiple:this.props.schema.multiple,disabled:!!n,sx:{"&.MuiSelect-paper":this.props.schema.multiple?qa.menuPaper:void 0},value:u,renderValue:p=>this.props.schema.multiple?k.createElement(O.Box,{sx:{display:"flex",flexWrap:"wrap",gap:.5}},p.map(o=>{const d=y.find(e=>e.value===o);if(d||this.props.schema.showAllValues!==!1){const e=(d==null?void 0:d.label)||o;return k.createElement(O.Chip,{key:o,label:e})}return null})):(s==null?void 0:s.label)||p,onChange:p=>{const o=this.onChange(this.props.attr,p.target.value);o instanceof Promise&&o.catch(d=>console.error(`Cannot set value: ${d}`))}},y.map((p,o)=>k.createElement(O.MenuItem,{key:o,value:p.value},this.props.schema.multiple?k.createElement(O.Checkbox,{checked:u.includes(p.value),onClick:()=>{const d=JSON.parse(JSON.stringify(this._getValue())),e=u.indexOf(p.value);e!==-1?d.splice(e,1):(d.push(p.value),d.sort()),this.setState({value:d},()=>this.onChange(this.props.attr,d))}}):null,k.createElement(O.ListItemText,{primary:p.label})))),this.props.schema.help?k.createElement(O.FormHelperText,null,this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null)}}const Ti={fullWidth:{width:"100%"}};function ut(L){return L.split(".").reduce((i,n)=>(i<<8)+parseInt(n,10),0)>>>0}function tl(L,i){var y,s;const n=(s=(y=L==null?void 0:L.native)==null?void 0:y.hardware)==null?void 0:s.networkInterfaces;if(!n)return null;let u;return Object.keys(n).forEach(c=>n[c].forEach(p=>{p.internal||i.includes(":")&&p.family!=="IPv6"||i.includes(".")&&!i.match(/[^.\d]/)&&p.family!=="IPv4"||(p.family==="IPv4"&&!p.address.startsWith("172")&&(i==="127.0.0.0"||i==="localhost"||i.match(/[^.\d]/))?u=p.address:u||(p.family==="IPv4"&&i.includes(".")&&(ut(i)&ut(p.netmask),ut(p.address)&ut(p.netmask)),u=p.address))})),u||Object.keys(n).forEach(c=>n[c].forEach(p=>{p.internal||i.includes(":")&&p.family!=="IPv6"||i.includes(".")&&!i.match(/[^.\d]/)&&p.family!=="IPv4"||(p.family==="IPv6"&&(i==="127.0.0.0"||i==="localhost"||i.match(/[^.\d]/))?u=p.address:u||(p.family==="IPv4"&&i.includes(".")&&(ut(i)&ut(p.netmask),ut(p.address)&ut(p.netmask)),u=p.address))})),u||Object.keys(n).forEach(c=>{n[c].forEach(p=>{p.internal||i.includes(":")&&p.family!=="IPv6"||i.includes(".")&&!i.match(/[^.\d]/)&&p.family!=="IPv4"||(i==="127.0.0.0"||i==="localhost"||i.match(/[^.\d]/),u=p.address)})}),u||Object.keys(n).forEach(c=>{n[c].forEach(p=>{p.internal||(u=p.address)})}),u}class _i extends G{async componentDidMount(){var n;super.componentDidMount();let i=window.location.hostname;if(this.props.schema.openUrl){const u=await this.props.oContext.socket.getCurrentInstance(),y=await this.props.oContext.socket.getObject(`system.adapter.${u}`);if(y){const s=await this.props.oContext.socket.getObject(`system.host.${(n=y==null?void 0:y.common)==null?void 0:n.host}`);if(s){const c=tl(s,window.location.hostname);if(c)i=`${c}:${window.location.port}`;else{console.warn(`Cannot find suitable IP in host ${y.common.host} for ${y._id}`);return}}}}await new Promise(u=>{this.setState({_error:"",_message:"",hostname:i},u)}),this.props.schema.onLoaded&&this._onClick()}renderErrorDialog(){return this.state._error?k.createElement(j.DialogError,{text:this.state._error,onClose:()=>this.setState({_error:""})}):null}renderMessageDialog(){return this.state._message?k.createElement(j.DialogMessage,{text:this.state._message,onClose:()=>this.setState({_message:""})}):null}_onClick(){this.props.oContext.onCommandRunning(!0),this.setState({running:!0});const i=`${window.location.protocol}//${window.location.host}${window.location.pathname.replace(/\/index\.html$/,"")}`,n=`${window.location.protocol}//${this.state.hostname.split(":").length>3?`[${this.state.hostname}]`:this.state.hostname}${window.location.pathname.replace(/\/index\.html$/,"")}`;let u=this.props.schema.data;if(u===void 0&&this.props.schema.jsonData){const s=this.getPattern(this.props.schema.jsonData,{_origin:i,_originIp:n,...this.props.data},!0);try{u=JSON.parse(s)}catch{console.error(`Cannot parse json data: ${s}`)}}u===void 0&&(u=null),this.props.schema.openUrl&&!u&&(u={_origin:i,_originIp:n});let y;this.props.schema.timeout&&(y=setTimeout(()=>{this.props.oContext.onCommandRunning(!1),this.setState({_error:j.I18n.t("ra_Request timed out"),running:!1})},parseInt(this.props.schema.timeout,10)||1e4)),this.props.oContext.socket.sendTo(`${this.props.oContext.adapterName}.${this.props.oContext.instance}`,this.props.schema.command||"send",u).then(async s=>{if(y&&(clearTimeout(y),y=void 0),s!=null&&s.error)if(this.props.schema.error&&this.props.schema.error[s.error]){let c=this.getText(this.props.schema.error[s.error]);s.args&&s.args.forEach(p=>c=c.replace("%s",p)),this.setState({_error:c})}else this.setState({_error:s.error?j.I18n.t(s.error):j.I18n.t("ra_Error")});else{if(s!=null&&s.command){this.props.oContext.onBackEndCommand&&this.props.oContext.onBackEndCommand(s.command);return}if(s!=null&&s.reloadBrowser&&this.props.schema.reloadBrowser)window.location.reload();else if(s!=null&&s.openUrl&&this.props.schema.openUrl)window.open(s.openUrl,s.window||this.props.schema.window||"_blank");else if(s!=null&&s.result&&this.props.schema.result&&this.props.schema.result[s.result]){let c=this.getText(this.props.schema.result[s.result]);s.args&&s.args.forEach(p=>c=c.replace("%s",p)),window.alert(c)}if(s!=null&&s.native&&this.props.schema.useNative){for(const[c,p]of Object.entries(s.native))await this.onChangeAsync(c,p);setTimeout(()=>this.props.oContext.forceUpdate(Object.keys(s.native),this.props.data),300)}else s!=null&&s.result?window.alert(typeof s.result=="object"?JSON.stringify(s.result):s.result):window.alert(j.I18n.t("ra_Ok"));s!=null&&s.saveConfig&&this.props.onChange(null,null,null,!0)}}).catch(s=>{this.props.schema.error&&this.props.schema.error[s.toString()]?this.setState({_error:this.getText(this.props.schema.error[s.toString()])}):this.setState({_error:j.I18n.t(s.toString())||j.I18n.t("ra_Error")})}).then(()=>{this.props.oContext.onCommandRunning(!1),this.setState({running:!1})})}renderDialogConfirm(){if(!this.state.confirmDialog)return null;const i=this.state.confirmData||this.props.schema.confirm;let n=null;return i.type==="warning"?n=k.createElement(X.Warning,null):i.type==="error"?n=k.createElement(X.Error,null):i.type==="info"&&(n=k.createElement(X.Info,null)),k.createElement(j.DialogConfirm,{title:this.getText(i.title)||j.I18n.t("ra_Please confirm"),text:this.getText(i.text),ok:this.getText(i.ok)||j.I18n.t("ra_Ok"),cancel:this.getText(i.cancel)||j.I18n.t("ra_Cancel"),icon:n||void 0,onClose:u=>this.setState({confirmDialog:!1},()=>u&&this._onClick())})}renderItem(i,n){const u=this.getIcon();return k.createElement("div",{style:Ti.fullWidth},k.createElement(O.Button,{variant:this.props.schema.variant||void 0,color:this.props.schema.color||"grey",style:{...Ti.fullWidth,...this.props.schema.controlStyle||void 0},disabled:n||!this.props.alive,startIcon:u,title:this.props.alive?this.getText(this.props.schema.title)||"":j.I18n.t("ra_Instance is not alive"),onClick:()=>{this.props.schema.confirm?this.setState({confirmDialog:!0}):this._onClick()}},this.props.schema.showProcess&&this.state.running?k.createElement(O.CircularProgress,{size:20,style:{marginRight:8}}):null,this.getText(this.props.schema.label,this.props.schema.noTranslation)),this.renderErrorDialog(),this.renderMessageDialog())}}const ki={fullWidth:{width:"100%"},icon:{width:24,height:24,marginRight:4}};class nl extends G{async _onClick(){var u,y;let i=this.props.schema.val;if(typeof i=="string"&&i.includes("${")){i=this.getPattern(i,null,!0);const s=await this.props.oContext.socket.getObject(this.props.schema.id);((u=s==null?void 0:s.common)==null?void 0:u.type)==="number"?i=parseFloat(i):((y=s==null?void 0:s.common)==null?void 0:y.type)==="boolean"&&(i=i==="true"||i===!0||i==="1"||i===1)}const n=(this.props.schema.id||"").replace(/%INSTANCE%/g,(this.props.oContext.instance||0).toString());try{await this.props.oContext.socket.setState(n,{val:i,ack:!!this.props.schema.ack}),this.props.schema.okText&&window.alert(this.getText(this.props.schema.okText))}catch(s){this.props.schema.error&&this.props.schema.error[s.toString()]?window.alert(this.getText(this.props.schema.error[s.toString()])):window.alert(j.I18n.t(s.toString())||j.I18n.t("ra_Error"))}}renderDialogConfirm(){if(!this.state.confirmDialog)return null;const i=this.state.confirmData||this.props.schema.confirm;let n=null;return i.type==="warning"?n=k.createElement(X.Warning,null):i.type==="error"?n=k.createElement(X.Error,null):i.type==="info"&&(n=k.createElement(X.Info,null)),k.createElement(j.DialogConfirm,{title:this.getText(i.title)||j.I18n.t("ra_Please confirm"),text:this.getText(i.text),ok:this.getText(i.ok)||j.I18n.t("ra_Ok"),cancel:this.getText(i.cancel)||j.I18n.t("ra_Cancel"),icon:n,onClose:u=>this.setState({confirmDialog:!1},()=>u&&this._onClick())})}renderItem(i,n){return k.createElement(O.Button,{variant:this.props.schema.variant||void 0,color:this.props.schema.color||"grey",style:ki.fullWidth,disabled:n,onClick:async()=>{this.props.schema.confirm?this.setState({confirmDialog:!0}):await this._onClick()}},this.props.schema.icon?k.createElement(j.Icon,{src:this.props.schema.icon,style:ki.icon}):null,this.getText(this.props.schema.label,this.props.schema.noTranslation))}}const Mi={fullWidth:{width:"100%"},slider:{marginLeft:10,marginRight:10,width:"calc(100% - 20px)"}};class il extends G{componentDidMount(){super.componentDidMount();const i=G.getValue(this.props.data,this.props.attr);this.setState({_value:i})}static getDerivedStateFromProps(i,n){if(i.schema.min!==void 0&&i.schema.min<0||i.schema.max!==void 0&&i.schema.max<0)return null;const u=G.getValue(i.data,i.attr);return u==null||u.toString()!==parseFloat(n._value).toString()?{_value:u}:null}renderItem(i,n){const u=this.props.schema.min||0,y=this.props.schema.max||100,s=this.props.schema.unit?this.getText(this.props.schema.unit,this.props.schema.noTranslation):"",c=[{value:u,label:u+s},{value:y,label:y+s}];return k.createElement(O.Box,{style:Mi.fullWidth},this.props.schema.label?k.createElement(O.Typography,{gutterBottom:!0},this.getText(this.props.schema.label)):null,k.createElement(O.Slider,{style:Mi.slider,value:this.state._value,getAriaValueText:p=>p+s,step:this.props.schema.step||(y-u)/100,valueLabelDisplay:"auto",marks:c,min:u,max:y,disabled:!!n,onChange:p=>{const o=p.target.value;this.setState({_value:o},()=>this.onChange(this.props.attr,o))}}),this.props.schema.help?k.createElement(O.Typography,null,this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null)}}function ct(L,i){return L==="edit"||L==="rename"?k.createElement(X.Edit,{style:i}):L==="delete"?k.createElement(X.Delete,{style:i}):L==="refresh"?k.createElement(X.Refresh,{style:i}):L==="newDevice"||L==="new"||L==="add"?k.createElement(X.Add,{style:i}):L==="discover"||L==="search"?k.createElement(X.Search,{style:i}):L==="unpairDevice"||L==="unpair"?k.createElement(X.LinkOff,{style:i}):L==="pairDevice"||L==="pair"?k.createElement(X.Link,{style:i}):L==="identify"?k.createElement(X.NotListedLocation,{style:i}):L==="play"?k.createElement(X.PlayArrow,{style:i}):L==="stop"?k.createElement(X.Stop,{style:i}):L==="pause"?k.createElement(X.Pause,{style:i}):L==="forward"||L==="next"?k.createElement(X.FastForward,{style:i}):L==="rewind"||L==="previous"?k.createElement(X.FastRewind,{style:i}):L==="lamp"||L==="light"?k.createElement(X.Lightbulb,{style:i}):L==="backlight"?k.createElement(X.Fluorescent,{style:i}):L==="dimmer"?k.createElement(X.WbIncandescent,{style:i}):L==="socket"?k.createElement(X.Power,{style:i}):L==="settings"?k.createElement(X.Settings,{style:i}):L==="users"||L==="group"?k.createElement(X.Group,{style:i}):L==="user"?k.createElement(X.Person,{style:i}):L==="qrcode"?k.createElement(X.QrCode,{style:i}):L==="connection"?k.createElement(X.Wifi,{style:i}):L==="no-connection"?k.createElement(X.WifiOff,{style:i}):L==="visible"?k.createElement(X.Visibility,{style:i}):null}function rl(L,i){return typeof i=="string"?{"@keyframes newStateAnimationOnceColor":{"0%":{color:i},"100%":{color:L.palette.mode==="dark"?"#fff":"#000"}},animation:"newStateAnimationOnceColor 2s ease-in-out"}:{"@keyframes newStateAnimationOnce":{"0%":{color:"#00f900"},"80%":{color:L.palette.mode==="dark"?"#518851":"#008000"},"100%":{color:L.palette.mode==="dark"?"#fff":"#000"}},animation:"newStateAnimationOnce 2s ease-in-out"}}class sl extends G{controlTimeout=null;delayedUpdate={timer:null,value:null};getObjectID(){return this.props.schema.foreign?this.props.schema.oid:`${this.props.schema.system?"system.adapter.":""}${this.props.oContext.adapterName}.${this.props.oContext.instance}.${this.props.schema.oid}`}async componentDidMount(){super.componentDidMount();const i=await this.props.oContext.socket.getObject(this.getObjectID()),n=this.props.schema.control||this.detectType(i),u=await this.props.oContext.socket.getState(this.getObjectID());this.setState({stateValue:u?u.val:null,controlType:n,obj:i},async()=>{await this.props.oContext.socket.subscribeState(this.getObjectID(),this.onStateChanged)})}componentWillUnmount(){super.componentWillUnmount(),this.props.oContext.socket.unsubscribeState(this.getObjectID(),this.onStateChanged),this.delayedUpdate.timer&&(clearTimeout(this.delayedUpdate.timer),this.delayedUpdate.timer=null),this.controlTimeout&&(clearTimeout(this.controlTimeout),this.controlTimeout=null,this.props.oContext.socket.setState(this.getObjectID(),this.state.stateValue,!1).catch(i=>console.error(`Cannot control value: ${i.toString()}`)))}onStateChanged=(i,n)=>{let u=n?n.val:null;this.state.controlType==="button"||this.state.controlType==="switch"?(u=!!u,this.state.stateValue!==u&&this.setState({stateValue:u})):u!==null&&(this.state.controlType==="slider"||this.state.controlType==="number")?(u=parseFloat(u),console.log(`${Date.now()} Received new value: ${u}`),u!==this.state.stateValue?(this.delayedUpdate.timer&&(clearTimeout(this.delayedUpdate.timer),this.delayedUpdate.timer=null),this.delayedUpdate.value=u,this.delayedUpdate.timer=setTimeout(()=>{this.setState({stateValue:this.delayedUpdate.value})},500)):this.delayedUpdate.timer&&(clearTimeout(this.delayedUpdate.timer),this.delayedUpdate.timer=null)):this.state.stateValue.toString()!==u.toString()&&this.setState({stateValue:u})};detectType(i){if(i=i||{},i.common=i.common||{},i.common.type==="boolean"){if(this.props.schema.controlled!==!1){if(i.common.read===!1||this.props.schema.controlled===!0)return"button";if(i.common.write||this.props.schema.controlled===!0)return"switch"}return"text"}return i.common.type==="number"&&this.props.schema.controlled!==!1?i.common.write||this.props.schema.controlled===!0?i.common.max!==void 0?"slider":"input":"text":i.common.write&&this.props.schema.controlled!==!1?"input":"text"}renderItem(i,n){var y,s,c,p,o;if(!this.state.obj)return null;let u;if(this.state.controlType==="button"||!this.state.controlType&&this.state.obj.common.type==="boolean"&&(this.state.obj.common.write&&this.state.obj.common.read===!1||(y=this.state.obj.common.role)!=null&&y.includes("button"))){let d=null;this.props.schema.falseImage&&(d=ct(this.props.schema.falseImage));const e=this.getText(this.props.schema.falseText||this.props.schema.label,this.props.schema.noTranslation);!e&&d?u=k.createElement(O.IconButton,{style:this.props.schema.falseTextStyle,disabled:!!this.props.schema.readOnly,onClick:async()=>{this.props.schema.confirm?this.setState({confirmDialog:!0,confirmCallback:async t=>{t&&await this.props.oContext.socket.setState(this.getObjectID(),this.props.schema.buttonValue!==void 0?this.props.schema.buttonValue:!0,!1)}}):await this.props.oContext.socket.setState(this.getObjectID(),this.props.schema.buttonValue!==void 0?this.props.schema.buttonValue:!0,!1)}},d):u=k.createElement(O.Button,{variant:this.props.schema.variant||"contained",startIcon:d,style:this.props.schema.falseTextStyle,disabled:n||!!this.props.schema.readOnly,onClick:async()=>{this.props.schema.confirm?this.setState({confirmDialog:!0,confirmCallback:async t=>{t&&await this.props.oContext.socket.setState(this.getObjectID(),this.props.schema.buttonValue!==void 0?this.props.schema.buttonValue:!0,!1)}}):await this.props.oContext.socket.setState(this.getObjectID(),this.props.schema.buttonValue!==void 0?this.props.schema.buttonValue:!0,!1)}},e||this.getObjectID().split(".").pop())}else if(this.state.controlType==="input"||!this.state.controlType&&this.state.obj.common.write&&this.state.obj.common.type==="string")u=k.createElement(O.TextField,{style:{width:"100%"},value:this.state.stateValue,variant:"standard",slotProps:{input:{endAdornment:this.getText(this.props.schema.unit,this.props.schema.noTranslation)||this.state.obj.common.unit||void 0},htmlInput:{readOnly:!!this.props.schema.readOnly}},onChange:d=>{this.setState({stateValue:d.target.value},()=>{this.controlTimeout&&clearTimeout(this.controlTimeout),this.controlTimeout=setTimeout(async()=>{this.controlTimeout=null,await this.props.oContext.socket.setState(this.getObjectID(),this.state.stateValue,!1)},this.props.schema.controlDelay||0)})},label:this.getText(this.props.schema.label),helperText:this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)});else{let d;this.props.schema.size==="normal"?d=16:this.props.schema.size==="large"?d=20:typeof this.props.schema.size=="number"&&(d=this.props.schema.size);let e=this.getText(this.props.schema.label,this.props.schema.noTranslation);const t={display:"flex",alignItems:"center",fontSize:d||"1rem",gap:8};this.props.schema.narrow||(t.width="100%",t.justifyContent="space-between"),e.trim()&&!e.trim().endsWith(":")&&this.props.schema.addColon&&(e=`${e.trim()}:`);let r;this.props.schema.blinkOnUpdate&&(r=rl(this.props.oContext.theme,this.props.schema.blinkOnUpdate));let l;this.props.schema.labelIcon&&(l=k.createElement(j.Icon,{src:this.props.schema.labelIcon,style:{marginRight:4}}));let a;if(e&&l?a=k.createElement("div",{style:{whiteSpace:"nowrap"}},l,e):e?a=k.createElement("div",{style:{whiteSpace:"nowrap"}},e):l&&(a=l),this.state.controlType==="switch"||!this.state.controlType&&this.state.obj.common.type==="boolean"&&(this.state.obj.common.write&&this.state.obj.common.read!==!1||(s=this.state.obj.common.role)!=null&&s.includes("switch"))){let h=null;const f=this.getText(this.props.schema.falseText,this.props.schema.noTranslation);this.props.schema.falseImage&&(h=ct(this.props.schema.falseImage,f?{marginLeft:8}:void 0));let v=null;const b=this.getText(this.props.schema.trueText,this.props.schema.noTranslation);this.props.schema.trueImage&&(v=ct(this.props.schema.trueImage,b?{marginRight:8}:void 0)),u=k.createElement(O.Switch,{checked:!!this.state.stateValue,disabled:!!this.props.schema.readOnly,onChange:async()=>{this.props.schema.confirm?this.setState({confirmDialog:!0,confirmCallback:async A=>{A&&await this.props.oContext.socket.setState(this.getObjectID(),!this.state.stateValue,!1)}}):await this.props.oContext.socket.setState(this.getObjectID(),!this.state.stateValue,!1)}}),(f||h||b||v)&&(u=k.createElement("div",{style:{display:"flex",alignItems:"center",fontSize:14}},k.createElement("span",{style:this.props.schema.falseTextStyle},f,h),u,k.createElement("span",{style:this.props.schema.trueTextStyle},v,b))),a&&(u=k.createElement("div",{style:t},a,u))}else if(this.state.controlType==="slider"||!this.state.controlType&&this.state.obj.common.type==="number"&&(this.state.obj.common.write&&(this.state.obj.common.max!==void 0||this.state.obj.common.unit==="%")||(c=this.state.obj.common.role)!=null&&c.includes("slider")||(p=this.state.obj.common.role)!=null&&p.includes("dimmer")||(o=this.state.obj.common.role)!=null&&o.includes("blind"))){let h=null;const f=this.getText(this.props.schema.falseText,this.props.schema.noTranslation);this.props.schema.falseImage&&(h=ct(this.props.schema.falseImage,f?{marginLeft:8}:void 0));let v=null;const b=this.getText(this.props.schema.trueText,this.props.schema.noTranslation);this.props.schema.trueImage&&(v=ct(this.props.schema.trueImage,b?{marginRight:8}:void 0));const A=this.props.schema.min===void 0?this.state.obj.common.min||0:this.props.schema.min,D=this.props.schema.max===void 0?this.state.obj.common.max===void 0?100:this.state.obj.common.max:this.props.schema.max,E=this.props.schema.step===void 0?this.state.obj.common.step||1:this.props.schema.step;u=k.createElement(O.Slider,{style:{width:"100%",flexGrow:1},min:A,max:D,disabled:!!this.props.schema.readOnly,step:E,value:this.state.stateValue,valueLabelDisplay:"auto",valueLabelFormat:g=>`${g}${this.getText(this.props.schema.unit,this.props.schema.noTranslation)||this.state.obj.common.unit||""}`,onChange:(g,S)=>{this.setState({stateValue:S},()=>{this.controlTimeout&&clearTimeout(this.controlTimeout),this.controlTimeout=setTimeout(async()=>{console.log(`${Date.now()} Send new value: ${this.state.stateValue}`),this.controlTimeout=null,await this.props.oContext.socket.setState(this.getObjectID(),this.state.stateValue,!1)},this.props.schema.controlDelay||0)})}}),(f||h||b||v)&&(u=k.createElement("div",{style:{display:"flex",width:"100%",flexGrow:1,alignItems:"center"}},k.createElement("span",{style:{marginRight:16,...this.props.schema.falseTextStyle}},f,h),u,k.createElement("span",{style:{marginLeft:16,...this.props.schema.trueTextStyle}},v,b))),a&&(u=k.createElement("div",{style:t},a,u))}else if(this.state.obj.common.type==="number"&&this.state.obj.common.write){const h=this.props.schema.min===void 0?this.state.obj.common.min===void 0?void 0:this.state.obj.common.min:this.props.schema.min,f=this.props.schema.max===void 0?this.state.obj.common.max===void 0?void 0:this.state.obj.common.max:this.props.schema.max,v=this.props.schema.step===void 0?this.state.obj.common.step===void 0?void 0:this.state.obj.common.step:this.props.schema.step;u=k.createElement(O.TextField,{variant:"standard",style:{width:"100%"},value:this.state.stateValue,type:"number",slotProps:{htmlInput:{min:h,max:f,step:v,readOnly:!!this.props.schema.readOnly},input:{endAdornment:this.getText(this.props.schema.unit,this.props.schema.noTranslation)||this.state.obj.common.unit||void 0}},onChange:b=>{this.setState({stateValue:b.target.value},()=>{this.controlTimeout&&clearTimeout(this.controlTimeout),this.controlTimeout=setTimeout(async()=>{this.controlTimeout=null;const A=parseFloat(this.state.stateValue);await this.props.oContext.socket.setState(this.getObjectID(),A,!1)},this.props.schema.controlDelay||0)})},label:this.getText(this.props.schema.label,this.props.schema.noTranslation),helperText:this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)})}else if(this.state.obj.common.type==="boolean"){let h=null,f,v;this.state.stateValue?(f=this.getText(this.props.schema.trueText,this.props.schema.noTranslation),this.props.schema.trueImage&&(h=ct(this.props.schema.falseImage,f?{marginRight:8}:void 0)),v=this.props.schema.trueTextStyle):(f=this.getText(this.props.schema.falseText,this.props.schema.noTranslation),this.props.schema.falseImage&&(h=ct(this.props.schema.falseImage,f?{marginLeft:8}:void 0)),v=this.props.schema.falseTextStyle),v=Object.assign(t,v),u=k.createElement("div",{style:v},a,k.createElement(O.Box,{style:{display:"flex",alignItems:"center",gap:8},sx:r,key:this.props.schema.blinkOnUpdate?f:void 0},h,f||(this.state.stateValue?j.I18n.t("ra_true"):j.I18n.t("ra_false"))))}else{const h=this.getText(this.props.schema.unit,this.props.schema.noTranslation)||this.state.obj.common.unit;let f,v;this.state.controlType==="html"?(v=(this.state.stateValue||"").toString(),f=k.createElement("span",{dangerouslySetInnerHTML:{__html:this.state.stateValue}})):this.state.stateValue===null?(f="null",v=f):this.state.stateValue===void 0?(f="undefined",v=f):(f=this.state.stateValue.toString(),v=f),u=k.createElement("div",{style:t},a,k.createElement("div",{style:{display:"flex",alignItems:"baseline",gap:4}},k.createElement(O.Box,{sx:r,key:this.props.schema.blinkOnUpdate?v:void 0},f),h?k.createElement("span",{style:{opacity:.7,fontSize:"smaller"}},h):null))}}return u}}const Bn={fullWidth:L=>({width:"100%",backgroundColor:L.palette.mode==="dark"?"#FFF":"#000",borderStyle:"hidden"}),primary:L=>({backgroundColor:L.palette.primary.main}),secondary:L=>({backgroundColor:L.palette.secondary.main})};class ol extends G{renderItem(){return k.createElement(O.Box,{component:"hr",sx:j.Utils.getStyle(this.props.oContext.theme,Bn.fullWidth,this.props.schema.color==="primary"?Bn.primary:this.props.schema.color==="secondary"?Bn.secondary:{backgroundColor:this.props.schema.color||(this.props.oContext.themeType==="dark"?"#333":"#ddd")},{height:this.props.schema.color?this.props.schema.height||2:this.props.schema.height||1})})}}const al={header:L=>({width:"100%",background:L.palette.primary.main,color:L.palette.primary.contrastText,padding:"4px !important",borderRadius:"3px",marginBlockEnd:0,marginBlockStart:0})};class ll extends G{renderItem(){let i="h5";switch((this.props.schema.size||5).toString()){case"1":i="h1";break;case"2":i="h2";break;case"3":i="h3";break;case"4":i="h4";break;case"5":default:i="h5";break}return k.createElement(O.Box,{component:i,sx:al.header},this.getText(this.props.schema.label||this.props.schema.text,this.props.schema.noTranslation))}}class ul extends G{renderItem(){let i=this.props.schema.src;return i&&!i.startsWith(".")&&!i.startsWith("http")&&!i.startsWith(`adapter/${this.props.oContext.adapterName}/`)&&!i.startsWith(`./adapter/${this.props.oContext.adapterName}/`)&&(i=`adapter/${this.props.oContext.adapterName}/${i}`),k.createElement("img",{src:i,style:{cursor:this.props.schema.href?"pointer":void 0,width:"100%",height:"100%"},onClick:this.props.schema.href?()=>this.props.schema.href&&window.open(this.props.schema.href,"_blank"):null,alt:""})}}function Li(L,i,n){return typeof n=="string"?{"@keyframes newValueAnimationOnceColor":{"0%":{color:i?`${n} !important`:n},"100%":{color:L.palette.mode==="dark"?i?"#fff !important":"#fff":i?"#000 !important":"#000"}},animation:"newValueAnimationOnceColor 2s ease-in-out"}:{"@keyframes newValueAnimationOnce":{"0%":{color:i?"#00f900 !important":"#00f900"},"80%":{color:L.palette.mode==="dark"?i?"#518851 !important":"#518851":i?"#008000 !important":"#008000"},"100%":{color:L.palette.mode==="dark"?i?"#fff !important":"#fff":i?"#000 !important":"#000"}},animation:"newValueAnimationOnce 2s ease-in-out"}}function Ii(L,i){return typeof i=="string"?{"@keyframes blinkAnimationColor":{"0%":{color:i},"100%":{color:L.palette.mode==="dark"?"#fff":"#000"}},animation:"blinkAnimationColor 2s ease-in-out infinite"}:{"@keyframes blinkAnimation":{"0%":{color:"#00f900"},"80%":{color:L.palette.mode==="dark"?"#518851":"#008000"},"100%":{color:L.palette.mode==="dark"?"#fff":"#000"}},animation:"blinkAnimation 2s ease-in-out infinite"}}const Mt={label:{fontWeight:"bold",whiteSpace:"nowrap"},valueImage:{maxHeight:"100%"},valueAndUnit:{display:"flex",gap:4,alignItems:"baseline"},value:{},unit:{fontSize:"smaller",opacity:.7}};class cl extends G{renderItem(i){let n=this.getText(this.props.schema.text||this.props.schema.label,this.props.schema.noTranslation);this.props.schema.addColon&&typeof n=="string"&&!n.trim().endsWith(":")&&(n=`${n.trim()}:`),n&&(n.includes("<a ")||n.includes("<br")||n.includes("<b>")||n.includes("<i>"))&&(n=j.Utils.renderTextWithA(n));let u;this.props.schema.size==="normal"?u=16:this.props.schema.size==="large"?u=20:typeof this.props.schema.size=="number"&&(u=this.props.schema.size);const y={width:"100%",height:"100%",display:"flex",alignItems:"center",position:"relative",fontSize:u};this.props.schema.narrow?y.gap=8:y.justifyContent="space-between";let s,c;this.props.schema.data&&typeof this.props.schema.data=="object"&&this.props.schema.data.en?c=this.getText(this.props.schema.data):typeof this.props.schema.data=="object"||this.props.schema.data===void 0||this.props.schema.data===null?c=JSON.stringify(this.props.schema.data):typeof this.props.schema.data=="number"?(c=this.props.schema.data.toString(),this.props.oContext.isFloatComma&&(c=c.replace(".",","))):(!this.props.schema.booleanAsCheckbox||typeof this.props.schema.data!="boolean")&&(c=this.props.schema.data.toString());let p=!1;if(this.props.schema.booleanAsCheckbox&&typeof this.props.schema.data=="boolean")s=k.createElement(O.Checkbox,{checked:!!s,disabled:!0,size:this.props.schema.size==="small"?"small":this.props.schema.size==="large"?"large":void 0});else if(c.startsWith("data:image/"))s=k.createElement("div",{style:{...Mt.value,...Mt.valueImage,...this.props.schema.styleValue||void 0}},k.createElement(j.Icon,{src:c}));else{const t={...Mt.value,...this.props.schema.styleValue||void 0};this.props.schema.html?s=k.createElement("div",{style:t,dangerouslySetInnerHTML:{__html:c}}):Array.isArray(this.props.schema.data)?(p=!0,s=k.createElement("div",{style:t},this.props.schema.data.map((r,l)=>k.createElement("div",{key:l},typeof r=="object"||r===null||r===void 0?JSON.stringify(r):r)))):c.includes(`
`)?(p=!0,s=k.createElement("div",{style:t},j.Utils.renderTextWithA(c))):s=k.createElement("div",{style:t},c)}if(this.props.schema.blinkOnUpdate&&this.props.schema.blink){const t=Li(this.props.oContext.theme,!0,this.props.schema.blinkOnUpdate),r=Ii(this.props.oContext.theme,this.props.schema.blink);s=k.createElement(O.Box,{key:c,sx:{...t,...r}},s)}else if(this.props.schema.blinkOnUpdate){const t=Li(this.props.oContext.theme,!1,this.props.schema.blinkOnUpdate);s=k.createElement(O.Box,{key:c,sx:t},s)}else if(this.props.schema.blink){const t=Ii(this.props.oContext.theme,this.props.schema.blink);s=k.createElement(O.Box,{sx:t},s)}this.props.schema.unit&&(s=k.createElement("div",{style:Mt.valueAndUnit},s,k.createElement("div",{style:{...Mt.unit,...this.props.schema.styleUnit||void 0}},this.getText(this.props.schema.unit,this.props.schema.noTranslation))));let o;this.props.schema.labelIcon&&(o=k.createElement(j.Icon,{src:this.props.schema.labelIcon,style:{marginRight:4}}));let d;this.props.schema.copyToClipboard&&(d=k.createElement(X.ContentCopy,{className:"staticCopyButton",style:{position:"absolute",top:"calc(50% - 12px)",right:0,cursor:"pointer"},onClick:()=>{j.Utils.copyToClipboard(c),window.alert(j.I18n.t("ra_Copied"))}}));const e={"& .staticCopyButton":{display:"none"},"& .staticCopyButton:action":{transform:"scale(0.9)"},"&:hover .staticCopyButton":{display:"block"}};return this.props.schema.highlight&&(e["&:hover"]={backgroundColor:this.props.oContext.themeType==="dark"?"#51515180":"#b8b8b880"}),p&&(y.alignItems="top"),k.createElement(O.Box,{component:"div",style:y,sx:e},k.createElement("div",{style:{...Mt.label,...this.props.schema.styleLabel||void 0}},o,n),s,d)}}const Fi={fullWidth:{height:"100%",width:"100%"},link:L=>({textDecoration:"underline",color:L.palette.mode==="dark"?"#4dabf5":"#254e72",cursor:"pointer"})};function Ri(L,i,n){let u,y="";L?L.toString().startsWith("#")||L.toString().startsWith("/")?(u=i||"_self",y=L):L.startsWith("http://")||L.startsWith("https://")?(u=i||"_blank",y=L):(y=`#tab-instances/config/${n}/${L}`,u=i||"_self"):(y=`#tab-instances/config/${n}`,u=i||"_self"),u==="_self"?setTimeout(s=>{s.startsWith("#")?window.location.hash=s:s.startsWith("/")?y=`${window.location.protocol}:${window.location.host}${y}`:(s.startsWith("http://")||s.startsWith("https://"))&&(window.location.href=s)},100,y):(y.startsWith("#")?y=`${window.location.protocol}:${window.location.host}${window.location.pathname}${y}`:y.startsWith("/")&&(y=`${window.location.protocol}:${window.location.host}${y}`),window.open(y,u))}class Oi extends G{renderItem(i,n){if(this.props.schema.button){const y=this.getIcon();return k.createElement(O.Button,{variant:this.props.schema.variant||void 0,color:this.props.schema.color||"grey",style:{...Fi.fullWidth,...this.props.schema.controlStyle||void 0},disabled:n,startIcon:y,onClick:this.props.schema.href?()=>{const s=this.props.schema.href?this.getText(this.props.schema.href,!0):null;s&&(this.props.oContext.onBackEndCommand?this.props.oContext.onBackEndCommand({command:"link",url:s,target:this.props.schema.target,close:this.props.schema.close}):Ri(s,this.props.schema.target,`${this.props.oContext.adapterName}.${this.props.oContext.instance}`))}:null},this.getText(this.props.schema.text||this.props.schema.label,this.props.schema.noTranslation))}let u=this.getText(this.props.schema.text||this.props.schema.label,this.props.schema.noTranslation);return u&&(u.includes("<a ")||u.includes("<br")||u.includes("<b>")||u.includes("<i>"))&&(u=j.Utils.renderTextWithA(u)),k.createElement(O.Box,{component:"span",style:{...this.props.schema.controlStyle||void 0},sx:this.props.schema.href?Fi.link:void 0,onClick:this.props.schema.href?()=>{const y=this.props.schema.href?this.getText(this.props.schema.href,!0):null;y&&(this.props.oContext.onBackEndCommand?this.props.oContext.onBackEndCommand({command:"link",url:y,target:this.props.schema.target||"_blank",close:this.props.schema.close}):Ri(y,this.props.schema.target||"_blank",`${this.props.oContext.adapterName}.${this.props.oContext.instance}`))}:null},u)}}const Pn=1024*1024,fe={paper:{width:"100%",marginBottom:16,backgroundColor:"rgba(255, 255, 255, 0.1)"},headerText:{width:"100%"},table:{minWidth:750},label:{display:"flex",justifyContent:"space-between"},title:{flex:"1 1 100%"},rootTool:{paddingLeft:16,paddingRight:8},silver:{opacity:.2},flex:{display:"flex",alignItems:"baseline"},filteredOut:{padding:10,display:"flex",textAlign:"center"},buttonEmpty:{width:34,display:"inline-block"},buttonCell:{whiteSpace:"nowrap"},dropZone:{width:"100%",height:100,position:"relative"},dropZoneEmpty:{},uploadDiv:{position:"relative",width:"100%",minHeight:300,opacity:.9,marginTop:30,cursor:"pointer",outline:"none"},uploadDivDragging:{opacity:1,background:"rgba(128,255,128,0.1)"},uploadCenterDiv:{margin:5,border:"3px dashed grey",borderRadius:5,width:"calc(100% - 10px)",height:"calc(100% - 10px)",minHeight:300,position:"relative",display:"flex"},uploadCenterIcon:{paddingTop:10,width:48,height:48},uploadCenterText:{fontSize:16},uploadCenterTextAndIcon:{textAlign:"center",position:"absolute",top:0,bottom:0,left:0,right:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},tooltip:{pointerEvents:"none"}};function hl(L,i,n){i=i||"key";const u=[];return Object.keys(L).forEach(y=>{const s={};s[i]=y,n?(s[n]=L[y],u.push(s)):u.push(Object.assign(s,L[y]))}),u}function Ni(L,i,n){i=i||"key";const u={};return L.forEach(y=>{let s=y[i];s==null&&(s=""),delete y[i],n?u[s]=y[n]:u[s]=y}),u}function dl(L,i){let n="";for(let u=0;u<i.length;u++)n+=String.fromCharCode(L[u%L.length].charCodeAt(0)^i.charCodeAt(u));return n}function pl(L,i){let n="";for(let u=0;u<i.length;u++)n+=String.fromCharCode(L[u%L.length].charCodeAt(0)^i.charCodeAt(u));return n}class Ue extends G{filterRefs;typingTimer=null;resizeTimeout=null;secret="Zgfr56gFe87jJOM";refDiv;constructor(i){super(i),this.filterRefs={},this.props.schema.items=this.props.schema.items||[],this.props.schema.items.forEach(n=>{n.filter&&(this.filterRefs[n.attr]=dt.createRef())}),this.refDiv=k.createRef()}async componentDidMount(){super.componentDidMount();const i=G.getValue(this.props.data,this.props.attr)||[];let n;if(this.props.schema.objKeyName?n=hl(i,this.props.schema.objKeyName,this.props.schema.objValueName):n=i,Array.isArray(n)||(n=[]),this.props.schema.encryptedAttributes){const u=await this.props.oContext.socket.getCompactSystemConfig();this.secret=(u==null?void 0:u.native.secret)||this.secret,i.forEach(y=>{this.props.schema.encryptedAttributes.forEach(s=>{y[s]&&(y[s]=pl(this.secret,y[s]))})})}this.setState({value:n,visibleValue:null,orderBy:"",order:"asc",iteration:0,filterOn:[],width:0},()=>this.validateUniqueProps())}componentWillUnmount(){this.typingTimer&&(clearTimeout(this.typingTimer),this.typingTimer=null),this.resizeTimeout&&(clearTimeout(this.resizeTimeout),this.resizeTimeout=null),super.componentWillUnmount()}itemTable(i,n,u){var p;const{schema:y}=this.props,s=(p=y.items)==null?void 0:p.find(o=>o.attr===i);if(!s)return null;const c={items:{[i]:s}};return k.createElement($t,{oContext:this.props.oContext,alive:this.props.alive,arrayIndex:u,changed:this.props.changed,common:this.props.common,custom:!0,data:n,globalData:this.props.data,index:u+this.state.iteration,onChange:(o,d)=>{const e=JSON.parse(JSON.stringify(this.state.value));e[u][o]=d,this.setState({value:e},()=>{this.validateUniqueProps(),this.onChangeWrapper(e,!0)})},onError:(o,d)=>this.onError(o,d),originalData:this.props.originalData,schema:c,table:!0,themeName:this.props.themeName})}validateUniqueProps(){if(this.props.schema.uniqueColumns)for(const i of this.props.schema.uniqueColumns){const n=[];this.state.value.find(y=>{const s=y[i];return n.includes(s)?(this.onError(i,"is not unique"),this.setState({errorMessage:j.I18n.t('Non-allowed duplicate entry "%s" in column "%s"',s,i)}),!0):(n.push(s),!1)})||(this.onError(i,null),this.setState({errorMessage:""}))}}static descendingComparator(i,n,u){return n[u]<i[u]?-1:n[u]>i[u]?1:0}static getComparator(i,n){return i==="desc"?(u,y)=>Ue.descendingComparator(u,y,n):(u,y)=>-Ue.descendingComparator(u,y,n)}static getFilterValue(i){var n,u,y;return(y=(u=(n=i==null?void 0:i.current)==null?void 0:n.children[0])==null?void 0:u.children[0])==null?void 0:y.value}static setFilterValue(i,n){return i.current.children[0].children[0].value=n}handleRequestSort=(i,n=!1)=>{const{order:u,orderBy:y}=this.state,c=n?u:y===i&&u==="asc"?"desc":"asc",p=this.stableSort(c,i);JSON.stringify(p)!==JSON.stringify(this.state.value)&&this.setState({value:p,order:c,orderBy:i,iteration:this.state.iteration+1e4},()=>this.applyFilter(!1,p))};stableSort=(i,n)=>{const{value:u}=this.state,y=Ue.getComparator(i,n),s=u.map((c,p)=>({el:c,index:p}));return s.sort((c,p)=>{const o=y(c.el,p.el);return o!==0?o:c.index-p.index}),s.map(c=>c.el)};renderShowHideFilter(i){return i.filter?k.createElement(O.IconButton,{title:j.I18n.t("ra_Show/hide filter input"),size:"small",onClick:()=>{const n=[...this.state.filterOn],u=this.state.filterOn.indexOf(i.attr);u===-1?n.push(i.attr):n.splice(u,1),this.setState({filterOn:n},()=>{u&&Ue.getFilterValue(this.filterRefs[i.attr])&&(Ue.setFilterValue(this.filterRefs[i.attr],""),this.applyFilter())})}},this.state.filterOn.includes(i.attr)?k.createElement(X.FilterAltOff,null):k.createElement(X.FilterAlt,null)):null}renderImportExportButtons(i){return k.createElement(k.Fragment,null,!i.noDelete&&i.import?k.createElement(O.Tooltip,{title:j.I18n.t("ra_Import data from %s file","CSV"),slotProps:{popper:{sx:fe.tooltip}}},k.createElement(O.IconButton,{size:"small",onClick:()=>this.setState({showImportDialog:!0})},k.createElement(X.UploadFile,null))):null,i.export?k.createElement(O.Tooltip,{title:j.I18n.t("ra_Export data to %s file","CSV"),slotProps:{popper:{sx:fe.tooltip}}},k.createElement(O.IconButton,{size:"small",onClick:()=>this.onExport()},k.createElement(X.Download,null))):null,k.createElement(O.IconButton,{disabled:!0,size:"small"},k.createElement(X.Delete,null)))}renderAddButton(i){return k.createElement(O.Tooltip,{title:i?j.I18n.t("ra_Cannot add items with set filter"):j.I18n.t("ra_Add row"),slotProps:{popper:{sx:fe.tooltip}}},k.createElement("span",null,k.createElement(O.IconButton,{size:"small",color:"primary",disabled:!!i&&!this.props.schema.allowAddByFilter,onClick:this.onAdd},k.createElement(X.Add,null))))}enhancedTableHead(i,n){var c;const{schema:u}=this.props,{order:y,orderBy:s}=this.state;return k.createElement(O.TableHead,null,k.createElement(O.TableRow,null,(c=u.items)==null?void 0:c.map((p,o)=>this.renderOneFilter({schema:u,style:{width:p.width},showAddButton:!o&&!u.noDelete,headCell:p,order:y,orderBy:s,index:o,doAnyFilterSet:n})),!u.noDelete&&k.createElement(O.TableCell,{style:{paddingLeft:20,paddingRight:20,width:i,textAlign:"right"},padding:"checkbox"},this.renderImportExportButtons(u))))}onDelete=i=>()=>{const n=JSON.parse(JSON.stringify(this.state.value));n.splice(i,1),this.setState({value:n,iteration:this.state.iteration+1e4},()=>this.applyFilter(!1,null,()=>this.onChangeWrapper(n)))};onExport(){const{schema:i}=this.props,{value:n}=this.state,y=[i.items.map(p=>p.attr).join(";")];n.forEach(p=>{const o=[];i.items.forEach(d=>{var e;(e=p[d.attr])!=null&&e.includes(";")?o.push(`"${p[d.attr]}"`):o.push(p[d.attr]===void 0||p[d.attr]===null?"":p[d.attr])}),y.push(o.join(";"))});const s=document.createElement("a");s.setAttribute("href",`data:text/csv;charset=utf-8,${encodeURIComponent(y.join(`
`))}`);const c=new Date;s.setAttribute("download",`${c.getFullYear()}_${(c.getMonth()+1).toString().padStart(2,"0")}_${c.getDate().toString().padStart(2,"0")}_${this.props.oContext.adapterName}.${this.props.oContext.instance}_${this.props.attr}.csv`),s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)}onImport(i){var c;const n=i.split(`
`).map(p=>p.replace("\r","").trim()),{schema:u}=this.props,y=n.shift().split(";").filter(p=>p&&u.items.find(o=>o.attr===p)),s=[];n.forEach(p=>{const o=p.split(";"),d={};for(let e=0;e<o.length;e++){let t=o[e];if(t.startsWith('"')){for(t=t.substring(1);e<o.length&&!t.endsWith('"');)t+=`;${o[++e]}`;t=t.substring(0,t.length-1)}let r=t;if(t==="true")r=!0;else if(t==="false")r=!1;else if(window.isFinite(t)){const l=this.props.schema.items.find(a=>a.attr===y[e]);l&&l.type==="number"?r=parseFloat(t):r=t}else r=t;d[y[e]]=r}s.push(d)}),s.length?(c=this.state.value)!=null&&c.length?this.setState({showTypeOfImportDialog:s,showImportDialog:!1}):this.setState({value:s,showImportDialog:!1}):window.alert("ra_No data found in file")}onClone=i=>()=>{const n=JSON.parse(JSON.stringify(this.state.value)),u=JSON.parse(JSON.stringify(n[i]));if(typeof this.props.schema.clone=="string"&&typeof u[this.props.schema.clone]=="string"){let y=1,s=u[this.props.schema.clone];const c=s.match(/(\d+)$/);for(c?(s=s.replace(c[0],""),y=parseInt(c[0],10)+1):s+="_";n.find(p=>p[this.props.schema.clone]===s+y.toString());)y++;u[this.props.schema.clone]=`${u[this.props.schema.clone]}_${y}`}n.splice(i,0,u),this.setState({value:n,iteration:this.state.iteration+1e4},()=>this.applyFilter(!1,null,()=>this.onChangeWrapper(n)))};onChangeWrapper=(i,n)=>{this.typingTimer&&clearTimeout(this.typingTimer),this.typingTimer=setTimeout((u,y)=>{this.typingTimer=null;let s;if(this.props.schema.encryptedAttributes){const c=JSON.parse(JSON.stringify(u));if(c.forEach(p=>{this.props.schema.encryptedAttributes.forEach(o=>{p[o]&&(p[o]=dl(this.secret,p[o]))})}),this.props.schema.objKeyName){const p=Ni(c,this.props.schema.objKeyName,this.props.schema.objValueName);s=this.onChange(this.props.attr,p)}else s=this.onChange(this.props.attr,c)}else if(this.props.schema.objKeyName){const c=Ni(JSON.parse(JSON.stringify(u)),this.props.schema.objKeyName,this.props.schema.objValueName);s=this.onChange(this.props.attr,c)}else s=this.onChange(this.props.attr,u);s instanceof Promise&&s.catch(c=>console.error(`Cannot save: ${c}`)),y&&(this.applyFilter(!1,u),this.handleRequestSort(this.state.orderBy,!0))},300,i,n)};onAdd=()=>{var y;const{schema:i}=this.props,n=JSON.parse(JSON.stringify(this.state.value)),u=(y=i.items)==null?void 0:y.reduce((s,c)=>{let p;return c.defaultFunc?this.props.custom?p=c.defaultFunc?this.executeCustom(c.defaultFunc,this.props.data,this.props.customObj,this.props.oContext.instanceObj,n.length,this.props.data):this.props.schema.default:p=c.defaultFunc?this.execute(c.defaultFunc,this.props.schema.default,this.props.data,n.length,this.props.data):this.props.schema.default:p=c.default===void 0?null:c.default,s[c.attr]=p,s},{});n.push(u),this.setState({value:n},()=>this.applyFilter(!1,null,()=>this.onChangeWrapper(n)))};isAnyFilterSet(){return!!Object.keys(this.filterRefs).find(i=>Ue.getFilterValue(this.filterRefs[i]))}applyFilter=(i,n,u)=>{n=n||this.state.value;let y=n.map((s,c)=>c);if(Object.keys(this.filterRefs).forEach(s=>{let c=Ue.getFilterValue(this.filterRefs[s]);!i&&c?(c=c.toLowerCase(),y=y.filter(p=>n[p]&&n[p][s]&&n[p][s].toLowerCase().includes(c))):this.filterRefs[s].current&&Ue.setFilterValue(this.filterRefs[s],"")}),y.length===n.length&&(y=null),y===null&&this.state.visibleValue===null){u&&u();return}JSON.stringify(y)!==JSON.stringify(this.state.visibleValue)?this.setState({visibleValue:y},()=>u&&u()):u&&u()};onMoveUp(i){const n=JSON.parse(JSON.stringify(this.state.value)),u=n[i];n.splice(i,1),n.splice(i-1,0,u),this.setState({value:n,iteration:this.state.iteration+1e4},()=>this.applyFilter(!1,null,()=>this.onChangeWrapper(n)))}onMoveDown(i){const n=JSON.parse(JSON.stringify(this.state.value)),u=n[i];n.splice(i,1),n.splice(i+1,0,u),this.setState({value:n,iteration:this.state.iteration+1e4},()=>this.applyFilter(!1,null,()=>this.onChangeWrapper(n)))}onDrop(i){const n=i[0],u=new FileReader;u.onabort=()=>console.log("file reading was aborted"),u.onerror=()=>console.log("file reading has failed"),u.onload=()=>{if(n.size>Pn){window.alert(j.I18n.t("ra_File is too big. Max %sk allowed. Try use SVG.",Math.round(Pn/1024)));return}const y=new Uint8Array(u.result).reduce((s,c)=>s+String.fromCharCode(c),"");this.onImport(y)},u.readAsArrayBuffer(n)}showTypeOfImportDialog(){return this.state.showTypeOfImportDialog?k.createElement(O.Dialog,{open:!0,onClose:()=>this.setState({showTypeOfImportDialog:!1}),maxWidth:"md"},k.createElement(O.DialogTitle,null,j.I18n.t("ra_Append or replace?")),k.createElement(O.DialogContent,null,j.I18n.t("ra_Append %s entries or replace existing?",this.state.showTypeOfImportDialog.length)),k.createElement(O.DialogActions,null,k.createElement(O.Button,{variant:"contained",color:"primary",autoFocus:!0,onClick:()=>{const i=JSON.parse(JSON.stringify(this.state.value));this.state.showTypeOfImportDialog.forEach(n=>i.push(n)),this.setState({value:i,iteration:this.state.iteration+1e4,showTypeOfImportDialog:!1},()=>this.applyFilter(!1,null,()=>this.onChangeWrapper(i)))}},j.I18n.t("ra_Append")),k.createElement(O.Button,{variant:"contained",color:"secondary",autoFocus:!0,onClick:()=>{const i=this.state.showTypeOfImportDialog;this.setState({value:i,iteration:this.state.iteration+1e4,showTypeOfImportDialog:!1},()=>this.applyFilter(!1,null,()=>this.onChangeWrapper(i)))}},j.I18n.t("ra_Replace")))):null}showImportDialog(){return this.state.showImportDialog?k.createElement(O.Dialog,{open:!0,onClose:()=>this.setState({showImportDialog:!1}),sx:{"& .MuiDialog-paper":{minHeight:500}},maxWidth:"md",fullWidth:!0},k.createElement(O.DialogTitle,null,j.I18n.t("ra_Import from %s","CSV")),k.createElement(O.DialogContent,null,k.createElement(Wi,{multiple:!1,accept:{"text/csv":[".csv"]},maxSize:Pn,onDragEnter:()=>this.setState({uploadFile:"dragging"}),onDragLeave:()=>this.setState({uploadFile:!0}),onDrop:(i,n)=>{this.setState({uploadFile:!1}),i.length?this.onDrop(i):window.alert(n&&n[0]&&n[0].errors&&n[0].errors[0]&&n[0].errors[0].message||j.I18n.t("ra_Cannot upload"))}},({getRootProps:i,getInputProps:n})=>k.createElement("div",{style:{...fe.uploadDiv,...this.state.uploadFile==="dragging"?fe.uploadDivDragging:void 0,...fe.dropZone,...this.state.icon?void 0:fe.dropZoneEmpty},...i()},k.createElement("input",{...n()}),k.createElement("div",{style:fe.uploadCenterDiv},k.createElement("div",{style:fe.uploadCenterTextAndIcon},k.createElement(X.UploadFile,{style:fe.uploadCenterIcon}),k.createElement("div",{style:fe.uploadCenterText},this.state.uploadFile==="dragging"?j.I18n.t("ra_Drop file here"):j.I18n.t("ra_Place your files here or click here to open the browse dialog"))))))),k.createElement(O.DialogActions,null,k.createElement(O.Button,{variant:"contained",onClick:()=>this.setState({showImportDialog:!1}),color:"primary",startIcon:k.createElement(X.Close,null)},j.I18n.t("Cancel")))):null}renderOneFilter(i){return k.createElement(O.TableCell,{key:`${i.headCell.attr}_${i.index}`,style:i.style,align:"left",sortDirection:i.orderBy===i.headCell.attr?i.order:!1},k.createElement("div",{style:{...fe.flex,...i.schema.showFirstAddOnTop?{flexDirection:"column"}:void 0}},i.showAddButton?this.renderAddButton(i.doAnyFilterSet):null,i.headCell.sort&&k.createElement(O.TableSortLabel,{active:!0,style:i.orderBy!==i.headCell.attr?fe.silver:void 0,direction:i.orderBy===i.headCell.attr?i.order:"asc",onClick:()=>this.handleRequestSort(i.headCell.attr)}),i.headCell.filter&&this.state.filterOn.includes(i.headCell.attr)?k.createElement(O.TextField,{variant:"standard",ref:this.filterRefs[i.headCell.attr],onChange:()=>this.applyFilter(),title:j.I18n.t("ra_You can filter entries by entering here some text"),slotProps:{input:{endAdornment:Ue.getFilterValue(this.filterRefs[i.headCell.attr])&&k.createElement(O.InputAdornment,{position:"end"},k.createElement(O.IconButton,{size:"small",onClick:()=>{Ue.setFilterValue(this.filterRefs[i.headCell.attr],""),this.applyFilter()}},k.createElement(X.Close,null)))}},fullWidth:!0,placeholder:this.getText(i.headCell.title)}):k.createElement("span",{style:fe.headerText},this.getText(i.headCell.title)),this.renderShowHideFilter(i.headCell)))}enhancedFilterCard(){var s;const{schema:i}=this.props,{order:n,orderBy:u}=this.state;let y;return this.props.schema.compact&&(y={paddingTop:1,paddingBottom:1}),k.createElement(O.Grid2,{size:{xs:i.xs||12,sm:i.sm||void 0,md:i.md||void 0,lg:i.lg||void 0,xl:i.xl||void 0}},k.createElement(O.Card,null,k.createElement(O.Paper,{style:fe.paper},k.createElement(O.Accordion,{style:fe.paper},k.createElement(O.AccordionSummary,{expandIcon:k.createElement(X.ExpandMore,null)},k.createElement(O.Typography,null,j.I18n.t("ra_Filter and Data Actions"))),k.createElement(O.AccordionDetails,null,k.createElement(O.Table,null,k.createElement(O.TableBody,null,(s=i.items)==null?void 0:s.map((c,p)=>k.createElement(O.TableRow,{key:`${c.attr}_${p}`},this.renderOneFilter({schema:i,style:y,showAddButton:!1,headCell:c,order:n,orderBy:u,index:p,doAnyFilterSet:!1}))),k.createElement(O.TableRow,null,k.createElement(O.TableCell,{align:"left",style:y},k.createElement("span",{style:fe.headerText},j.I18n.t("ra_Actions"))),k.createElement(O.TableCell,{style:y},this.renderImportExportButtons(i))))))))))}enhancedBottomCard(){const{schema:i}=this.props;let n;this.props.schema.compact&&(n={paddingTop:1,paddingBottom:1});const u=this.isAnyFilterSet();return k.createElement(O.Grid2,{size:{xs:i.xs||12,sm:i.sm||void 0,md:i.md||void 0,lg:i.lg||void 0,xl:i.xl||void 0}},k.createElement(O.Card,null,k.createElement(O.Paper,{style:fe.paper},k.createElement(O.Table,null,k.createElement(O.TableBody,null,k.createElement(O.TableRow,null,k.createElement(O.TableCell,{colSpan:i.items.length+1,style:n},this.renderAddButton(u))))))))}renderCards(){const{schema:i}=this.props;let{visibleValue:n}=this.state,u;this.props.schema.compact&&(u={paddingTop:1,paddingBottom:1}),n=n||this.state.value.map((s,c)=>c);const y=this.isAnyFilterSet();return k.createElement(O.Grid2,{container:!0},this.showImportDialog(),this.showTypeOfImportDialog(),this.enhancedFilterCard(),n.map((s,c)=>{var p;return k.createElement(O.Grid2,{key:`${s}_${c}`,size:{xs:i.xs||12,sm:i.sm||void 0,md:i.md||void 0,lg:i.lg||void 0,xl:i.xl||void 0}},k.createElement(O.Card,null,k.createElement(O.Paper,{style:fe.paper},k.createElement(O.Table,null,k.createElement(O.TableBody,null,(p=i.items)==null?void 0:p.map(o=>k.createElement(O.TableRow,{key:`${o.attr}_${s}`},k.createElement(O.TableCell,{align:"left",style:u},k.createElement("span",{style:fe.headerText},this.getText(o.title))),k.createElement(O.TableCell,{align:"left",style:u},this.itemTable(o.attr,this.state.value[s],s)))),k.createElement(O.TableRow,null,k.createElement(O.TableCell,{align:"left",style:u},k.createElement("span",{style:fe.headerText},this.getText("Actions"))),k.createElement(O.TableCell,{align:"left",style:u},!y&&!this.state.orderBy?k.createElement(O.Tooltip,{title:j.I18n.t("ra_Move up"),slotProps:{popper:{sx:fe.tooltip}}},k.createElement("span",null,k.createElement(O.IconButton,{size:"small",onClick:()=>this.onMoveUp(s),disabled:c===0},k.createElement(X.ArrowUpward,null)))):null,!y&&!this.state.orderBy?k.createElement(O.Tooltip,{title:j.I18n.t("ra_Move down"),slotProps:{popper:{sx:fe.tooltip}}},k.createElement("span",null,k.createElement(O.IconButton,{size:"small",onClick:()=>this.onMoveDown(s),disabled:c===n.length-1},k.createElement(X.ArrowDownward,null)))):null,k.createElement(O.Tooltip,{title:j.I18n.t("ra_Delete current row"),slotProps:{popper:{sx:fe.tooltip}}},k.createElement(O.IconButton,{size:"small",onClick:this.onDelete(s)},k.createElement(X.Delete,null))),this.props.schema.clone?k.createElement(O.Tooltip,{title:j.I18n.t("ra_Clone current row"),slotProps:{popper:{sx:fe.tooltip}}},k.createElement(O.IconButton,{size:"small",onClick:this.onClone(s)},k.createElement(X.ContentCopy,null))):null)))))))}),this.enhancedBottomCard())}renderTable(){const{schema:i}=this.props;let{visibleValue:n}=this.state;n=n||this.state.value.map((s,c)=>c);const u=this.isAnyFilterSet();let y;return this.props.schema.compact&&(y={paddingTop:1,paddingBottom:1}),k.createElement(O.Paper,{style:fe.paper},this.showImportDialog(),this.showTypeOfImportDialog(),i.label?k.createElement("div",{style:fe.label},k.createElement(O.Toolbar,{variant:"dense",style:fe.rootTool},k.createElement(O.Typography,{style:fe.title,variant:"h6",id:"tableTitle",component:"div"},this.getText(i.label)))):null,k.createElement(O.TableContainer,null,k.createElement(O.Table,{style:fe.table,size:"small"},this.enhancedTableHead(!u&&!this.state.orderBy?120:64,u),k.createElement(O.TableBody,null,n.map((s,c)=>{var p;return k.createElement(O.TableRow,{hover:!0,key:`${s}_${c}`},(p=i.items)==null?void 0:p.map(o=>k.createElement(O.TableCell,{key:`${o.attr}_${s}`,align:"left",style:y},this.itemTable(o.attr,this.state.value[s],s))),!i.noDelete&&k.createElement(O.TableCell,{align:"left",style:{...y,...fe.buttonCell}},!u&&!this.state.orderBy?c?k.createElement(O.Tooltip,{title:j.I18n.t("ra_Move up"),slotProps:{popper:{sx:fe.tooltip}}},k.createElement(O.IconButton,{size:"small",onClick:()=>this.onMoveUp(s)},k.createElement(X.ArrowUpward,null))):k.createElement("div",{style:fe.buttonEmpty}):null,!u&&!this.state.orderBy?c<n.length-1?k.createElement(O.Tooltip,{title:j.I18n.t("ra_Move down"),slotProps:{popper:{sx:fe.tooltip}}},k.createElement(O.IconButton,{size:"small",onClick:()=>this.onMoveDown(s)},k.createElement(X.ArrowDownward,null))):k.createElement("div",{style:fe.buttonEmpty}):null,k.createElement(O.Tooltip,{title:j.I18n.t("ra_Delete current row"),slotProps:{popper:{sx:fe.tooltip}}},k.createElement(O.IconButton,{size:"small",onClick:this.onDelete(s)},k.createElement(X.Delete,null))),this.props.schema.clone?k.createElement(O.Tooltip,{title:j.I18n.t("ra_Clone current row"),slotProps:{popper:{sx:fe.tooltip}}},k.createElement(O.IconButton,{size:"small",onClick:this.onClone(s)},k.createElement(X.ContentCopy,null))):null))}),!i.noDelete&&n.length>=(i.showSecondAddAt||5)?k.createElement(O.TableRow,null,k.createElement(O.TableCell,{colSpan:i.items.length+1,style:{...y}},this.renderAddButton(u))):null)),!n.length&&this.state.value.length?k.createElement("div",{style:fe.filteredOut},k.createElement(O.Typography,{style:fe.title,variant:"h6",id:"tableTitle",component:"div"},j.I18n.t("ra_All items are filtered out"),k.createElement(O.IconButton,{size:"small",onClick:()=>this.applyFilter(!0)},k.createElement(X.Close,null)))):null),i.help?k.createElement(O.FormHelperText,{style:{paddingLeft:16}},this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null,this.state.errorMessage?k.createElement("div",{style:{display:"flex",padding:"5px"}},k.createElement(X.Warning,{color:"error"}),k.createElement("span",{style:{color:"red",alignSelf:"center"}},this.state.errorMessage)):null)}componentDidUpdate(){var i;(i=this.refDiv.current)!=null&&i.clientWidth&&this.refDiv.current.clientWidth!==this.state.width&&(this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{var n;this.resizeTimeout=null,this.setState({width:(n=this.refDiv.current)==null?void 0:n.clientWidth})},50))}getCurrentBreakpoint(){return this.state.width?this.state.width<600?"xs":this.state.width<900?"sm":this.state.width<1200?"md":this.state.width<1536?"lg":"xl":"md"}renderItem(){const{schema:i}=this.props;if(!this.state.value||!Array.isArray(this.state.value))return null;const n=this.getCurrentBreakpoint();let u;return n&&(i.useCardFor||["xs"]).includes(n)?u=this.renderCards():u=this.renderTable(),k.createElement("div",{ref:this.refDiv,style:{width:"100%"}},u)}}const ln={indeterminate:{opacity:.5},label:{width:"100%",fontSize:14,marginBottom:2},helper:{width:"100%",fontSize:12},error:{width:"100%",fontSize:12,color:"#FF0000"}};class fl extends G{updateTimeout=null;componentDidMount(){super.componentDidMount();let i=G.getValue(this.props.data,this.props.attr);if(Array.isArray(i)&&this.props.oContext.multiEdit){i=G.DIFFERENT_VALUE,this.setState({value:i,oldValue:i,jsonError:!1});return}this.setState({value:i,oldValue:i,jsonError:this.validateJson(i)})}validateJson(i){let n=!1;if(this.props.schema.validateJson&&(i||!this.props.schema.allowEmpty))try{JSON.parse(i)}catch(u){console.log("Error in JSON",u),n=!0}return n}static getDerivedStateFromProps(i,n){if(i.oContext.multiEdit&&n.value===G.DIFFERENT_VALUE)return{value:G.DIFFERENT_VALUE};let u=G.getValue(i.data,i.attr);return u!=null&&(u=u.toString()),u==null||u!==n.value&&u!==n.oldValue?{value:u}:null}renderItem(i,n){const u=Array.isArray(this.state.value)||this.state.value===G.DIFFERENT_VALUE;if(this.props.schema.time){let c="";return typeof this.state.value=="number"?this.state.value&&this.state.value<9466596e5?c=new Date(this.state.value*1e3).toLocaleString():c=new Date(this.state.value).toLocaleString():typeof this.state.value=="string"&&(c=new Date(this.state.value).toLocaleString()),k.createElement(O.TextField,{variant:"standard",fullWidth:!0,value:c,error:!!i||!!this.state.jsonError,disabled:!!n,slotProps:{htmlInput:{readOnly:!0}},placeholder:this.getText(this.props.schema.placeholder),label:this.getText(this.props.schema.label),helperText:this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)})}if(this.state.oldValue!==null&&this.state.oldValue!==void 0?(this.updateTimeout&&clearTimeout(this.updateTimeout),this.updateTimeout=setTimeout(()=>{this.updateTimeout=null,this.setState({oldValue:null})},30)):this.updateTimeout&&(clearTimeout(this.updateTimeout),this.updateTimeout=null),u){const c=G.getValue(this.props.data,this.props.attr),p=(c==null?void 0:c.filter(o=>o||o===0).map(o=>({label:o.toString()||"",value:o})))||[];return p.unshift({label:j.I18n.t(G.DIFFERENT_LABEL),value:G.DIFFERENT_VALUE}),k.createElement(O.Autocomplete,{style:ln.indeterminate,fullWidth:!0,value:p[0],onChange:(o,d)=>{const e=d?d.value:"",t=this.onChange(this.props.attr,e,()=>{this.setState({value:e,oldValue:e,jsonError:this.validateJson(d)})});t instanceof Promise&&t.catch(r=>console.error(`Cannot set value: ${r}`))},options:p,getOptionLabel:o=>o.label,renderInput:o=>k.createElement(O.TextField,{variant:"standard",...o,error:!!i,placeholder:this.getText(this.props.schema.placeholder),slotProps:{htmlInput:{...o.inputProps,maxLength:this.props.schema.maxLength||this.props.schema.max||void 0,readOnly:this.props.schema.readOnly||!1}},label:this.getText(this.props.schema.label),helperText:this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation),disabled:!!n})})}let y,s;if((this.props.schema.readOnly||n)&&this.props.schema.copyToClipboard?(this.props.schema.minRows>1&&(s={position:"absolute",right:3,top:20,zIndex:1e3}),y=k.createElement(O.IconButton,{style:s,size:"small",onClick:()=>{j.Utils.copyToClipboard(this.state.value),window.alert(j.I18n.t("ra_Copied"))}},k.createElement(j.IconCopy,null))):!this.props.schema.readOnly&&!n&&this.state.value&&!this.props.schema.noClearButton&&(this.props.schema.minRows>1&&(s={position:"absolute",right:3,top:20,zIndex:1e3}),y=k.createElement(O.IconButton,{style:s,size:"small",onClick:()=>this.setState({value:"",oldValue:this.state.value},()=>this.onChange(this.props.attr,""))},k.createElement(X.Close,null)),this.props.schema.minRows<=1&&(y=k.createElement(O.InputAdornment,{position:"end"},y))),this.props.schema.minRows>1){const c=this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation);return k.createElement("div",{style:{width:"100%",position:"relative"}},this.props.schema.label?k.createElement("div",{style:ln.label},this.getText(this.props.schema.label)):null,k.createElement(O.TextareaAutosize,{style:{width:"100%",resize:"vertical",backgroundColor:this.props.oContext.themeType==="dark"?"#363636":"#cccccc",color:this.props.oContext.themeType==="dark"?"#fff":"#111"},minRows:this.props.schema.minRows,maxRows:this.props.schema.maxRows,value:this.state.value===null||this.state.value===void 0?"":this.state.value,disabled:!!n,readOnly:this.props.schema.readOnly||!1,onChange:p=>{const o=p.target.value;this.setState({value:o,oldValue:this.state.value,jsonError:this.validateJson(o)},()=>this.onChange(this.props.attr,o||""))},placeholder:this.getText(this.props.schema.placeholder)}),c||i||this.state.jsonError?k.createElement("div",{style:i?ln.error:ln.helper},i||(this.state.jsonError?j.I18n.t("ra_Invalid JSON"):c)):null)}return k.createElement(O.TextField,{variant:"standard",fullWidth:!0,value:this.state.value===null||this.state.value===void 0?"":this.state.value,error:!!i||!!this.state.jsonError,disabled:!!n,slotProps:{htmlInput:{maxLength:this.props.schema.maxLength||this.props.schema.max||void 0,readOnly:this.props.schema.readOnly||!1},input:{endAdornment:y}},onChange:c=>{const p=c.target.value;this.setState({value:p,oldValue:this.state.value,jsonError:this.validateJson(p)},()=>this.onChange(this.props.attr,p))},placeholder:this.getText(this.props.schema.placeholder),label:this.getText(this.props.schema.label),helperText:this.state.jsonError?j.I18n.t("ra_Invalid JSON"):this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)})}}const gl={fullWidth:{width:"100%"}};class ml extends G{initialized=!1;localContext;askInstance(){if(this.props.alive){let i=this.props.schema.data;if(i===void 0&&this.props.schema.jsonData){const n=this.getPattern(this.props.schema.jsonData,null,!0);try{i=JSON.parse(n)}catch{console.error(`Cannot parse json data: ${n}`)}}i===void 0&&(i=null),this.props.oContext.socket.sendTo(`${this.props.oContext.adapterName}.${this.props.oContext.instance}`,this.props.schema.command||"send",i).then(n=>{if(typeof n=="object"){const u=n;this.setState({text:u.text||"",style:u.style,icon:u.icon,iconStyle:u.iconStyle})}else typeof n=="string"&&this.setState({text:n||""})}).catch(n=>console.error(`Cannot send command: ${n}`))}}getLocalContext(){const i={};return Array.isArray(this.props.schema.alsoDependsOn)&&this.props.schema.alsoDependsOn.forEach(n=>i[n]=G.getValue(this.props.data,n)),JSON.stringify(i)}renderItem(){if(this.props.alive){const n=this.getLocalContext();(n!==this.localContext||!this.initialized)&&(this.localContext=n,setTimeout(()=>this.askInstance(),this.initialized?300:50),this.initialized=!0)}if(this.state.text===void 0)return null;let i=null;return this.state.icon&&(i=ct(this.state.icon,{marginRight:this.state.text?8:void 0,...this.state.iconStyle||void 0}),i||(i=k.createElement(j.Icon,{src:this.state.icon,style:{marginRight:this.state.text?8:void 0,...this.state.iconStyle||void 0}}))),this.props.schema.container==="text"?k.createElement(O.TextField,{variant:"standard",fullWidth:!0,slotProps:{input:{endAdornment:this.props.schema.copyToClipboard?k.createElement(O.IconButton,{size:"small",onClick:()=>{j.Utils.copyToClipboard(this.state.text),window.alert(j.I18n.t("ra_Copied"))}},k.createElement(j.IconCopy,null)):void 0}},value:this.state.text,label:this.getText(this.props.schema.label),helperText:this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)}):k.createElement("div",{style:{...gl.fullWidth,...this.state.style||void 0}},i,this.props.schema.container==="html"?k.createElement("span",{dangerouslySetInnerHTML:{__html:this.state.text||""}}):this.state.text)}}class vl extends G{componentDidMount(){super.componentDidMount();const i=G.getValue(this.props.data,this.props.attr);this.setState({value:i})}renderItem(i,n){const u=this.props.schema.returnFormat!=="HH:mm:ss",y=new Date(Date.parse(`Thu, 01 Jan 1970 ${this.state.value||"00:00:00"}`));return k.createElement(Ui.TimePicker,{sx:s=>({width:"100%",borderBottom:`1px solid ${s.palette.text.primary}`,"& fieldset":{display:"none"},"& input":{padding:`${s.spacing(1.5)} 0 4px 0`},"& .MuiInputAdornment-root":{marginLeft:0,marginTop:1},"& label":{transform:"translate(0px, -9px) scale(0.75)"}}),ampm:this.props.oContext.systemConfig.dateFormat.includes("/"),timeSteps:this.props.schema.timeSteps||this.props.schema.timesteps||{hours:1,minutes:5,seconds:5},format:this.props.schema.format||"HH:mm:ss",disabled:!!n,value:y,onChange:s=>{let c;c=s instanceof Date?s.toTimeString().split(" ")[0]:s.toTimeString(),u&&(c=c.split(":").slice(0,2).join(":")),this.setState({value:c},()=>this.onChange(this.props.attr,this.state.value))},views:this.props.schema.views||["hours","minutes","seconds"],label:this.getText(this.props.schema.label)})}}function yl(L,i){let n;return i&&L.substring(0,i.length)===i?n=L.substring(i.length+1):n=L,n=n.replace(/\./g,"/").replace(/_/g," "),n}class bl extends G{componentDidMount(){var n;super.componentDidMount();const i=G.getValue(this.props.data,this.props.attr);if(!i&&((n=this.props.customObj)!=null&&n._id)){const u=yl(this.props.customObj._id,`${this.props.oContext.adapterName}.${this.props.oContext.instance}`);this.setState({value:u})}else this.setState({value:i||""})}renderItem(i,n){return k.createElement(O.TextField,{variant:"standard",fullWidth:!0,slotProps:{htmlInput:{maxLength:this.props.schema.maxLength||this.props.schema.max||void 0}},value:this.state.value,error:!!i,disabled:n,placeholder:this.getText(this.props.schema.placeholder),label:this.getText(this.props.schema.label),helperText:this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation),onChange:u=>{const y=u.target.value;this.setState({value:y},()=>this.onChange(this.props.attr,y))}})}}class wl extends G{async componentDidMount(){var n;super.componentDidMount();const i=await this.props.oContext.socket.getObject("system.meta.uuid");this.setState({uuid:((n=i==null?void 0:i.native)==null?void 0:n.uuid)||"unknown"})}renderItem(i,n){return k.createElement(O.TextField,{variant:"standard",fullWidth:!0,error:!!i,disabled:!!n,slotProps:{htmlInput:{readOnly:!0},input:{endAdornment:k.createElement(O.IconButton,{onClick:()=>{j.Utils.copyToClipboard(this.state.uuid),window.alert(j.I18n.t("ra_Copied %s",this.state.uuid))}},k.createElement(X.ContentCopy,null))}},value:this.state.uuid||"",label:this.getText(this.props.schema.label)||j.I18n.t("ra_Serial number (UUID)"),helperText:this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)})}}const Bi={icon:{width:16,height:16,marginRight:8}};class Cl extends G{componentDidMount(){super.componentDidMount(),this.props.oContext.socket.getUsers().then(i=>{const n={},u=j.I18n.getLanguage();this.props.schema.short?i.forEach(y=>{var s,c;return n[y._id]={color:(s=y.common)==null?void 0:s.color,icon:(c=y.common)==null?void 0:c.icon,name:j.Utils.getObjectNameFromObj(y,u)}}):i.forEach(y=>{var s,c;return n[y._id.replace(/^system\.user\./,"")]={color:(s=y.common)==null?void 0:s.color,icon:(c=y.common)==null?void 0:c.icon,name:j.Utils.getObjectNameFromObj(y,u)}}),this.setState({users:n})}).catch(i=>console.error(`Cannot get users: ${i}`))}renderItem(i,n){var y,s;const u=G.getValue(this.props.data,this.props.attr);return k.createElement(O.FormControl,{variant:"standard",fullWidth:!0},this.state.users&&this.props.schema.label?k.createElement(O.InputLabel,null,this.getText(this.props.schema.label)):null,this.state.users?k.createElement(O.Select,{variant:"standard",error:!!i,disabled:!!n,value:u,renderValue:c=>{var p,o,d;return k.createElement("span",null,this.state.users&&((p=this.state.users[c])!=null&&p.icon)?k.createElement(j.Icon,{src:this.state.users&&((o=this.state.users[c])==null?void 0:o.icon),style:Bi.icon}):null,this.state.users&&((d=this.state.users[c])==null?void 0:d.name)||c||"")},style:{color:this.state.users&&((y=this.state.users[u])==null?void 0:y.color)||void 0,backgroundColor:j.Utils.getInvertedColor(this.state.users&&((s=this.state.users[u])==null?void 0:s.color),this.props.oContext.themeType)},onChange:c=>this.onChange(this.props.attr,c.target.value)},this.state.users&&Object.keys(this.state.users).map(c=>k.createElement(O.MenuItem,{style:{color:this.state.users[c].color||void 0,backgroundColor:j.Utils.getInvertedColor(this.state.users[c].color,this.props.oContext.themeType)},key:c,value:c},this.state.users[c].icon?k.createElement(j.Icon,{src:this.state.users[c].icon,style:Bi.icon}):null,this.state.users[c].name))):k.createElement(O.TextField,{variant:"standard",error:!!i,disabled:!!n,value:u,onChange:c=>this.onChange(this.props.attr,c.target.value),label:this.getText(this.props.schema.label)}),this.props.schema.help?k.createElement(O.FormHelperText,null,this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null)}}class El extends G{async componentDidMount(){super.componentDidMount();const i=await as(()=>import("./index-C-AMy6xk.js").then(n=>n.i),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url);this.setState({QRCode:i.default})}renderItem(){const i=this.state.QRCode;return i?k.createElement(i,{value:this.props.schema.data,size:this.props.schema.size,fgColor:this.props.schema.fgColor,bgColor:this.props.schema.bgColor,level:this.props.schema.level}):null}}const Dl={accordion:_s,alive:ks,autocomplete:Ms,autocompleteSendTo:Ls,certCollection:Os,certificate:Fs,certificates:Rs,checkbox:Ns,checkLicense:ht,chip:fi,chips:fi,color:zs,coordinates:js,cron:Is,custom:Vt,datePicker:Js,deviceManager:Ys,divider:ol,file:oo,fileSelector:vn,func:ao,header:ll,image:co,imageSendTo:uo,instance:ho,interface:po,ip:lo,jsonEditor:Wa,language:za,license:ja,number:Ua,objectId:Va,password:Ga,pattern:Ka,port:Ya,qrCode:El,room:Qa,select:Za,selectSendTo:el,sendto:_i,sendTo:_i,setState:nl,slider:il,state:sl,staticImage:ul,staticInfo:cl,staticLink:Oi,staticText:Oi,table:Ue,text:fl,textSendTo:ml,timePicker:vl,topic:bl,uuid:wl,user:Cl},Qe={fullWidth:{width:"100%"},paper:{margin:1,width:"auto !important",overflowY:"auto",paddingBottom:1},paperWithIcons:{height:"calc(100vh - 259px) !important"},paperWithoutIcons:{height:"calc(100vh - 235px) !important"},padding:{padding:"10px"},heading:{},primary:L=>({backgroundColor:L.palette.primary.main,color:L.palette.mode==="dark"?"inherit":"#FFF"}),secondary:L=>({backgroundColor:L.palette.secondary.main})};class $t extends G{componentDidMount(){var i;super.componentDidMount(),(i=this.props.schema)!=null&&i.collapsable&&this.setState({expanded:(window._localStorage||window.localStorage).getItem(`${this.props.oContext.adapterName}.${this.props.attr}`)==="true"})}renderItems(i,n){return i?Object.keys(i).map(u=>{if(this.props.oContext.multiEdit&&i[u].noMultiEdit)return null;const y=i[u].type||"panel";let s,c="Use this.props.oContext.socket!";return y==="custom"?(i[u].url?s=Vt:this.props.oContext.customs&&this.props.oContext.customs[i[u].component]?s=this.props.oContext.customs[i[u].component]:(console.error(`Cannot find custom component: ${i[u].component}`),s=G),c=this.props.oContext.socket):y==="panel"?s=$t:s=Dl[y]||G,k.createElement(s,{socket:c,globalData:this.props.globalData,oContext:this.props.oContext,key:`${u}_${this.props.index===void 0?"":this.props.index}`,index:this.props.index,changed:this.props.changed,arrayIndex:this.props.arrayIndex,commandRunning:this.props.commandRunning,style:Qe.panel,common:this.props.common,alive:this.props.alive,themeName:this.props.themeName,data:this.props.data,originalData:this.props.originalData,onError:this.props.onError,onChange:this.props.onChange,disabled:n,customObj:this.props.customObj,custom:this.props.custom,schema:i[u],attr:u,table:this.props.table})}):null}render(){const i=this.props.schema;if(!i)return null;const{disabled:n,hidden:u}=this.calculate(i),y=this.props.schema.items,s=this.props.schema.style||{};if(u){if(i.hideOnlyControl){const p=k.createElement(O.Grid2,{size:{xs:i.xs||void 0,sm:i.sm||void 0,md:i.md||void 0,lg:i.lg||void 0,xl:i.xl||void 0},sx:j.Utils.getStyle(this.props.oContext.theme,{marginBottom:0,textAlign:"left"},s,this.props.oContext.themeType==="dark"&&i.darkStyle)});return i.newLine?k.createElement(k.Fragment,null,k.createElement("div",{style:{flexBasis:"100%",height:0}}),p):p}return null}if(this.props.table)return this.renderItems(y,n);if(this.props.custom)return k.createElement(O.Grid2,{key:`${this.props.attr}_${this.props.index}`,container:!0,style:Qe.fullWidth,columnSpacing:2,rowSpacing:1,sx:s},this.renderItems(y,n));let c;if(i.collapsable?c=k.createElement(O.Accordion,{key:`${this.props.attr}_${this.props.index}`,style:Qe.fullWidth,expanded:!!this.state.expanded,onChange:()=>{(window._localStorage||window.localStorage).setItem(`${this.props.oContext.adapterName}.${this.props.attr}`,this.state.expanded?"false":"true"),this.setState({expanded:!this.state.expanded})}},k.createElement(O.AccordionSummary,{expandIcon:k.createElement(X.ExpandMore,null),sx:j.Utils.getStyle(this.props.oContext.theme,s,this.props.oContext.themeType&&i.darkStyle,i.color==="primary"?Qe.primary:i.color==="secondary"&&Qe.secondary,{width:"100%"})},k.createElement(O.Typography,{style:Qe.heading},this.getText(i.label))),k.createElement(O.AccordionDetails,null,k.createElement(O.Grid2,{container:!0,columnSpacing:2,rowSpacing:1,sx:{...s,width:"100%",padding:"10px"}},this.renderItems(y,n)))):c=k.createElement(O.Box,{component:"div",key:`${this.props.attr}_${this.props.index}`,className:this.props.className,sx:j.Utils.getStyle(this.props.oContext.theme,this.props.style,s,{width:"100%"},this.props.isParentTab&&Qe.paper,this.props.isParentTab&&(this.props.withIcons?Qe.paperWithIcons:Qe.paperWithoutIcons))},k.createElement(O.Grid2,{container:!0,columnSpacing:2,rowSpacing:1,sx:j.Utils.getStyle(this.props.oContext.theme,{width:"100%"},this.props.isParentTab&&Qe.padding,this.props.schema.innerStyle)},this.renderItems(y,n))),!this.props.isParentTab){const p=k.createElement(O.Grid2,{title:this.getText(i.tooltip),size:{xs:i.xs||void 0,sm:i.sm||void 0,md:i.md||void 0,lg:i.lg||void 0,xl:i.xl||void 0},sx:{marginBottom:0,textAlign:"left",...s}},c);return i.newLine?k.createElement(k.Fragment,null,k.createElement("div",{style:{flexBasis:"100%",height:0}}),p):p}return c}}const un={tabs:{height:"100%",width:"100%"},panel:{width:"100%",display:"block"},panelWithIcons:{height:"calc(100% - 72px)"},panelWithoutIcons:{height:"calc(100% - 48px)"}};class Sl extends G{resizeTimeout=null;refDiv;constructor(i){super(i);let n;if(this.props.root){const u=(window.location.hash||"").replace(/^#/,"").split("/");if(u.length>=3&&u[1]==="config"){const y=u[3],s=parseInt(y,10);y&&s.toString()===y?s>=0&&s<Object.keys(this.props.schema.items).length&&(n=Object.keys(this.props.schema.items)[s]):y&&Object.keys(this.props.schema.items).includes(y)&&(n=y),window.addEventListener("hashchange",this.onHashTabsChanged,!1)}}n===void 0&&(n=(window._localStorage||window.localStorage).getItem(`${this.props.dialogName||"App"}.${this.props.oContext.adapterName}`)||Object.keys(this.props.schema.items)[0],Object.keys(this.props.schema.items).includes(n)||(n=Object.keys(this.props.schema.items)[0])),this.refDiv=k.createRef(),Object.assign(this.state,{tab:n,width:0,openMenu:null})}componentWillUnmount(){this.resizeTimeout&&(clearTimeout(this.resizeTimeout),this.resizeTimeout=null),window.removeEventListener("hashchange",this.onHashTabsChanged,!1),super.componentWillUnmount()}onHashTabsChanged=()=>{const i=(window.location.hash||"").replace(/^#/,"").split("/");if(i.length>3&&i[1]==="config"){const n=i[3],u=parseInt(n,10);let y;u.toString()===n?u>=0&&u<Object.keys(this.props.schema.items).length&&(y=Object.keys(this.props.schema.items)[u]):Object.keys(this.props.schema.items).includes(n)&&(y=n),y!==void 0&&y!==this.state.tab&&((window._localStorage||window.localStorage).setItem(`${this.props.dialogName||"App"}.${this.props.oContext.adapterName}`,y),this.setState({tab:y}))}};getCurrentBreakpoint(){if(!this.state.width)return"md";if(!this.state.initialBreakpoint){let i;return this.state.width<600?i="xs":this.state.width<900?i="sm":this.state.width<1200?i="md":this.state.width<1536?i="lg":i="xl",setTimeout(()=>{this.setState({initialBreakpoint:i})},50),i}return this.state.initialBreakpoint}componentDidUpdate(){var i;!this.state.initialBreakpoint&&((i=this.refDiv.current)!=null&&i.clientWidth)&&this.refDiv.current.clientWidth!==this.state.width&&(this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{var n;this.resizeTimeout=null,this.setState({width:(n=this.refDiv.current)==null?void 0:n.clientWidth})},50))}onMenuChange(i){(window._localStorage||window.localStorage).setItem(`${this.props.dialogName||"App"}.${this.props.oContext.adapterName}`,i),this.setState({tab:i},()=>{if(this.props.root){const n=(window.location.hash||"").split("/");n.length>=3&&n[1]==="config"&&(n[3]=this.state.tab,window.location.hash=n.join("/"))}})}render(){const i=this.props.schema.items;let n=!1;const u=[];Object.keys(i).map(c=>{let p;if(this.props.custom){if(this.executeCustom(i[c].hidden,this.props.data,this.props.customObj,this.props.oContext.instanceObj,this.props.index,this.props.globalData))return;p=this.executeCustom(i[c].disabled,this.props.data,this.props.customObj,this.props.oContext.instanceObj,this.props.index,this.props.globalData)}else{if(this.execute(i[c].hidden,!1,this.props.data,this.props.index,this.props.globalData))return;p=this.execute(i[c].disabled,!1,this.props.data,this.props.index,this.props.globalData)}const o=this.getIcon(i[c].icon);n=n||!!o,u.push({icon:o,disabled:p,label:this.getText(i[c].label),name:c})});const y=this.getCurrentBreakpoint();let s;return y==="xs"&&u.length>2?s=k.createElement(O.Toolbar,{style:{top:2,backgroundColor:this.props.oContext.themeType==="dark"?"#222":"#DDD"},variant:"dense"},k.createElement(O.IconButton,{onClick:c=>this.setState({openMenu:c.currentTarget})},k.createElement(X.Menu,null)),this.state.openMenu?k.createElement(O.Menu,{open:!0,anchorEl:this.state.openMenu,onClose:()=>this.setState({openMenu:null})},u.map(c=>k.createElement(O.MenuItem,{disabled:c.disabled,key:c.name,onClick:()=>{this.setState({openMenu:null},()=>this.onMenuChange(c.name))},selected:c.name===this.state.tab},n?k.createElement(O.ListItemIcon,null,c.icon):null,c.label))):null):s=k.createElement(O.Tabs,{variant:"scrollable",scrollButtons:"auto",style:this.props.schema.tabsStyle,value:this.state.tab,onChange:(c,p)=>this.onMenuChange(p)},u.map(c=>k.createElement(O.Tab,{id:c.name,wrapped:!0,disabled:c.disabled,key:c.name,value:c.name,iconPosition:this.props.schema.iconPosition||"start",icon:c.icon,label:c.label}))),k.createElement("div",{style:un.tabs,ref:this.refDiv},s,k.createElement($t,{oContext:this.props.oContext,isParentTab:!0,changed:this.props.changed,key:this.state.tab,index:1001,arrayIndex:this.props.arrayIndex,globalData:this.props.globalData,commandRunning:this.props.commandRunning,style:{...un.panel,...n?un.panelWithIcons:un.panelWithoutIcons},common:this.props.common,alive:this.props.alive,themeName:this.props.themeName,data:this.props.data,originalData:this.props.originalData,onChange:this.props.onChange,onError:this.props.onError,customObj:this.props.customObj,custom:this.props.custom,schema:i[this.state.tab],table:this.props.table,withIcons:n}))}}const Al={root:{width:"100%",height:"100%"}};class hn extends dt.Component{forceUpdateHandlers;errorTimeout=null;errorCached=null;oContext;constructor(i){super(i),this.state={originalData:JSON.stringify(this.props.data),changed:!1,errors:{},updateData:this.props.updateData||0,systemConfig:null,alive:!1,commandRunning:!1,schema:JSON.parse(JSON.stringify(this.props.schema))},this.forceUpdateHandlers={},this.buildDependencies(this.state.schema),this.readData()}static getDerivedStateFromProps(i,n){return i.updateData!==n.updateData?{updateData:i.updateData,originalData:JSON.stringify(i.data),schema:JSON.parse(JSON.stringify(i.schema))}:null}static async loadI18n(i,n,u){if(n===!0||n&&typeof n=="string"){const y=j.I18n.getLanguage(),s=typeof n=="string"?n:"i18n";let c=await i.fileExists(`${u}.admin`,`${s}/${y}.json`),p;if(c?p=`${s}/${y}.json`:(c=await i.fileExists(`${u}.admin`,`${s}/${y}/translations.json`),c?p=`${s}/${y}/translations.json`:y!=="en"&&(c=await i.fileExists(`${u}.admin`,`${s}/en.json`),c?p=`${s}/en.json`:(c=await i.fileExists(`${u}.admin`,`${s}/en/translations.json`),c&&(p=`${s}/en/translations.json`)))),p){const o=await i.readFile(`${u}.admin`,p);let d;o.file!==void 0?d=o.file:d=o;try{const e=JSON.parse(d);j.I18n.extendTranslations(e,y)}catch(e){return console.error(`Cannot parse language file "${u}.admin/${p}: ${e}`),""}return p}return console.warn(`Cannot find i18n for ${u} / ${p}`),""}return n&&typeof n=="object"&&j.I18n.extendTranslations(n),""}onCommandRunning=i=>this.setState({commandRunning:i});readData(){this.props.socket.getCompactSystemConfig().then(i=>this.props.socket.getState(`system.adapter.${this.props.adapterName}.${this.props.instance}.alive`).then(n=>this.setState({systemConfig:i.common,alive:!!(n&&n.val)},()=>{this.updateContext(!0),this.props.custom||this.props.socket.subscribeState(`system.adapter.${this.props.adapterName}.${this.props.instance}.alive`,this.onAlive)}))).catch(i=>console.error(`Cannot read system config: ${i}`))}onAlive=(i,n)=>{!!(n!=null&&n.val)!==this.state.alive&&this.setState({alive:!!(n!=null&&n.val)})};onChange=(i,n,u,y)=>{if(this.props.onValueChange)this.props.onValueChange(i,n,y),u&&u();else if(i&&this.props.onChange){const s={changed:JSON.stringify(i)!==this.state.originalData};this.setState(s,()=>{this.props.onChange(i,s.changed,y),u&&u()})}else y&&this.props.onChange(null,null,y)};onError=(i,n)=>{this.errorCached=this.errorCached||JSON.parse(JSON.stringify(this.state.errors));const u=this.errorCached;n?u[i]=n:delete u[i],this.errorTimeout&&clearTimeout(this.errorTimeout),JSON.stringify(u)!==JSON.stringify(this.state.errors)?this.errorTimeout=setTimeout(()=>this.setState({errors:this.errorCached},()=>{this.errorTimeout=null,this.errorCached=null,this.props.onError(!!Object.keys(this.state.errors).length)}),50):this.errorCached=null};flatten(i,n){return n=n||{},i.items&&Object.keys(i.items).forEach(u=>{n[u]=i.items[u],this.flatten(i.items[u],n)}),n}buildDependencies(i){const n=this.flatten(i);Object.keys(n).forEach(u=>{var y,s,c,p,o,d,e,t,r,l;(y=n[u].confirm)!=null&&y.alsoDependsOn&&((s=n[u].confirm)==null||s.alsoDependsOn.forEach(a=>{if(!n[a])console.error(`[JsonConfigComponent] Attribute ${a} does not exist!`),a.startsWith("data.")&&console.warn(`[JsonConfigComponent] please use "${a.replace(/^data\./,"")}" instead of "${a}"`);else{n[a].confirmDependsOn=n[a].confirmDependsOn||[];const h={...n[u],attr:u};h.confirm&&(h.confirm.cancel="Undo"),n[a].confirmDependsOn.push(h)}})),(c=n[u].onChange)!=null&&c.alsoDependsOn&&((p=n[u].onChange)==null||p.alsoDependsOn.forEach(a=>{if(!n[a])console.error(`[JsonConfigComponent] Attribute ${a} does not exist!`),a.startsWith("data.")&&console.warn(`[JsonConfigComponent] please use "${a.replace(/^data\./,"")}" instead of "${a}"`);else{n[a].onChangeDependsOn=n[a].onChangeDependsOn||[];const h={...n[u],attr:u};n[a].onChangeDependsOn.push(h)}})),(o=n[u].hidden)!=null&&o.alsoDependsOn&&((d=n[u].hidden)==null||d.alsoDependsOn.forEach(a=>{if(!n[a])console.error(`[JsonConfigComponent] Attribute ${a} does not exist!`),a.startsWith("data.")&&console.warn(`[JsonConfigComponent] please use "${a.replace(/^data\./,"")}" instead of "${a}"`);else{n[a].hiddenDependsOn=n[a].hiddenDependsOn||[];const h={...n[u],attr:u};n[a].hiddenDependsOn.push(h)}})),(e=n[u].label)!=null&&e.alsoDependsOn&&((t=n[u].label)==null||t.alsoDependsOn.forEach(a=>{if(!n[a])console.error(`[JsonConfigComponent] Attribute ${a} does not exist!`),a.startsWith("data.")&&console.warn(`[JsonConfigComponent] please use "${a.replace(/^data\./,"")}" instead of "${a}"`);else{n[a].labelDependsOn=n[a].labelDependsOn||[];const h={...n[u],attr:u};n[a].labelDependsOn.push(h)}})),(r=n[u].help)!=null&&r.alsoDependsOn&&((l=n[u].help)==null||l.alsoDependsOn.forEach(a=>{if(!n[a])console.error(`[JsonConfigComponent] Attribute ${a} does not exist!`),a.startsWith("data.")&&console.warn(`[JsonConfigComponent] please use "${a.replace(/^data\./,"")}" instead of "${a}"`);else{n[a].helpDependsOn=n[a].helpDependsOn||[];const h={...n[u],attr:u};n[a].helpDependsOn.push(h)}}))})}updateContext(i){this.oContext={DeviceManager:this.props.DeviceManager,adapterName:this.props.adapterName,changeLanguage:this.changeLanguage,common:this.props.common,customs:this.props.customs,dateFormat:this.props.dateFormat,embedded:this.props.embedded,expertMode:this.props.expertMode,forceUpdate:this.forceAttrUpdate,imagePrefix:this.props.imagePrefix,instance:this.props.instance,instanceObj:this.props.instanceObj,isFloatComma:this.props.isFloatComma,multiEdit:this.props.multiEdit,onBackEndCommand:this.props.onBackEndCommand,onCommandRunning:this.onCommandRunning,onValueChange:this.props.onValueChange,registerOnForceUpdate:this.registerOnForceUpdate,socket:this.props.socket,systemConfig:this.state.systemConfig,theme:this.props.theme,themeType:this.props.themeType,_themeName:this.props.themeName,updateData:this.state.updateData},i&&this.forceUpdate()}renderItem(i){return i.type==="tabs"?k.createElement(Sl,{oContext:this.oContext,alive:this.state.alive,changed:this.state.changed,commandRunning:this.state.commandRunning,common:this.props.common,custom:this.props.custom,customObj:this.props.customObj,data:this.props.data,onChange:this.onChange,onError:(n,u)=>this.onError(n,u),originalData:JSON.parse(this.state.originalData),root:!0,schema:i,themeName:this.props.themeName}):i.type==="panel"||!i.type?k.createElement($t,{oContext:this.oContext,alive:this.state.alive,changed:this.state.changed,commandRunning:this.state.commandRunning,common:this.props.common,custom:this.props.custom,customObj:this.props.customObj,data:this.props.data,index:1e3,isParentTab:!this.props.embedded,onChange:this.onChange,onError:(n,u)=>this.onError(n,u),originalData:JSON.parse(this.state.originalData),root:!0,schema:i,themeName:this.props.themeName}):(console.error(`Unknown item type in root: ${JSON.stringify(i)}`),null)}changeLanguage=()=>{this.forceUpdate()};forceAttrUpdate=(i,n)=>{Array.isArray(i)?i.forEach(u=>this.forceUpdateHandlers[u]&&this.forceUpdateHandlers[u](n)):this.forceUpdateHandlers[i]&&this.forceUpdateHandlers[i](n)};registerOnForceUpdate=(i,n)=>{n?this.forceUpdateHandlers[i]=n:this.forceUpdateHandlers[i]&&delete this.forceUpdateHandlers[i]};render(){return!this.state.systemConfig||!this.oContext?k.createElement(O.LinearProgress,null):(this.oContext._themeName!==this.props.themeName&&(this.oContext._themeName=this.props.themeName,setTimeout(()=>this.updateContext(!0),0)),k.createElement("div",{style:{...this.props.embedded?void 0:Al.root,...this.props.style,...this.state.schema.style}},this.renderItem(this.state.schema)))}}const Et={root:{width:"100%",height:"100%",overflow:"hidden",position:"relative"},scroll:{height:"calc(100% - 48px)",overflowY:"auto"},exportImportButtons:{position:"absolute",top:5,right:0,zIndex:3},button:{marginRight:"5px"},tooltip:{pointerEvents:"none"}};function xl(L,i){let n="";for(let u=0;u<i.length;u++)n+=String.fromCharCode(L[u%L.length].charCodeAt(0)^i.charCodeAt(u));return n}function $l(L,i){let n="";for(let u=0;u<i.length;u++)n+=String.fromCharCode(L[u%L.length].charCodeAt(0)^i.charCodeAt(u));return n}function Tl(L,i){if(typeof i!="string")return i;if(!i.startsWith("$/aes-192-cbc:")||!/^[0-9a-f]{48}$/.test(L))return xl(L,i);const n=i.split(":",3),u=window.CryptoJS.enc.Hex.parse(L),y=window.CryptoJS.enc.Hex.parse(n[1]),s=window.CryptoJS.lib.CipherParams.create({ciphertext:window.CryptoJS.enc.Hex.parse(n[2])}),c=window.CryptoJS.AES.decrypt(s,u,{iv:y});return window.CryptoJS.enc.Utf8.stringify(c)}function _l(L,i,n){if(typeof i!="string")return i;if(!/^[0-9a-f]{48}$/.test(L))return $l(L,i);let u;u=window.CryptoJS.lib.WordArray.random(128/8);const y=window.CryptoJS.enc.Hex.parse(L),s=window.CryptoJS.AES.encrypt(i,y,{iv:u}).ciphertext;return`$/aes-192-cbc:${window.CryptoJS.enc.Hex.stringify(u)}:${s}`}function Pi(L,i){var n;return document.getElementById(i)?(n=document.getElementById(i))==null?void 0:n.onload:new Promise(u=>{const y=document.createElement("script");y.setAttribute("id",i),y.onload=u,y.src=L,document.getElementsByTagName("head")[0].appendChild(y)})}let kl=class extends j.Router{fileSubscribed=[];fileLangSubscribed="";secret;constructor(i){super(i),this.state={updateData:0,changed:!1,confirmDialog:!1,theme:j.Theme(i.themeName),saveConfigDialog:!1,hash:"_"},this.secret=i.secret||"",this.getInstanceObject().then(n=>this.getConfigFile().then(u=>hn.loadI18n(this.props.socket,u==null?void 0:u.i18n,this.props.adapterName).then(y=>{y&&(this.fileLangSubscribed||(this.fileLangSubscribed=y,this.props.socket.subscribeFiles(`${this.props.adapterName}.admin`,this.fileLangSubscribed,this.onFileChange))),n?this.setState({schema:u,data:n.native,common:n.common,hash:di(JSON.stringify(u)).toString()}):window.alert(`Instance system.adapter.${this.props.adapterName}.${this.props.instance} not found!`)})))}componentWillUnmount(){super.componentWillUnmount(),this.fileSubscribed.length&&(this.props.socket.unsubscribeFiles(`${this.props.adapterName}.admin`,this.fileSubscribed,this.onFileChange),this.fileSubscribed=[]),this.fileLangSubscribed&&(this.props.socket.unsubscribeFiles(`${this.props.adapterName}.admin`,this.fileLangSubscribed,this.onFileChange),this.fileLangSubscribed="")}handleFileSelect=i=>{const n=i.target.files[0];if(n){const u=new FileReader;u.onload=y=>{if(!y.target)return;const s=y.target.result;try{const c=JSON.parse(s);this.setState({data:c,changed:JSON.stringify(c)!==JSON.stringify(this.state.originalData)})}catch{window.alert(j.I18n.t("[JsonConfig] Failed to parse JSON file"))}},u.readAsText(n)}else window.alert(j.I18n.t("[JsonConfig] Failed to open JSON File"))};getExportImportButtons(){return k.createElement("div",{style:Et.exportImportButtons},k.createElement(O.Tooltip,{title:this.props.t("Import settings from JSON file"),slotProps:{popper:{sx:Et.tooltip}}},k.createElement(O.Fab,{size:"small",sx:{"&.MuiFab-root":Et.button},onClick:()=>{const i=document.createElement("input");i.setAttribute("type","file"),i.setAttribute("id","files"),i.setAttribute("opacity",0),i.addEventListener("change",n=>this.handleFileSelect(n),!1),i.click()}},k.createElement(X.Publish,null))),k.createElement(O.Tooltip,{title:this.props.t("Export setting to JSON file"),slotProps:{popper:{sx:Et.tooltip}}},k.createElement(O.Fab,{size:"small",sx:{"&.MuiFab-root":Et.button},onClick:()=>{this.state.data&&j.Utils.generateFile(`${this.props.adapterName}.${this.props.instance}.json`,this.state.data)}},k.createElement(X.Publish,{style:{transform:"rotate(180deg)"}}))))}onFileChange=async(i,n,u)=>{var y;if(i===`${this.props.adapterName}.admin`&&u){if(n===this.fileLangSubscribed)try{await hn.loadI18n(this.props.socket,(y=this.state.schema)==null?void 0:y.i18n,this.props.adapterName),this.setState({hash:`${this.state.hash}1`})}catch{}else if(this.fileSubscribed.includes(n))try{const s=await this.getConfigFile(this.fileSubscribed[0]);this.setState({schema:s,hash:di(JSON.stringify(s)).toString()})}catch{}}};async getInstanceObject(){var i;try{const n=await this.props.socket.getObject(`system.adapter.${this.props.adapterName}.${this.props.instance}`);if(Array.isArray(n.encryptedNative)){if(!this.secret){const u=await this.props.socket.getSystemConfig();await Pi("../../lib/js/crypto-js/crypto-js.js","crypto-js"),this.secret=u.native.secret}return(i=n.encryptedNative)==null||i.forEach(u=>{n.native[u]&&(n.native[u]=Tl(this.secret,n.native[u]))}),n}return n}catch(n){window.alert(`[JsonConfig] Cannot read instance object: ${n}`)}return null}renderDialogConfirm(){return this.state.confirmDialog?k.createElement(j.DialogConfirm,{title:j.I18n.t("ra_Please confirm"),text:j.I18n.t("ra_Some data are not stored. Discard?"),ok:j.I18n.t("ra_Discard"),cancel:j.I18n.t("ra_Cancel"),onClose:i=>this.setState({confirmDialog:!1},()=>i&&j.Router.doNavigate(null))}):null}async scanForInclude(i,n){if(typeof i["#include"]=="string"){const y=await this._getConfigFile(i["#include"],[...n]);return delete i["#include"],y&&(i={...i,...y}),i}const u=Object.keys(i);for(let y=0;y<u.length;y++)i[u[y]]&&typeof i[u[y]]=="object"&&(i[u[y]]=await this.scanForInclude(i[u[y]],n));return i}async getConfigFile(i){return this._getConfigFile(i)}async _getConfigFile(i,n){if(i=i||"jsonConfig.json5",n=n||[],n.includes(i))return window.alert(`[JsonConfig] Circular reference in file: ${i} => ${n.join(" => ")}`),null;n.push(i);try{await this.props.socket.fileExists(`${this.props.adapterName}.admin`,i)||(i="jsonConfig.json");const y=await this.props.socket.readFile(`${this.props.adapterName}.admin`,i);let s="",c="";if(y.file!==void 0&&(c=y.file),typeof c=="string")s=c;else if(c.type==="Buffer"){let p="";const o=new Uint8Array(c.data),d=o.byteLength;for(let e=0;e<d;e++)p+=String.fromCharCode(o[e]);s=p}this.fileSubscribed.includes(i)||(this.fileSubscribed.push(i),await this.props.socket.subscribeFiles(`${this.props.adapterName}.admin`,i,this.onFileChange));try{return await this.scanForInclude(ji.parse(s),n)}catch(p){window.alert("[JsonConfig] Cannot parse json5 config!"),console.log(p)}}catch(u){this.state.schema||window.alert(`[JsonConfig] Cannot read file "${i}: ${u}`)}return null}renderSaveConfigDialog(){return this.state.saveConfigDialog?k.createElement(j.DialogConfirm,{title:j.I18n.t("ra_Please confirm"),text:j.I18n.t("Save configuration?"),ok:j.I18n.t("ra_Save"),cancel:j.I18n.t("ra_Cancel"),onClose:i=>this.setState({saveConfigDialog:!1},()=>i&&this.onSave(!0))}):null}findAttr(i,n){if(n=n||this.state.schema,n!=null&&n.items){if(i in n.items)return n.items[i];for(const u of Object.values(n.items)){const y=this.findAttr(i,u);if(y)return y}}return null}postProcessing(i,n,u){if(u=u||this.state.schema,!i){console.error(`Data is empty in postProcessing: ${n}, ${JSON.stringify(u)}`);return}const y=i[n];if(u.items)if(u.type==="table"){const s=y;if(!Array.isArray(s))return;for(const c of s)for(const p of u.items)this.postProcessing(c,p.attr,p)}else for(const[s,c]of Object.entries(u.items)){if(c.type==="panel"||c.type==="tabs"||c.type==="accordion")return;this.postProcessing(i,s,c)}else if(n&&typeof y=="string")if(u.type==="text")u.trim!==!1&&(i[n]=y.trim());else if(u.type==="ip")i[n]=y.trim();else if(u.type==="number"){const s=parseFloat(y.toString().replace(",","."));u.min!==void 0&&s<u.min?i[n]=u.min:u.max!==void 0&&s>u.max?i[n]=u.max:i[n]=s}else if(u.type==="port"){const s=parseInt(y.toString(),10);u.min!==void 0&&s<u.min?i[n]=u.min:u.max!==void 0&&s>u.max&&(i[n]=u.max),i[n]!==0&&s<20?i[n]=20:s>65535?i[n]=65535:i[n]=s}else u.type==="checkbox"&&(i[n]=i[n]===!0||i[n]==="true"||i[n]==="on"||i[n]===1||i[n]==="1")}async onSave(i,n){if(i){const u=await this.getInstanceObject();if(!u){console.error("Something went wrong: may be no connection?"),window.alert("Something went wrong: may be no connection?");return}if(!this.state.data||!this.state.schema)return;const y={};for(const c of Object.keys(this.state.data)){const p=this.findAttr(c);(!p||!p.doNotSave||p.type==="state")&&!c.startsWith("_")?G.setValue(u.native,c,this.state.data[c]):(G.setValue(u.native,c,null),y[c]=this.state.data[c])}try{const c=JSON.parse(JSON.stringify(u));if(Array.isArray(c.encryptedNative)){await Pi("../../lib/js/crypto-js/crypto-js.js","crypto-js");for(const p of c.encryptedNative)c.native[p]&&(c.native[p]=_l(this.secret,c.native[p]))}await this.props.socket.setObject(c._id,c)}catch(c){window.alert(`[JsonConfig] Cannot set object: ${c}`)}const s={...u.native,...y};console.log(s),this.setState({changed:!1,data:s,updateData:this.state.updateData+1,originalData:s},()=>n&&j.Router.doNavigate(null))}else this.state.changed?this.setState({confirmDialog:!0}):j.Router.doNavigate(null)}componentDidUpdate(i,n){n.changed!==this.state.changed&&this.props.configStored(!this.state.changed)}async componentDidMount(){const i=`${window.location.protocol}//${window.location.host}${window.location.pathname}validate_config/${this.props.adapterName}`;console.log(`fetch ${i}`),await fetch(i)}render(){return!this.state.data||!this.state.schema?k.createElement(O.LinearProgress,null):k.createElement("div",{style:Et.root},this.renderDialogConfirm(),this.getExportImportButtons(),this.renderSaveConfigDialog(),k.createElement(hn,{key:this.state.hash,style:Et.scroll,socket:this.props.socket,themeName:this.props.themeName,themeType:this.props.themeType,adapterName:this.props.adapterName,instance:this.props.instance,isFloatComma:this.props.isFloatComma,dateFormat:this.props.dateFormat,schema:this.state.schema,common:this.state.common,expertMode:this.props.expertMode,data:this.state.data,updateData:this.state.updateData,onError:i=>this.setState({error:i}),onChange:(i,n,u)=>{u&&this.state.error&&(window.alert(j.I18n.t("Cannot save configuration because of error in configuration")),u=!1),u&&!this.state.changed&&!n&&(u=!1),i?this.setState({data:i,changed:n,saveConfigDialog:u}):u!==void 0&&this.setState({saveConfigDialog:u})},DeviceManager:this.props.DeviceManager,theme:this.state.theme}),k.createElement(j.SaveCloseButtons,{isIFrame:!1,dense:!0,paddingLeft:0,newReact:!0,theme:this.state.theme,noTextOnButtons:this.props.width==="xs"||this.props.width==="sm"||this.props.width==="md",changed:!!(this.state.error||this.state.changed),error:!!this.state.error,onSave:i=>this.onSave(!0,i),onClose:()=>this.onSave(!1)}))}};export{G as ConfigGeneric,$t as ConfigPanel,kl as JsonConfig,hn as JsonConfigComponent};
